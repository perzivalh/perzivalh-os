(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Fu={exports:{}},Za={},Wu={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Or=Symbol.for("react.element"),Mp=Symbol.for("react.portal"),Ip=Symbol.for("react.fragment"),Bp=Symbol.for("react.strict_mode"),zp=Symbol.for("react.profiler"),$p=Symbol.for("react.provider"),Up=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),Wp=Symbol.for("react.memo"),Hp=Symbol.for("react.lazy"),pc=Symbol.iterator;function qp(e){return e===null||typeof e!="object"?null:(e=pc&&e[pc]||e["@@iterator"],typeof e=="function"?e:null)}var Hu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qu=Object.assign,Qu={};function Rs(e,t,n){this.props=e,this.context=t,this.refs=Qu,this.updater=n||Hu}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gu(){}Gu.prototype=Rs.prototype;function eo(e,t,n){this.props=e,this.context=t,this.refs=Qu,this.updater=n||Hu}var to=eo.prototype=new Gu;to.constructor=eo;qu(to,Rs.prototype);to.isPureReactComponent=!0;var mc=Array.isArray,Yu=Object.prototype.hasOwnProperty,no={current:null},Ku={key:!0,ref:!0,__self:!0,__source:!0};function Xu(e,t,n){var r,a={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Yu.call(t,r)&&!Ku.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),h=0;h<o;h++)c[h]=arguments[h+2];a.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Or,type:e,key:i,ref:l,props:a,_owner:no.current}}function Qp(e,t){return{$$typeof:Or,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function so(e){return typeof e=="object"&&e!==null&&e.$$typeof===Or}function Gp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var gc=/\/+/g;function ji(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Gp(""+e.key):t.toString(36)}function ha(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Or:case Mp:l=!0}}if(l)return l=e,a=a(l),e=r===""?"."+ji(l,0):r,mc(a)?(n="",e!=null&&(n=e.replace(gc,"$&/")+"/"),ha(a,t,n,"",function(h){return h})):a!=null&&(so(a)&&(a=Qp(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(gc,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=r===""?".":r+":",mc(e))for(var o=0;o<e.length;o++){i=e[o];var c=r+ji(i,o);l+=ha(i,t,n,c,a)}else if(c=qp(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=r+ji(i,o++),l+=ha(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function qr(e,t,n){if(e==null)return e;var r=[],a=0;return ha(e,r,"","",function(i){return t.call(n,i,a++)}),r}function Yp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},fa={transition:null},Kp={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:fa,ReactCurrentOwner:no};function Ju(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:qr,forEach:function(e,t,n){qr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qr(e,function(){t++}),t},toArray:function(e){return qr(e,function(t){return t})||[]},only:function(e){if(!so(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Rs;oe.Fragment=Ip;oe.Profiler=zp;oe.PureComponent=eo;oe.StrictMode=Bp;oe.Suspense=Fp;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kp;oe.act=Ju;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=qu({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=no.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Yu.call(t,c)&&!Ku.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var h=0;h<c;h++)o[h]=arguments[h+2];r.children=o}return{$$typeof:Or,type:e.type,key:a,ref:i,props:r,_owner:l}};oe.createContext=function(e){return e={$$typeof:Up,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$p,_context:e},e.Consumer=e};oe.createElement=Xu;oe.createFactory=function(e){var t=Xu.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:Vp,render:e}};oe.isValidElement=so;oe.lazy=function(e){return{$$typeof:Hp,_payload:{_status:-1,_result:e},_init:Yp}};oe.memo=function(e,t){return{$$typeof:Wp,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=fa.transition;fa.transition={};try{e()}finally{fa.transition=t}};oe.unstable_act=Ju;oe.useCallback=function(e,t){return ot.current.useCallback(e,t)};oe.useContext=function(e){return ot.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};oe.useEffect=function(e,t){return ot.current.useEffect(e,t)};oe.useId=function(){return ot.current.useId()};oe.useImperativeHandle=function(e,t,n){return ot.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return ot.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return ot.current.useReducer(e,t,n)};oe.useRef=function(e){return ot.current.useRef(e)};oe.useState=function(e){return ot.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return ot.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return ot.current.useTransition()};oe.version="18.3.1";Wu.exports=oe;var v=Wu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=v,Jp=Symbol.for("react.element"),Zp=Symbol.for("react.fragment"),em=Object.prototype.hasOwnProperty,tm=Xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nm={key:!0,ref:!0,__self:!0,__source:!0};function Zu(e,t,n){var r,a={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)em.call(t,r)&&!nm.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Jp,type:e,key:i,ref:l,props:a,_owner:tm.current}}Za.Fragment=Zp;Za.jsx=Zu;Za.jsxs=Zu;Fu.exports=Za;var s=Fu.exports,ed={exports:{}},_t={},td={exports:{}},nd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,W){var S=B.length;B.push(W);e:for(;0<S;){var H=S-1>>>1,G=B[H];if(0<a(G,W))B[H]=W,B[S]=G,S=H;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],S=B.pop();if(S!==W){B[0]=S;e:for(var H=0,G=B.length,Z=G>>>1;H<Z;){var T=2*(H+1)-1,X=B[T],Q=T+1,V=B[Q];if(0>a(X,S))Q<G&&0>a(V,X)?(B[H]=V,B[Q]=S,H=Q):(B[H]=X,B[T]=S,H=T);else if(Q<G&&0>a(V,S))B[H]=V,B[Q]=S,H=Q;else break e}}return W}function a(B,W){var S=B.sortIndex-W.sortIndex;return S!==0?S:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],h=[],x=1,p=null,y=3,L=!1,m=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(B){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=B)r(h),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(h)}}function k(B){if(b=!1,g(B),!m)if(n(c)!==null)m=!0,ne(P);else{var W=n(h);W!==null&&Ce(k,W.startTime-B)}}function P(B,W){m=!1,b&&(b=!1,u(C),C=-1),L=!0;var S=y;try{for(g(W),p=n(c);p!==null&&(!(p.expirationTime>W)||B&&!Y());){var H=p.callback;if(typeof H=="function"){p.callback=null,y=p.priorityLevel;var G=H(p.expirationTime<=W);W=e.unstable_now(),typeof G=="function"?p.callback=G:p===n(c)&&r(c),g(W)}else r(c);p=n(c)}if(p!==null)var Z=!0;else{var T=n(h);T!==null&&Ce(k,T.startTime-W),Z=!1}return Z}finally{p=null,y=S,L=!1}}var j=!1,O=null,C=-1,I=5,U=-1;function Y(){return!(e.unstable_now()-U<I)}function le(){if(O!==null){var B=e.unstable_now();U=B;var W=!0;try{W=O(!0,B)}finally{W?fe():(j=!1,O=null)}}else j=!1}var fe;if(typeof f=="function")fe=function(){f(le)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ke=xe.port2;xe.port1.onmessage=le,fe=function(){ke.postMessage(null)}}else fe=function(){w(le,0)};function ne(B){O=B,j||(j=!0,fe())}function Ce(B,W){C=w(function(){B(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){m||L||(m=!0,ne(P))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(B){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var S=y;y=W;try{return B()}finally{y=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var S=y;y=B;try{return W()}finally{y=S}},e.unstable_scheduleCallback=function(B,W,S){var H=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?H+S:H):S=H,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=S+G,B={id:x++,callback:W,priorityLevel:B,startTime:S,expirationTime:G,sortIndex:-1},S>H?(B.sortIndex=S,t(h,B),n(c)===null&&B===n(h)&&(b?(u(C),C=-1):b=!0,Ce(k,S-H))):(B.sortIndex=G,t(c,B),m||L||(m=!0,ne(P))),B},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(B){var W=y;return function(){var S=y;y=W;try{return B.apply(this,arguments)}finally{y=S}}}})(nd);td.exports=nd;var sm=td.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm=v,wt=sm;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sd=new Set,vr={};function es(e,t){Ss(e,t),Ss(e+"Capture",t)}function Ss(e,t){for(vr[e]=t,e=0;e<t.length;e++)sd.add(t[e])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),el=Object.prototype.hasOwnProperty,am=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vc={},yc={};function im(e){return el.call(yc,e)?!0:el.call(vc,e)?!1:am.test(e)?yc[e]=!0:(vc[e]=!0,!1)}function lm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function om(e,t,n,r){if(t===null||typeof t>"u"||lm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,n,r,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var ro=/[\-:]([a-z])/g;function ao(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ro,ao);Je[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ro,ao);Je[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ro,ao);Je[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function io(e,t,n,r){var a=Je.hasOwnProperty(t)?Je[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(om(t,n,a,r)&&(n=null),r||a===null?im(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var fn=rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qr=Symbol.for("react.element"),ls=Symbol.for("react.portal"),os=Symbol.for("react.fragment"),lo=Symbol.for("react.strict_mode"),tl=Symbol.for("react.profiler"),rd=Symbol.for("react.provider"),ad=Symbol.for("react.context"),oo=Symbol.for("react.forward_ref"),nl=Symbol.for("react.suspense"),sl=Symbol.for("react.suspense_list"),co=Symbol.for("react.memo"),yn=Symbol.for("react.lazy"),id=Symbol.for("react.offscreen"),xc=Symbol.iterator;function Gs(e){return e===null||typeof e!="object"?null:(e=xc&&e[xc]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,Ni;function sr(e){if(Ni===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ni=t&&t[1]||""}return`
`+Ni+e}var wi=!1;function _i(e,t){if(!e||wi)return"";wi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{wi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?sr(e):""}function cm(e){switch(e.tag){case 5:return sr(e.type);case 16:return sr("Lazy");case 13:return sr("Suspense");case 19:return sr("SuspenseList");case 0:case 2:case 15:return e=_i(e.type,!1),e;case 11:return e=_i(e.type.render,!1),e;case 1:return e=_i(e.type,!0),e;default:return""}}function rl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case os:return"Fragment";case ls:return"Portal";case tl:return"Profiler";case lo:return"StrictMode";case nl:return"Suspense";case sl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ad:return(e.displayName||"Context")+".Consumer";case rd:return(e._context.displayName||"Context")+".Provider";case oo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case co:return t=e.displayName||null,t!==null?t:rl(e.type)||"Memo";case yn:t=e._payload,e=e._init;try{return rl(e(t))}catch{}}return null}function um(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rl(t);case 8:return t===lo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ld(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dm(e){var t=ld(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gr(e){e._valueTracker||(e._valueTracker=dm(e))}function od(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ld(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ba(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function al(e,t){var n=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Pn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cd(e,t){t=t.checked,t!=null&&io(e,"checked",t,!1)}function il(e,t){cd(e,t);var n=Pn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ll(e,t.type,n):t.hasOwnProperty("defaultValue")&&ll(e,t.type,Pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ll(e,t,n){(t!=="number"||ba(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rr=Array.isArray;function xs(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Pn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ol(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(rr(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Pn(n)}}function ud(e,t){var n=Pn(t.value),r=Pn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _c(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yr,hd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yr=Yr||document.createElement("div"),Yr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hm=["Webkit","ms","Moz","O"];Object.keys(or).forEach(function(e){hm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});function fd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||or.hasOwnProperty(e)&&or[e]?(""+t).trim():t+"px"}function pd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=fd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var fm=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ul(e,t){if(t){if(fm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function dl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=null;function uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fl=null,js=null,Ns=null;function kc(e){if(e=Ir(e)){if(typeof fl!="function")throw Error(D(280));var t=e.stateNode;t&&(t=ri(t),fl(e.stateNode,e.type,t))}}function md(e){js?Ns?Ns.push(e):Ns=[e]:js=e}function gd(){if(js){var e=js,t=Ns;if(Ns=js=null,kc(e),t)for(e=0;e<t.length;e++)kc(t[e])}}function vd(e,t){return e(t)}function yd(){}var ki=!1;function xd(e,t,n){if(ki)return e(t,n);ki=!0;try{return vd(e,t,n)}finally{ki=!1,(js!==null||Ns!==null)&&(yd(),gd())}}function xr(e,t){var n=e.stateNode;if(n===null)return null;var r=ri(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var pl=!1;if(cn)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){pl=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{pl=!1}function pm(e,t,n,r,a,i,l,o,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(x){this.onError(x)}}var cr=!1,Ta=null,La=!1,ml=null,mm={onError:function(e){cr=!0,Ta=e}};function gm(e,t,n,r,a,i,l,o,c){cr=!1,Ta=null,pm.apply(mm,arguments)}function vm(e,t,n,r,a,i,l,o,c){if(gm.apply(this,arguments),cr){if(cr){var h=Ta;cr=!1,Ta=null}else throw Error(D(198));La||(La=!0,ml=h)}}function ts(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sc(e){if(ts(e)!==e)throw Error(D(188))}function ym(e){var t=e.alternate;if(!t){if(t=ts(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Sc(a),e;if(i===r)return Sc(a),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Nd(e){return e=ym(e),e!==null?wd(e):null}function wd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wd(e);if(t!==null)return t;e=e.sibling}return null}var _d=wt.unstable_scheduleCallback,Ec=wt.unstable_cancelCallback,xm=wt.unstable_shouldYield,jm=wt.unstable_requestPaint,Oe=wt.unstable_now,Nm=wt.unstable_getCurrentPriorityLevel,ho=wt.unstable_ImmediatePriority,kd=wt.unstable_UserBlockingPriority,Aa=wt.unstable_NormalPriority,wm=wt.unstable_LowPriority,Sd=wt.unstable_IdlePriority,ei=null,Gt=null;function _m(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ei,e,void 0,(e.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Em,km=Math.log,Sm=Math.LN2;function Em(e){return e>>>=0,e===0?32:31-(km(e)/Sm|0)|0}var Kr=64,Xr=4194304;function ar(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ra(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?r=ar(o):(i&=l,i!==0&&(r=ar(i)))}else l=n&~a,l!==0?r=ar(l):i!==0&&(r=ar(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Bt(t),a=1<<n,r|=e[n],t&=~a;return r}function Cm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Bt(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&r)&&(a[l]=Cm(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function gl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ed(){var e=Kr;return Kr<<=1,!(Kr&4194240)&&(Kr=64),e}function Si(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Dr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bt(t),e[t]=n}function Tm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Bt(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function fo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Bt(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ve=0;function Cd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bd,po,Td,Ld,Ad,vl=!1,Jr=[],kn=null,Sn=null,En=null,jr=new Map,Nr=new Map,jn=[],Lm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cc(e,t){switch(e){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":jr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nr.delete(t.pointerId)}}function Ks(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ir(t),t!==null&&po(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Am(e,t,n,r,a){switch(t){case"focusin":return kn=Ks(kn,e,t,n,r,a),!0;case"dragenter":return Sn=Ks(Sn,e,t,n,r,a),!0;case"mouseover":return En=Ks(En,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return jr.set(i,Ks(jr.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Nr.set(i,Ks(Nr.get(i)||null,e,t,n,r,a)),!0}return!1}function Rd(e){var t=Wn(e.target);if(t!==null){var n=ts(t);if(n!==null){if(t=n.tag,t===13){if(t=jd(n),t!==null){e.blockedOn=t,Ad(e.priority,function(){Td(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);hl=r,n.target.dispatchEvent(r),hl=null}else return t=Ir(n),t!==null&&po(t),e.blockedOn=n,!1;t.shift()}return!0}function bc(e,t,n){pa(e)&&n.delete(t)}function Rm(){vl=!1,kn!==null&&pa(kn)&&(kn=null),Sn!==null&&pa(Sn)&&(Sn=null),En!==null&&pa(En)&&(En=null),jr.forEach(bc),Nr.forEach(bc)}function Xs(e,t){e.blockedOn===t&&(e.blockedOn=null,vl||(vl=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,Rm)))}function wr(e){function t(a){return Xs(a,e)}if(0<Jr.length){Xs(Jr[0],e);for(var n=1;n<Jr.length;n++){var r=Jr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(kn!==null&&Xs(kn,e),Sn!==null&&Xs(Sn,e),En!==null&&Xs(En,e),jr.forEach(t),Nr.forEach(t),n=0;n<jn.length;n++)r=jn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<jn.length&&(n=jn[0],n.blockedOn===null);)Rd(n),n.blockedOn===null&&jn.shift()}var ws=fn.ReactCurrentBatchConfig,Pa=!0;function Pm(e,t,n,r){var a=ve,i=ws.transition;ws.transition=null;try{ve=1,mo(e,t,n,r)}finally{ve=a,ws.transition=i}}function Om(e,t,n,r){var a=ve,i=ws.transition;ws.transition=null;try{ve=4,mo(e,t,n,r)}finally{ve=a,ws.transition=i}}function mo(e,t,n,r){if(Pa){var a=yl(e,t,n,r);if(a===null)Di(e,t,r,Oa,n),Cc(e,r);else if(Am(a,e,t,n,r))r.stopPropagation();else if(Cc(e,r),t&4&&-1<Lm.indexOf(e)){for(;a!==null;){var i=Ir(a);if(i!==null&&bd(i),i=yl(e,t,n,r),i===null&&Di(e,t,r,Oa,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Di(e,t,r,null,n)}}var Oa=null;function yl(e,t,n,r){if(Oa=null,e=uo(r),e=Wn(e),e!==null)if(t=ts(e),t===null)e=null;else if(n=t.tag,n===13){if(e=jd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oa=e,null}function Pd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nm()){case ho:return 1;case kd:return 4;case Aa:case wm:return 16;case Sd:return 536870912;default:return 16}default:return 16}}var wn=null,go=null,ma=null;function Od(){if(ma)return ma;var e,t=go,n=t.length,r,a="value"in wn?wn.value:wn.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===a[i-r];r++);return ma=a.slice(e,1<r?1-r:void 0)}function ga(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zr(){return!0}function Tc(){return!1}function kt(e){function t(n,r,a,i,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zr:Tc,this.isPropagationStopped=Tc,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),t}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vo=kt(Ps),Mr=Re({},Ps,{view:0,detail:0}),Dm=kt(Mr),Ei,Ci,Js,ti=Re({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Js&&(Js&&e.type==="mousemove"?(Ei=e.screenX-Js.screenX,Ci=e.screenY-Js.screenY):Ci=Ei=0,Js=e),Ei)},movementY:function(e){return"movementY"in e?e.movementY:Ci}}),Lc=kt(ti),Mm=Re({},ti,{dataTransfer:0}),Im=kt(Mm),Bm=Re({},Mr,{relatedTarget:0}),bi=kt(Bm),zm=Re({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),$m=kt(zm),Um=Re({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vm=kt(Um),Fm=Re({},Ps,{data:0}),Ac=kt(Fm),Wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qm[e])?!!t[e]:!1}function yo(){return Qm}var Gm=Re({},Mr,{key:function(e){if(e.key){var t=Wm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(e){return e.type==="keypress"?ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ym=kt(Gm),Km=Re({},ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rc=kt(Km),Xm=Re({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Jm=kt(Xm),Zm=Re({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),eg=kt(Zm),tg=Re({},ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ng=kt(tg),sg=[9,13,27,32],xo=cn&&"CompositionEvent"in window,ur=null;cn&&"documentMode"in document&&(ur=document.documentMode);var rg=cn&&"TextEvent"in window&&!ur,Dd=cn&&(!xo||ur&&8<ur&&11>=ur),Pc=" ",Oc=!1;function Md(e,t){switch(e){case"keyup":return sg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cs=!1;function ag(e,t){switch(e){case"compositionend":return Id(t);case"keypress":return t.which!==32?null:(Oc=!0,Pc);case"textInput":return e=t.data,e===Pc&&Oc?null:e;default:return null}}function ig(e,t){if(cs)return e==="compositionend"||!xo&&Md(e,t)?(e=Od(),ma=go=wn=null,cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dd&&t.locale!=="ko"?null:t.data;default:return null}}var lg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lg[e.type]:t==="textarea"}function Bd(e,t,n,r){md(r),t=Da(t,"onChange"),0<t.length&&(n=new vo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var dr=null,_r=null;function og(e){Yd(e,0)}function ni(e){var t=hs(e);if(od(t))return e}function cg(e,t){if(e==="change")return t}var zd=!1;if(cn){var Ti;if(cn){var Li="oninput"in document;if(!Li){var Mc=document.createElement("div");Mc.setAttribute("oninput","return;"),Li=typeof Mc.oninput=="function"}Ti=Li}else Ti=!1;zd=Ti&&(!document.documentMode||9<document.documentMode)}function Ic(){dr&&(dr.detachEvent("onpropertychange",$d),_r=dr=null)}function $d(e){if(e.propertyName==="value"&&ni(_r)){var t=[];Bd(t,_r,e,uo(e)),xd(og,t)}}function ug(e,t,n){e==="focusin"?(Ic(),dr=t,_r=n,dr.attachEvent("onpropertychange",$d)):e==="focusout"&&Ic()}function dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ni(_r)}function hg(e,t){if(e==="click")return ni(t)}function fg(e,t){if(e==="input"||e==="change")return ni(t)}function pg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:pg;function kr(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!el.call(t,a)||!$t(e[a],t[a]))return!1}return!0}function Bc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zc(e,t){var n=Bc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bc(n)}}function Ud(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ud(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vd(){for(var e=window,t=ba();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ba(e.document)}return t}function jo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mg(e){var t=Vd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ud(n.ownerDocument.documentElement,n)){if(r!==null&&jo(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=zc(n,i);var l=zc(n,r);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gg=cn&&"documentMode"in document&&11>=document.documentMode,us=null,xl=null,hr=null,jl=!1;function $c(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jl||us==null||us!==ba(r)||(r=us,"selectionStart"in r&&jo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hr&&kr(hr,r)||(hr=r,r=Da(xl,"onSelect"),0<r.length&&(t=new vo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=us)))}function ea(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ds={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},Ai={},Fd={};cn&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function si(e){if(Ai[e])return Ai[e];if(!ds[e])return e;var t=ds[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fd)return Ai[e]=t[n];return e}var Wd=si("animationend"),Hd=si("animationiteration"),qd=si("animationstart"),Qd=si("transitionend"),Gd=new Map,Uc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){Gd.set(e,t),es(t,[e])}for(var Ri=0;Ri<Uc.length;Ri++){var Pi=Uc[Ri],vg=Pi.toLowerCase(),yg=Pi[0].toUpperCase()+Pi.slice(1);Dn(vg,"on"+yg)}Dn(Wd,"onAnimationEnd");Dn(Hd,"onAnimationIteration");Dn(qd,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(Qd,"onTransitionEnd");Ss("onMouseEnter",["mouseout","mouseover"]);Ss("onMouseLeave",["mouseout","mouseover"]);Ss("onPointerEnter",["pointerout","pointerover"]);Ss("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ir));function Vc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,vm(r,t,void 0,e),e.currentTarget=null}function Yd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Vc(a,o,h),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,h=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Vc(a,o,h),i=c}}}if(La)throw e=ml,La=!1,ml=null,e}function Se(e,t){var n=t[Sl];n===void 0&&(n=t[Sl]=new Set);var r=e+"__bubble";n.has(r)||(Kd(t,e,2,!1),n.add(r))}function Oi(e,t,n){var r=0;t&&(r|=4),Kd(n,e,r,t)}var ta="_reactListening"+Math.random().toString(36).slice(2);function Sr(e){if(!e[ta]){e[ta]=!0,sd.forEach(function(n){n!=="selectionchange"&&(xg.has(n)||Oi(n,!1,e),Oi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ta]||(t[ta]=!0,Oi("selectionchange",!1,t))}}function Kd(e,t,n,r){switch(Pd(t)){case 1:var a=Pm;break;case 4:a=Om;break;default:a=mo}n=a.bind(null,t,n,e),a=void 0,!pl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Di(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Wn(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}xd(function(){var h=i,x=uo(n),p=[];e:{var y=Gd.get(e);if(y!==void 0){var L=vo,m=e;switch(e){case"keypress":if(ga(n)===0)break e;case"keydown":case"keyup":L=Ym;break;case"focusin":m="focus",L=bi;break;case"focusout":m="blur",L=bi;break;case"beforeblur":case"afterblur":L=bi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Im;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Jm;break;case Wd:case Hd:case qd:L=$m;break;case Qd:L=eg;break;case"scroll":L=Dm;break;case"wheel":L=ng;break;case"copy":case"cut":case"paste":L=Vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Rc}var b=(t&4)!==0,w=!b&&e==="scroll",u=b?y!==null?y+"Capture":null:y;b=[];for(var f=h,g;f!==null;){g=f;var k=g.stateNode;if(g.tag===5&&k!==null&&(g=k,u!==null&&(k=xr(f,u),k!=null&&b.push(Er(f,k,g)))),w)break;f=f.return}0<b.length&&(y=new L(y,m,null,n,x),p.push({event:y,listeners:b}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",y&&n!==hl&&(m=n.relatedTarget||n.fromElement)&&(Wn(m)||m[un]))break e;if((L||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,L?(m=n.relatedTarget||n.toElement,L=h,m=m?Wn(m):null,m!==null&&(w=ts(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(L=null,m=h),L!==m)){if(b=Lc,k="onMouseLeave",u="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(b=Rc,k="onPointerLeave",u="onPointerEnter",f="pointer"),w=L==null?y:hs(L),g=m==null?y:hs(m),y=new b(k,f+"leave",L,n,x),y.target=w,y.relatedTarget=g,k=null,Wn(x)===h&&(b=new b(u,f+"enter",m,n,x),b.target=g,b.relatedTarget=w,k=b),w=k,L&&m)t:{for(b=L,u=m,f=0,g=b;g;g=as(g))f++;for(g=0,k=u;k;k=as(k))g++;for(;0<f-g;)b=as(b),f--;for(;0<g-f;)u=as(u),g--;for(;f--;){if(b===u||u!==null&&b===u.alternate)break t;b=as(b),u=as(u)}b=null}else b=null;L!==null&&Fc(p,y,L,b,!1),m!==null&&w!==null&&Fc(p,w,m,b,!0)}}e:{if(y=h?hs(h):window,L=y.nodeName&&y.nodeName.toLowerCase(),L==="select"||L==="input"&&y.type==="file")var P=cg;else if(Dc(y))if(zd)P=fg;else{P=dg;var j=ug}else(L=y.nodeName)&&L.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(P=hg);if(P&&(P=P(e,h))){Bd(p,P,n,x);break e}j&&j(e,y,h),e==="focusout"&&(j=y._wrapperState)&&j.controlled&&y.type==="number"&&ll(y,"number",y.value)}switch(j=h?hs(h):window,e){case"focusin":(Dc(j)||j.contentEditable==="true")&&(us=j,xl=h,hr=null);break;case"focusout":hr=xl=us=null;break;case"mousedown":jl=!0;break;case"contextmenu":case"mouseup":case"dragend":jl=!1,$c(p,n,x);break;case"selectionchange":if(gg)break;case"keydown":case"keyup":$c(p,n,x)}var O;if(xo)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else cs?Md(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Dd&&n.locale!=="ko"&&(cs||C!=="onCompositionStart"?C==="onCompositionEnd"&&cs&&(O=Od()):(wn=x,go="value"in wn?wn.value:wn.textContent,cs=!0)),j=Da(h,C),0<j.length&&(C=new Ac(C,e,null,n,x),p.push({event:C,listeners:j}),O?C.data=O:(O=Id(n),O!==null&&(C.data=O)))),(O=rg?ag(e,n):ig(e,n))&&(h=Da(h,"onBeforeInput"),0<h.length&&(x=new Ac("onBeforeInput","beforeinput",null,n,x),p.push({event:x,listeners:h}),x.data=O))}Yd(p,t)})}function Er(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Da(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=xr(e,n),i!=null&&r.unshift(Er(e,i,a)),i=xr(e,t),i!=null&&r.push(Er(e,i,a))),e=e.return}return r}function as(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fc(e,t,n,r,a){for(var i=t._reactName,l=[];n!==null&&n!==r;){var o=n,c=o.alternate,h=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&h!==null&&(o=h,a?(c=xr(n,i),c!=null&&l.unshift(Er(n,c,o))):a||(c=xr(n,i),c!=null&&l.push(Er(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var jg=/\r\n?/g,Ng=/\u0000|\uFFFD/g;function Wc(e){return(typeof e=="string"?e:""+e).replace(jg,`
`).replace(Ng,"")}function na(e,t,n){if(t=Wc(t),Wc(e)!==t&&n)throw Error(D(425))}function Ma(){}var Nl=null,wl=null;function _l(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kl=typeof setTimeout=="function"?setTimeout:void 0,wg=typeof clearTimeout=="function"?clearTimeout:void 0,Hc=typeof Promise=="function"?Promise:void 0,_g=typeof queueMicrotask=="function"?queueMicrotask:typeof Hc<"u"?function(e){return Hc.resolve(null).then(e).catch(kg)}:kl;function kg(e){setTimeout(function(){throw e})}function Mi(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),wr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);wr(t)}function Cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Os=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Os,Cr="__reactProps$"+Os,un="__reactContainer$"+Os,Sl="__reactEvents$"+Os,Sg="__reactListeners$"+Os,Eg="__reactHandles$"+Os;function Wn(e){var t=e[Qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[un]||n[Qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qc(e);e!==null;){if(n=e[Qt])return n;e=qc(e)}return t}e=n,n=e.parentNode}return null}function Ir(e){return e=e[Qt]||e[un],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function ri(e){return e[Cr]||null}var El=[],fs=-1;function Mn(e){return{current:e}}function Ee(e){0>fs||(e.current=El[fs],El[fs]=null,fs--)}function _e(e,t){fs++,El[fs]=e.current,e.current=t}var On={},st=Mn(On),mt=Mn(!1),Yn=On;function Es(e,t){var n=e.type.contextTypes;if(!n)return On;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gt(e){return e=e.childContextTypes,e!=null}function Ia(){Ee(mt),Ee(st)}function Qc(e,t,n){if(st.current!==On)throw Error(D(168));_e(st,t),_e(mt,n)}function Xd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(D(108,um(e)||"Unknown",a));return Re({},n,r)}function Ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||On,Yn=st.current,_e(st,e),_e(mt,mt.current),!0}function Gc(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Xd(e,t,Yn),r.__reactInternalMemoizedMergedChildContext=e,Ee(mt),Ee(st),_e(st,e)):Ee(mt),_e(mt,n)}var sn=null,ai=!1,Ii=!1;function Jd(e){sn===null?sn=[e]:sn.push(e)}function Cg(e){ai=!0,Jd(e)}function In(){if(!Ii&&sn!==null){Ii=!0;var e=0,t=ve;try{var n=sn;for(ve=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}sn=null,ai=!1}catch(a){throw sn!==null&&(sn=sn.slice(e+1)),_d(ho,In),a}finally{ve=t,Ii=!1}}return null}var ps=[],ms=0,za=null,$a=0,Et=[],Ct=0,Kn=null,an=1,ln="";function Un(e,t){ps[ms++]=$a,ps[ms++]=za,za=e,$a=t}function Zd(e,t,n){Et[Ct++]=an,Et[Ct++]=ln,Et[Ct++]=Kn,Kn=e;var r=an;e=ln;var a=32-Bt(r)-1;r&=~(1<<a),n+=1;var i=32-Bt(t)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,an=1<<32-Bt(t)+a|n<<a|r,ln=i+e}else an=1<<i|n<<a|r,ln=e}function No(e){e.return!==null&&(Un(e,1),Zd(e,1,0))}function wo(e){for(;e===za;)za=ps[--ms],ps[ms]=null,$a=ps[--ms],ps[ms]=null;for(;e===Kn;)Kn=Et[--Ct],Et[Ct]=null,ln=Et[--Ct],Et[Ct]=null,an=Et[--Ct],Et[Ct]=null}var Nt=null,jt=null,be=!1,It=null;function eh(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nt=e,jt=Cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nt=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kn!==null?{id:an,overflow:ln}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nt=e,jt=null,!0):!1;default:return!1}}function Cl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bl(e){if(be){var t=jt;if(t){var n=t;if(!Yc(e,t)){if(Cl(e))throw Error(D(418));t=Cn(n.nextSibling);var r=Nt;t&&Yc(e,t)?eh(r,n):(e.flags=e.flags&-4097|2,be=!1,Nt=e)}}else{if(Cl(e))throw Error(D(418));e.flags=e.flags&-4097|2,be=!1,Nt=e}}}function Kc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function sa(e){if(e!==Nt)return!1;if(!be)return Kc(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_l(e.type,e.memoizedProps)),t&&(t=jt)){if(Cl(e))throw th(),Error(D(418));for(;t;)eh(e,t),t=Cn(t.nextSibling)}if(Kc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){jt=Cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=Nt?Cn(e.stateNode.nextSibling):null;return!0}function th(){for(var e=jt;e;)e=Cn(e.nextSibling)}function Cs(){jt=Nt=null,be=!1}function _o(e){It===null?It=[e]:It.push(e)}var bg=fn.ReactCurrentBatchConfig;function Zs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function ra(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xc(e){var t=e._init;return t(e._payload)}function nh(e){function t(u,f){if(e){var g=u.deletions;g===null?(u.deletions=[f],u.flags|=16):g.push(f)}}function n(u,f){if(!e)return null;for(;f!==null;)t(u,f),f=f.sibling;return null}function r(u,f){for(u=new Map;f!==null;)f.key!==null?u.set(f.key,f):u.set(f.index,f),f=f.sibling;return u}function a(u,f){return u=An(u,f),u.index=0,u.sibling=null,u}function i(u,f,g){return u.index=g,e?(g=u.alternate,g!==null?(g=g.index,g<f?(u.flags|=2,f):g):(u.flags|=2,f)):(u.flags|=1048576,f)}function l(u){return e&&u.alternate===null&&(u.flags|=2),u}function o(u,f,g,k){return f===null||f.tag!==6?(f=Wi(g,u.mode,k),f.return=u,f):(f=a(f,g),f.return=u,f)}function c(u,f,g,k){var P=g.type;return P===os?x(u,f,g.props.children,k,g.key):f!==null&&(f.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===yn&&Xc(P)===f.type)?(k=a(f,g.props),k.ref=Zs(u,f,g),k.return=u,k):(k=_a(g.type,g.key,g.props,null,u.mode,k),k.ref=Zs(u,f,g),k.return=u,k)}function h(u,f,g,k){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Hi(g,u.mode,k),f.return=u,f):(f=a(f,g.children||[]),f.return=u,f)}function x(u,f,g,k,P){return f===null||f.tag!==7?(f=Gn(g,u.mode,k,P),f.return=u,f):(f=a(f,g),f.return=u,f)}function p(u,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Wi(""+f,u.mode,g),f.return=u,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Qr:return g=_a(f.type,f.key,f.props,null,u.mode,g),g.ref=Zs(u,null,f),g.return=u,g;case ls:return f=Hi(f,u.mode,g),f.return=u,f;case yn:var k=f._init;return p(u,k(f._payload),g)}if(rr(f)||Gs(f))return f=Gn(f,u.mode,g,null),f.return=u,f;ra(u,f)}return null}function y(u,f,g,k){var P=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return P!==null?null:o(u,f,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Qr:return g.key===P?c(u,f,g,k):null;case ls:return g.key===P?h(u,f,g,k):null;case yn:return P=g._init,y(u,f,P(g._payload),k)}if(rr(g)||Gs(g))return P!==null?null:x(u,f,g,k,null);ra(u,g)}return null}function L(u,f,g,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return u=u.get(g)||null,o(f,u,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Qr:return u=u.get(k.key===null?g:k.key)||null,c(f,u,k,P);case ls:return u=u.get(k.key===null?g:k.key)||null,h(f,u,k,P);case yn:var j=k._init;return L(u,f,g,j(k._payload),P)}if(rr(k)||Gs(k))return u=u.get(g)||null,x(f,u,k,P,null);ra(f,k)}return null}function m(u,f,g,k){for(var P=null,j=null,O=f,C=f=0,I=null;O!==null&&C<g.length;C++){O.index>C?(I=O,O=null):I=O.sibling;var U=y(u,O,g[C],k);if(U===null){O===null&&(O=I);break}e&&O&&U.alternate===null&&t(u,O),f=i(U,f,C),j===null?P=U:j.sibling=U,j=U,O=I}if(C===g.length)return n(u,O),be&&Un(u,C),P;if(O===null){for(;C<g.length;C++)O=p(u,g[C],k),O!==null&&(f=i(O,f,C),j===null?P=O:j.sibling=O,j=O);return be&&Un(u,C),P}for(O=r(u,O);C<g.length;C++)I=L(O,u,C,g[C],k),I!==null&&(e&&I.alternate!==null&&O.delete(I.key===null?C:I.key),f=i(I,f,C),j===null?P=I:j.sibling=I,j=I);return e&&O.forEach(function(Y){return t(u,Y)}),be&&Un(u,C),P}function b(u,f,g,k){var P=Gs(g);if(typeof P!="function")throw Error(D(150));if(g=P.call(g),g==null)throw Error(D(151));for(var j=P=null,O=f,C=f=0,I=null,U=g.next();O!==null&&!U.done;C++,U=g.next()){O.index>C?(I=O,O=null):I=O.sibling;var Y=y(u,O,U.value,k);if(Y===null){O===null&&(O=I);break}e&&O&&Y.alternate===null&&t(u,O),f=i(Y,f,C),j===null?P=Y:j.sibling=Y,j=Y,O=I}if(U.done)return n(u,O),be&&Un(u,C),P;if(O===null){for(;!U.done;C++,U=g.next())U=p(u,U.value,k),U!==null&&(f=i(U,f,C),j===null?P=U:j.sibling=U,j=U);return be&&Un(u,C),P}for(O=r(u,O);!U.done;C++,U=g.next())U=L(O,u,C,U.value,k),U!==null&&(e&&U.alternate!==null&&O.delete(U.key===null?C:U.key),f=i(U,f,C),j===null?P=U:j.sibling=U,j=U);return e&&O.forEach(function(le){return t(u,le)}),be&&Un(u,C),P}function w(u,f,g,k){if(typeof g=="object"&&g!==null&&g.type===os&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Qr:e:{for(var P=g.key,j=f;j!==null;){if(j.key===P){if(P=g.type,P===os){if(j.tag===7){n(u,j.sibling),f=a(j,g.props.children),f.return=u,u=f;break e}}else if(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===yn&&Xc(P)===j.type){n(u,j.sibling),f=a(j,g.props),f.ref=Zs(u,j,g),f.return=u,u=f;break e}n(u,j);break}else t(u,j);j=j.sibling}g.type===os?(f=Gn(g.props.children,u.mode,k,g.key),f.return=u,u=f):(k=_a(g.type,g.key,g.props,null,u.mode,k),k.ref=Zs(u,f,g),k.return=u,u=k)}return l(u);case ls:e:{for(j=g.key;f!==null;){if(f.key===j)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(u,f.sibling),f=a(f,g.children||[]),f.return=u,u=f;break e}else{n(u,f);break}else t(u,f);f=f.sibling}f=Hi(g,u.mode,k),f.return=u,u=f}return l(u);case yn:return j=g._init,w(u,f,j(g._payload),k)}if(rr(g))return m(u,f,g,k);if(Gs(g))return b(u,f,g,k);ra(u,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(u,f.sibling),f=a(f,g),f.return=u,u=f):(n(u,f),f=Wi(g,u.mode,k),f.return=u,u=f),l(u)):n(u,f)}return w}var bs=nh(!0),sh=nh(!1),Ua=Mn(null),Va=null,gs=null,ko=null;function So(){ko=gs=Va=null}function Eo(e){var t=Ua.current;Ee(Ua),e._currentValue=t}function Tl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _s(e,t){Va=e,ko=gs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pt=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},gs===null){if(Va===null)throw Error(D(308));gs=e,Va.dependencies={lanes:0,firstContext:e}}else gs=gs.next=e;return t}var Hn=null;function Co(e){Hn===null?Hn=[e]:Hn.push(e)}function rh(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Co(t)):(n.next=a.next,a.next=n),t.interleaved=n,dn(e,r)}function dn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xn=!1;function bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ah(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,dn(e,n)}return a=r.interleaved,a===null?(t.next=t,Co(r)):(t.next=a.next,a.next=t),r.interleaved=t,dn(e,n)}function va(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fo(e,n)}}function Jc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var a=e.updateQueue;xn=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,h=c.next;c.next=null,l===null?i=h:l.next=h,l=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==l&&(o===null?x.firstBaseUpdate=h:o.next=h,x.lastBaseUpdate=c))}if(i!==null){var p=a.baseState;l=0,x=h=c=null,o=i;do{var y=o.lane,L=o.eventTime;if((r&y)===y){x!==null&&(x=x.next={eventTime:L,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,b=o;switch(y=t,L=n,b.tag){case 1:if(m=b.payload,typeof m=="function"){p=m.call(L,p,y);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=b.payload,y=typeof m=="function"?m.call(L,p,y):m,y==null)break e;p=Re({},p,y);break e;case 2:xn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[o]:y.push(o))}else L={eventTime:L,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(h=x=L,c=p):x=x.next=L,l|=y;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;y=o,o=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(x===null&&(c=p),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Jn|=l,e.lanes=l,e.memoizedState=p}}function Zc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(D(191,a));a.call(r)}}}var Br={},Yt=Mn(Br),br=Mn(Br),Tr=Mn(Br);function qn(e){if(e===Br)throw Error(D(174));return e}function To(e,t){switch(_e(Tr,t),_e(br,e),_e(Yt,Br),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cl(t,e)}Ee(Yt),_e(Yt,t)}function Ts(){Ee(Yt),Ee(br),Ee(Tr)}function ih(e){qn(Tr.current);var t=qn(Yt.current),n=cl(t,e.type);t!==n&&(_e(br,e),_e(Yt,n))}function Lo(e){br.current===e&&(Ee(Yt),Ee(br))}var Le=Mn(0);function Wa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=[];function Ao(){for(var e=0;e<Bi.length;e++)Bi[e]._workInProgressVersionPrimary=null;Bi.length=0}var ya=fn.ReactCurrentDispatcher,zi=fn.ReactCurrentBatchConfig,Xn=0,Ae=null,$e=null,Ge=null,Ha=!1,fr=!1,Lr=0,Tg=0;function et(){throw Error(D(321))}function Ro(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$t(e[n],t[n]))return!1;return!0}function Po(e,t,n,r,a,i){if(Xn=i,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ya.current=e===null||e.memoizedState===null?Pg:Og,e=n(r,a),fr){i=0;do{if(fr=!1,Lr=0,25<=i)throw Error(D(301));i+=1,Ge=$e=null,t.updateQueue=null,ya.current=Dg,e=n(r,a)}while(fr)}if(ya.current=qa,t=$e!==null&&$e.next!==null,Xn=0,Ge=$e=Ae=null,Ha=!1,t)throw Error(D(300));return e}function Oo(){var e=Lr!==0;return Lr=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ae.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Rt(){if($e===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Ge===null?Ae.memoizedState:Ge.next;if(t!==null)Ge=t,$e=e;else{if(e===null)throw Error(D(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ge===null?Ae.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function Ar(e,t){return typeof t=="function"?t(e):t}function $i(e){var t=Rt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=$e,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=l=null,c=null,h=i;do{var x=h.lane;if((Xn&x)===x)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var p={lane:x,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(o=c=p,l=r):c=c.next=p,Ae.lanes|=x,Jn|=x}h=h.next}while(h!==null&&h!==i);c===null?l=r:c.next=o,$t(r,t.memoizedState)||(pt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Ae.lanes|=i,Jn|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ui(e){var t=Rt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);$t(i,t.memoizedState)||(pt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function lh(){}function oh(e,t){var n=Ae,r=Rt(),a=t(),i=!$t(r.memoizedState,a);if(i&&(r.memoizedState=a,pt=!0),r=r.queue,Do(dh.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Rr(9,uh.bind(null,n,r,a,t),void 0,null),Ye===null)throw Error(D(349));Xn&30||ch(n,t,a)}return a}function ch(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uh(e,t,n,r){t.value=n,t.getSnapshot=r,hh(t)&&fh(e)}function dh(e,t,n){return n(function(){hh(t)&&fh(e)})}function hh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$t(e,n)}catch{return!0}}function fh(e){var t=dn(e,1);t!==null&&zt(t,e,1,-1)}function eu(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:e},t.queue=e,e=e.dispatch=Rg.bind(null,Ae,e),[t.memoizedState,e]}function Rr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ph(){return Rt().memoizedState}function xa(e,t,n,r){var a=qt();Ae.flags|=e,a.memoizedState=Rr(1|t,n,void 0,r===void 0?null:r)}function ii(e,t,n,r){var a=Rt();r=r===void 0?null:r;var i=void 0;if($e!==null){var l=$e.memoizedState;if(i=l.destroy,r!==null&&Ro(r,l.deps)){a.memoizedState=Rr(t,n,i,r);return}}Ae.flags|=e,a.memoizedState=Rr(1|t,n,i,r)}function tu(e,t){return xa(8390656,8,e,t)}function Do(e,t){return ii(2048,8,e,t)}function mh(e,t){return ii(4,2,e,t)}function gh(e,t){return ii(4,4,e,t)}function vh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yh(e,t,n){return n=n!=null?n.concat([e]):null,ii(4,4,vh.bind(null,t,e),n)}function Mo(){}function xh(e,t){var n=Rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ro(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jh(e,t){var n=Rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ro(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Nh(e,t,n){return Xn&21?($t(n,t)||(n=Ed(),Ae.lanes|=n,Jn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pt=!0),e.memoizedState=n)}function Lg(e,t){var n=ve;ve=n!==0&&4>n?n:4,e(!0);var r=zi.transition;zi.transition={};try{e(!1),t()}finally{ve=n,zi.transition=r}}function wh(){return Rt().memoizedState}function Ag(e,t,n){var r=Ln(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_h(e))kh(t,n);else if(n=rh(e,t,n,r),n!==null){var a=lt();zt(n,e,r,a),Sh(n,t,r)}}function Rg(e,t,n){var r=Ln(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_h(e))kh(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,$t(o,l)){var c=t.interleaved;c===null?(a.next=a,Co(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=rh(e,t,a,r),n!==null&&(a=lt(),zt(n,e,r,a),Sh(n,t,r))}}function _h(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function kh(e,t){fr=Ha=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Sh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fo(e,n)}}var qa={readContext:At,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Pg={readContext:At,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:tu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xa(4194308,4,vh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xa(4194308,4,e,t)},useInsertionEffect:function(e,t){return xa(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ag.bind(null,Ae,e),[r.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:eu,useDebugValue:Mo,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=eu(!1),t=e[0];return e=Lg.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ae,a=qt();if(be){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ye===null)throw Error(D(349));Xn&30||ch(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,tu(dh.bind(null,r,i,e),[e]),r.flags|=2048,Rr(9,uh.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=qt(),t=Ye.identifierPrefix;if(be){var n=ln,r=an;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Lr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Tg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Og={readContext:At,useCallback:xh,useContext:At,useEffect:Do,useImperativeHandle:yh,useInsertionEffect:mh,useLayoutEffect:gh,useMemo:jh,useReducer:$i,useRef:ph,useState:function(){return $i(Ar)},useDebugValue:Mo,useDeferredValue:function(e){var t=Rt();return Nh(t,$e.memoizedState,e)},useTransition:function(){var e=$i(Ar)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:lh,useSyncExternalStore:oh,useId:wh,unstable_isNewReconciler:!1},Dg={readContext:At,useCallback:xh,useContext:At,useEffect:Do,useImperativeHandle:yh,useInsertionEffect:mh,useLayoutEffect:gh,useMemo:jh,useReducer:Ui,useRef:ph,useState:function(){return Ui(Ar)},useDebugValue:Mo,useDeferredValue:function(e){var t=Rt();return $e===null?t.memoizedState=e:Nh(t,$e.memoizedState,e)},useTransition:function(){var e=Ui(Ar)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:lh,useSyncExternalStore:oh,useId:wh,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ll(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Re({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var li={isMounted:function(e){return(e=e._reactInternals)?ts(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=lt(),a=Ln(e),i=on(r,a);i.payload=t,n!=null&&(i.callback=n),t=bn(e,i,a),t!==null&&(zt(t,e,a,r),va(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=lt(),a=Ln(e),i=on(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=bn(e,i,a),t!==null&&(zt(t,e,a,r),va(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lt(),r=Ln(e),a=on(n,r);a.tag=2,t!=null&&(a.callback=t),t=bn(e,a,r),t!==null&&(zt(t,e,r,n),va(t,e,r))}};function nu(e,t,n,r,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!kr(n,r)||!kr(a,i):!0}function Eh(e,t,n){var r=!1,a=On,i=t.contextType;return typeof i=="object"&&i!==null?i=At(i):(a=gt(t)?Yn:st.current,r=t.contextTypes,i=(r=r!=null)?Es(e,a):On),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=li,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function su(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&li.enqueueReplaceState(t,t.state,null)}function Al(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},bo(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=At(i):(i=gt(t)?Yn:st.current,a.context=Es(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ll(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&li.enqueueReplaceState(a,a.state,null),Fa(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ls(e,t){try{var n="",r=t;do n+=cm(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Vi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Mg=typeof WeakMap=="function"?WeakMap:Map;function Ch(e,t,n){n=on(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ga||(Ga=!0,Vl=r),Rl(e,t)},n}function bh(e,t,n){n=on(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Rl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rl(e,t),typeof r!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function ru(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Mg;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Kg.bind(null,e,t,n),t.then(e,e))}function au(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iu(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=on(-1,1),t.tag=2,bn(n,t,1))),n.lanes|=1),e)}var Ig=fn.ReactCurrentOwner,pt=!1;function it(e,t,n,r){t.child=e===null?sh(t,null,n,r):bs(t,e.child,n,r)}function lu(e,t,n,r,a){n=n.render;var i=t.ref;return _s(t,a),r=Po(e,t,n,r,i,a),n=Oo(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,hn(e,t,a)):(be&&n&&No(t),t.flags|=1,it(e,t,r,a),t.child)}function ou(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!Wo(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Th(e,t,i,r,a)):(e=_a(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:kr,n(l,r)&&e.ref===t.ref)return hn(e,t,a)}return t.flags|=1,e=An(i,r),e.ref=t.ref,e.return=t,t.child=e}function Th(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(kr(i,r)&&e.ref===t.ref)if(pt=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(pt=!0);else return t.lanes=e.lanes,hn(e,t,a)}return Pl(e,t,n,r,a)}function Lh(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(ys,xt),xt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(ys,xt),xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(ys,xt),xt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,_e(ys,xt),xt|=r;return it(e,t,a,n),t.child}function Ah(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pl(e,t,n,r,a){var i=gt(n)?Yn:st.current;return i=Es(t,i),_s(t,a),n=Po(e,t,n,r,i,a),r=Oo(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,hn(e,t,a)):(be&&r&&No(t),t.flags|=1,it(e,t,n,a),t.child)}function cu(e,t,n,r,a){if(gt(n)){var i=!0;Ba(t)}else i=!1;if(_s(t,a),t.stateNode===null)ja(e,t),Eh(t,n,r),Al(t,n,r,a),r=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=At(h):(h=gt(n)?Yn:st.current,h=Es(t,h));var x=n.getDerivedStateFromProps,p=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==h)&&su(t,l,r,h),xn=!1;var y=t.memoizedState;l.state=y,Fa(t,r,l,a),c=t.memoizedState,o!==r||y!==c||mt.current||xn?(typeof x=="function"&&(Ll(t,n,x,r),c=t.memoizedState),(o=xn||nu(t,n,o,r,y,c,h))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=h,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,ah(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Ot(t.type,o),l.props=h,p=t.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=At(c):(c=gt(n)?Yn:st.current,c=Es(t,c));var L=n.getDerivedStateFromProps;(x=typeof L=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||y!==c)&&su(t,l,r,c),xn=!1,y=t.memoizedState,l.state=y,Fa(t,r,l,a);var m=t.memoizedState;o!==p||y!==m||mt.current||xn?(typeof L=="function"&&(Ll(t,n,L,r),m=t.memoizedState),(h=xn||nu(t,n,h,r,y,m,c)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),l.props=r,l.state=m,l.context=c,r=h):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Ol(e,t,n,r,i,a)}function Ol(e,t,n,r,a,i){Ah(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return a&&Gc(t,n,!1),hn(e,t,i);r=t.stateNode,Ig.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=bs(t,e.child,null,i),t.child=bs(t,null,o,i)):it(e,t,o,i),t.memoizedState=r.state,a&&Gc(t,n,!0),t.child}function Rh(e){var t=e.stateNode;t.pendingContext?Qc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qc(e,t.context,!1),To(e,t.containerInfo)}function uu(e,t,n,r,a){return Cs(),_o(a),t.flags|=256,it(e,t,n,r),t.child}var Dl={dehydrated:null,treeContext:null,retryLane:0};function Ml(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ph(e,t,n){var r=t.pendingProps,a=Le.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),_e(Le,a&1),e===null)return bl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=ui(l,r,0,null),e=Gn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ml(n),t.memoizedState=Dl,e):Io(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Bg(e,t,l,r,o,a,n);if(i){i=r.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=An(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=An(o,i):(i=Gn(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?Ml(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Dl,r}return i=e.child,e=i.sibling,r=An(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Io(e,t){return t=ui({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function aa(e,t,n,r){return r!==null&&_o(r),bs(t,e.child,null,n),e=Io(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bg(e,t,n,r,a,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Vi(Error(D(422))),aa(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=ui({mode:"visible",children:r.children},a,0,null),i=Gn(i,a,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&bs(t,e.child,null,l),t.child.memoizedState=Ml(l),t.memoizedState=Dl,i);if(!(t.mode&1))return aa(e,t,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(D(419)),r=Vi(i,r,void 0),aa(e,t,l,r)}if(o=(l&e.childLanes)!==0,pt||o){if(r=Ye,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,dn(e,a),zt(r,e,a,-1))}return Fo(),r=Vi(Error(D(421))),aa(e,t,l,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Xg.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,jt=Cn(a.nextSibling),Nt=t,be=!0,It=null,e!==null&&(Et[Ct++]=an,Et[Ct++]=ln,Et[Ct++]=Kn,an=e.id,ln=e.overflow,Kn=t),t=Io(t,r.children),t.flags|=4096,t)}function du(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Tl(e.return,t,n)}function Fi(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Oh(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(it(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&du(e,n,t);else if(e.tag===19)du(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e(Le,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Wa(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fi(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Wa(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fi(t,!0,n,null,i);break;case"together":Fi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=An(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=An(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zg(e,t,n){switch(t.tag){case 3:Rh(t),Cs();break;case 5:ih(t);break;case 1:gt(t.type)&&Ba(t);break;case 4:To(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;_e(Ua,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?Ph(e,t,n):(_e(Le,Le.current&1),e=hn(e,t,n),e!==null?e.sibling:null);_e(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Oh(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),_e(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,Lh(e,t,n)}return hn(e,t,n)}var Dh,Il,Mh,Ih;Dh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Il=function(){};Mh=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,qn(Yt.current);var i=null;switch(n){case"input":a=al(e,a),r=al(e,r),i=[];break;case"select":a=Re({},a,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":a=ol(e,a),r=ol(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ma)}ul(n,r);var l;n=null;for(h in a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var o=a[h];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(vr.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(o=a!=null?a[h]:void 0,r.hasOwnProperty(h)&&c!==o&&(c!=null||o!=null))if(h==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(vr.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Se("scroll",e),i||o===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};Ih=function(e,t,n,r){n!==r&&(t.flags|=4)};function er(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $g(e,t,n){var r=t.pendingProps;switch(wo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return gt(t.type)&&Ia(),tt(t),null;case 3:return r=t.stateNode,Ts(),Ee(mt),Ee(st),Ao(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,It!==null&&(Hl(It),It=null))),Il(e,t),tt(t),null;case 5:Lo(t);var a=qn(Tr.current);if(n=t.type,e!==null&&t.stateNode!=null)Mh(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return tt(t),null}if(e=qn(Yt.current),sa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Qt]=t,r[Cr]=i,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(a=0;a<ir.length;a++)Se(ir[a],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":jc(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":wc(r,i),Se("invalid",r)}ul(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&na(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&na(r.textContent,o,e),a=["children",""+o]):vr.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Se("scroll",r)}switch(n){case"input":Gr(r),Nc(r,i,!0);break;case"textarea":Gr(r),_c(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ma)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Qt]=t,e[Cr]=r,Dh(e,t,!1,!1),t.stateNode=e;e:{switch(l=dl(n,r),n){case"dialog":Se("cancel",e),Se("close",e),a=r;break;case"iframe":case"object":case"embed":Se("load",e),a=r;break;case"video":case"audio":for(a=0;a<ir.length;a++)Se(ir[a],e);a=r;break;case"source":Se("error",e),a=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),a=r;break;case"details":Se("toggle",e),a=r;break;case"input":jc(e,r),a=al(e,r),Se("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Re({},r,{value:void 0}),Se("invalid",e);break;case"textarea":wc(e,r),a=ol(e,r),Se("invalid",e);break;default:a=r}ul(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?pd(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hd(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yr(e,c):typeof c=="number"&&yr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Se("scroll",e):c!=null&&io(e,i,c,l))}switch(n){case"input":Gr(e),Nc(e,r,!1);break;case"textarea":Gr(e),_c(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Pn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?xs(e,!!r.multiple,i,!1):r.defaultValue!=null&&xs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ma)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)Ih(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=qn(Tr.current),qn(Yt.current),sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[Qt]=t,(i=r.nodeValue!==n)&&(e=Nt,e!==null))switch(e.tag){case 3:na(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&na(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=t,t.stateNode=r}return tt(t),null;case 13:if(Ee(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&jt!==null&&t.mode&1&&!(t.flags&128))th(),Cs(),t.flags|=98560,i=!1;else if(i=sa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Qt]=t}else Cs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),i=!1}else It!==null&&(Hl(It),It=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Ue===0&&(Ue=3):Fo())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return Ts(),Il(e,t),e===null&&Sr(t.stateNode.containerInfo),tt(t),null;case 10:return Eo(t.type._context),tt(t),null;case 17:return gt(t.type)&&Ia(),tt(t),null;case 19:if(Ee(Le),i=t.memoizedState,i===null)return tt(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)er(i,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Wa(e),l!==null){for(t.flags|=128,er(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(Le,Le.current&1|2),t.child}e=e.sibling}i.tail!==null&&Oe()>As&&(t.flags|=128,r=!0,er(i,!1),t.lanes=4194304)}else{if(!r)if(e=Wa(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),er(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!be)return tt(t),null}else 2*Oe()-i.renderingStartTime>As&&n!==1073741824&&(t.flags|=128,r=!0,er(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Oe(),t.sibling=null,n=Le.current,_e(Le,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return Vo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?xt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Ug(e,t){switch(wo(t),t.tag){case 1:return gt(t.type)&&Ia(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ts(),Ee(mt),Ee(st),Ao(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lo(t),null;case 13:if(Ee(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Cs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Le),null;case 4:return Ts(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return Vo(),null;case 24:return null;default:return null}}var ia=!1,nt=!1,Vg=typeof WeakSet=="function"?WeakSet:Set,F=null;function vs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(e,t,r)}else n.current=null}function Bl(e,t,n){try{n()}catch(r){Pe(e,t,r)}}var hu=!1;function Fg(e,t){if(Nl=Pa,e=Vd(),jo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,h=0,x=0,p=e,y=null;t:for(;;){for(var L;p!==n||a!==0&&p.nodeType!==3||(o=l+a),p!==i||r!==0&&p.nodeType!==3||(c=l+r),p.nodeType===3&&(l+=p.nodeValue.length),(L=p.firstChild)!==null;)y=p,p=L;for(;;){if(p===e)break t;if(y===n&&++h===a&&(o=l),y===i&&++x===r&&(c=l),(L=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=L}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wl={focusedElem:e,selectionRange:n},Pa=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var b=m.memoizedProps,w=m.memoizedState,u=t.stateNode,f=u.getSnapshotBeforeUpdate(t.elementType===t.type?b:Ot(t.type,b),w);u.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(k){Pe(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return m=hu,hu=!1,m}function pr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Bl(t,n,i)}a=a.next}while(a!==r)}}function oi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function zl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bh(e){var t=e.alternate;t!==null&&(e.alternate=null,Bh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[Cr],delete t[Sl],delete t[Sg],delete t[Eg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zh(e){return e.tag===5||e.tag===3||e.tag===4}function fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $l(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ma));else if(r!==4&&(e=e.child,e!==null))for($l(e,t,n),e=e.sibling;e!==null;)$l(e,t,n),e=e.sibling}function Ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ul(e,t,n),e=e.sibling;e!==null;)Ul(e,t,n),e=e.sibling}var Ke=null,Dt=!1;function vn(e,t,n){for(n=n.child;n!==null;)$h(e,t,n),n=n.sibling}function $h(e,t,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ei,n)}catch{}switch(n.tag){case 5:nt||vs(n,t);case 6:var r=Ke,a=Dt;Ke=null,vn(e,t,n),Ke=r,Dt=a,Ke!==null&&(Dt?(e=Ke,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Dt?(e=Ke,n=n.stateNode,e.nodeType===8?Mi(e.parentNode,n):e.nodeType===1&&Mi(e,n),wr(e)):Mi(Ke,n.stateNode));break;case 4:r=Ke,a=Dt,Ke=n.stateNode.containerInfo,Dt=!0,vn(e,t,n),Ke=r,Dt=a;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Bl(n,t,l),a=a.next}while(a!==r)}vn(e,t,n);break;case 1:if(!nt&&(vs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Pe(n,t,o)}vn(e,t,n);break;case 21:vn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,vn(e,t,n),nt=r):vn(e,t,n);break;default:vn(e,t,n)}}function pu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Vg),t.forEach(function(r){var a=Jg.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Pt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ke=o.stateNode,Dt=!1;break e;case 3:Ke=o.stateNode.containerInfo,Dt=!0;break e;case 4:Ke=o.stateNode.containerInfo,Dt=!0;break e}o=o.return}if(Ke===null)throw Error(D(160));$h(i,l,a),Ke=null,Dt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(h){Pe(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Uh(t,e),t=t.sibling}function Uh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pt(t,e),Ht(e),r&4){try{pr(3,e,e.return),oi(3,e)}catch(b){Pe(e,e.return,b)}try{pr(5,e,e.return)}catch(b){Pe(e,e.return,b)}}break;case 1:Pt(t,e),Ht(e),r&512&&n!==null&&vs(n,n.return);break;case 5:if(Pt(t,e),Ht(e),r&512&&n!==null&&vs(n,n.return),e.flags&32){var a=e.stateNode;try{yr(a,"")}catch(b){Pe(e,e.return,b)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&cd(a,i),dl(o,l);var h=dl(o,i);for(l=0;l<c.length;l+=2){var x=c[l],p=c[l+1];x==="style"?pd(a,p):x==="dangerouslySetInnerHTML"?hd(a,p):x==="children"?yr(a,p):io(a,x,p,h)}switch(o){case"input":il(a,i);break;case"textarea":ud(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var L=i.value;L!=null?xs(a,!!i.multiple,L,!1):y!==!!i.multiple&&(i.defaultValue!=null?xs(a,!!i.multiple,i.defaultValue,!0):xs(a,!!i.multiple,i.multiple?[]:"",!1))}a[Cr]=i}catch(b){Pe(e,e.return,b)}}break;case 6:if(Pt(t,e),Ht(e),r&4){if(e.stateNode===null)throw Error(D(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){Pe(e,e.return,b)}}break;case 3:if(Pt(t,e),Ht(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wr(t.containerInfo)}catch(b){Pe(e,e.return,b)}break;case 4:Pt(t,e),Ht(e);break;case 13:Pt(t,e),Ht(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||($o=Oe())),r&4&&pu(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(h=nt)||x,Pt(t,e),nt=h):Pt(t,e),Ht(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!x&&e.mode&1)for(F=e,x=e.child;x!==null;){for(p=F=x;F!==null;){switch(y=F,L=y.child,y.tag){case 0:case 11:case 14:case 15:pr(4,y,y.return);break;case 1:vs(y,y.return);var m=y.stateNode;if(typeof m.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(b){Pe(r,n,b)}}break;case 5:vs(y,y.return);break;case 22:if(y.memoizedState!==null){gu(p);continue}}L!==null?(L.return=y,F=L):gu(p)}x=x.sibling}e:for(x=null,p=e;;){if(p.tag===5){if(x===null){x=p;try{a=p.stateNode,h?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=fd("display",l))}catch(b){Pe(e,e.return,b)}}}else if(p.tag===6){if(x===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(b){Pe(e,e.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Pt(t,e),Ht(e),r&4&&pu(e);break;case 21:break;default:Pt(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zh(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(yr(a,""),r.flags&=-33);var i=fu(e);Ul(e,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,o=fu(e);$l(e,o,l);break;default:throw Error(D(161))}}catch(c){Pe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wg(e,t,n){F=e,Vh(e)}function Vh(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var a=F,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||ia;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||nt;o=ia;var h=nt;if(ia=l,(nt=c)&&!h)for(F=a;F!==null;)l=F,c=l.child,l.tag===22&&l.memoizedState!==null?vu(a):c!==null?(c.return=l,F=c):vu(a);for(;i!==null;)F=i,Vh(i),i=i.sibling;F=a,ia=o,nt=h}mu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,F=i):mu(e)}}function mu(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||oi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Zc(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zc(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var x=h.memoizedState;if(x!==null){var p=x.dehydrated;p!==null&&wr(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}nt||t.flags&512&&zl(t)}catch(y){Pe(t,t.return,y)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function gu(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function vu(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oi(4,t)}catch(c){Pe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Pe(t,a,c)}}var i=t.return;try{zl(t)}catch(c){Pe(t,i,c)}break;case 5:var l=t.return;try{zl(t)}catch(c){Pe(t,l,c)}}}catch(c){Pe(t,t.return,c)}if(t===e){F=null;break}var o=t.sibling;if(o!==null){o.return=t.return,F=o;break}F=t.return}}var Hg=Math.ceil,Qa=fn.ReactCurrentDispatcher,Bo=fn.ReactCurrentOwner,Lt=fn.ReactCurrentBatchConfig,he=0,Ye=null,Me=null,Xe=0,xt=0,ys=Mn(0),Ue=0,Pr=null,Jn=0,ci=0,zo=0,mr=null,ft=null,$o=0,As=1/0,nn=null,Ga=!1,Vl=null,Tn=null,la=!1,_n=null,Ya=0,gr=0,Fl=null,Na=-1,wa=0;function lt(){return he&6?Oe():Na!==-1?Na:Na=Oe()}function Ln(e){return e.mode&1?he&2&&Xe!==0?Xe&-Xe:bg.transition!==null?(wa===0&&(wa=Ed()),wa):(e=ve,e!==0||(e=window.event,e=e===void 0?16:Pd(e.type)),e):1}function zt(e,t,n,r){if(50<gr)throw gr=0,Fl=null,Error(D(185));Dr(e,n,r),(!(he&2)||e!==Ye)&&(e===Ye&&(!(he&2)&&(ci|=n),Ue===4&&Nn(e,Xe)),vt(e,r),n===1&&he===0&&!(t.mode&1)&&(As=Oe()+500,ai&&In()))}function vt(e,t){var n=e.callbackNode;bm(e,t);var r=Ra(e,e===Ye?Xe:0);if(r===0)n!==null&&Ec(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ec(n),t===1)e.tag===0?Cg(yu.bind(null,e)):Jd(yu.bind(null,e)),_g(function(){!(he&6)&&In()}),n=null;else{switch(Cd(r)){case 1:n=ho;break;case 4:n=kd;break;case 16:n=Aa;break;case 536870912:n=Sd;break;default:n=Aa}n=Kh(n,Fh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fh(e,t){if(Na=-1,wa=0,he&6)throw Error(D(327));var n=e.callbackNode;if(ks()&&e.callbackNode!==n)return null;var r=Ra(e,e===Ye?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ka(e,r);else{t=r;var a=he;he|=2;var i=Hh();(Ye!==e||Xe!==t)&&(nn=null,As=Oe()+500,Qn(e,t));do try{Gg();break}catch(o){Wh(e,o)}while(!0);So(),Qa.current=i,he=a,Me!==null?t=0:(Ye=null,Xe=0,t=Ue)}if(t!==0){if(t===2&&(a=gl(e),a!==0&&(r=a,t=Wl(e,a))),t===1)throw n=Pr,Qn(e,0),Nn(e,r),vt(e,Oe()),n;if(t===6)Nn(e,r);else{if(a=e.current.alternate,!(r&30)&&!qg(a)&&(t=Ka(e,r),t===2&&(i=gl(e),i!==0&&(r=i,t=Wl(e,i))),t===1))throw n=Pr,Qn(e,0),Nn(e,r),vt(e,Oe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Vn(e,ft,nn);break;case 3:if(Nn(e,r),(r&130023424)===r&&(t=$o+500-Oe(),10<t)){if(Ra(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){lt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=kl(Vn.bind(null,e,ft,nn),t);break}Vn(e,ft,nn);break;case 4:if(Nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-Bt(r);i=1<<l,l=t[l],l>a&&(a=l),r&=~i}if(r=a,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hg(r/1960))-r,10<r){e.timeoutHandle=kl(Vn.bind(null,e,ft,nn),r);break}Vn(e,ft,nn);break;case 5:Vn(e,ft,nn);break;default:throw Error(D(329))}}}return vt(e,Oe()),e.callbackNode===n?Fh.bind(null,e):null}function Wl(e,t){var n=mr;return e.current.memoizedState.isDehydrated&&(Qn(e,t).flags|=256),e=Ka(e,t),e!==2&&(t=ft,ft=n,t!==null&&Hl(t)),e}function Hl(e){ft===null?ft=e:ft.push.apply(ft,e)}function qg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!$t(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nn(e,t){for(t&=~zo,t&=~ci,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),r=1<<n;e[n]=-1,t&=~r}}function yu(e){if(he&6)throw Error(D(327));ks();var t=Ra(e,0);if(!(t&1))return vt(e,Oe()),null;var n=Ka(e,t);if(e.tag!==0&&n===2){var r=gl(e);r!==0&&(t=r,n=Wl(e,r))}if(n===1)throw n=Pr,Qn(e,0),Nn(e,t),vt(e,Oe()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vn(e,ft,nn),vt(e,Oe()),null}function Uo(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(As=Oe()+500,ai&&In())}}function Zn(e){_n!==null&&_n.tag===0&&!(he&6)&&ks();var t=he;he|=1;var n=Lt.transition,r=ve;try{if(Lt.transition=null,ve=1,e)return e()}finally{ve=r,Lt.transition=n,he=t,!(he&6)&&In()}}function Vo(){xt=ys.current,Ee(ys)}function Qn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,wg(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(wo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ia();break;case 3:Ts(),Ee(mt),Ee(st),Ao();break;case 5:Lo(r);break;case 4:Ts();break;case 13:Ee(Le);break;case 19:Ee(Le);break;case 10:Eo(r.type._context);break;case 22:case 23:Vo()}n=n.return}if(Ye=e,Me=e=An(e.current,null),Xe=xt=t,Ue=0,Pr=null,zo=ci=Jn=0,ft=mr=null,Hn!==null){for(t=0;t<Hn.length;t++)if(n=Hn[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}n.pending=r}Hn=null}return e}function Wh(e,t){do{var n=Me;try{if(So(),ya.current=qa,Ha){for(var r=Ae.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ha=!1}if(Xn=0,Ge=$e=Ae=null,fr=!1,Lr=0,Bo.current=null,n===null||n.return===null){Ue=1,Pr=t,Me=null;break}e:{var i=e,l=n.return,o=n,c=t;if(t=Xe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,x=o,p=x.tag;if(!(x.mode&1)&&(p===0||p===11||p===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var L=au(l);if(L!==null){L.flags&=-257,iu(L,l,o,i,t),L.mode&1&&ru(i,h,t),t=L,c=h;var m=t.updateQueue;if(m===null){var b=new Set;b.add(c),t.updateQueue=b}else m.add(c);break e}else{if(!(t&1)){ru(i,h,t),Fo();break e}c=Error(D(426))}}else if(be&&o.mode&1){var w=au(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),iu(w,l,o,i,t),_o(Ls(c,o));break e}}i=c=Ls(c,o),Ue!==4&&(Ue=2),mr===null?mr=[i]:mr.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var u=Ch(i,c,t);Jc(i,u);break e;case 1:o=c;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Tn===null||!Tn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=bh(i,o,t);Jc(i,k);break e}}i=i.return}while(i!==null)}Qh(n)}catch(P){t=P,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function Hh(){var e=Qa.current;return Qa.current=qa,e===null?qa:e}function Fo(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Ye===null||!(Jn&268435455)&&!(ci&268435455)||Nn(Ye,Xe)}function Ka(e,t){var n=he;he|=2;var r=Hh();(Ye!==e||Xe!==t)&&(nn=null,Qn(e,t));do try{Qg();break}catch(a){Wh(e,a)}while(!0);if(So(),he=n,Qa.current=r,Me!==null)throw Error(D(261));return Ye=null,Xe=0,Ue}function Qg(){for(;Me!==null;)qh(Me)}function Gg(){for(;Me!==null&&!xm();)qh(Me)}function qh(e){var t=Yh(e.alternate,e,xt);e.memoizedProps=e.pendingProps,t===null?Qh(e):Me=t,Bo.current=null}function Qh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ug(n,t),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Me=null;return}}else if(n=$g(n,t,xt),n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Ue===0&&(Ue=5)}function Vn(e,t,n){var r=ve,a=Lt.transition;try{Lt.transition=null,ve=1,Yg(e,t,n,r)}finally{Lt.transition=a,ve=r}return null}function Yg(e,t,n,r){do ks();while(_n!==null);if(he&6)throw Error(D(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Tm(e,i),e===Ye&&(Me=Ye=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||la||(la=!0,Kh(Aa,function(){return ks(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Lt.transition,Lt.transition=null;var l=ve;ve=1;var o=he;he|=4,Bo.current=null,Fg(e,n),Uh(n,e),mg(wl),Pa=!!Nl,wl=Nl=null,e.current=n,Wg(n),jm(),he=o,ve=l,Lt.transition=i}else e.current=n;if(la&&(la=!1,_n=e,Ya=a),i=e.pendingLanes,i===0&&(Tn=null),_m(n.stateNode),vt(e,Oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ga)throw Ga=!1,e=Vl,Vl=null,e;return Ya&1&&e.tag!==0&&ks(),i=e.pendingLanes,i&1?e===Fl?gr++:(gr=0,Fl=e):gr=0,In(),null}function ks(){if(_n!==null){var e=Cd(Ya),t=Lt.transition,n=ve;try{if(Lt.transition=null,ve=16>e?16:e,_n===null)var r=!1;else{if(e=_n,_n=null,Ya=0,he&6)throw Error(D(331));var a=he;for(he|=4,F=e.current;F!==null;){var i=F,l=i.child;if(F.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var h=o[c];for(F=h;F!==null;){var x=F;switch(x.tag){case 0:case 11:case 15:pr(8,x,i)}var p=x.child;if(p!==null)p.return=x,F=p;else for(;F!==null;){x=F;var y=x.sibling,L=x.return;if(Bh(x),x===h){F=null;break}if(y!==null){y.return=L,F=y;break}F=L}}}var m=i.alternate;if(m!==null){var b=m.child;if(b!==null){m.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}F=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,F=l;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pr(9,i,i.return)}var u=i.sibling;if(u!==null){u.return=i.return,F=u;break e}F=i.return}}var f=e.current;for(F=f;F!==null;){l=F;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,F=g;else e:for(l=f;F!==null;){if(o=F,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:oi(9,o)}}catch(P){Pe(o,o.return,P)}if(o===l){F=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,F=k;break e}F=o.return}}if(he=a,In(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ei,e)}catch{}r=!0}return r}finally{ve=n,Lt.transition=t}}return!1}function xu(e,t,n){t=Ls(n,t),t=Ch(e,t,1),e=bn(e,t,1),t=lt(),e!==null&&(Dr(e,1,t),vt(e,t))}function Pe(e,t,n){if(e.tag===3)xu(e,e,n);else for(;t!==null;){if(t.tag===3){xu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tn===null||!Tn.has(r))){e=Ls(n,e),e=bh(t,e,1),t=bn(t,e,1),e=lt(),t!==null&&(Dr(t,1,e),vt(t,e));break}}t=t.return}}function Kg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&n,Ye===e&&(Xe&n)===n&&(Ue===4||Ue===3&&(Xe&130023424)===Xe&&500>Oe()-$o?Qn(e,0):zo|=n),vt(e,t)}function Gh(e,t){t===0&&(e.mode&1?(t=Xr,Xr<<=1,!(Xr&130023424)&&(Xr=4194304)):t=1);var n=lt();e=dn(e,t),e!==null&&(Dr(e,t,n),vt(e,n))}function Xg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Gh(e,n)}function Jg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Gh(e,n)}var Yh;Yh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)pt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return pt=!1,zg(e,t,n);pt=!!(e.flags&131072)}else pt=!1,be&&t.flags&1048576&&Zd(t,$a,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ja(e,t),e=t.pendingProps;var a=Es(t,st.current);_s(t,n),a=Po(null,t,r,e,a,n);var i=Oo();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(r)?(i=!0,Ba(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,bo(t),a.updater=li,t.stateNode=a,a._reactInternals=t,Al(t,r,e,n),t=Ol(null,t,r,!0,i,n)):(t.tag=0,be&&i&&No(t),it(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=ev(r),e=Ot(r,e),a){case 0:t=Pl(null,t,r,e,n);break e;case 1:t=cu(null,t,r,e,n);break e;case 11:t=lu(null,t,r,e,n);break e;case 14:t=ou(null,t,r,Ot(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ot(r,a),Pl(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ot(r,a),cu(e,t,r,a,n);case 3:e:{if(Rh(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,a=i.element,ah(e,t),Fa(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ls(Error(D(423)),t),t=uu(e,t,r,n,a);break e}else if(r!==a){a=Ls(Error(D(424)),t),t=uu(e,t,r,n,a);break e}else for(jt=Cn(t.stateNode.containerInfo.firstChild),Nt=t,be=!0,It=null,n=sh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cs(),r===a){t=hn(e,t,n);break e}it(e,t,r,n)}t=t.child}return t;case 5:return ih(t),e===null&&bl(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,_l(r,a)?l=null:i!==null&&_l(r,i)&&(t.flags|=32),Ah(e,t),it(e,t,l,n),t.child;case 6:return e===null&&bl(t),null;case 13:return Ph(e,t,n);case 4:return To(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bs(t,null,r,n):it(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ot(r,a),lu(e,t,r,a,n);case 7:return it(e,t,t.pendingProps,n),t.child;case 8:return it(e,t,t.pendingProps.children,n),t.child;case 12:return it(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,_e(Ua,r._currentValue),r._currentValue=l,i!==null)if($t(i.value,l)){if(i.children===a.children&&!mt.current){t=hn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=on(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var x=h.pending;x===null?c.next=c:(c.next=x.next,x.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Tl(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(D(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Tl(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}it(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,_s(t,n),a=At(a),r=r(a),t.flags|=1,it(e,t,r,n),t.child;case 14:return r=t.type,a=Ot(r,t.pendingProps),a=Ot(r.type,a),ou(e,t,r,a,n);case 15:return Th(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ot(r,a),ja(e,t),t.tag=1,gt(r)?(e=!0,Ba(t)):e=!1,_s(t,n),Eh(t,r,a),Al(t,r,a,n),Ol(null,t,r,!0,e,n);case 19:return Oh(e,t,n);case 22:return Lh(e,t,n)}throw Error(D(156,t.tag))};function Kh(e,t){return _d(e,t)}function Zg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,r){return new Zg(e,t,n,r)}function Wo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ev(e){if(typeof e=="function")return Wo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oo)return 11;if(e===co)return 14}return 2}function An(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _a(e,t,n,r,a,i){var l=2;if(r=e,typeof e=="function")Wo(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case os:return Gn(n.children,a,i,t);case lo:l=8,a|=8;break;case tl:return e=Tt(12,n,t,a|2),e.elementType=tl,e.lanes=i,e;case nl:return e=Tt(13,n,t,a),e.elementType=nl,e.lanes=i,e;case sl:return e=Tt(19,n,t,a),e.elementType=sl,e.lanes=i,e;case id:return ui(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rd:l=10;break e;case ad:l=9;break e;case oo:l=11;break e;case co:l=14;break e;case yn:l=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Tt(l,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Gn(e,t,n,r){return e=Tt(7,e,r,t),e.lanes=n,e}function ui(e,t,n,r){return e=Tt(22,e,r,t),e.elementType=id,e.lanes=n,e.stateNode={isHidden:!1},e}function Wi(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function Hi(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tv(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ho(e,t,n,r,a,i,l,o,c){return e=new tv(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Tt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bo(i),e}function nv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Xh(e){if(!e)return On;e=e._reactInternals;e:{if(ts(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(gt(n))return Xd(e,n,t)}return t}function Jh(e,t,n,r,a,i,l,o,c){return e=Ho(n,r,!0,e,a,i,l,o,c),e.context=Xh(null),n=e.current,r=lt(),a=Ln(n),i=on(r,a),i.callback=t??null,bn(n,i,a),e.current.lanes=a,Dr(e,a,r),vt(e,r),e}function di(e,t,n,r){var a=t.current,i=lt(),l=Ln(a);return n=Xh(n),t.context===null?t.context=n:t.pendingContext=n,t=on(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bn(a,t,l),e!==null&&(zt(e,a,l,i),va(e,a,l)),l}function Xa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ju(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qo(e,t){ju(e,t),(e=e.alternate)&&ju(e,t)}function sv(){return null}var Zh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qo(e){this._internalRoot=e}hi.prototype.render=Qo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));di(e,t,null,null)};hi.prototype.unmount=Qo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zn(function(){di(null,e,null,null)}),t[un]=null}};function hi(e){this._internalRoot=e}hi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ld();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jn.length&&t!==0&&t<jn[n].priority;n++);jn.splice(n,0,e),n===0&&Rd(e)}};function Go(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nu(){}function rv(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var h=Xa(l);i.call(h)}}var l=Jh(t,r,e,0,null,!1,!1,"",Nu);return e._reactRootContainer=l,e[un]=l.current,Sr(e.nodeType===8?e.parentNode:e),Zn(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var h=Xa(c);o.call(h)}}var c=Ho(e,0,!1,null,null,!1,!1,"",Nu);return e._reactRootContainer=c,e[un]=c.current,Sr(e.nodeType===8?e.parentNode:e),Zn(function(){di(t,c,n,r)}),c}function pi(e,t,n,r,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Xa(l);o.call(c)}}di(t,l,e,a)}else l=rv(n,t,e,a,r);return Xa(l)}bd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ar(t.pendingLanes);n!==0&&(fo(t,n|1),vt(t,Oe()),!(he&6)&&(As=Oe()+500,In()))}break;case 13:Zn(function(){var r=dn(e,1);if(r!==null){var a=lt();zt(r,e,1,a)}}),qo(e,1)}};po=function(e){if(e.tag===13){var t=dn(e,134217728);if(t!==null){var n=lt();zt(t,e,134217728,n)}qo(e,134217728)}};Td=function(e){if(e.tag===13){var t=Ln(e),n=dn(e,t);if(n!==null){var r=lt();zt(n,e,t,r)}qo(e,t)}};Ld=function(){return ve};Ad=function(e,t){var n=ve;try{return ve=e,t()}finally{ve=n}};fl=function(e,t,n){switch(t){case"input":if(il(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ri(r);if(!a)throw Error(D(90));od(r),il(r,a)}}}break;case"textarea":ud(e,n);break;case"select":t=n.value,t!=null&&xs(e,!!n.multiple,t,!1)}};vd=Uo;yd=Zn;var av={usingClientEntryPoint:!1,Events:[Ir,hs,ri,md,gd,Uo]},tr={findFiberByHostInstance:Wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iv={bundleType:tr.bundleType,version:tr.version,rendererPackageName:tr.rendererPackageName,rendererConfig:tr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nd(e),e===null?null:e.stateNode},findFiberByHostInstance:tr.findFiberByHostInstance||sv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{ei=oa.inject(iv),Gt=oa}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=av;_t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Go(t))throw Error(D(200));return nv(e,t,null,n)};_t.createRoot=function(e,t){if(!Go(e))throw Error(D(299));var n=!1,r="",a=Zh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ho(e,1,!1,null,null,n,!1,r,a),e[un]=t.current,Sr(e.nodeType===8?e.parentNode:e),new Qo(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Nd(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return Zn(e)};_t.hydrate=function(e,t,n){if(!fi(t))throw Error(D(200));return pi(null,e,t,!0,n)};_t.hydrateRoot=function(e,t,n){if(!Go(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",l=Zh;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Jh(t,null,e,1,n??null,a,!1,i,l),e[un]=t.current,Sr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new hi(t)};_t.render=function(e,t,n){if(!fi(t))throw Error(D(200));return pi(null,e,t,!1,n)};_t.unmountComponentAtNode=function(e){if(!fi(e))throw Error(D(40));return e._reactRootContainer?(Zn(function(){pi(null,null,e,!1,function(){e._reactRootContainer=null,e[un]=null})}),!0):!1};_t.unstable_batchedUpdates=Uo;_t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!fi(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return pi(e,t,n,!1,r)};_t.version="18.3.1-next-f1338f8080-20240426";function ef(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ef)}catch(e){console.error(e)}}ef(),ed.exports=_t;var lv=ed.exports,tf,wu=lv;tf=wu.createRoot,wu.hydrateRoot;const ov="http://localhost:3000";let ql=localStorage.getItem("token");function is(e){ql=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async function zr(e,t={}){const n={"Content-Type":"application/json",...t.headers||{}};ql&&(n.Authorization=`Bearer ${ql}`);const r=await fetch(`${ov}${e}`,{...t,headers:n});if(!r.ok){const i=(await r.json().catch(()=>({}))).error||"request_failed";throw new Error(i)}return r.json()}function de(e){return zr(e,{method:"GET"})}function Te(e,t){return zr(e,{method:"POST",body:JSON.stringify(t||{})})}function ze(e,t){return zr(e,{method:"PATCH",body:JSON.stringify(t||{})})}function _u(e,t){return zr(e,{method:"PUT",body:JSON.stringify(t||{})})}function Fn(e){return zr(e,{method:"DELETE"})}const Xt=Object.create(null);Xt.open="0";Xt.close="1";Xt.ping="2";Xt.pong="3";Xt.message="4";Xt.upgrade="5";Xt.noop="6";const ka=Object.create(null);Object.keys(Xt).forEach(e=>{ka[Xt[e]]=e});const Ql={type:"error",data:"parser error"},nf=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",sf=typeof ArrayBuffer=="function",rf=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Yo=({type:e,data:t},n,r)=>nf&&t instanceof Blob?n?r(t):ku(t,r):sf&&(t instanceof ArrayBuffer||rf(t))?n?r(t):ku(new Blob([t]),r):r(Xt[e]+(t||"")),ku=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Su(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let qi;function cv(e,t){if(nf&&e.data instanceof Blob)return e.data.arrayBuffer().then(Su).then(t);if(sf&&(e.data instanceof ArrayBuffer||rf(e.data)))return t(Su(e.data));Yo(e,!1,n=>{qi||(qi=new TextEncoder),t(qi.encode(n))})}const Eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Eu.length;e++)lr[Eu.charCodeAt(e)]=e;const uv=e=>{let t=e.length*.75,n=e.length,r,a=0,i,l,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),x=new Uint8Array(h);for(r=0;r<n;r+=4)i=lr[e.charCodeAt(r)],l=lr[e.charCodeAt(r+1)],o=lr[e.charCodeAt(r+2)],c=lr[e.charCodeAt(r+3)],x[a++]=i<<2|l>>4,x[a++]=(l&15)<<4|o>>2,x[a++]=(o&3)<<6|c&63;return h},dv=typeof ArrayBuffer=="function",Ko=(e,t)=>{if(typeof e!="string")return{type:"message",data:af(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:hv(e.substring(1),t)}:ka[n]?e.length>1?{type:ka[n],data:e.substring(1)}:{type:ka[n]}:Ql},hv=(e,t)=>{if(dv){const n=uv(e);return af(n,t)}else return{base64:!0,data:e}},af=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},lf="",fv=(e,t)=>{const n=e.length,r=new Array(n);let a=0;e.forEach((i,l)=>{Yo(i,!1,o=>{r[l]=o,++a===n&&t(r.join(lf))})})},pv=(e,t)=>{const n=e.split(lf),r=[];for(let a=0;a<n.length;a++){const i=Ko(n[a],t);if(r.push(i),i.type==="error")break}return r};function mv(){return new TransformStream({transform(e,t){cv(e,n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let Qi;function ca(e){return e.reduce((t,n)=>t+n.length,0)}function ua(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)n[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function gv(e,t){Qi||(Qi=new TextDecoder);const n=[];let r=0,a=-1,i=!1;return new TransformStream({transform(l,o){for(n.push(l);;){if(r===0){if(ca(n)<1)break;const c=ua(n,1);i=(c[0]&128)===128,a=c[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(ca(n)<2)break;const c=ua(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(ca(n)<8)break;const c=ua(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),x=h.getUint32(0);if(x>Math.pow(2,21)-1){o.enqueue(Ql);break}a=x*Math.pow(2,32)+h.getUint32(4),r=3}else{if(ca(n)<a)break;const c=ua(n,a);o.enqueue(Ko(i?c:Qi.decode(c),t)),r=0}if(a===0||a>e){o.enqueue(Ql);break}}}})}const of=4;function Ie(e){if(e)return vv(e)}function vv(e){for(var t in Ie.prototype)e[t]=Ie.prototype[t];return e}Ie.prototype.on=Ie.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ie.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Ie.prototype.off=Ie.prototype.removeListener=Ie.prototype.removeAllListeners=Ie.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,a=0;a<n.length;a++)if(r=n[a],r===t||r.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Ie.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,a=n.length;r<a;++r)n[r].apply(this,t)}return this};Ie.prototype.emitReserved=Ie.prototype.emit;Ie.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ie.prototype.hasListeners=function(e){return!!this.listeners(e).length};const mi=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),bt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),yv="arraybuffer";function cf(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const xv=bt.setTimeout,jv=bt.clearTimeout;function gi(e,t){t.useNativeTimers?(e.setTimeoutFn=xv.bind(bt),e.clearTimeoutFn=jv.bind(bt)):(e.setTimeoutFn=bt.setTimeout.bind(bt),e.clearTimeoutFn=bt.clearTimeout.bind(bt))}const Nv=1.33;function wv(e){return typeof e=="string"?_v(e):Math.ceil((e.byteLength||e.size)*Nv)}function _v(e){let t=0,n=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function uf(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function kv(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Sv(e){let t={},n=e.split("&");for(let r=0,a=n.length;r<a;r++){let i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class Ev extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Xo extends Ie{constructor(t){super(),this.writable=!1,gi(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new Ev(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Ko(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=kv(t);return n.length?"?"+n:""}}class Cv extends Xo{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};pv(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,fv(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=uf()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let df=!1;try{df=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const bv=df;function Tv(){}class Lv extends Cv{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Kt extends Ie{constructor(t,n,r){super(),this.createRequest=t,gi(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=cf(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Kt.requestsCount++,Kt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Tv,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Kt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Kt.requestsCount=0;Kt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Cu);else if(typeof addEventListener=="function"){const e="onpagehide"in bt?"pagehide":"unload";addEventListener(e,Cu,!1)}}function Cu(){for(let e in Kt.requests)Kt.requests.hasOwnProperty(e)&&Kt.requests[e].abort()}const Av=function(){const e=hf({xdomain:!1});return e&&e.responseType!==null}();class Rv extends Lv{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Av&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Kt(hf,this.uri(),t)}}function hf(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||bv))return new XMLHttpRequest}catch{}if(!t)try{return new bt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ff=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Pv extends Xo{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=ff?{}:cf(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;Yo(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&mi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=uf()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Gi=bt.WebSocket||bt.MozWebSocket;class Ov extends Pv{createSocket(t,n,r){return ff?new Gi(t,n,r):n?new Gi(t,n):new Gi(t)}doWrite(t,n){this.ws.send(n)}}class Dv extends Xo{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=gv(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),a=mv();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;this._writer.write(r).then(()=>{a&&mi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Mv={websocket:Ov,webtransport:Dv,polling:Rv},Iv=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Bv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Gl(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let a=Iv.exec(e||""),i={},l=14;for(;l--;)i[Bv[l]]=a[l]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=zv(i,i.path),i.queryKey=$v(i,i.query),i}function zv(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function $v(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(n[a]=i)}),n}const Yl=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sa=[];Yl&&addEventListener("offline",()=>{Sa.forEach(e=>e())},!1);class Rn extends Ie{constructor(t,n){if(super(),this.binaryType=yv,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Gl(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Gl(n.host).host);gi(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Sv(this.opts.query)),Yl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sa.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=of,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Rn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Rn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(n+=wv(a)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,mi(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,a){if(typeof n=="function"&&(a=n,n=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Rn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Sa.indexOf(this._offlineEventListener);r!==-1&&Sa.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Rn.protocol=of;class Uv extends Rn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Rn.priorWebsocketSuccess=!1;const a=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Rn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function i(){r||(r=!0,x(),n.close(),n=null)}const l=p=>{const y=new Error("probe error: "+p);y.transport=n.name,i(),this.emitReserved("upgradeError",y)};function o(){l("transport closed")}function c(){l("socket closed")}function h(p){n&&p.name!==n.name&&i()}const x=()=>{n.removeListener("open",a),n.removeListener("error",l),n.removeListener("close",o),this.off("close",c),this.off("upgrading",h)};n.once("open",a),n.once("error",l),n.once("close",o),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let Vv=class extends Uv{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>Mv[a]).filter(a=>!!a)),super(t,r)}};function Fv(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Gl(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Wv=typeof ArrayBuffer=="function",Hv=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,pf=Object.prototype.toString,qv=typeof Blob=="function"||typeof Blob<"u"&&pf.call(Blob)==="[object BlobConstructor]",Qv=typeof File=="function"||typeof File<"u"&&pf.call(File)==="[object FileConstructor]";function Jo(e){return Wv&&(e instanceof ArrayBuffer||Hv(e))||qv&&e instanceof Blob||Qv&&e instanceof File}function Ea(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Ea(e[n]))return!0;return!1}if(Jo(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ea(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ea(e[n]))return!0;return!1}function Gv(e){const t=[],n=e.data,r=e;return r.data=Kl(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Kl(e,t){if(!e)return e;if(Jo(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Kl(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Kl(e[r],t));return n}return e}function Yv(e,t){return e.data=Xl(e.data,t),delete e.attachments,e}function Xl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Xl(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Xl(e[n],t));return e}const mf=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Kv=5;var se;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(se||(se={}));class Xv{constructor(t){this.replacer=t}encode(t){return(t.type===se.EVENT||t.type===se.ACK)&&Ea(t)?this.encodeAsBinary({type:t.type===se.EVENT?se.BINARY_EVENT:se.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===se.BINARY_EVENT||t.type===se.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Gv(t),r=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(r),a}}class Zo extends Ie{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===se.BINARY_EVENT;r||n.type===se.BINARY_ACK?(n.type=r?se.EVENT:se.ACK,this.reconstructor=new Jv(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Jo(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(se[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===se.BINARY_EVENT||r.type===se.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(i,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(i,n)}else r.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(Zo.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case se.CONNECT:return Ja(n);case se.DISCONNECT:return n===void 0;case se.CONNECT_ERROR:return typeof n=="string"||Ja(n);case se.EVENT:case se.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&mf.indexOf(n[0])===-1);case se.ACK:case se.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Jv{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Yv(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Zv(e){return typeof e=="string"}const ey=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function ty(e){return e===void 0||ey(e)}function Ja(e){return Object.prototype.toString.call(e)==="[object Object]"}function ny(e,t){switch(e){case se.CONNECT:return t===void 0||Ja(t);case se.DISCONNECT:return t===void 0;case se.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&mf.indexOf(t[0])===-1);case se.ACK:return Array.isArray(t);case se.CONNECT_ERROR:return typeof t=="string"||Ja(t);default:return!1}}function sy(e){return Zv(e.nsp)&&ty(e.id)&&ny(e.type,e.data)}const ry=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Zo,Encoder:Xv,get PacketType(){return se},isPacketValid:sy,protocol:Kv},Symbol.toStringTag,{value:"Module"}));function Mt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const ay=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gf extends Ie{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Mt(t,"open",this.onopen.bind(this)),Mt(t,"packet",this.onpacket.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,a,i;if(ay.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:se.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const x=this.ids++,p=n.pop();this._registerAckCallback(x,p),l.id=x}const o=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},a),l=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,o)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((r,a)=>{const i=(l,o)=>l?a(l):r(o);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>(this._queue[0],a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:se.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case se.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case se.EVENT:case se.BINARY_EVENT:this.onevent(t);break;case se.ACK:case se.BINARY_ACK:this.onack(t);break;case se.DISCONNECT:this.ondisconnect();break;case se.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...a){r||(r=!0,n.packet({type:se.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:se.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Ds(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ds.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Ds.prototype.reset=function(){this.attempts=0};Ds.prototype.setMin=function(e){this.ms=e};Ds.prototype.setMax=function(e){this.max=e};Ds.prototype.setJitter=function(e){this.jitter=e};class Jl extends Ie{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,gi(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ds({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||ry;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Vv(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=Mt(n,"open",function(){r.onopen(),t&&t()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},l=Mt(n,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Mt(t,"ping",this.onping.bind(this)),Mt(t,"data",this.ondata.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this)),Mt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){mi(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new gf(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const nr={};function Ca(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Fv(e,t.path||"/socket.io"),r=n.source,a=n.id,i=n.path,l=nr[a]&&i in nr[a].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return o?c=new Jl(r,t):(nr[a]||(nr[a]=new Jl(r,t)),c=nr[a]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Ca,{Manager:Jl,Socket:gf,io:Ca,connect:Ca});const iy="http://localhost:3000";function ly(e){return Ca(iy,{auth:{token:e}})}const vf=v.createContext(null);function oy({children:e}){const[t,n]=v.useState([]),r=v.useRef(new Map),a=o=>{n(h=>h.filter(x=>x.id!==o));const c=r.current.get(o);c&&(clearTimeout(c),r.current.delete(o))},i=({message:o,type:c="success",actionLabel:h,onAction:x,duration:p=6e3})=>{const y=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if(n(L=>[...L,{id:y,message:o,type:c,actionLabel:h,onAction:x,duration:p}]),p>0){const L=setTimeout(()=>a(y),p);r.current.set(y,L)}return y},l=o=>o==="error"?s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M12 4.5c.5 0 .95.26 1.2.68l6.5 11.25a1.35 1.35 0 0 1-1.2 2.02H5.5a1.35 1.35 0 0 1-1.2-2.02L10.8 5.18c.25-.42.7-.68 1.2-.68Zm0 4.25a.9.9 0 0 0-.9.9v5.5a.9.9 0 1 0 1.8 0v-5.5a.9.9 0 0 0-.9-.9Zm0 8.3a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z",fill:"currentColor"})}):o==="info"?s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M12 3.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17Zm0 3.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Zm-1.2 4.2h2.4v6.1h-2.4v-6.1Z",fill:"currentColor"})}):s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M9.5 16.6 5.6 12.7a1 1 0 1 1 1.4-1.4l2.5 2.5 7.5-7.5a1 1 0 1 1 1.4 1.4l-8.9 8.9a1 1 0 0 1-1.4 0Z",fill:"currentColor"})});return s.jsxs(vf.Provider,{value:{pushToast:i,removeToast:a},children:[e,s.jsx("div",{className:"toast-container",children:t.map(o=>s.jsxs("div",{className:`toast toast-${o.type}`,style:{"--toast-duration":`${o.duration}ms`},children:[s.jsx("div",{className:"toast-icon",children:l(o.type)}),s.jsx("div",{className:"toast-message",children:o.message}),o.actionLabel&&s.jsx("button",{className:"toast-action",type:"button",onClick:()=>{o.onAction&&Promise.resolve(o.onAction()).catch(()=>{}),a(o.id)},children:o.actionLabel}),s.jsx("button",{className:"toast-close",type:"button",onClick:()=>a(o.id),children:"x"}),o.duration>0&&s.jsx("div",{className:`toast-progress toast-progress-${o.type}`})]},o.id))})]})}function ec(){const e=v.useContext(vf);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function cy({user:e,isOpen:t,onToggle:n,onLogout:r,onReturnToSuperadmin:a,showReturnToSuperadmin:i,getInitial:l}){return s.jsxs("div",{className:"rail-profile",children:[s.jsx("button",{className:`profile-button ${t?"active":""}`,type:"button",onClick:n,title:"Perfil","aria-label":"Perfil",children:s.jsx("span",{children:l(e.name)})}),t&&s.jsxs("div",{className:"profile-card",children:[s.jsx("div",{className:"profile-title",children:e.name}),s.jsx("div",{className:"profile-meta",children:e.email||"Sin correo"}),s.jsx("div",{className:"profile-role",children:e.role}),i?s.jsx("button",{className:"ghost",type:"button",onClick:a,children:"Volver a superadmin"}):null,s.jsx("button",{className:"primary",type:"button",onClick:r,children:"Salir"})]})]})}function uy({navItems:e,view:t,onSetView:n,theme:r,onToggleTheme:a,user:i,logoUrl:l,brandName:o,isProfileOpen:c,onToggleProfile:h,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:L,SunIcon:m,MoonIcon:b}){const w=(o||"P").trim().charAt(0)||"P";return s.jsxs("aside",{className:"nav-rail",children:[s.jsx("button",{className:"rail-logo",type:"button",title:"Perzivalh",children:l?s.jsx("img",{src:l,alt:o||"Logo"}):s.jsx("span",{className:"logo-mark",children:w})}),s.jsx("nav",{className:"rail-nav",children:e.map(u=>{const f=u.icon;return s.jsx("button",{className:`rail-button ${t===u.id?"active":""}`,onClick:()=>u.enabled&&n(u.id),title:u.label,"aria-label":u.label,type:"button",disabled:!u.enabled,children:s.jsx(f,{className:"rail-icon"})},u.id)})}),s.jsx("div",{className:"rail-spacer"}),s.jsx("button",{className:"rail-button",type:"button",onClick:a,title:r==="dark"?"Tema claro":"Tema oscuro","aria-label":r==="dark"?"Tema claro":"Tema oscuro",children:r==="dark"?s.jsx(m,{className:"rail-icon"}):s.jsx(b,{className:"rail-icon"})}),s.jsx(cy,{user:i,isOpen:c,onToggle:h,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:L})]})}function dy({activeConversation:e,conversations:t,channels:n,brandName:r,lastReadMap:a,filters:i,showFilters:l,users:o,tags:c,statusOptions:h,statusLabels:x,formatListTime:p,formatCompactDate:y,messageBlocks:L,messageDraft:m,messageMode:b,quickActions:w,tagInput:u,noteInput:f,notesList:g,latestNote:k,loadingConversation:P,isInfoOpen:j,hasUnread:O,activeName:C,activePhone:I,activeStatusLabel:U,canManageStatus:Y,currentUser:le,messageInputRef:fe,chatBodyRef:xe,setShowFilters:ke,setFilters:ne,loadConversation:Ce,handleBackToList:B,setIsInfoOpen:W,handleChatScroll:S,handleAssignSelf:H,handleStatusChange:G,handleToggleTag:Z,handleAddTag:T,setNoteInput:X,handleAddNote:Q,reassignUserId:V,setReassignUserId:ae,handleReassignConversation:ce,handleOpenTagManager:ue,handleCloseTagManager:me,showTagManager:Ve,tagManagerForm:Fe,setTagManagerForm:We,handleCreateTag:ut,handleDeleteTag:De,handleQuickAction:Be,handleSendMessage:He,setMessageMode:Ut,setMessageDraft:_,scrollChatToBottom:M,getInitial:ie,PlusIcon:ge,SearchIcon:qe,VideoIcon:Vt,PhoneIcon:Bn,InfoIcon:ns,SendIcon:Ms}){const zn=new Map((n||[]).map(R=>[R.phone_number_id,R.display_name||(R.phone_number_id?`Linea ${String(R.phone_number_id).slice(-4)}`:"")])),Ft=(e==null?void 0:e.assigned_user_id)&&e.assigned_user_id!==(le==null?void 0:le.id);function ss(R){if(!R)return"Sin mensajes";const Ne=R.last_message_preview||R.last_message_text||R.last_message||"";return Ne||(R.last_message_type?`[${R.last_message_type}]`:"Sin mensajes")}return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:`chat-shell ${e?"has-active":""}`,children:[s.jsxs("aside",{className:"chat-list-panel",children:[s.jsxs("div",{className:"chat-list-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"list-title",children:(r||"Perzivalh").toUpperCase()}),s.jsx("div",{className:"list-subtitle",children:"Chats"})]}),s.jsx("button",{className:"icon-button add-chat",type:"button",title:"Nuevo chat",children:s.jsx(ge,{className:"icon"})})]}),s.jsxs("div",{className:"chat-search",children:[s.jsx(qe,{className:"search-icon"}),s.jsx("input",{type:"text",placeholder:"Buscar pacientes o mensajes",value:i.search,onFocus:()=>ke(!0),onClick:()=>ke(!0),onChange:R=>ne(Ne=>({...Ne,search:R.target.value}))}),l&&s.jsx("button",{className:"search-close",type:"button",onClick:()=>ke(!1),"aria-label":"Cerrar filtros",children:"x"})]}),l&&s.jsxs("div",{className:"chat-filters",children:[s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Status"}),s.jsxs("select",{value:i.status,onChange:R=>ne(Ne=>({...Ne,status:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),h.map(R=>s.jsx("option",{value:R,children:x[R]||R},R))]})]}),s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Asignado"}),s.jsxs("select",{value:i.assigned_user_id,onChange:R=>ne(Ne=>({...Ne,assigned_user_id:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"unassigned",children:"Sin asignar"}),o.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Tags"}),s.jsxs("select",{value:i.tag,onChange:R=>ne(Ne=>({...Ne,tag:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),c.map(R=>s.jsx("option",{value:R.name,children:R.name},R.id))]})]})]}),s.jsxs("div",{className:"list-header",children:[s.jsxs("select",{className:"line-filter",value:i.phone_number_id,onChange:R=>ne(Ne=>({...Ne,phone_number_id:R.target.value})),children:[s.jsx("option",{value:"",children:"Todas las lineas"}),(n||[]).map(R=>s.jsx("option",{value:R.phone_number_id,children:R.display_name||`Linea ${String(R.phone_number_id).slice(-4)}`},R.id))]}),s.jsx("span",{children:t.length})]}),s.jsx("div",{className:"conversation-list",children:t.map((R,Ne)=>{var Zt,te,J;const Is=(e==null?void 0:e.id)===R.id,$n=R.status==="pending"&&!R.assigned_user_id,Jt=R.display_name||R.phone_e164||R.wa_id||"Sin nombre",N=ss(R),z=Number(R.unread_count||R.unread_messages||R.unread||0),q=((te=(Zt=R.tags)==null?void 0:Zt[0])==null?void 0:te.name)||"",ee=(J=R.assigned_user)!=null&&J.name?`Tomada por ${R.assigned_user.name}`:"",ye=R.phone_number_id?zn.get(R.phone_number_id)||`Linea ${String(R.phone_number_id).slice(-4)}`:"",Wt=(a==null?void 0:a[R.id])||null,Qe=R.last_message_at,dt=Qe&&(!Wt||new Date(Qe).getTime()>new Date(Wt).getTime())&&R.last_message_direction==="in";return s.jsxs("button",{className:`conversation-item ${Is?"active":""}`,onClick:()=>Ce(R.id),style:{animationDelay:`${Math.min(Ne,6)*60}ms`},children:[s.jsxs("div",{className:"avatar",children:[s.jsx("span",{children:ie(Jt)}),$n&&s.jsx("span",{className:"presence-dot"})]}),s.jsxs("div",{className:"conversation-body",children:[s.jsxs("div",{className:"conversation-row",children:[s.jsx("span",{className:"conversation-name",children:Jt}),s.jsxs("div",{className:"conversation-right",children:[s.jsx("span",{className:"conversation-time",children:p(R.last_message_at)}),z>0&&s.jsx("span",{className:"conversation-unread",children:z})]})]}),s.jsx("div",{className:`conversation-preview ${dt?"unread":""}`,children:N}),s.jsxs("div",{className:"conversation-meta",children:[ye&&s.jsx("span",{className:"status-pill line-pill",children:ye}),ee&&s.jsx("span",{className:"status-pill assignee-pill",children:ee}),q&&s.jsx("span",{className:"status-pill tag-pill",children:q})]})]})]},R.id)})})]}),s.jsxs("div",{className:`chat-view ${j?"info-open":"info-closed"}`,children:[s.jsx("div",{className:"chat-main",children:s.jsxs("div",{className:"chat-card",children:[s.jsxs("header",{className:"chat-topbar",children:[s.jsxs("div",{className:"chat-title",children:[e&&s.jsx("button",{className:"back-button",type:"button",onClick:B,children:"Chats"}),s.jsx("div",{className:"chat-avatar",children:s.jsx("span",{children:ie(C)})}),s.jsxs("div",{children:[s.jsx("div",{className:"chat-name",children:C}),e?s.jsx("div",{className:"chat-status",children:U}):s.jsx("div",{className:"chat-status muted",children:"Elige una conversacion"})]})]}),s.jsxs("div",{className:"chat-actions",children:[s.jsx("button",{className:"icon-button",type:"button",title:"Video",children:s.jsx(Vt,{className:"icon"})}),s.jsx("button",{className:"icon-button",type:"button",title:"Llamar",children:s.jsx(Bn,{className:"icon"})}),s.jsx("button",{className:"icon-button",type:"button",title:"Buscar",children:s.jsx(qe,{className:"icon"})}),s.jsx("button",{className:`icon-button ${j?"active":""}`,type:"button",title:"Info",onClick:()=>W(R=>!R),children:s.jsx(ns,{className:"icon"})})]})]}),s.jsxs("div",{className:"chat-body",ref:xe,onScroll:S,children:[P&&s.jsx("div",{className:"empty",children:"Cargando..."}),!P&&!e&&s.jsx("div",{className:"empty",children:"Selecciona una conversacion"}),!P&&e&&s.jsxs(s.Fragment,{children:[L.length?L:s.jsx("div",{className:"empty-state",children:"Sin mensajes"}),s.jsx("div",{className:"chat-encryption",children:"Los mensajes estan cifrados de extremo a extremo."})]})]}),O&&s.jsx("button",{className:"new-message-banner",type:"button",onClick:M,children:"Nuevos mensajes"}),s.jsxs("form",{className:"chat-composer",onSubmit:He,children:[Ft&&s.jsx("div",{className:"assign-warning",children:"Conversacion tomada por otro operador."}),s.jsx("div",{className:"quick-actions",children:w.map(R=>s.jsx("button",{className:"quick-action",type:"button",onClick:()=>Be(R),disabled:Ft,children:R},R))}),s.jsxs("div",{className:"composer-row",children:[s.jsxs("select",{className:"message-mode",value:b,onChange:R=>Ut(R.target.value),disabled:Ft,children:[s.jsx("option",{value:"text",children:"WhatsApp"}),s.jsx("option",{value:"note",children:"Nota interna"})]}),s.jsx("input",{ref:fe,type:"text",placeholder:"Escribe un mensaje...",value:m,onChange:R=>_(R.target.value),disabled:Ft}),s.jsx("button",{className:"send-button",type:"submit",disabled:Ft,children:s.jsx(Ms,{className:"icon"})})]})]})]})}),s.jsxs("aside",{className:"chat-info",children:[s.jsxs("div",{className:"info-card",children:[s.jsx("div",{className:"info-avatar",children:s.jsx("span",{children:ie(C)})}),s.jsx("div",{className:"info-name",children:C}),s.jsx("div",{className:"info-phone",children:I||"Sin telefono"}),s.jsx("button",{className:"primary",type:"button",children:"Abrir en Odoo"})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Informacion del paciente"}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Ultima visita"}),s.jsx("span",{children:y((e==null?void 0:e.last_visit_at)||(e==null?void 0:e.last_visit))})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Tratamiento actual"}),s.jsx("span",{children:(e==null?void 0:e.current_treatment)||(e==null?void 0:e.treatment)||"-"})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Alergias"}),s.jsx("span",{children:(e==null?void 0:e.allergies)||"Ninguna reportada"})]})]}),s.jsxs("div",{className:"info-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("div",{className:"section-title",children:"Etiquetas"}),s.jsx("button",{className:"link-button",type:"button",onClick:ue,children:"Gestionar"})]}),s.jsx("div",{className:"tag-list",children:((e==null?void 0:e.tags)||[]).length?e.tags.map(R=>s.jsxs("span",{className:"tag-chip",children:[s.jsx("span",{className:"tag-chip-label",children:R.name}),s.jsx("button",{className:"tag-remove",type:"button",title:"Quitar etiqueta",onClick:()=>Z(R.name),children:"x"})]},R.name)):s.jsx("div",{className:"empty-state",children:"Sin etiquetas"})}),s.jsxs("form",{className:"tag-form",onSubmit:T,children:[s.jsxs("select",{value:u,onChange:R=>setTagInput(R.target.value),children:[s.jsx("option",{value:"",children:"Selecciona etiqueta..."}),c.filter(R=>!((e==null?void 0:e.tags)||[]).some(Ne=>Ne.name===R.name)).map(R=>s.jsx("option",{value:R.name,children:R.name},R.id))]}),s.jsx("button",{className:"icon-button",type:"submit",title:"Agregar",children:s.jsx(ge,{className:"icon"})})]})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Notas internas"}),g!=null&&g.length?s.jsx("div",{className:"notes-stack",children:g.slice(-5).map(R=>s.jsx("div",{className:"note-card",children:R.text},R.id))}):s.jsx("div",{className:"empty-state",children:"Sin notas internas"}),s.jsxs("form",{className:"note-form",onSubmit:Q,children:[s.jsx("input",{type:"text",placeholder:"Agregar nota interna...",value:f,onChange:R=>X(R.target.value),disabled:!e}),s.jsx("button",{className:"icon-button",type:"submit",title:"Guardar nota",children:s.jsx(ge,{className:"icon"})})]})]}),e&&s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Acciones"}),s.jsxs("div",{className:"action-stack",children:[s.jsx("button",{className:"ghost",type:"button",onClick:H,disabled:Ft,children:"Tomar conversacion"}),Y&&s.jsxs("div",{className:"reassign-row",children:[s.jsxs("select",{value:V,onChange:R=>ae(R.target.value),children:[s.jsx("option",{value:"",children:"Reasignar a..."}),o.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]}),s.jsx("button",{className:"ghost",type:"button",onClick:ce,disabled:!V,children:"Reasignar"})]}),Y&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"ghost",type:"button",onClick:()=>G("open"),children:"Reactivar bot"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>G("pending"),children:"Liberar para otro operador"})]})]})]})]})]})]}),Ve&&s.jsx("div",{className:"modal-overlay",onClick:me,children:s.jsxs("div",{className:"modal-card",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:"Gestion de etiquetas"}),s.jsx("button",{className:"modal-close",type:"button",onClick:me,children:"x"})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("form",{className:"tag-manager-form",onSubmit:ut,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:Fe.name,onChange:R=>We(Ne=>({...Ne,name:R.target.value})),placeholder:"Nombre de etiqueta"})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Color"}),s.jsx("input",{type:"color",value:Fe.color,onChange:R=>We(Ne=>({...Ne,color:R.target.value}))})]}),s.jsx("div",{className:"modal-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Crear etiqueta"})})]}),s.jsx("div",{className:"tag-manager-list",children:(c||[]).map(R=>s.jsxs("div",{className:"tag-manager-row",children:[s.jsx("span",{className:"tag-chip",style:{borderColor:R.color||"#cbd5f5"},children:s.jsx("span",{className:"tag-chip-label",children:R.name})}),s.jsx("div",{className:"tag-manager-actions",children:s.jsx("button",{className:"danger soft",type:"button",onClick:()=>De(R.id,R.name),children:"Eliminar"})})]},R.id))})]})]})})]})}const hy=[{day:"2024-01-01",in_count:210,out_count:90},{day:"2024-01-04",in_count:280,out_count:120},{day:"2024-01-07",in_count:240,out_count:110},{day:"2024-01-10",in_count:320,out_count:140},{day:"2024-01-13",in_count:300,out_count:130},{day:"2024-01-17",in_count:310,out_count:135},{day:"2024-01-20",in_count:290,out_count:120},{day:"2024-01-24",in_count:260,out_count:115},{day:"2024-01-27",in_count:330,out_count:150},{day:"2024-01-30",in_count:340,out_count:160}];function fy(e){const t=e?new Date(e):null;if(!t||Number.isNaN(t.getTime()))return"--";const n=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${String(t.getDate()).padStart(2,"0")} ${n[t.getMonth()].toUpperCase()}`}function bu(e){return e.length?e.map((t,n)=>`${n===0?"M":"L"}${t.x} ${t.y}`).join(" "):""}function py({statusCounts:e,metrics:t,onRefresh:n}){var P;const r=(e.open||0)+(e.pending||0),a=t!=null&&t.avg_first_reply_seconds?Number(t.avg_first_reply_seconds)/60:null,i=a?`${a.toFixed(1)}m`:"-",l=(t==null?void 0:t.conversion_rate)??(t==null?void 0:t.conversion_rate_percent)??null,c=`${(l==null?18.4:l>1?l:l*100).toFixed(1)}%`,h=((P=t==null?void 0:t.message_volume)==null?void 0:P.length)>0?t.message_volume.slice(-10):hy,x=Math.max(...h.map(j=>j.in_count+j.out_count),1),p=h.length*42+30,y=220,L=150,m=180,b=h.map((j,O)=>{const I=(j.in_count+j.out_count)/x*L,U=j.in_count/x*L,Y=j.out_count/x*L;return{x:22+O*42,totalHeight:I,inHeight:U,outHeight:Y}}),w=bu(b.map((j,O)=>({x:j.x+10,y:m-j.inHeight}))),u=bu(b.map(j=>({x:j.x+10,y:m-j.outHeight}))),f=Array.from(new Set([0,Math.floor(h.length/3),Math.floor(2*h.length/3),h.length-1])),g=Math.round((t==null?void 0:t.team_efficiency)||94),k=((t==null?void 0:t.top_tags)||[]).slice(0,3);return s.jsxs("section",{className:"dashboard-layout",children:[s.jsxs("div",{className:"dashboard-main",children:[s.jsxs("header",{className:"dashboard-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kicker",children:"PODOPIE Enterprise"}),s.jsx("h2",{className:"dashboard-title",children:"Dashboard"}),s.jsx("div",{className:"dashboard-subtitle",children:"Marketing Analytics & WhatsApp CRM Overview"})]}),s.jsxs("div",{className:"dashboard-actions",children:[s.jsxs("button",{className:"dash-filter",type:"button",children:[s.jsx("span",{className:"dash-filter-icon","aria-hidden":"true"}),"Ultimos 30 dias"]}),s.jsx("button",{className:"primary",type:"button",onClick:n,children:"Generar Reporte"})]})]}),s.jsxs("div",{className:"dashboard-kpis",children:[s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Conversaciones activas"}),s.jsx("div",{className:"dash-kpi-value",children:r.toLocaleString()})]}),s.jsx("div",{className:"dash-kpi-icon",children:"C"})]}),s.jsx("div",{className:"dash-kpi-change up",children:"+12.5%"})]}),s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Tiempo de respuesta"}),s.jsx("div",{className:"dash-kpi-value",children:i})]}),s.jsx("div",{className:"dash-kpi-icon",children:"T"})]}),s.jsx("div",{className:"dash-kpi-change down",children:"-0.8m"})]}),s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Tasa de conversion"}),s.jsx("div",{className:"dash-kpi-value",children:c})]}),s.jsx("div",{className:"dash-kpi-icon",children:"%"})]}),s.jsx("div",{className:"dash-kpi-change up",children:"+2.1%"})]})]}),s.jsxs("div",{className:"dash-card dash-chart-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-card-title",children:"Flujo de Mensajes"}),s.jsx("div",{className:"dash-card-subtitle",children:"Volumen diario"})]}),s.jsxs("div",{className:"dash-legend",children:[s.jsxs("span",{className:"dash-legend-item",children:[s.jsx("span",{className:"dash-legend-dot in"})," Entrantes"]}),s.jsxs("span",{className:"dash-legend-item",children:[s.jsx("span",{className:"dash-legend-dot out"})," Salientes"]})]})]}),s.jsx("div",{className:"dash-chart",children:s.jsxs("svg",{className:"dash-chart-svg",viewBox:`0 0 ${p} ${y}`,preserveAspectRatio:"none",children:[s.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"60",x2:p,y2:"60"}),s.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"120",x2:p,y2:"120"}),b.map((j,O)=>s.jsxs("g",{children:[s.jsx("rect",{className:"dash-bar in",x:j.x,y:m-j.inHeight,width:"20",height:j.inHeight,rx:"6"}),s.jsx("rect",{className:"dash-bar out",x:j.x,y:m-j.inHeight-j.outHeight,width:"20",height:j.outHeight,rx:"6"})]},`bar-${O}`)),s.jsx("path",{className:"dash-line in",d:w}),s.jsx("path",{className:"dash-line out",d:u})]})}),s.jsx("div",{className:"dash-chart-labels",children:f.map(j=>{var O;return s.jsx("span",{children:fy((O=h[j])==null?void 0:O.day)},`label-${j}`)})})]}),s.jsxs("div",{className:"dashboard-lower",children:[s.jsxs("div",{className:"dash-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsx("div",{className:"dash-card-title",children:"Ultimas etiquetas detectadas"}),s.jsx("button",{className:"link-button",type:"button",children:"Ver todo"})]}),s.jsxs("div",{className:"dash-tag-table",children:[s.jsxs("div",{className:"dash-tag-head",children:[s.jsx("span",{children:"Etiqueta"}),s.jsx("span",{children:"Frecuencia"}),s.jsx("span",{children:"Accion"})]}),k.map(j=>s.jsxs("div",{className:"dash-tag-row",children:[s.jsx("span",{className:"dash-tag-chip",children:j.name}),s.jsx("span",{className:"dash-tag-count",children:j.count}),s.jsx("span",{className:"dash-tag-action",children:">"})]},j.name)),!k.length&&s.jsx("div",{className:"empty-state",children:"Sin etiquetas recientes"})]})]}),s.jsxs("div",{className:"dash-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsx("div",{className:"dash-card-title",children:"Actividad de Campana"}),s.jsx("span",{className:"dash-pill",children:"Monitor"})]}),s.jsxs("div",{className:"dash-campaign",children:[s.jsx("div",{className:"dash-campaign-title",children:'Campana de Verano "Pies Sanos"'}),s.jsxs("div",{className:"dash-campaign-meta",children:[s.jsx("span",{className:"dash-pill solid",children:"84% enviado"}),s.jsx("span",{className:"dash-muted",children:"Hace 2 horas"})]}),s.jsx("div",{className:"dash-progress",children:s.jsx("div",{className:"dash-progress-fill",style:{width:"84%"}})}),s.jsx("div",{className:"dash-muted",children:"1,240 destinatarios"})]})]})]})]}),s.jsxs("aside",{className:"dashboard-side",children:[s.jsxs("div",{className:"dash-card",children:[s.jsx("div",{className:"dash-card-title",children:"Performance de Operadores"}),s.jsx("div",{className:"dash-card-subtitle",children:"Top 5 leaderboard - hoy"}),s.jsx("div",{className:"dash-operator-list",children:[{name:"Lucia Fernandez",role:"Especialista CRM",resolved:84,pending:3},{name:"Ricardo Gomez",role:"Atencion Pacientes",resolved:71,pending:8},{name:"Ana Martinez",role:"Soporte Medico",resolved:65,pending:12}].map(j=>s.jsxs("div",{className:"dash-operator",children:[s.jsx("div",{className:"dash-operator-avatar",children:j.name[0]}),s.jsxs("div",{className:"dash-operator-meta",children:[s.jsx("div",{className:"dash-operator-name",children:j.name}),s.jsx("div",{className:"dash-operator-role",children:j.role}),s.jsxs("div",{className:"dash-operator-stats",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-stat-label",children:"Resueltos"}),s.jsx("div",{className:"dash-stat-value",children:j.resolved})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dash-stat-label",children:"Pendientes"}),s.jsx("div",{className:"dash-stat-value danger",children:j.pending})]})]})]})]},j.name))})]}),s.jsxs("div",{className:"dash-card",children:[s.jsx("div",{className:"dash-card-title",children:"Eficiencia de Equipo"}),s.jsxs("div",{className:"dash-efficiency",children:[s.jsxs("div",{className:"dash-efficiency-value",children:[g,"%"]}),s.jsx("div",{className:"dash-progress",children:s.jsx("div",{className:"dash-progress-fill",style:{width:`${g}%`}})}),s.jsx("div",{className:"dash-muted",children:"Objetivo diario: 500 conversiones"})]})]})]})]})}const my={draft:"BORRADOR",scheduled:"PROGRAMADA",sending:"ENVIANDO",sent:"FINALIZADA",failed:"ERROR"};function gy({campaignForm:e,setCampaignForm:t,campaignFilter:n,setCampaignFilter:r,templates:a,campaigns:i,selectedCampaignId:l,campaignMessages:o,users:c,tags:h,selectedTemplate:x,statusOptions:p,onCreateCampaign:y,onLoadCampaigns:L,onLoadCampaignMessages:m,onSendCampaign:b,formatDate:w}){const[u,f]=v.useState(""),[g,k]=v.useState(!1),{pushToast:P}=ec(),[j,O]=v.useState(!1),[C,I]=v.useState(!1),[U,Y]=v.useState(!1),[le,fe]=v.useState(!1),[xe,ke]=v.useState(null),[ne,Ce]=v.useState({name:"",description:"",rules:[]}),[B,W]=v.useState(!1),[S,H]=v.useState([]),[G,Z]=v.useState(!1),[T,X]=v.useState(null),[Q,V]=v.useState([]);v.useEffect(()=>{ae(),ce()},[]);async function ae(){try{const _=await de("/api/audiences");_&&_.segments&&V(_.segments)}catch(_){console.error("Failed to load segments",_)}}async function ce(){try{const _=await de("/api/contacts/stats");X(_||null)}catch(_){console.error("Failed to load Odoo stats",_),X(null)}}async function ue(){fe(!0),ke(null);try{const _=await Te("/api/contacts/import-odoo",{source:"odoo"});ke(_),ae(),ce(),P({message:"Contactos importados correctamente"})}catch(_){ke({error:_.message||"Error al importar"}),P({type:"error",message:_.message||"Error al importar contactos"})}finally{fe(!1)}}async function me(_){if(_.preventDefault(),!!ne.name.trim()){W(!0);try{await Te("/api/audiences",{name:ne.name,description:ne.description,rules_json:ne.rules.length?ne.rules:[{field:"all",operator:"eq",value:!0}]}),I(!1),Ce({name:"",description:"",rules:[]}),ae(),P({message:"Segmento creado correctamente"})}catch(M){P({type:"error",message:M.message||"No se pudo crear el segmento"})}finally{W(!1)}}}async function Ve(){Z(!0);try{const _=await de("/api/contacts");H((_==null?void 0:_.contacts)||[])}catch(_){console.error("Failed to load contacts",_)}finally{Z(!1)}}function Fe(){Y(!0),Ve()}const We=v.useMemo(()=>{const _={id:"odoo",name:"odoo",subtitle:"Origen: Odoo",count:(T==null?void 0:T.total)||0,type:"odoo"},M=(h||[]).slice(0,6).map((ge,qe)=>({id:ge.id||`tag-${ge.name}-${qe}`,name:ge.name,subtitle:"Segmento por etiqueta",count:ge.count||ge.total||0,type:"tag"})),ie=Q.map(ge=>({id:ge.id,name:ge.name,subtitle:ge.description||"Segmento personalizado",count:ge.estimated_count||0,type:"custom"}));return[_,...ie,...M]},[h,Q,T]),ut=v.useMemo(()=>{const _=u.trim().toLowerCase();return _?a.filter(M=>{var qe,Vt;const ie=((qe=M.name)==null?void 0:qe.toLowerCase())||"",ge=((Vt=M.category)==null?void 0:Vt.toLowerCase())||"";return ie.includes(_)||ge.includes(_)}):a},[u,a]),De=v.useMemo(()=>We.find(_=>_.name===n.tag),[We,n.tag]),Be=v.useMemo(()=>n.tag?`tag:${n.tag}`:n.assigned_user_id?`assigned:${n.assigned_user_id}`:n.status?`status:${n.status}`:n.verified_only?"verified":"",[n]);function He(_){r(M=>{const ie={...M,status:"",tag:"",assigned_user_id:"",verified_only:!1};return _.startsWith("tag:")?ie.tag=_.slice(4):_.startsWith("status:")?ie.status=_.slice(7):_.startsWith("assigned:")?ie.assigned_user_id=_.slice(9):_==="verified"&&(ie.verified_only=!0),ie})}function Ut(_){t(M=>({...M,template_id:_}))}return s.jsxs("section",{className:"campaigns-page",children:[s.jsxs("header",{className:"campaigns-header",children:[s.jsxs("div",{className:"campaigns-title",children:[s.jsx("span",{className:"campaigns-mark"}),s.jsxs("div",{children:[s.jsxs("div",{className:"campaigns-title-row",children:[s.jsx("span",{className:"campaigns-brand",children:"PODOPIE"}),s.jsx("span",{className:"campaigns-divider"}),s.jsx("span",{className:"campaigns-heading",children:"Campaigns"})]}),s.jsx("div",{className:"campaigns-subtitle",children:"Gestion de envios masivos y audiencias para CRM WhatsApp"})]})]}),s.jsxs("div",{className:"campaigns-actions",children:[s.jsx("button",{className:"campaigns-ghost",type:"button",onClick:()=>O(!0),children:"Importar Contactos"}),s.jsx("button",{className:"campaigns-danger",type:"button",onClick:()=>I(!0),children:"+ Nuevo Segmento"})]})]}),j&&s.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:s.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Importar Contactos"}),s.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsx("p",{children:"Importar contactos desde Odoo (pacientes y partners)"}),xe&&s.jsx("div",{className:`import-result ${xe.error?"error":"success"}`,children:xe.error?s.jsxs("span",{children:[" ",xe.error]}):s.jsxs("span",{children:[" Importados: ",xe.imported||0," contactos (",xe.new||0," nuevos, ",xe.updated||0," actualizados)"]})}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{className:"btn-primary",onClick:ue,disabled:le,children:le?"Importando...":" Importar desde Odoo"}),s.jsx("button",{className:"btn-secondary",onClick:Fe,children:" Ver Contactos Existentes"})]})]})]})}),C&&s.jsx("div",{className:"modal-overlay",onClick:()=>I(!1),children:s.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Nuevo Segmento"}),s.jsx("button",{className:"modal-close",onClick:()=>I(!1),children:""})]}),s.jsxs("form",{className:"modal-body",onSubmit:me,children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Nombre del Segmento"}),s.jsx("input",{type:"text",placeholder:"Ej: Pacientes Onicomicosis",value:ne.name,onChange:_=>Ce({...ne,name:_.target.value}),required:!0})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Descripcin"}),s.jsx("textarea",{placeholder:"Descripcin opcional...",value:ne.description,onChange:_=>Ce({...ne,description:_.target.value}),rows:"2"})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("span",{children:"Reglas de Filtro"}),s.jsxs("select",{onChange:_=>{_.target.value&&Ce({...ne,rules:[...ne.rules,{field:_.target.value,operator:"eq",value:""}]})},children:[s.jsx("option",{value:"",children:"+ Agregar filtro..."}),s.jsx("option",{value:"is_patient",children:"Es paciente"}),s.jsx("option",{value:"has_phone",children:"Tiene telfono"}),s.jsx("option",{value:"tag",children:"Tiene etiqueta"})]}),ne.rules.map((_,M)=>s.jsxs("div",{className:"filter-rule",children:[s.jsx("span",{className:"rule-badge",children:_.field}),s.jsx("button",{type:"button",onClick:()=>{Ce({...ne,rules:ne.rules.filter((ie,ge)=>ge!==M)})},children:""})]},M))]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{type:"button",className:"btn-ghost",onClick:()=>I(!1),children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn-primary",disabled:B,children:B?"Guardando...":"Crear Segmento"})]})]})]})}),U&&s.jsx("div",{className:"modal-overlay",onClick:()=>Y(!1),children:s.jsxs("div",{className:"modal-content modal-large",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsxs("h2",{children:["Contactos (",S.length,")"]}),s.jsx("button",{className:"modal-close",onClick:()=>Y(!1),children:""})]}),s.jsx("div",{className:"modal-body",children:G?s.jsx("div",{className:"loading",children:"Cargando contactos..."}):S.length===0?s.jsx("div",{className:"empty-state",children:"No hay contactos. Importa desde Odoo."}):s.jsxs("div",{className:"contacts-table",children:[s.jsxs("div",{className:"contacts-header",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Telfono"}),s.jsx("span",{children:"Email"}),s.jsx("span",{children:"Tipo"})]}),S.slice(0,50).map(_=>s.jsxs("div",{className:"contacts-row",children:[s.jsx("span",{children:_.name}),s.jsx("span",{children:_.phone_e164||"-"}),s.jsx("span",{children:_.email||"-"}),s.jsx("span",{className:"contact-type",children:_.is_patient?"Paciente":"Contacto"})]},_.id)),S.length>50&&s.jsxs("div",{className:"contacts-more",children:["...y ",S.length-50," ms"]})]})})]})}),s.jsxs("div",{className:"campaigns-layout",children:[s.jsxs("aside",{className:"campaigns-audiences",children:[s.jsx("div",{className:"campaigns-section-title",children:"Mis audiencias"}),s.jsx("div",{className:"audience-list",children:We.map(_=>s.jsxs("button",{type:"button",className:`audience-card ${n.tag===_.name?"active":""}`,onClick:()=>{if(_.type==="odoo"){Fe();return}r(M=>({...M,tag:_.name}))},children:[s.jsxs("div",{className:"audience-title",children:[s.jsx("span",{children:_.name}),s.jsx("span",{className:"audience-count",children:_.count})]}),s.jsx("div",{className:"audience-subtitle",children:_.subtitle})]},_.id))})]}),s.jsxs("div",{className:"campaigns-templates",children:[s.jsxs("div",{className:"campaigns-section-header",children:[s.jsx("div",{className:"campaigns-section-title",children:"Plantillas Meta (HSM)"}),s.jsxs("div",{className:"template-search",children:[s.jsx("span",{className:"template-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar plantilla...",value:u,onChange:_=>f(_.target.value)})]})]}),s.jsxs("div",{className:"template-grid",children:[ut.map(_=>{const M=_.is_active?"APROBADA":"PENDIENTE",ie=_.is_active?"approved":"pending",ge=(_.category||"Marketing").toUpperCase(),qe=_.id===e.template_id;return s.jsxs("div",{className:`template-card ${qe?"selected":""}`,children:[s.jsxs("div",{className:"template-head",children:[s.jsx("div",{className:"template-name",children:_.name}),s.jsx("span",{className:`template-status ${ie}`,children:M})]}),s.jsx("div",{className:"template-category",children:ge}),s.jsx("div",{className:"template-preview",children:_.body_preview||"Sin preview"}),s.jsx("button",{className:"template-action",type:"button",onClick:()=>Ut(_.id),children:"Previsualizar"})]},_.id)}),!ut.length&&s.jsx("div",{className:"empty-state",children:"Sin plantillas disponibles"})]})]}),s.jsxs("aside",{className:"campaigns-create",children:[s.jsx("div",{className:"campaigns-section-title",children:"Nueva campana"}),s.jsxs("form",{className:"campaigns-form",onSubmit:y,children:[s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Nombre de campana"}),s.jsx("input",{type:"text",placeholder:"Ej: Promo Onicomicosis Mar",value:e.name,onChange:_=>t(M=>({...M,name:_.target.value}))})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Seleccionar audiencia"}),s.jsxs("select",{value:Be,onChange:_=>He(_.target.value),children:[s.jsx("option",{value:"",children:"Selecciona un segmento..."}),We.filter(_=>_.type!=="odoo").map(_=>s.jsx("option",{value:`tag:${_.name}`,children:_.name},`seg-${_.id}`)),s.jsx("option",{value:"verified",children:"Solo verificados"}),s.jsx("option",{value:"assigned:unassigned",children:"Sin asignar"}),p.map(_=>s.jsxs("option",{value:`status:${_}`,children:["Status: ",_]},`status-${_}`))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Plantilla Meta"}),s.jsxs("select",{value:e.template_id,onChange:_=>t(M=>({...M,template_id:_.target.value})),children:[s.jsx("option",{value:"",children:"Selecciona plantilla..."}),a.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Programacion"}),s.jsx("input",{type:"datetime-local",value:e.scheduled_for,onChange:_=>t(M=>({...M,scheduled_for:_.target.value}))})]}),s.jsx("button",{className:"campaigns-advanced-toggle",type:"button",onClick:()=>k(_=>!_),children:g?"Ocultar filtros avanzados":"Filtros avanzados"}),g&&s.jsxs("div",{className:"campaigns-advanced",children:[s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Status filtro"}),s.jsxs("select",{value:n.status,onChange:_=>r(M=>({...M,status:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),p.map(_=>s.jsx("option",{value:_,children:_},_))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Asignado"}),s.jsxs("select",{value:n.assigned_user_id,onChange:_=>r(M=>({...M,assigned_user_id:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"unassigned",children:"Sin asignar"}),c.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Tag"}),s.jsxs("select",{value:n.tag,onChange:_=>r(M=>({...M,tag:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),h.map(_=>s.jsx("option",{value:_.name,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.verified_only,onChange:_=>r(M=>({...M,verified_only:_.target.checked}))}),"Solo verificados"]})]}),s.jsx("button",{className:"campaigns-launch",type:"submit",children:"Lanzar Campana"}),s.jsxs("div",{className:"campaigns-hint",children:["Se enviaran aproximadamente"," ",s.jsx("strong",{children:(De==null?void 0:De.count)||0})," mensajes HSM"]}),s.jsx("div",{className:"campaigns-preview-box",children:(x==null?void 0:x.body_preview)||"Selecciona una plantilla para ver preview"})]})]})]}),s.jsxs("section",{className:"campaigns-history",children:[s.jsxs("div",{className:"campaigns-history-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"campaigns-history-title",children:"Historial de Envios"}),s.jsx("div",{className:"campaigns-history-subtitle",children:"Ultimos 30 dias"})]}),s.jsx("button",{className:"campaigns-link",type:"button",onClick:L,children:"Ver todo el historial"})]}),s.jsxs("div",{className:"history-table",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("span",{children:"Campana / Fecha"}),s.jsx("span",{children:"Alcance"}),s.jsx("span",{children:"Tasa de lectura"}),s.jsx("span",{children:"Respuestas"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Acciones"})]}),i.map(_=>{const M=my[_.status]||_.status,ie=_.audience_count||_.messages_count||_.total||"--";return s.jsxs("div",{className:"history-row",children:[s.jsxs("div",{className:"history-title",children:[s.jsx("div",{className:"history-name",children:_.name}),s.jsx("div",{className:"history-date",children:w(_.created_at)})]}),s.jsxs("div",{className:"history-metric",children:[s.jsx("div",{className:"history-value",children:ie}),s.jsx("div",{className:"history-label",children:"contactos"})]}),s.jsxs("div",{className:"history-meter",children:[s.jsx("div",{className:"history-value",children:"--"}),s.jsx("div",{className:"history-bar",children:s.jsx("div",{className:"history-bar-fill",style:{width:"0%"}})})]}),s.jsxs("div",{className:"history-metric",children:[s.jsx("div",{className:"history-value",children:"--"}),s.jsx("div",{className:"history-label",children:"mensajes"})]}),s.jsx("div",{className:`history-status ${_.status}`,children:M}),s.jsxs("div",{className:"history-actions",children:[s.jsx("button",{className:"campaigns-ghost small",type:"button",onClick:()=>m(_.id),children:"Ver mensajes"}),s.jsx("button",{className:"campaigns-danger small",type:"button",onClick:()=>b(_.id),disabled:_.status==="sending",children:"Enviar"})]})]},_.id)}),!i.length&&s.jsx("div",{className:"empty-state",children:"Sin campanas registradas"})]}),l&&s.jsxs("div",{className:"campaigns-messages",children:[s.jsx("div",{className:"campaigns-history-title",children:"Mensajes"}),s.jsxs("div",{className:"history-table",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("span",{children:"WA"}),s.jsx("span",{children:"Status"}),s.jsx("span",{children:"Enviado"})]}),o.map(_=>s.jsxs("div",{className:"history-row",children:[s.jsx("span",{children:_.wa_id}),s.jsx("span",{children:_.status}),s.jsx("span",{children:w(_.sent_at)})]},_.id))]})]})]})]})}const vy={admin:{title:"Administrador",subtitle:"Acceso total",tone:"alert"},recepcion:{title:"Operador",subtitle:"Atencion al cliente",tone:"info"},caja:{title:"Supervisor",subtitle:"Auditoria y gestion",tone:"dark"},marketing:{title:"Marketing",subtitle:"Crecimiento y campanas",tone:"info"},doctor:{title:"Doctor",subtitle:"Atencion al cliente",tone:"dark"}},Tu=[{id:"chat",label:"Chat"},{id:"dashboard",label:"Dashboard"},{id:"campaigns",label:"Campanas"}],Lu=[{id:"general",label:"General"},{id:"users",label:"Gestion de Usuarios"},{id:"bot",label:"Configuracion de Bot"},{id:"templates",label:"Plantillas de Meta"},{id:"audit",label:"Registros / Auditoria"},{id:"odoo",label:"Integracion Odoo"}];function Au(e){return vy[e]||{title:e,subtitle:"Acceso personalizado",tone:"info"}}function yy({settingsTab:e,setSettingsTab:t,rolePermissions:n,setRolePermissions:r,isAdmin:a,adminUsers:i,userForm:l,setUserForm:o,roleOptions:c,handleUserSubmit:h,handleUserDelete:x,defaultRolePermissions:p,handleRoleDelete:y}){const[L,m]=v.useState(""),[b,w]=v.useState(!1),[u,f]=v.useState(""),[g,k]=v.useState(null),[P,j]=v.useState(!1),[O,C]=v.useState("create"),[I,U]=v.useState("recepcion"),[Y,le]=v.useState({modules:{},settings:{}}),fe=v.useMemo(()=>{const T=L.trim().toLowerCase(),X=i||[];return T?X.filter(Q=>{var ce,ue;const V=((ce=Q.name)==null?void 0:ce.toLowerCase())||"",ae=((ue=Q.email)==null?void 0:ue.toLowerCase())||"";return V.includes(T)||ae.includes(T)}):X},[i,L]);function xe(T){const X=(n==null?void 0:n[T])||(p==null?void 0:p[T])||{modules:{},settings:{}};return{modules:{...X.modules||{}},settings:{...X.settings||{}}}}function ke(T,X="edit"){C(X),U(T),le(xe(T)),j(!0)}function ne(T,X,Q){le(V=>{const ae={...V},ce={...ae[T]||{}},ue={...ce[X]||{}},me=!ue[Q];return ue[Q]=me,Q==="write"&&me&&(ue.read=!0),Q==="read"&&!me&&(ue.write=!1),ce[X]=ue,ae[T]=ce,ae})}function Ce(){I&&(r(T=>({...T,[I]:Y})),j(!1))}function B(){I&&y&&y(I),j(!1)}function W(T,X,Q,V){a&&r(ae=>{var We,ut;const ce={...ae},ue={modules:{...(We=ce[T])==null?void 0:We.modules},settings:{...(ut=ce[T])==null?void 0:ut.settings}},me={...ue[X]},Ve={...me[Q]},Fe=!Ve[V];return Ve[V]=Fe,V==="write"&&Fe&&(Ve.read=!0),V==="read"&&!Fe&&(Ve.write=!1),me[Q]=Ve,ue[X]=me,ce[T]=ue,ce})}function S(T){return Au(T).title.toUpperCase()}function H(T,X){return T!=null&&T.id?`OP-${T.id.slice(-4).toUpperCase()}`:`OP-${String(X+1).padStart(4,"0")}`}function G(T){o({id:T.id,name:T.name,email:T.email,role:T.role,password:"",is_active:T.is_active}),w(!0)}function Z(){o({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),w(!0)}return s.jsxs("div",{className:"users-page",children:[s.jsxs("header",{className:"users-header",children:[s.jsxs("div",{className:"users-title-row",children:[s.jsx("span",{className:"users-kicker"}),s.jsxs("div",{children:[s.jsx("div",{className:"users-title",children:"Gestion de Usuarios"}),s.jsx("div",{className:"users-subtitle",children:"Administra los accesos y roles de los operadores de tu empresa."})]})]}),s.jsxs("div",{className:"users-actions",children:[e==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"users-search",children:[s.jsx("span",{className:"users-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar usuario...",value:L,onChange:T=>m(T.target.value)})]}),s.jsx("button",{className:"settings-primary",type:"button",onClick:Z,children:"Nuevo Usuario"})]}),e==="roles"&&s.jsx("button",{className:"settings-primary",type:"button",onClick:()=>ke("recepcion","create"),children:"+ Nuevo Rol"})]})]}),s.jsxs("div",{className:"users-tabs",children:[s.jsx("button",{className:`users-tab ${e==="list"?"active":""}`,type:"button",onClick:()=>t("list"),children:"Lista de Usuarios"}),s.jsx("button",{className:`users-tab ${e==="roles"?"active":""}`,type:"button",onClick:()=>t("roles"),children:"Roles y Permisos"})]}),e==="list"&&s.jsxs("div",{className:"users-table",children:[s.jsxs("div",{className:"users-table-head",children:[s.jsx("span",{children:"Nombre / Usuario"}),s.jsx("span",{children:"Email"}),s.jsx("span",{children:"Rol"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Acciones"})]}),fe.map((T,X)=>{var Q;return s.jsxs("div",{className:"users-row",children:[s.jsxs("div",{className:"users-cell user-name",children:[s.jsx("div",{className:"user-avatar",children:((Q=T.name)==null?void 0:Q[0])||"?"}),s.jsxs("div",{children:[s.jsx("div",{className:"user-title",children:T.name}),s.jsx("div",{className:"user-id",children:H(T,X)})]})]}),s.jsx("div",{className:"users-cell",children:T.email}),s.jsx("div",{className:"users-cell",children:s.jsx("span",{className:`role-pill ${T.role}`,children:S(T.role)})}),s.jsx("div",{className:"users-cell",children:s.jsx("span",{className:`status-pill ${T.is_active?"active":"inactive"}`,children:T.is_active?"Activo":"Inactivo"})}),s.jsx("div",{className:"users-cell",children:s.jsxs("div",{className:"users-actions-menu",children:[s.jsx("button",{className:"users-action",type:"button",onClick:()=>f(V=>V===T.id?"":T.id),children:"..."}),u===T.id&&s.jsxs("div",{className:"users-menu",children:[s.jsx("button",{type:"button",onClick:()=>{f(""),G(T)},children:"Editar"}),s.jsx("button",{type:"button",onClick:()=>{f(""),k(T)},children:"Eliminar"})]})]})})]},T.id)}),!fe.length&&s.jsx("div",{className:"empty-state",children:"Sin usuarios para mostrar"})]}),e==="roles"&&s.jsx("div",{className:"roles-grid",children:c.map(T=>{const X=Au(T),Q=n==null?void 0:n[T];return s.jsxs("div",{className:"role-card",children:[s.jsxs("div",{className:"role-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"role-title",children:X.title}),s.jsx("div",{className:`role-subtitle ${X.tone}`,children:X.subtitle})]}),s.jsx("button",{className:"role-edit",type:"button",onClick:()=>ke(T,"edit"),children:"edit"})]}),s.jsxs("div",{className:"role-permissions",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Tu.map(V=>{var ae,ce,ue,me;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:V.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ce=(ae=Q==null?void 0:Q.modules)==null?void 0:ae[V.id])==null?void 0:ce.read)||!1,disabled:!a,onChange:()=>W(T,"modules",V.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((me=(ue=Q==null?void 0:Q.modules)==null?void 0:ue[V.id])==null?void 0:me.write)||!1,disabled:!a,onChange:()=>W(T,"modules",V.id,"write")}),s.jsx("span",{})]})]},V.id)})]}),s.jsxs("div",{className:"role-settings",children:[s.jsx("div",{className:"role-settings-title",children:"Configuracion"}),Lu.map(V=>{var ae,ce,ue,me;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:V.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ce=(ae=Q==null?void 0:Q.settings)==null?void 0:ae[V.id])==null?void 0:ce.read)||!1,disabled:!a,onChange:()=>W(T,"settings",V.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((me=(ue=Q==null?void 0:Q.settings)==null?void 0:ue[V.id])==null?void 0:me.write)||!1,disabled:!a,onChange:()=>W(T,"settings",V.id,"write")}),s.jsx("span",{})]})]},V.id)})]})]},T)})}),b&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:l.id?"Editar usuario":"Crear usuario"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>w(!1),children:"x"})]}),s.jsxs("form",{className:"form-grid",onSubmit:async T=>{await h(T),w(!1)},children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:l.name,onChange:T=>o(X=>({...X,name:T.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:l.email,onChange:T=>o(X=>({...X,email:T.target.value})),disabled:!!l.id})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Rol"}),s.jsx("select",{value:l.role,onChange:T=>o(X=>({...X,role:T.target.value})),children:c.map(T=>s.jsx("option",{value:T,children:T},T))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Password"}),s.jsx("input",{type:"password",value:l.password,onChange:T=>o(X=>({...X,password:T.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_active,onChange:T=>o(X=>({...X,is_active:T.target.checked}))}),"Activo"]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"primary",type:"submit",children:l.id?"Guardar cambios":"Crear"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>w(!1),children:"Cancelar"})]})]})]})}),g&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:"Eliminar usuario"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>k(null),children:"x"})]}),s.jsxs("p",{className:"modal-text",children:["Vas a desactivar a ",s.jsx("strong",{children:g.email}),". Continuar?"]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"danger",type:"button",onClick:()=>{x==null||x(g.id),k(null)},children:"Eliminar"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>k(null),children:"Cancelar"})]})]})}),P&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card modal-lg",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:O==="create"?"Nuevo rol":"Editar rol"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>j(!1),children:"x"})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Rol"}),O==="edit"?s.jsx("select",{value:I,disabled:!0,children:c.map(T=>s.jsx("option",{value:T,children:T},T))}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",list:"role-options",placeholder:"nuevo-rol",value:I,onChange:T=>U(T.target.value)}),s.jsx("datalist",{id:"role-options",children:c.map(T=>s.jsx("option",{value:T},T))})]})]}),s.jsxs("div",{className:"role-permissions",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{children:"Modulos"}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Tu.map(T=>{var X,Q,V,ae;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:T.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((Q=(X=Y==null?void 0:Y.modules)==null?void 0:X[T.id])==null?void 0:Q.read)||!1,onChange:()=>ne("modules",T.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ae=(V=Y==null?void 0:Y.modules)==null?void 0:V[T.id])==null?void 0:ae.write)||!1,onChange:()=>ne("modules",T.id,"write")}),s.jsx("span",{})]})]},T.id)})]}),s.jsxs("div",{className:"role-settings",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{children:"Configuracion"}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Lu.map(T=>{var X,Q,V,ae;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:T.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((Q=(X=Y==null?void 0:Y.settings)==null?void 0:X[T.id])==null?void 0:Q.read)||!1,onChange:()=>ne("settings",T.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ae=(V=Y==null?void 0:Y.settings)==null?void 0:V[T.id])==null?void 0:ae.write)||!1,onChange:()=>ne("settings",T.id,"write")}),s.jsx("span",{})]})]},T.id)})]})]}),s.jsxs("div",{className:"form-actions",children:[O==="edit"&&s.jsx("button",{className:"danger",type:"button",onClick:B,children:"Eliminar rol"}),s.jsx("button",{className:"primary",type:"button",onClick:Ce,disabled:!I,children:"Guardar"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>j(!1),children:"Cancelar"})]})]})})]})}function xy({branches:e,branchForm:t,setBranchForm:n,handleBranchSubmit:r,handleBranchDisable:a,services:i,serviceForm:l,setServiceForm:o,handleServiceSubmit:c,handleServiceDisable:h,handleServiceBranchToggle:x,tenantChannels:p,channelForm:y,setChannelForm:L,handleChannelSelect:m,handleChannelSubmit:b}){return s.jsxs("div",{className:"page-grid",children:[s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Sucursales"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Codigo"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Accion"})]}),e.map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.name}),s.jsx("span",{children:w.code}),s.jsx("span",{children:w.is_active?"Activa":"Inactiva"}),s.jsxs("div",{className:"row-actions",children:[s.jsx("button",{className:"ghost",onClick:()=>n({id:w.id,code:w.code,name:w.name,address:w.address,lat:w.lat,lng:w.lng,hours_text:w.hours_text,phone:w.phone||"",is_active:w.is_active}),children:"Editar"}),s.jsx("button",{className:"danger",onClick:()=>a(w.id),children:"Desactivar"})]})]},w.id))]}),s.jsx("div",{className:"panel-title",children:t.id?"Editar sucursal":"Crear sucursal"}),s.jsxs("form",{className:"form-grid",onSubmit:r,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Codigo"}),s.jsx("input",{type:"text",value:t.code,onChange:w=>n(u=>({...u,code:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:t.name,onChange:w=>n(u=>({...u,name:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Direccion"}),s.jsx("input",{type:"text",value:t.address,onChange:w=>n(u=>({...u,address:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Lat"}),s.jsx("input",{type:"number",value:t.lat,onChange:w=>n(u=>({...u,lat:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Lng"}),s.jsx("input",{type:"number",value:t.lng,onChange:w=>n(u=>({...u,lng:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Telefono"}),s.jsx("input",{type:"text",value:t.phone,onChange:w=>n(u=>({...u,phone:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Horarios"}),s.jsx("textarea",{rows:"3",value:t.hours_text,onChange:w=>n(u=>({...u,hours_text:w.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:t.is_active,onChange:w=>n(u=>({...u,is_active:w.target.checked}))}),"Activa"]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Servicios"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Servicio"}),s.jsx("span",{children:"Precio"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Accion"})]}),i.map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.name}),s.jsxs("span",{children:["Bs ",w.price_bob]}),s.jsx("span",{children:w.is_active?"Activo":"Inactivo"}),s.jsxs("div",{className:"row-actions",children:[s.jsx("button",{className:"ghost",onClick:()=>o({id:w.id,code:w.code,name:w.name,subtitle:w.subtitle||"",description:w.description,price_bob:w.price_bob,duration_min:w.duration_min||"",image_url:w.image_url||"",is_featured:w.is_featured,is_active:w.is_active}),children:"Editar"}),s.jsx("button",{className:"danger",onClick:()=>h(w.id),children:"Desactivar"})]})]},w.id))]}),s.jsx("div",{className:"panel-title",children:l.id?"Editar servicio":"Crear servicio"}),s.jsxs("form",{className:"form-grid",onSubmit:c,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Codigo"}),s.jsx("input",{type:"text",value:l.code,onChange:w=>o(u=>({...u,code:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:l.name,onChange:w=>o(u=>({...u,name:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Subtitulo"}),s.jsx("input",{type:"text",value:l.subtitle,onChange:w=>o(u=>({...u,subtitle:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Descripcion"}),s.jsx("textarea",{rows:"3",value:l.description,onChange:w=>o(u=>({...u,description:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Precio (Bs)"}),s.jsx("input",{type:"number",value:l.price_bob,onChange:w=>o(u=>({...u,price_bob:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Duracion (min)"}),s.jsx("input",{type:"number",value:l.duration_min,onChange:w=>o(u=>({...u,duration_min:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Imagen URL"}),s.jsx("input",{type:"text",value:l.image_url,onChange:w=>o(u=>({...u,image_url:w.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_featured,onChange:w=>o(u=>({...u,is_featured:w.target.checked}))}),"Destacado"]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_active,onChange:w=>o(u=>({...u,is_active:w.target.checked}))}),"Activo"]}),l.id&&s.jsxs("div",{className:"field",children:[s.jsx("span",{children:"Disponibilidad por sucursal"}),s.jsx("div",{className:"chip-grid",children:e.map(w=>{var g,k;const u=(k=(g=i.find(P=>P.id===l.id))==null?void 0:g.branches)==null?void 0:k.find(P=>{var O;return(((O=P.branch)==null?void 0:O.id)||P.branch_id)===w.id}),f=(u==null?void 0:u.is_available)||!1;return s.jsxs("label",{className:"chip",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:P=>x(i.find(j=>j.id===l.id),w.id,P.target.checked)}),w.name]},w.id)})})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Lineas de WhatsApp"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Phone ID"}),s.jsx("span",{children:"Accion"})]}),(p||[]).map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.display_name||"Linea sin nombre"}),s.jsx("span",{children:w.phone_number_id}),s.jsx("button",{className:"ghost",onClick:()=>m(w),children:"Renombrar"})]},w.id)),!(p!=null&&p.length)&&s.jsx("div",{className:"empty-state",children:"Sin lineas registradas"})]}),s.jsx("div",{className:"panel-title",children:y.id?"Editar linea":"Selecciona una linea"}),s.jsxs("form",{className:"form-grid",onSubmit:b,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre visible"}),s.jsx("input",{type:"text",value:y.display_name,onChange:w=>L(u=>({...u,display_name:w.target.value})),disabled:!y.id})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:!y.id,children:"Guardar"})})]})]})]})}function jy(){var m,b,w,u,f,g,k,P,j,O;const[e,t]=v.useState([]),[n,r]=v.useState(null),[a,i]=v.useState(!0),[l,o]=v.useState("");v.useEffect(()=>{c()},[]);async function c(){i(!0);try{const[C,I]=await Promise.all([de("/api/admin/bots"),de("/api/admin/bots/metrics")]);t(C.bots||[]),r(I.metrics),o("")}catch(C){console.error(C),o(C.message||"Error al cargar datos")}finally{i(!1)}}async function h(C,I){try{await ze(`/api/admin/bots/${C}`,{is_active:I}),t(U=>U.map(Y=>Y.id===C?{...Y,is_active:I}:Y))}catch(U){o(U.message||"Error al cambiar estado")}}const x=C=>{if(!C)return"Sin actividad reciente";const I=new Date(C),Y=new Date-I,le=Math.floor(Y/6e4);if(le<1)return"Hace un momento";if(le<60)return`ltima actividad: hace ${le} min`;const fe=Math.floor(le/60);return fe<24?`ltima actividad: hace ${fe}h`:`ltima actividad: ${I.toLocaleDateString()}`},p=e.filter(C=>C.is_active).length,y=p>0?"ACTIVO":"INACTIVO",L=p>0?"active":"inactive";return s.jsxs("div",{className:"bot-section",children:[s.jsxs("div",{className:"bot-section-header",children:[s.jsxs("div",{className:"bot-section-title-area",children:[s.jsx("div",{className:"bot-section-icon",children:""}),s.jsxs("div",{children:[s.jsx("h2",{className:"bot-section-title",children:"Gestin de Bots"}),s.jsx("p",{className:"bot-section-subtitle",children:"Administra los flujos automatizados y el rendimiento tcnico."})]})]}),s.jsxs("div",{className:"bot-section-global-toggle",children:[s.jsx("span",{className:"bot-toggle-label",children:"ESTADO DEL BOT:"}),s.jsxs("div",{className:`bot-toggle-pill ${L}`,children:[s.jsx("span",{className:"bot-toggle-dot"}),s.jsx("span",{children:y})]})]})]}),l&&s.jsx("div",{className:"bot-error",children:l}),s.jsxs("div",{className:"bot-section-content",children:[s.jsxs("div",{className:"bot-flows-panel",children:[s.jsx("div",{className:"bot-panel-header",children:s.jsx("span",{className:"bot-panel-title",children:"MONITOREO DE FLUJOS"})}),a?s.jsx("div",{className:"bot-loading",children:"Cargando bots..."}):e.length===0?s.jsxs("div",{className:"bot-empty",children:[s.jsx("p",{children:"No hay bots asignados a tu cuenta."}),s.jsx("p",{className:"bot-empty-hint",children:"Contacta con soporte si necesitas activar un bot."})]}):s.jsx("div",{className:"bot-flows-list",children:e.map(C=>s.jsxs("div",{className:"bot-flow-card",children:[s.jsxs("div",{className:"bot-flow-info",children:[s.jsx("span",{className:"bot-flow-icon",children:C.flow_icon||""}),s.jsxs("div",{children:[s.jsx("div",{className:"bot-flow-name",children:C.flow_name}),s.jsxs("div",{className:`bot-flow-status ${C.is_active?"active":"inactive"}`,children:[" ",C.is_active?"ACTIVO":"INACTIVO"]})]})]}),s.jsx("div",{className:"bot-flow-actions",children:s.jsxs("label",{className:"bot-toggle-switch",children:[s.jsx("input",{type:"checkbox",checked:C.is_active,onChange:()=>h(C.id,!C.is_active)}),s.jsx("span",{className:"bot-toggle-slider"})]})}),s.jsx("div",{className:"bot-flow-meta",children:x(C.updated_at)}),C.flow_description&&s.jsx("div",{className:"bot-flow-desc",children:C.flow_description})]},C.id))})]}),s.jsxs("div",{className:"bot-metrics-panel",children:[s.jsx("div",{className:"bot-panel-header",children:s.jsx("span",{className:"bot-panel-title",children:"MTRICAS DE EFICACIA DETALLADAS"})}),s.jsxs("div",{className:"bot-metrics-grid",children:[s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:`bot-metric-badge ${((m=n==null?void 0:n.interactions)==null?void 0:m.change)>=0?"positive":"neutral"}`,children:[((b=n==null?void 0:n.interactions)==null?void 0:b.change)>0?"+":"",(w=n==null?void 0:n.interactions)==null?void 0:w.change,"% ",(u=n==null?void 0:n.interactions)==null?void 0:u.label]}),s.jsx("div",{className:"bot-metric-label",children:"INTERACCIONES"}),s.jsx("div",{className:"bot-metric-value",children:n?n.interactions.value:"--"}),s.jsx("div",{className:"bot-metric-sub",children:"Total de sesiones iniciadas hoy"})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:"bot-metric-badge neutral",children:["Objetivo: ",(f=n==null?void 0:n.resolution)==null?void 0:f.target,"%"]}),s.jsx("div",{className:"bot-metric-label",children:"RESOLUCIN FINAL"}),s.jsxs("div",{className:"bot-metric-value",children:[n?n.resolution.value:"--","%"]}),s.jsx("div",{className:"bot-metric-progress",children:s.jsx("div",{className:"bot-metric-progress-fill",style:{width:`${n?n.resolution.value:0}%`}})})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:"bot-metric-badge sla",children:[" ",(g=n==null?void 0:n.uptime)==null?void 0:g.status]}),s.jsx("div",{className:"bot-metric-label",children:"VIDA DEL PROCESO"}),s.jsx("div",{className:"bot-metric-value",children:n?n.uptime.value:"--"}),s.jsx("div",{className:"bot-metric-sub",children:"UPTIME SISTEMA"})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:`bot-metric-icon ${((k=n==null?void 0:n.errors)==null?void 0:k.value)>0?"error":""}`,children:""}),s.jsx("div",{className:`bot-metric-badge ${((P=n==null?void 0:n.errors)==null?void 0:P.value)===0?"stable":"neutral"}`,children:(j=n==null?void 0:n.errors)==null?void 0:j.status}),s.jsx("div",{className:"bot-metric-label",children:"ERRORES"}),s.jsx("div",{className:"bot-metric-value",children:n?n.errors.value:"--"}),s.jsxs("div",{className:`bot-metric-sub ${((O=n==null?void 0:n.errors)==null?void 0:O.critical)>0?"error-sub":""}`,children:["CRTICOS: ",n?n.errors.critical:0]})]})]})]})]})]})}const Ru={DRAFT:{bg:"#e3e8ef",text:"#475569",label:"BORRADOR"},PENDING:{bg:"#fef3c7",text:"#d97706",label:"PENDIENTE"},APPROVED:{bg:"#d1fae5",text:"#059669",label:"APROBADA"},REJECTED:{bg:"#fee2e2",text:"#dc2626",label:"RECHAZADA"},PAUSED:{bg:"#fef3c7",text:"#d97706",label:"PAUSADA"},DISABLED:{bg:"#e5e7eb",text:"#6b7280",label:"DESHABILITADA"}},Ny=[{value:"UTILITY",label:"Utility"},{value:"MARKETING",label:"Marketing"},{value:"AUTHENTICATION",label:"Authentication"}],wy=[{value:"es",label:"Espaol (ES)"},{value:"en",label:"English (EN)"}];function _y({templates:e=[],templateForm:t,setTemplateForm:n,handleTemplateSubmit:r,handleTemplateSubmitToMeta:a,handleTemplateDelete:i,handleSyncTemplates:l,onLoadTemplates:o}){const[c,h]=v.useState("list"),[x,p]=v.useState(null),[y,L]=v.useState(""),[m,b]=v.useState(!1),[w,u]=v.useState(""),[f,g]=v.useState(!1),[k,P]=v.useState(null),[j,O]=v.useState({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),[C,I]=v.useState([]);v.useEffect(()=>{o&&o()},[]),v.useEffect(()=>{if(!k)return;const S=H=>{H.target.closest(".template-card-menu")||P(null)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[k]);const U=async()=>{b(!0);try{await l()}finally{b(!1)}},Y=()=>{p(null),O({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),I([]),h("editor")},le=S=>{p(S),O({name:S.name||"",category:S.category||"UTILITY",language:S.language||"es",body_text:S.body_text||S.body_preview||"",header_type:S.header_type||"",header_content:S.header_content||"",footer_text:S.footer_text||"",buttons:S.buttons_json||[]}),I(S.variable_mappings||[]),h("editor")},fe=async S=>{!(S!=null&&S.id)||!i||!window.confirm(`Eliminar la plantilla "${S.name}"? Esta accin la ocultar localmente y la eliminar de Meta si aplica.`)||(await i(S.id),P(null))},xe=async S=>{S.preventDefault();const H={...j,id:x==null?void 0:x.id,variable_mappings:C};if(n&&n(H),r){const G=await r(null,H);G&&p(G)}},ke=async()=>{if(a){g(!0);try{let S=x==null?void 0:x.id;if(!S){const H={...j,variable_mappings:C},G=await r(null,H);S=G==null?void 0:G.id,G&&p(G)}S&&(await a(S),h("list"),p(null))}finally{g(!1)}}},ne=()=>{h("list"),p(null)},B=(S=>{const H=S.match(/\{\{(\d+)\}\}/g)||[];return[...new Set(H)].map(G=>parseInt(G.replace(/[{}]/g,"")))})(j.body_text),W=e.filter(S=>{var Z;const H=!y||((Z=S.name)==null?void 0:Z.toLowerCase().includes(y.toLowerCase()))||(S.body_text||S.body_preview||"").toLowerCase().includes(y.toLowerCase()),G=!w||S.status===w;return H&&G});return c==="list"?s.jsxs("div",{className:"templates-section",children:[s.jsxs("div",{className:"templates-header",children:[s.jsxs("div",{className:"templates-title-row",children:[s.jsx("h1",{children:"Plantillas de Meta"}),s.jsxs("span",{className:"meta-connected-badge",children:[s.jsx("span",{className:"status-dot"}),"CONECTADO A META API"]})]}),s.jsxs("div",{className:"templates-actions",children:[s.jsx("div",{className:"search-input-wrap",children:s.jsx("input",{type:"text",placeholder:"Buscar plantillas...",value:y,onChange:S=>L(S.target.value)})}),s.jsxs("select",{value:w,onChange:S=>u(S.target.value),className:"status-filter-select",children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"APPROVED",children:"Aprobadas"}),s.jsx("option",{value:"PENDING",children:"Pendientes"}),s.jsx("option",{value:"REJECTED",children:"Rechazadas"}),s.jsx("option",{value:"DRAFT",children:"Borradores"})]}),s.jsx("button",{className:"btn-sync",onClick:U,disabled:m,children:m?" Sincronizando...":" Sincronizar"}),s.jsxs("button",{className:"btn-create-template",onClick:Y,children:[s.jsx("span",{children:"+"})," Crear Nueva Plantilla"]})]})]}),s.jsxs("div",{className:"templates-grid",children:[W.map(S=>{var G;const H=Ru[S.status]||Ru.DRAFT;return s.jsxs("div",{className:"template-card",onClick:()=>le(S),children:[s.jsxs("div",{className:"template-card-head",children:[s.jsx("div",{className:"template-category-icon",children:S.category==="MARKETING"?"":S.category==="UTILITY"?"":""}),s.jsx("span",{className:"template-status-badge",style:{backgroundColor:H.bg,color:H.text},children:H.label})]}),s.jsx("h3",{className:"template-card-name",children:S.name}),s.jsxs("div",{className:"template-card-meta",children:[s.jsx("span",{className:"tag-category",children:S.category}),s.jsx("span",{className:"tag-language",children:S.language==="es"?"ESPAOL (ES)":(G=S.language)==null?void 0:G.toUpperCase()})]}),(S.body_text||S.body_preview)&&s.jsxs("p",{className:"template-card-preview",children:[(S.body_text||S.body_preview).slice(0,80),"..."]}),s.jsxs("div",{className:"template-card-actions",children:[s.jsx("button",{className:"btn-preview",onClick:Z=>{Z.stopPropagation(),le(S)},children:" Previsualizar"}),s.jsxs("div",{className:"template-card-menu",onClick:Z=>Z.stopPropagation(),children:[s.jsx("button",{className:"btn-more",type:"button",onClick:()=>P(Z=>Z===S.id?null:S.id),children:""}),k===S.id&&s.jsxs("div",{className:"template-menu-dropdown",children:[s.jsx("button",{type:"button",className:"menu-item",onClick:()=>le(S),children:"Editar"}),s.jsx("button",{type:"button",className:"menu-item danger",onClick:()=>fe(S),children:"Eliminar"})]})]})]})]},S.id)}),s.jsxs("div",{className:"template-card template-card-create",onClick:Y,children:[s.jsx("div",{className:"create-icon",children:"+"}),s.jsx("h3",{children:"Crear nueva plantilla"}),s.jsx("p",{children:"Empieza a disear tu flujo de WhatsApp"})]})]}),W.length===0&&!y&&s.jsx("div",{className:"templates-empty",children:s.jsx("p",{children:"No hay plantillas. Crea una nueva o sincroniza desde Meta."})})]}):s.jsxs("div",{className:"template-editor",children:[s.jsxs("div",{className:"editor-header",children:[s.jsxs("div",{className:"editor-breadcrumb",children:[s.jsx("button",{className:"btn-back",onClick:ne,children:" Volver"}),s.jsx("span",{className:"breadcrumb-sep",children:"/"}),s.jsx("span",{children:x?"Editar Plantilla":"Nueva Plantilla"})]}),s.jsxs("div",{className:"editor-actions",children:[s.jsx("button",{className:"btn-save-draft",onClick:xe,children:" Guardar Borrador"}),((x==null?void 0:x.status)==="DRAFT"||(x==null?void 0:x.status)==="REJECTED"||!x)&&s.jsx("button",{className:"btn-primary",onClick:ke,disabled:f||!j.name||!j.body_text,children:f?"Enviando...":"Enviar a Meta"}),s.jsx("button",{className:"btn-discard",onClick:ne,children:" Descartar"})]})]}),s.jsxs("div",{className:"editor-layout",children:[s.jsxs("div",{className:"editor-form-panel",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:" General Settings"}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Template Name"}),s.jsx("input",{type:"text",placeholder:"patient_appointment_reminder",value:j.name,onChange:S=>O({...j,name:S.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")})})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Category"}),s.jsx("select",{value:j.category,onChange:S=>O({...j,category:S.target.value}),children:Ny.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Language"}),s.jsx("select",{value:j.language,onChange:S=>O({...j,language:S.target.value}),children:wy.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{children:" Message Body"}),s.jsx("button",{className:"btn-insert-var",type:"button",onClick:()=>{const S=B.length+1;O({...j,body_text:j.body_text+`{{${S}}}`})},children:"+ Insert Variable"})]}),s.jsx("textarea",{rows:"6",placeholder:"Hola {{1}}, te recordamos tu cita en PODOPIE para el da {{2}} a las {{3}}. Por favor, confirma tu asistencia.",value:j.body_text,onChange:S=>O({...j,body_text:S.target.value})}),s.jsxs("div",{className:"char-count",children:[j.body_text.length," / 1024"]})]})]}),s.jsxs("div",{className:"editor-preview-panel",children:[s.jsxs("div",{className:"phone-frame",children:[s.jsxs("div",{className:"phone-header",children:[s.jsx("span",{className:"phone-back",children:""}),s.jsxs("div",{className:"phone-contact",children:[s.jsx("div",{className:"phone-avatar",children:""}),s.jsx("div",{className:"phone-name",children:"PODOPIE Clinic"})]}),s.jsx("div",{className:"phone-icons",children:" "})]}),s.jsxs("div",{className:"phone-body",children:[s.jsx("div",{className:"phone-date-label",children:"TODAY"}),s.jsxs("div",{className:"phone-message",children:[s.jsx("div",{className:"message-bubble",children:j.body_text||"Tu mensaje aparecer aqu..."}),s.jsx("div",{className:"message-time",children:"10:42 AM"})]}),j.buttons&&j.buttons.length>0&&s.jsx("div",{className:"phone-buttons",children:j.buttons.map((S,H)=>s.jsx("button",{className:"phone-action-btn",children:S.text||`Button ${H+1}`},H))})]})]}),s.jsx("div",{className:"preview-label",children:" High-fidelity dynamic preview"})]}),s.jsxs("div",{className:"editor-mapping-panel",children:[s.jsxs("div",{className:"mapping-tabs",children:[s.jsx("button",{className:"tab active",children:"VARIABLES"}),s.jsx("button",{className:"tab",children:"BUTTONS"})]}),s.jsxs("div",{className:"mapping-section",children:[s.jsx("h4",{children:"ODOO FIELD MAPPING"}),B.length===0?s.jsxs("p",{className:"mapping-empty",children:["Agrega variables ","{{1}}",", ","{{2}}","... en tu mensaje"]}):B.map(S=>{const H=C.find(G=>G.var_index===S)||{};return s.jsxs("div",{className:"mapping-item",children:[s.jsxs("div",{className:"mapping-var-badge",children:[`{{${S}}}`," Variable"]}),s.jsxs("select",{value:H.source_path||"",onChange:G=>{const Z=C.filter(T=>T.var_index!==S);Z.push({var_index:S,source_type:"odoo",source_path:G.target.value}),I(Z)},children:[s.jsx("option",{value:"",children:"Select Odoo Field..."}),s.jsx("option",{value:"partner_id.name",children:"patient_id.name"}),s.jsx("option",{value:"start_date",children:"start_date (Formatted)"}),s.jsx("option",{value:"start_time",children:"start_time"}),s.jsx("option",{value:"partner_id.phone",children:"patient_phone"})]}),s.jsx("span",{className:`mapping-status ${H.source_path?"linked":"needs"}`,children:H.source_path?" Linked":" Needs mapping"})]},S)})]}),s.jsxs("div",{className:"mapping-section",children:[s.jsxs("div",{className:"mapping-section-header",children:[s.jsx("h4",{children:"ACTION BUTTONS"}),s.jsx("button",{className:"btn-add-button",onClick:()=>{O({...j,buttons:[...j.buttons||[],{type:"QUICK_REPLY",text:""}]})},children:"+ Add Button"})]}),(j.buttons||[]).map((S,H)=>s.jsxs("div",{className:"button-item",children:[s.jsx("span",{className:"button-icon",children:""}),s.jsx("input",{type:"text",placeholder:"Button text",value:S.text||"",onChange:G=>{const Z=[...j.buttons];Z[H]={...Z[H],text:G.target.value},O({...j,buttons:Z})}}),s.jsx("button",{className:"btn-remove",onClick:()=>{const G=j.buttons.filter((Z,T)=>T!==H);O({...j,buttons:G})},children:""})]},H))]}),s.jsxs("div",{className:"mapping-tip",children:[s.jsx("span",{className:"tip-icon",children:""}),s.jsx("span",{children:"Tip: Asegrate de que tus variables estn correctamente mapeadas a campos de Odoo antes de enviar."})]})]})]})]})}const Pu={campaigns:"",users:"",bot:"",chat:"",templates:"",audience:"",system:""},ky={"user.created":"USUARIO CREADO","user.updated":"USUARIO EDITADO","user.disabled":"USUARIO ELIMINADO",template_draft_created:"PLANTILLA CREADA",template_draft_updated:"PLANTILLA EDITADA",template_submitted:"PLANTILLA ENVIADA",template_deleted:"PLANTILLA ELIMINADA",template_restored:"PLANTILLA RESTAURADA",audience_created:"SEGMENTO CREADO",audience_updated:"SEGMENTO EDITADO",audience_deleted:"SEGMENTO ELIMINADO","campaign.created":"CAMPAA CREADA","campaign.queued":"CAMPAA EN COLA","campaign.sending":"CAMPAA LANZADA","settings.updated":"CONFIG ACTUALIZADA","role_permissions.updated":"PERMISOS CAMBIADOS","role_permissions.deleted":"ROL ELIMINADO","conversation.status_changed":"CHAT ACTUALIZADO","conversation.tag_added":"TAG AGREGADO","conversation.tag_removed":"TAG ELIMINADO"};function yf(e){var r;const t=((r=e==null?void 0:e.data_json)==null?void 0:r.entity)||"";if(t==="template")return"templates";if(t==="audience")return"audience";if(t==="campaign")return"campaigns";if(t==="conversation")return"chat";const n=(e==null?void 0:e.action)||"";return n.includes("user")?"users":n.includes("campaign")?"campaigns":n.includes("template")?"templates":n.includes("audience")?"audience":n.includes("bot")?"bot":n.includes("conversation")?"chat":"system"}function Yi(e){if(!e)return{date:"--",time:"--"};const t=new Date(e);return Number.isNaN(t.getTime())?{date:"--",time:"--"}:{date:t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),time:t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}function Sy(e,t="csv"){const r=[["timestamp","usuario","email","accion","modulo","data"].join(",")];e.forEach(h=>{var m,b;const x=((m=h.user)==null?void 0:m.name)||"Sistema",p=((b=h.user)==null?void 0:b.email)||"",y=yf(h),L=[new Date(h.created_at).toISOString(),x,p,h.action,y,JSON.stringify(h.data_json||{})];r.push(L.map(w=>`"${String(w).replace(/"/g,'""')}"`).join(","))});const a=r.join(`
`),i=t==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"text/csv;charset=utf-8;",l=t==="excel"?"audit_logs.xlsx":"audit_logs.csv",o=new Blob([a],{type:i}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download=l,document.body.appendChild(c),c.click(),document.body.removeChild(c)}function Ey(){var j,O;const[e,t]=v.useState(""),[n,r]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState(1),[c]=v.useState(6),[h,x]=v.useState(0),[p,y]=v.useState([]),[L,m]=v.useState(!1),[b,w]=v.useState(null),u=Math.max(1,Math.ceil(h/c)),f=async({pageOverride:C}={})=>{m(!0);try{const I=new URLSearchParams;I.set("page",String(C||l)),I.set("page_size",String(c)),e.trim()&&I.set("q",e.trim()),n&&I.set("from",n),a&&I.set("to",a);const U=await de(`/api/admin/audit?${I.toString()}`);y(U.logs||[]),x(U.total||0)}finally{m(!1)}};v.useEffect(()=>{f()},[l]);const g=()=>{o(1),f({pageOverride:1})},k=async(C="csv")=>{const I=new URLSearchParams;I.set("page","1"),I.set("page_size","1000"),e.trim()&&I.set("q",e.trim()),n&&I.set("from",n),a&&I.set("to",a);const U=await de(`/api/admin/audit?${I.toString()}`);Sy(U.logs||[],C)},P=v.useMemo(()=>{const C=[],I=Math.max(1,l-1),U=Math.min(u,I+2);for(let Y=I;Y<=U;Y+=1)C.push(Y);return C},[l,u]);return s.jsxs("div",{className:"audit-module",children:[s.jsxs("div",{className:"audit-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audit-title",children:"Registros / Auditoria"}),s.jsx("div",{className:"audit-subtitle",children:"Monitorea acciones de usuarios y eventos del sistema"})]}),s.jsxs("div",{className:"audit-export-group",children:[s.jsx("button",{className:"audit-export",type:"button",onClick:()=>k("excel"),children:" Exportar Excel"}),s.jsx("button",{className:"audit-export outline",type:"button",onClick:()=>k("csv"),children:" Exportar CSV"})]})]}),s.jsxs("div",{className:"audit-filters",children:[s.jsxs("div",{className:"audit-search",children:[s.jsx("span",{className:"audit-search-icon"}),s.jsx("input",{type:"text",placeholder:"Filtrar por usuario o accion..",value:e,onChange:C=>t(C.target.value)})]}),s.jsxs("div",{className:"audit-date",children:[s.jsx("span",{children:"Desde"}),s.jsx("input",{type:"date",value:n,onChange:C=>r(C.target.value)})]}),s.jsxs("div",{className:"audit-date",children:[s.jsx("span",{children:"Hasta"}),s.jsx("input",{type:"date",value:a,onChange:C=>i(C.target.value)})]}),s.jsx("button",{className:"audit-filter-btn",type:"button",onClick:g,children:"Filtrar"})]}),s.jsxs("div",{className:"audit-card",children:[s.jsxs("div",{className:"audit-table-head",children:[s.jsx("span",{children:"Timestamp"}),s.jsx("span",{children:"Usuario"}),s.jsx("span",{children:"Accion"}),s.jsx("span",{children:"Modulo"})]}),L&&s.jsx("div",{className:"audit-empty",children:"Cargando registros..."}),!L&&!p.length&&s.jsx("div",{className:"audit-empty",children:"Sin registros para mostrar"}),!L&&p.map(C=>{var xe,ke;const I=Yi(C.created_at),U=yf(C),Y=ky[C.action]||C.action,le=((xe=C.user)==null?void 0:xe.name)||"System Bot",fe=((ke=C.user)==null?void 0:ke.email)||"automated@service";return s.jsxs("button",{type:"button",className:"audit-row",onClick:()=>w(C),children:[s.jsxs("div",{className:"audit-cell time",children:[s.jsx("div",{children:I.date}),s.jsx("div",{className:"audit-time",children:I.time})]}),s.jsxs("div",{className:"audit-cell user",children:[s.jsx("div",{className:"audit-avatar",children:(le==null?void 0:le[0])||"S"}),s.jsxs("div",{children:[s.jsx("div",{className:"audit-user-name",children:le}),s.jsx("div",{className:"audit-user-email",children:fe})]})]}),s.jsx("div",{className:"audit-cell action",children:s.jsx("span",{className:"audit-action-pill",children:Y})}),s.jsxs("div",{className:"audit-cell module",children:[s.jsx("span",{className:"audit-module-icon",children:Pu[U]||Pu.system}),U.charAt(0).toUpperCase()+U.slice(1)]})]},C.id)})]}),s.jsxs("div",{className:"audit-footer",children:[s.jsxs("div",{children:["Mostrando ",p.length," de ",h," registros"]}),s.jsxs("div",{className:"audit-pagination",children:[s.jsx("button",{type:"button",disabled:l<=1,onClick:()=>o(C=>Math.max(1,C-1)),children:""}),P.map(C=>s.jsx("button",{type:"button",className:C===l?"active":"",onClick:()=>o(C),children:C},C)),s.jsx("button",{type:"button",disabled:l>=u,onClick:()=>o(C=>Math.min(u,C+1)),children:""})]})]}),b&&s.jsx("div",{className:"audit-modal",children:s.jsxs("div",{className:"audit-modal-card",children:[s.jsxs("div",{className:"audit-modal-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audit-modal-title",children:"Detalle del registro"}),s.jsx("div",{className:"audit-modal-subtitle",children:b.action})]}),s.jsx("button",{type:"button",onClick:()=>w(null),children:""})]}),s.jsxs("div",{className:"audit-modal-body",children:[s.jsxs("div",{className:"audit-detail",children:[s.jsx("span",{children:"Usuario"}),s.jsx("strong",{children:((j=b.user)==null?void 0:j.name)||"System Bot"}),s.jsx("small",{children:((O=b.user)==null?void 0:O.email)||"automated@service"})]}),s.jsxs("div",{className:"audit-detail",children:[s.jsx("span",{children:"Timestamp"}),s.jsx("strong",{children:Yi(b.created_at).date}),s.jsx("small",{children:Yi(b.created_at).time})]}),s.jsxs("div",{className:"audit-detail full",children:[s.jsx("span",{children:"Data"}),s.jsx("pre",{children:JSON.stringify(b.data_json||{},null,2)})]})]})]})})]})}function Cy(){return s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Integracion Odoo"}),s.jsx("div",{className:"empty-state",children:"Seccion en construccion"})]})}function by(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"6",r:"2",strokeWidth:"2"}),s.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeWidth:"2"}),s.jsx("circle",{cx:"15",cy:"12",r:"2",strokeWidth:"2"}),s.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18",strokeWidth:"2"}),s.jsx("circle",{cx:"11",cy:"18",r:"2",strokeWidth:"2"})]})}function Ty(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"9",cy:"8",r:"3",strokeWidth:"2"}),s.jsx("path",{d:"M4 20c0-3 2.7-5.5 6-5.5s6 2.5 6 5.5",strokeWidth:"2"}),s.jsx("circle",{cx:"17",cy:"9",r:"2",strokeWidth:"2"}),s.jsx("path",{d:"M14 20c0-1.8 1.4-3.4 3.2-4",strokeWidth:"2"})]})}function Ly(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"2"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"2"}),s.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"2"})]})}function Ay(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"2",strokeWidth:"2"}),s.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"9",strokeWidth:"2"}),s.jsx("line",{x1:"9",y1:"13",x2:"15",y2:"13",strokeWidth:"2"})]})}function Ry(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"6",y:"5",width:"12",height:"15",rx:"2",strokeWidth:"2"}),s.jsx("path",{d:"M9 5h6",strokeWidth:"2"}),s.jsx("path",{d:"M9 10h6",strokeWidth:"2"}),s.jsx("path",{d:"M9 14h6",strokeWidth:"2"})]})}function Py(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M8 4h4a2 2 0 1 1 0 4h-1v2h2a2 2 0 1 1 0 4h-2v2H8a2 2 0 1 1-4 0V8a2 2 0 1 1 4 0z",strokeWidth:"2"})})}function Oy({settingsSection:e,setSettingsSection:t,settingsTab:n,setSettingsTab:r,rolePermissions:a,setRolePermissions:i,currentRole:l,isAdmin:o,adminUsers:c,userForm:h,setUserForm:x,roleOptions:p,handleUserSubmit:y,settings:L,setSettings:m,handleSaveSettings:b,branches:w,services:u,branchForm:f,setBranchForm:g,handleBranchSubmit:k,handleBranchDisable:P,serviceForm:j,setServiceForm:O,handleServiceSubmit:C,handleServiceDisable:I,handleServiceBranchToggle:U,templates:Y,templateForm:le,setTemplateForm:fe,handleTemplateSubmit:xe,handleTemplateSubmitToMeta:ke,handleTemplateDelete:ne,handleSyncTemplates:Ce,auditLogs:B,formatDate:W,planName:S,tenantChannels:H,channelForm:G,setChannelForm:Z,handleChannelSelect:T,handleChannelSubmit:X,handleUserDelete:Q,defaultRolePermissions:V,handleRoleDelete:ae,useShellLayout:ce=!1,pageError:ue}){const me=a==null?void 0:a[l],Ve=[{title:"Principal",items:[{id:"general",label:"General",icon:by},{id:"users",label:"Gestion de Usuarios",icon:Ty},{id:"bot",label:"Configuracion de Bot",icon:Ly}]},{title:"Canales e Integraciones",items:[{id:"templates",label:"Plantillas de Meta",icon:Ay},{id:"audit",label:"Registros / Auditoria",icon:Ry},{id:"odoo",label:"Integracion Odoo",icon:Py}]}];function Fe(De){var Be,He;return!!((He=(Be=me==null?void 0:me.settings)==null?void 0:Be[De])!=null&&He.read)}function We(De){Fe(De)&&t(De)}const ut=s.jsxs(s.Fragment,{children:[s.jsxs("aside",{className:"settings-sidebar",children:[s.jsxs("div",{className:"settings-header",children:[s.jsx("div",{className:"settings-title",children:"CONFIGURACION"}),s.jsx("div",{className:"settings-version",children:"PODOPIE OS V2.0"})]}),Ve.map(De=>s.jsxs("div",{className:"settings-group",children:[s.jsx("div",{className:"settings-group-title",children:De.title}),s.jsx("div",{className:"settings-group-list",children:De.items.map(Be=>{const He=!Fe(Be.id),Ut=Be.icon;return s.jsxs("button",{className:`settings-item ${e===Be.id?"active":""}`,type:"button",onClick:()=>We(Be.id),disabled:He,children:[s.jsx("span",{className:"settings-icon","aria-hidden":"true",children:s.jsx(Ut,{className:"settings-icon-svg"})}),Be.label]},Be.id)})})]},De.title)),s.jsxs("div",{className:"settings-plan",children:[s.jsx("div",{className:"settings-plan-label",children:"Plan actual"}),s.jsx("div",{className:"settings-plan-name",children:S||"Sin plan"})]})]}),s.jsxs("div",{className:"settings-content",children:[e==="users"&&s.jsx(yy,{settingsTab:n,setSettingsTab:r,rolePermissions:a,setRolePermissions:i,isAdmin:o,adminUsers:c,userForm:h,setUserForm:x,roleOptions:p,handleUserSubmit:y,handleUserDelete:Q,defaultRolePermissions:V,handleRoleDelete:ae}),e==="general"&&s.jsx(xy,{branches:w,branchForm:f,setBranchForm:g,handleBranchSubmit:k,handleBranchDisable:P,services:u,serviceForm:j,setServiceForm:O,handleServiceSubmit:C,handleServiceDisable:I,handleServiceBranchToggle:U,tenantChannels:H,channelForm:G,setChannelForm:Z,handleChannelSelect:T,handleChannelSubmit:X}),e==="bot"&&s.jsx(jy,{settings:L,setSettings:m,handleSaveSettings:b}),e==="templates"&&s.jsx(_y,{templates:Y,templateForm:le,setTemplateForm:fe,handleTemplateSubmit:xe,handleTemplateSubmitToMeta:ke,handleTemplateDelete:ne,handleSyncTemplates:Ce}),e==="audit"&&s.jsx(Ey,{auditLogs:B,formatDate:W}),e==="odoo"&&s.jsx(Cy,{}),ue&&s.jsx("div",{className:"error-banner",children:ue})]})]});return ce?ut:s.jsx("section",{className:"settings-layout",children:ut})}function Dy(){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"1.8"}),s.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"1.8"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"1.8"}),s.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"1.8"})]})}function My({tenantId:e,tenantBots:t,availableFlows:n,loading:r,onAddBot:a,onRemoveBot:i}){const[l,o]=v.useState(""),c=new Set(t.map(p=>p.flow_id)),h=n.filter(p=>!c.has(p.id));function x(){l&&(a(l),o(""))}return s.jsxs("section",{className:"sa-bot-card","data-tenant":e||"",children:[s.jsxs("header",{className:"sa-bot-header",children:[s.jsx("div",{className:"sa-bot-icon-large","aria-hidden":"true",children:s.jsx(Dy,{})}),s.jsxs("div",{className:"sa-bot-title-group",children:[s.jsx("h3",{children:"Asignacion de Bots"}),s.jsx("p",{children:"Selecciona que flujos estaran disponibles para este cliente. Los flujos asignados apareceran inmediatamente en el panel del usuario."})]})]}),s.jsx("div",{className:"sa-bot-body",children:r?s.jsx("div",{className:"sa-bot-loading",children:"Cargando asignaciones..."}):t.length===0?s.jsxs("div",{className:"sa-bot-empty",children:[s.jsx("div",{className:"sa-bot-empty-icon",children:"+"}),s.jsx("div",{className:"sa-bot-empty-title",children:"Sin bots asignados"}),s.jsx("div",{className:"sa-bot-empty-sub",children:"Agrega un flujo desde el selector para activarlo en este tenant."})]}):s.jsx("div",{className:"sa-bot-grid",children:t.map(p=>s.jsxs("div",{className:"sa-assigned-bot",children:[s.jsx("div",{className:"sa-bot-item-icon",children:p.flow_icon||">"}),s.jsxs("div",{className:"sa-bot-item-info",children:[s.jsx("span",{className:"sa-bot-item-name",children:p.flow_name||p.flow_id}),s.jsx("span",{className:"sa-bot-item-desc",children:p.flow_description||"Sin descripcion"})]}),s.jsx("button",{type:"button",className:"sa-btn-remove",title:"Quitar bot del cliente",onClick:()=>i(p.id),children:"Quitar"})]},p.id))})}),s.jsxs("div",{className:"sa-bot-controls",children:[s.jsxs("div",{className:"sa-select-container",children:[s.jsx("label",{className:"sa-select-label",children:"Asignar bot"}),s.jsxs("select",{className:"sa-select-styled",value:l,onChange:p=>o(p.target.value),disabled:h.length===0,children:[s.jsx("option",{value:"",children:h.length===0?"No hay mas bots disponibles":"Selecciona un bot para asignar"}),h.map(p=>s.jsx("option",{value:p.id,children:p.name},p.id))]})]}),s.jsx("button",{type:"button",className:"sa-btn-assign",onClick:x,disabled:!l,children:"Asignar Bot"})]})]})}const St={name:"",slug:"",plan:"",db_url:"",phone_number_id:"",line_name:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",brand_name:"",logo_url:"",brand_primary:"#22d3ee",brand_accent:"#38bdf8",brand_bg:"#0b0f16",timezone:"",odoo_base_url:"",odoo_db_name:"",odoo_username:"",odoo_password:""},Iy=[{value:"starter",label:"Starter"},{value:"growth",label:"Growth"},{value:"scale",label:"Scale"},{value:"enterprise",label:"Enterprise"}];function By(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"})]})}function Zl(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function zy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"3.5",strokeWidth:"1.6"}),s.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1.2l2-1.5-2-3.5-2.4.7a7.2 7.2 0 0 0-2-1.2L12 2 9.5 4.3a7.2 7.2 0 0 0-2 1.2l-2.4-.7-2 3.5 2 1.5A7 7 0 0 0 5 12c0 .4 0 .8.1 1.2l-2 1.5 2 3.5 2.4-.7a7.2 7.2 0 0 0 2 1.2L12 22l2.5-2.3a7.2 7.2 0 0 0 2-1.2l2.4.7 2-3.5-2-1.5c.1-.4.1-.8.1-1.2Z",strokeWidth:"1.2",strokeLinejoin:"round"})]})}function $y(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.6"}),s.jsx("path",{d:"M16.5 16.5 20 20",strokeWidth:"1.6",strokeLinecap:"round"})]})}function Uy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M6 12h12",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"m13 6 6 6-6 6",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Vy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M18 6 6 18",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"m6 6 12 12",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Fy(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56",strokeWidth:"1.8",strokeLinecap:"round"})})}function Ou(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Du(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"m2 2 20 20",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Wy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 18h.01",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Hy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"m15 5 4 4",strokeWidth:"1.8",strokeLinecap:"round"})]})}function qy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M3 6h18",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",strokeWidth:"1.8",strokeLinecap:"round"})]})}const Mu={display_name:"",phone_number_id:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",is_active:!0,is_default:!1};function Qy({isOpen:e,onClose:t,initialData:n,onSave:r,tenantId:a}){const[i,l]=v.useState(Mu),[o,c]=v.useState(!1),[h,x]=v.useState(!1),[p,y]=v.useState(!1),[L,m]=v.useState(null);if(v.useEffect(()=>{e&&(l(n||{...Mu}),m(null))},[e,n]),!e)return null;const b=async w=>{if(w.preventDefault(),y(!0),m(null),!i.phone_number_id||!i.verify_token||!n&&!i.wa_token){m("Los campos ID de Telfono, Verify Token y Access Token son obligatorios."),y(!1);return}try{await r({...i,tenant_id:a}),t()}catch(u){console.error("Error saving channel:",u),m(u.message||"Error al guardar la lnea.")}finally{y(!1)}};return s.jsx("div",{className:"sa-modal-overlay",onClick:t,children:s.jsxs("div",{className:"sa-modal-content",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"sa-modal-header",children:[s.jsx("div",{className:"sa-modal-title",children:n?"Editar Lnea WhatsApp":"Nueva Lnea WhatsApp"}),s.jsx("button",{className:"sa-modal-close",onClick:t,children:s.jsx(Vy,{width:24,height:24})})]}),s.jsxs("div",{className:"sa-modal-body",children:[L&&s.jsx("div",{className:"sa-alert",style:{marginBottom:"1rem"},children:L}),s.jsxs("div",{className:"sa-form-grid",children:[s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Nombre para mostrar (Opcional)"}),s.jsx("input",{value:i.display_name||"",onChange:w=>l({...i,display_name:w.target.value}),placeholder:"Ej: Ventas Principal"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Phone Number ID *"}),s.jsx("input",{value:i.phone_number_id||"",onChange:w=>l({...i,phone_number_id:w.target.value}),placeholder:"Identificador del nmero de telfono"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"WABA ID (WhatsApp Business Account ID)"}),s.jsx("input",{value:i.waba_id||"",onChange:w=>l({...i,waba_id:w.target.value}),placeholder:"Identificador de la cuenta de WhatsApp Business"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Verify Token (Webhook) *"}),s.jsx("input",{value:i.verify_token||"",onChange:w=>l({...i,verify_token:w.target.value}),placeholder:"Token de verificacin webhook"})]}),s.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[s.jsx("label",{children:"Permanent Access Token *"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:o?"text":"password",value:i.wa_token||"",onChange:w=>l({...i,wa_token:w.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"Token de acceso permanente",style:{width:"100%",paddingRight:"40px"}}),s.jsx("button",{type:"button",onClick:()=>c(!o),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:o?s.jsx(Du,{width:18,height:18}):s.jsx(Ou,{width:18,height:18})})]})]}),s.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[s.jsx("label",{children:"App Secret (Opcional)"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:h?"text":"password",value:i.app_secret||"",onChange:w=>l({...i,app_secret:w.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"App Secret de Meta",style:{width:"100%",paddingRight:"40px"}}),s.jsx("button",{type:"button",onClick:()=>x(!h),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:h?s.jsx(Du,{width:18,height:18}):s.jsx(Ou,{width:18,height:18})})]})]})]}),s.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"2rem"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[s.jsx("input",{type:"checkbox",checked:!!i.is_active,onChange:w=>l({...i,is_active:w.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Activa"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[s.jsx("input",{type:"checkbox",checked:!!i.is_default,onChange:w=>l({...i,is_default:w.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Principal (Por Defecto)"]})]})]}),s.jsxs("div",{className:"sa-modal-footer",children:[s.jsx("button",{className:"sa-btn ghost",onClick:t,disabled:p,children:"Cancelar"}),s.jsx("button",{className:"sa-btn primary",onClick:b,disabled:p,children:p?s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(Fy,{width:16,height:16,className:"animate-spin"})," Guardando..."]}):"Guardar Lnea"})]})]})})}function Gy({channels:e=[],tenantId:t,onRefresh:n}){const[r,a]=v.useState(!1),[i,l]=v.useState(null),o=()=>{l(null),a(!0)},c=p=>{l(p),a(!0)},h=async p=>{const y=i?`/api/superadmin/channels/${i.id}`:"/api/superadmin/channels",m=await fetch(y,{method:i?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(p)});if(!m.ok){const b=await m.json();throw new Error(b.error||"Error al guardar")}await n()},x=async p=>{if(confirm("Ests seguro de que deseas eliminar esta lnea? Esta accin no se puede deshacer."))try{if(!(await fetch(`/api/superadmin/channels/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar");await n()}catch(y){console.error("Error deleting channel:",y),alert("No se pudo eliminar la lnea.")}};return s.jsxs("section",{className:"sa-lines-card",children:[s.jsxs("header",{className:"sa-lines-header",children:[s.jsxs("div",{className:"sa-lines-title",children:[s.jsx("div",{className:"sa-lines-icon",children:s.jsx(Wy,{width:24,height:24})}),s.jsxs("div",{children:[s.jsx("h3",{children:"Lneas de WhatsApp Cloud"}),s.jsx("p",{children:"Gestiona las conexiones activas de WhatsApp para este tenant."})]})]}),s.jsxs("button",{className:"sa-btn primary",onClick:o,children:[s.jsx(Zl,{width:16,height:16,style:{marginRight:"0.5rem"}}),"Agregar Nueva Lnea"]})]}),s.jsx("div",{className:"sa-lines-body",children:s.jsxs("div",{className:"sa-lines-grid",children:[e.map(p=>s.jsxs("div",{className:`sa-line-card ${p.is_active?"":"opacity-75"}`,children:[s.jsxs("div",{className:"sa-line-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"sa-line-name",children:p.display_name||"Sin nombre"}),s.jsxs("div",{className:"sa-line-meta",children:["ID: ",p.phone_number_id]})]}),s.jsx("div",{className:`sa-line-status ${p.is_active?"active":""}`,title:p.is_active?"Activo":"Inactivo"})]}),s.jsxs("div",{className:"sa-line-badges",children:[p.is_default&&s.jsx("span",{className:"sa-line-badge default",children:"DEFAULT"}),!p.is_active&&s.jsx("span",{className:"sa-status warn",children:"INACTIVO"})]}),s.jsxs("div",{className:"sa-line-details",children:[s.jsxs("div",{className:"sa-line-detail",children:[s.jsx("span",{className:"sa-detail-label",children:"WABA ID"}),s.jsx("span",{className:"sa-detail-value",children:p.waba_id||"-"})]}),s.jsxs("div",{className:"sa-line-detail",children:[s.jsx("span",{className:"sa-detail-label",children:"Verify Token"}),s.jsx("span",{className:"sa-detail-value",children:p.verify_token?`${p.verify_token.substring(0,16)}...`:"-"})]})]}),s.jsxs("div",{className:"sa-line-actions",children:[s.jsx("button",{className:"sa-btn ghost",onClick:()=>c(p),title:"Editar",children:s.jsx(Hy,{width:16,height:16})}),s.jsx("button",{className:"sa-btn ghost",onClick:()=>x(p.id),title:"Eliminar",style:{color:"#f87171"},children:s.jsx(qy,{width:16,height:16})})]})]},p.id)),s.jsxs("button",{type:"button",className:"sa-line-add-card",onClick:o,children:[s.jsx("div",{className:"sa-add-icon-circle",children:s.jsx(Zl,{width:24,height:24})}),s.jsx("span",{children:"Nueva Conexin"})]})]})}),s.jsx(Qy,{isOpen:r,onClose:()=>a(!1),initialData:i,onSave:h,tenantId:t})]})}function Iu({route:e="/superadmin",onNavigate:t,onImpersonateTenant:n,onLogout:r=()=>{}}){const[a,i]=v.useState([]),[l,o]=v.useState([]),[c,h]=v.useState(""),[x,p]=v.useState(""),[y,L]=v.useState("Verificacion de red: sistema ok"),[m,b]=v.useState(St),[w,u]=v.useState(!1),[f,g]=v.useState(!1),[k,P]=v.useState(""),[j,O]=v.useState(""),[C,I]=v.useState(!0),[U,Y]=v.useState(St),[le,fe]=v.useState(!0),[xe,ke]=v.useState(!1),ne=v.useRef(""),[Ce,B]=v.useState([]),[W,S]=v.useState([]),[H,G]=v.useState(!1),{pushToast:Z}=ec(),T=v.useMemo(()=>{if(!e)return"";const N=e.match(/^\/superadmin\/tenants\/([^/]+)\/?$/)||e.match(/^\/superadmin\/tenant\/([^/]+)\/?$/)||e.match(/^\/superadmin\/edit\/([^/]+)\/?$/);return N?N[1]:""},[e]),X=e.startsWith("/superadmin/new"),Q=!!T,V=X||Q,ae=v.useCallback(N=>{if(t){t(N,{replace:!1});return}typeof window>"u"||window.history.pushState({},"",N)},[t]);async function ce(){try{const N=await de("/api/superadmin/tenants");i(N.tenants||[]);const z=await de("/api/superadmin/channels");o(z.channels||[]),p("")}catch(N){p(N.message||"No se pudo cargar datos.")}}v.useEffect(()=>{ce(),ge()},[]),v.useMemo(()=>{const N=new Map;return l.forEach(z=>{const q=N.get(z.tenant_id)||0;N.set(z.tenant_id,q+1)}),N},[l]);const ue=v.useMemo(()=>{const N=c.trim().toLowerCase();return N?a.filter(z=>{const q=String(z.name||"").toLowerCase(),ee=String(z.slug||"").toLowerCase(),ye=String(z.id||"").toLowerCase();return q.includes(N)||ee.includes(N)||ye.includes(N)}):a.slice()},[a,c]),me=a.length,Ve=a.filter(N=>N.is_active).length;a.filter(N=>N.has_database).length;const Fe=a.filter(N=>N.has_odoo).length,We=me?Math.round(Fe/me*100):0;function ut(N){if(!N)return"--";const z=new Date(N);return Number.isNaN(z.getTime())?"--":z.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"2-digit"})}function De(N){return 10+Math.abs(Array.from(N).reduce((ee,ye)=>ee+ye.charCodeAt(0),0))%70}function Be(){b(St),Y(St),O(""),I(!0),fe(!0),S([]),L("Verificacion de red: sistema ok"),ne.current=""}function He(){Be(),p(""),ae("/superadmin/new")}function Ut(){ne.current="",ae("/superadmin")}async function _(N){if(n)try{p(""),P(N),await n(N)}catch(z){p(z.message||"No se pudo entrar al tenant.")}finally{P("")}}function M(N){const z={};return Object.keys(St).forEach(q=>{const ee=N[q];z[q]=typeof ee=="string"?ee.trim():ee||""}),{...St,...z}}async function ie(N){if(N){ne.current=N,O(N),b(St),Y(St),I(!0),fe(!0),S([]),ke(!0),p("");try{const z=await de(`/api/superadmin/tenants/${N}/details`);if(ne.current!==N)return;const q=z.tenant||{},ee=z.branding||null,ye=z.odoo||null,Wt=z.database||null,Qe=z.channel||null,dt=(ee==null?void 0:ee.colors)||{},Zt=M({...St,name:q.name||"",slug:q.slug||"",plan:q.plan||"",db_url:(Wt==null?void 0:Wt.db_url)||"",brand_name:(ee==null?void 0:ee.brand_name)||"",logo_url:(ee==null?void 0:ee.logo_url)||"",brand_primary:(dt==null?void 0:dt.primary)||St.brand_primary,brand_accent:(dt==null?void 0:dt.accent)||St.brand_accent,brand_bg:(dt==null?void 0:dt.bg)||St.brand_bg,odoo_base_url:(ye==null?void 0:ye.base_url)||"",odoo_db_name:(ye==null?void 0:ye.db_name)||"",odoo_username:(ye==null?void 0:ye.username)||"",odoo_password:(ye==null?void 0:ye.password)||""});b(Zt),Y(Zt),O(q.id||N),I(!!q.is_active),fe(!!q.is_active),L("Modo edicion: cambios pendientes"),await qe(N)}catch(z){p(z.message||"No se pudo cargar tenant.")}finally{ke(!1)}}}async function ge(){try{const N=await de("/api/superadmin/flows");B(N.flows||[])}catch(N){console.error("Error loading flows",N)}}async function qe(N){if(N){G(!0);try{const z=await de(`/api/superadmin/tenant-bots?tenant_id=${N}`);S(z.tenant_bots||[])}catch(z){console.error("Error loading tenant bots",z)}finally{G(!1)}}}async function Vt(N,z){try{await ze(`/api/superadmin/tenant-bots/${N}`,{is_active:z}),S(q=>q.map(ee=>ee.id===N?{...ee,is_active:z}:ee))}catch(q){p(q.message||"Error al cambiar estado del bot.")}}async function Bn(N){if(j)try{const z=await Te("/api/superadmin/tenant-bots",{tenant_id:j,flow_id:N});z.tenant_bot&&(S(q=>[z.tenant_bot,...q]),Z({message:"Bot agregado correctamente"}))}catch(z){p(z.message||"Error al agregar bot."),Z({type:"error",message:z.message||"Error al agregar bot"})}}async function ns(N){const z=W.find(q=>q.id===N);try{await Fn(`/api/superadmin/tenant-bots/${N}`),S(q=>q.filter(ee=>ee.id!==N)),Z({message:"Bot eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{if(!z)return;const q=await Te("/api/superadmin/tenant-bots",{tenant_id:z.tenant_id,flow_id:z.flow_id});q!=null&&q.tenant_bot&&z.is_active===!1&&await ze(`/api/superadmin/tenant-bots/${q.tenant_bot.id}`,{is_active:!1}),await qe(j),Z({message:"Bot restaurado"})}catch(q){Z({type:"error",message:(q==null?void 0:q.message)||"No se pudo restaurar el bot"})}}})}catch(q){p(q.message||"Error al eliminar bot."),Z({type:"error",message:q.message||"Error al eliminar bot"})}}async function Ms(N){p(""),ae(`/superadmin/tenants/${N.id}`)}function zn(){const N=m.name.trim(),z=m.slug.trim(),q=m.db_url.trim();return!N||!z?{ok:!1,message:"Nombre y subdominio son requeridos."}:!j&&!q?{ok:!1,message:"Tenant DB URL es requerido."}:(m.brand_name.trim()||m.logo_url.trim()||m.brand_primary||m.brand_accent||m.brand_bg)&&!m.brand_name.trim()?{ok:!1,message:"Brand name es requerido."}:(m.odoo_base_url||m.odoo_db_name||m.odoo_username||m.odoo_password)&&(!m.odoo_base_url||!m.odoo_db_name||!m.odoo_username||!j&&!m.odoo_password)?{ok:!1,message:"Odoo incompleto: base_url, db_name, username, password."}:{ok:!0}}function Ft(N){if(!N)return"Verificacion completada";const z=[];if(N.database){const q=N.database.ok?"DB ok":"DB error",ee=typeof N.database.latency_ms=="number"?` (${N.database.latency_ms}ms)`:"";z.push(`${q}${ee}`)}if(N.odoo){const q=N.odoo.ok?"Odoo ok":"Odoo error",ee=typeof N.odoo.latency_ms=="number"?` (${N.odoo.latency_ms}ms)`:"";z.push(`${q}${ee}`)}return z.length?`Verificacion completada: ${z.join(" | ")}`:"Verificacion completada"}function ss(N){if(N!=null&&N.database&&!N.database.ok){const z=N.database.details||N.database.error;return R(z||"Error en DB")}if(N!=null&&N.odoo&&!N.odoo.ok){const z=N.odoo.details||N.odoo.error;return R(z||"Error en Odoo")}return"No se pudo validar conexion"}function R(N){const z=(N||"").toString(),q=z.toLowerCase();return q.includes("missing")?"Completa los campos de Odoo":q.includes("db_connection_failed")?"No se pudo conectar a la base de datos":q.includes("odoo")&&q.includes("failed")?"No se pudo autenticar en Odoo":z||"No se pudo validar conexion"}async function Ne(){const N=zn();if(!N.ok){L(N.message);return}u(!0),L("Verificando conexion...");try{const z=await Te("/api/superadmin/tenants/validate",{db_url:m.db_url.trim(),odoo_base_url:m.odoo_base_url.trim(),odoo_db_name:m.odoo_db_name.trim(),odoo_username:m.odoo_username.trim(),odoo_password:m.odoo_password.trim()}),q=Ft(z.checks);L(q),z.ok?Z({message:q}):Z({type:"error",message:ss(z.checks)})}catch(z){L("Error validando conexion"),Z({type:"error",message:z.message||"No se pudo validar conexion"})}finally{u(!1)}}async function Is(N){var q;if(N.preventDefault(),Q&&!Jt)return;const z=zn();if(!z.ok){p(z.message);return}try{g(!0),p("");let ee=j;if(ee?await ze(`/api/superadmin/tenants/${ee}`,{name:m.name.trim(),slug:m.slug.trim(),plan:m.plan.trim(),is_active:C}):ee=(q=(await Te("/api/superadmin/tenants",{name:m.name.trim(),slug:m.slug.trim(),plan:m.plan.trim()})).tenant)==null?void 0:q.id,!ee)throw new Error("tenant_not_ready");if(m.db_url.trim()&&await Te(`/api/superadmin/tenants/${ee}/database`,{db_url:m.db_url.trim()}),m.brand_name.trim()||m.logo_url.trim()||m.brand_primary||m.brand_accent||m.brand_bg){const Qe={};m.brand_primary&&(Qe.primary=m.brand_primary),m.brand_accent&&(Qe.accent=m.brand_accent),m.brand_bg&&(Qe.bg=m.brand_bg),await ze("/api/superadmin/branding",{tenant_id:ee,brand_name:m.brand_name.trim(),logo_url:m.logo_url.trim()||null,colors:Object.keys(Qe).length?Qe:null})}if(m.odoo_base_url||m.odoo_db_name||m.odoo_username||m.odoo_password){const Qe={tenant_id:ee,base_url:m.odoo_base_url.trim(),db_name:m.odoo_db_name.trim(),username:m.odoo_username.trim()};m.odoo_password.trim()&&(Qe.password=m.odoo_password.trim()),await ze("/api/superadmin/odoo",Qe)}if(await ce(),j){const Qe=M(m);b(Qe),Y(Qe),fe(C),L("Cambios guardados"),Z({message:"Tenant actualizado correctamente"})}else Be(),Z({message:"Tenant creado correctamente"})}catch(ee){p(ee.message||"No se pudo guardar tenant."),Z({type:"error",message:ee.message||"No se pudo guardar tenant"})}finally{g(!1)}}async function $n(){if(!j)return;const N=!C;try{g(!0),p(""),await ze(`/api/superadmin/tenants/${j}`,{is_active:N}),I(N),fe(N),L(N?"Tenant reactivado":"Tenant bloqueado"),await ce()}catch(z){p(z.message||"No se pudo cambiar estado del tenant.")}finally{g(!1)}}const Jt=v.useMemo(()=>!j&&!Q||C!==le?!0:Object.keys(U).some(N=>{const z=String(m[N]??""),q=String(U[N]??"");return z!==q}),[le,U,C,j,Q,m]);return v.useEffect(()=>{if(Q&&T&&T!==j){ie(T);return}X&&(j||xe)&&Be()},[xe,j,X,Q,T]),s.jsxs("div",{className:"sa-shell",children:[s.jsxs("aside",{className:"sa-rail",children:[s.jsx("div",{className:"sa-rail-logo",children:"PRZV"}),s.jsxs("button",{type:"button",className:`sa-rail-btn ${V?"":"active"}`,onClick:Ut,children:[s.jsx(By,{className:"sa-rail-icon"}),s.jsx("span",{children:"Dashboard"})]}),s.jsxs("button",{type:"button",className:`sa-rail-btn ${X?"active":""}`,onClick:He,children:[s.jsx(Zl,{className:"sa-rail-icon"}),s.jsx("span",{children:"Nuevo"})]}),s.jsxs("button",{type:"button",className:"sa-rail-btn",children:[s.jsx(zy,{className:"sa-rail-icon"}),s.jsx("span",{children:"Ajustes"})]}),s.jsxs("div",{className:"sa-rail-footer",children:[s.jsx("div",{className:"sa-avatar",children:"SA"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-role",children:"Superadmin"}),s.jsx("div",{className:"sa-meta",children:"Control plane"})]})]})]}),s.jsxs("main",{className:"sa-main",children:[!V&&s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sa-topbar",children:[s.jsxs("div",{children:[s.jsx("div",{className:"sa-kicker",children:"Panel de control Perzivalh"}),s.jsxs("div",{className:"sa-title",children:["Sistema operativo ",s.jsx("span",{className:"sa-dot"})]}),s.jsx("div",{className:"sa-subtitle",children:"Estado general del entorno"})]}),s.jsxs("div",{className:"sa-top-actions",children:[s.jsx("span",{className:"sa-version",children:"v0.4 stable"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:ce,children:"Recargar"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:r,children:"Cerrar sesion"}),s.jsx("button",{className:"sa-btn primary",type:"button",onClick:He,children:"Nuevo tenant"})]})]}),s.jsxs("section",{className:"sa-kpi-grid",children:[s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Total de empresas (tenants)"}),s.jsx("div",{className:"sa-kpi-value",children:me}),s.jsxs("div",{className:"sa-kpi-meta",children:["+",Ve," activas"]})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Usuarios activos totales"}),s.jsx("div",{className:"sa-kpi-value",children:"--"}),s.jsx("div",{className:"sa-kpi-meta",children:"En tiempo real"})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Mensajes hoy"}),s.jsx("div",{className:"sa-kpi-value",children:"--"}),s.jsx("div",{className:"sa-kpi-meta",children:"Canal API"})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Conexiones Odoo activas"}),s.jsxs("div",{className:"sa-kpi-value",children:[We,"%"]}),s.jsxs("div",{className:"sa-kpi-meta",children:[Fe," sincronizadas"]})]})]}),s.jsxs("section",{className:"sa-table-card",children:[s.jsxs("div",{className:"sa-table-header",children:[s.jsxs("div",{className:"sa-search",children:[s.jsx($y,{className:"sa-search-icon"}),s.jsx("input",{value:c,onChange:N=>h(N.target.value),placeholder:"Filtrar empresas..."})]}),s.jsxs("div",{className:"sa-table-actions",children:[s.jsx("button",{className:"sa-btn ghost",type:"button",children:"Ordenar por salud"}),s.jsx("button",{className:"sa-btn ghost",type:"button",children:"Exportar CSV"})]})]}),s.jsxs("div",{className:"sa-table",children:[s.jsxs("div",{className:"sa-table-head",children:[s.jsx("div",{children:"ID referencia"}),s.jsx("div",{children:"Nombre de la empresa"}),s.jsx("div",{children:"Estado"}),s.jsx("div",{children:"Uso de recursos"}),s.jsx("div",{children:"Tiempo de actividad"}),s.jsx("div",{children:"Acciones"})]}),ue.length?ue.map(N=>{var ye;const z=De(N.id||"tenant"),q=N.has_database?"db":"no-db",ee=N.has_database;return s.jsxs("div",{className:"sa-table-row",children:[s.jsx("div",{className:"sa-ref",children:((ye=N.slug)==null?void 0:ye.toUpperCase())||"TENANT"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-tenant-name",children:N.name}),s.jsx("div",{className:"sa-tenant-meta",children:N.id.slice(0,8)})]}),s.jsx("div",{className:`sa-status ${N.is_active?"ok":"warn"}`,children:N.is_active?"activo":"inactivo"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-progress",children:s.jsx("span",{className:`sa-progress-fill ${q}`,style:{width:`${z}%`}})}),s.jsxs("div",{className:"sa-tenant-meta",children:[z,"% carga"]})]}),s.jsx("div",{className:"sa-tenant-meta",children:ut(N.created_at)}),s.jsx("div",{children:s.jsxs("div",{className:"sa-action-group",children:[s.jsx("button",{className:"sa-action",type:"button",onClick:()=>_(N.id),disabled:!ee||k===N.id,children:ee?k===N.id?"Entrando...":"Entrar":"Sin DB"}),s.jsx("button",{className:"sa-link",type:"button",onClick:()=>Ms(N),children:s.jsx(Uy,{className:"sa-link-icon"})})]})})]},N.id)}):s.jsx("div",{className:"sa-empty",children:"Sin tenants para mostrar."})]}),s.jsxs("div",{className:"sa-footer-note",children:["Mostrando ",ue.length||0," empresas en produccion"]})]})]}),V&&s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sa-create-header",children:[s.jsx("button",{className:"sa-back",type:"button",onClick:Ut,children:"Volver al dashboard"}),s.jsx("div",{className:"sa-create-title",children:Q?"Editar tenant":"Registrar nuevo tenant"}),s.jsxs("div",{className:"sa-create-actions",children:[s.jsx("div",{className:"sa-create-meta",children:"Modo: superadmin"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:r,children:"Cerrar sesion"})]})]}),x?s.jsx("div",{className:"sa-alert",children:x}):null,s.jsxs("form",{className:"sa-form",onSubmit:Is,children:[s.jsxs("div",{className:"sa-form-grid sa-form-grid-2",children:[s.jsxs("div",{className:"sa-form-section",children:[s.jsx("div",{className:"sa-section-title",children:"Identidad del tenant"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Nombre de la empresa"}),s.jsx("input",{value:m.name,onChange:N=>b({...m,name:N.target.value}),placeholder:"Ej. Empresa Alfa"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Subdominio reservado"}),s.jsx("input",{value:m.slug,onChange:N=>b({...m,slug:N.target.value}),placeholder:"alfa-salud"})]}),s.jsxs("div",{className:"sa-field sa-field-row",children:[s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Plan"}),s.jsxs("select",{value:m.plan,onChange:N=>b({...m,plan:N.target.value}),children:[s.jsx("option",{value:"",children:"Seleccionar"}),Iy.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))]})]}),Q&&s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Estado del tenant"}),s.jsxs("select",{value:C?"active":"inactive",onChange:N=>I(N.target.value==="active"),children:[s.jsx("option",{value:"active",children:"Activo"}),s.jsx("option",{value:"inactive",children:"Bloqueado"})]})]})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Brand name"}),s.jsx("input",{value:m.brand_name,onChange:N=>b({...m,brand_name:N.target.value}),placeholder:"Perzivalh"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Logo URL"}),s.jsx("input",{value:m.logo_url,onChange:N=>b({...m,logo_url:N.target.value}),placeholder:"https://"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Paleta de colores"}),s.jsxs("div",{className:"sa-color-grid",children:[s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Primario"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_primary,onChange:N=>b({...m,brand_primary:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_primary,onChange:N=>b({...m,brand_primary:N.target.value})})]})]}),s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Accent"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_accent,onChange:N=>b({...m,brand_accent:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_accent,onChange:N=>b({...m,brand_accent:N.target.value})})]})]}),s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Fondo"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_bg,onChange:N=>b({...m,brand_bg:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_bg,onChange:N=>b({...m,brand_bg:N.target.value})})]})]})]})]}),!Q&&s.jsx("div",{className:"sa-note",children:"Nota: al registrar un tenant se inicia el aprovisionamiento en el entorno de produccion."})]}),s.jsxs("div",{className:"sa-form-section",children:[s.jsx("div",{className:"sa-section-title",children:"Variables de entorno (envs)"}),s.jsxs("div",{className:"sa-subsection",children:[s.jsx("div",{className:"sa-subsection-title",children:"Base de datos"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Tenant DB URL"}),s.jsx("input",{value:m.db_url,onChange:N=>b({...m,db_url:N.target.value}),placeholder:"postgresql://..."})]})]}),s.jsxs("div",{className:"sa-subsection",children:[s.jsx("div",{className:"sa-subsection-title",children:"Odoo (opcional)"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo Base URL"}),s.jsx("input",{value:m.odoo_base_url,onChange:N=>b({...m,odoo_base_url:N.target.value}),placeholder:"https://odoo-instancia"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo DB Name"}),s.jsx("input",{value:m.odoo_db_name,onChange:N=>b({...m,odoo_db_name:N.target.value}),placeholder:"db_tenant_prod"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo User"}),s.jsx("input",{value:m.odoo_username,onChange:N=>b({...m,odoo_username:N.target.value}),placeholder:"usuario@empresa.com"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo Password (opcional)"}),s.jsx("input",{type:"password",value:m.odoo_password,onChange:N=>b({...m,odoo_password:N.target.value}),placeholder:"********"})]})]})]})]}),s.jsxs("div",{className:"sa-form-actions",children:[s.jsx("div",{className:"sa-status-note",children:Q?xe?"Cargando datos...":Jt?"Cambios pendientes":"Sin cambios":y}),s.jsx("div",{className:"sa-form-buttons",children:Q?s.jsxs(s.Fragment,{children:[Jt&&s.jsx("button",{className:"sa-btn primary",type:"submit",disabled:f,children:f?"Guardando...":"Guardar cambios"}),s.jsx("button",{className:"sa-btn danger",type:"button",onClick:$n,disabled:f||!j,children:C?"Bloquear tenant":"Reactivar tenant"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:Ne,disabled:w||f,children:w?"Validando...":"Validar conexion"}),s.jsx("button",{className:"sa-btn primary",type:"submit",disabled:f,children:f?"Guardando...":"Desplegar instancia"})]})})]})]}),j?s.jsx(Gy,{channels:l.filter(N=>N.tenant_id===j),tenantId:j,onRefresh:ce}):s.jsx("div",{style:{marginTop:"2rem",padding:"1rem",border:"1px dashed rgba(255,255,255,0.2)",borderRadius:"12px",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textAlign:"center"},children:"Crea el tenant primero para configurar las lneas de WhatsApp."}),j&&s.jsx(My,{tenantId:j,tenantBots:W,availableFlows:Ce,loading:H,onToggleBot:Vt,onAddBot:Bn,onRemoveBot:ns})]})]})]})}const Bu=["open","pending","assigned"],zu=["admin","recepcion","caja","marketing","doctor"],rn={admin:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!0},campaigns:{read:!0,write:!0},settings:{read:!0,write:!0}},settings:{general:{read:!0,write:!0},users:{read:!0,write:!0},bot:{read:!0,write:!0},templates:{read:!0,write:!0},audit:{read:!0,write:!0},odoo:{read:!0,write:!0}}},recepcion:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},caja:{modules:{chat:{read:!0,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},marketing:{modules:{chat:{read:!1,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!0,write:!0},settings:{read:!0,write:!1}},settings:{general:{read:!0,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!0,write:!0},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},doctor:{modules:{chat:{read:!0,write:!1},dashboard:{read:!1,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}}};function Ki(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleString()}function Yy(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString()}function Ky(e){if(!e)return"-";const t=new Date(e);if(Number.isNaN(t.getTime()))return"-";const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=Math.round((r-a)/864e5);return i===0?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i===1?"Ayer":["Dom","Lun","Mar","Mie","Jue","Vie","Sab"][t.getDay()]}function Xy(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=Math.round((r-a)/864e5);if(i===0)return"Hoy";if(i===1)return"Ayer";const l=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],o=`${t.getDate()} ${l[t.getMonth()]}`;return t.getFullYear()!==n.getFullYear()?`${o} ${t.getFullYear()}`:o}function K(e){return e?typeof e=="string"?e:e.message||"Error inesperado":"Error inesperado"}function Jy(e,t){return e?t.includes(e.role):!1}function Xi(e){if(!e||typeof e!="object")return{...rn};const t={...rn};return Object.entries(e).forEach(([n,r])=>{var a,i;!r||typeof r!="object"||(t[n]={modules:{...(a=rn[n])==null?void 0:a.modules,...r.modules},settings:{...(i=rn[n])==null?void 0:i.settings,...r.settings}})}),t}function at(e,t,n,r="read"){var i;const a=(i=e==null?void 0:e[t])==null?void 0:i[n];return a?!!a[r]:!1}function Ji(e){const t=n=>n.status==="pending"&&!n.assigned_user_id?0:n.status==="pending"&&n.assigned_user_id?1:n.status==="assigned"?2:3;return[...e].sort((n,r)=>{const a=t(n),i=t(r);if(a!==i)return a-i;const l=new Date(n.last_message_at||n.created_at||0).getTime();return new Date(r.last_message_at||r.created_at||0).getTime()-l})}function Zy(e){const t=new URLSearchParams;Object.entries(e||{}).forEach(([r,a])=>{a==null||a===""||t.append(r,a)});const n=t.toString();return n?`?${n}`:""}function $u(e){if(!e)return"?";const t=e.trim();return t?t[0].toUpperCase():"?"}function Uu(e){const t=String(e||"").replace("#","").trim();if(t.length!==6)return null;const n=Number.parseInt(t,16);return Number.isNaN(n)?null:{r:n>>16&255,g:n>>8&255,b:n&255}}function Zi(e,t=0,n=255){return Math.min(n,Math.max(t,e))}function da(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t})`}function ex(e,t=.18){return{r:Zi(Math.round(e.r*(1-t))),g:Zi(Math.round(e.g*(1-t))),b:Zi(Math.round(e.b*(1-t)))}}function Vu(e){var o,c,h;if(typeof document>"u")return;const t=document.documentElement.style;if(!(e!=null&&e.colors)){t.removeProperty("--accent"),t.removeProperty("--accent-strong"),t.removeProperty("--accent-soft"),t.removeProperty("--accent-soft-2"),t.removeProperty("--scroll-thumb"),t.removeProperty("--scroll-thumb-hover");return}const n=((o=e.colors)==null?void 0:o.primary)||((c=e.colors)==null?void 0:c.accent),r=((h=e.colors)==null?void 0:h.accent)||n,a=Uu(n),i=Uu(r);if(!a||!i)return;const l=ex(i,.22);t.setProperty("--accent",`#${n.replace("#","")}`),t.setProperty("--accent-strong",`#${r.replace("#","")}`),t.setProperty("--accent-soft",da(i,.18)),t.setProperty("--accent-soft-2",da(i,.12)),t.setProperty("--scroll-thumb",da(l,.45)),t.setProperty("--scroll-thumb-hover",da(l,.65))}function tx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M4.5 5.5h15v10H8l-3.5 3.5V5.5Z",strokeWidth:"1.8",strokeLinejoin:"round"}),s.jsx("path",{d:"M8 9h8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M8 12.5h5",strokeWidth:"1.8",strokeLinecap:"round"})]})}function nx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"})]})}function sx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M6 9a6 6 0 1 1 12 0c0 4.2 2 5.5 2 5.5H4S6 13.2 6 9Z",strokeWidth:"1.8",strokeLinejoin:"round"}),s.jsx("path",{d:"M9.5 19a2.5 2.5 0 0 0 5 0",strokeWidth:"1.8"})]})}function rx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"2",strokeLinecap:"round"})]})}function ax(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"4",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 3v2.5",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M12 18.5V21",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M3 12h2.5",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M18.5 12H21",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5.2 5.2l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M17 17l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5.2 18.8 7 17",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M17 7l1.8-1.8",strokeWidth:"1.8",strokeLinecap:"round"})]})}function ix(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M20 14.2A8.5 8.5 0 1 1 9.8 4 6.5 6.5 0 0 0 20 14.2Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function lx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.8"}),s.jsx("path",{d:"M16.5 16.5 21 21",strokeWidth:"1.8",strokeLinecap:"round"})]})}function ox(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function cx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"3.5",y:"6",width:"11",height:"12",rx:"2",strokeWidth:"1.8"}),s.jsx("path",{d:"m14.5 10 6-3v10l-6-3",strokeWidth:"1.8"})]})}function ux(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M6.5 4.5 9 3l2.5 4-2.5 1.5c1.2 2.3 3.2 4.3 5.5 5.5L16 11l4 2.5-1.5 2.5c-.7 1.2-2.2 1.7-3.6 1.3a15.9 15.9 0 0 1-7.7-7.7c-.4-1.4.1-2.9 1.3-3.6Z",strokeWidth:"1.6",strokeLinejoin:"round"})})}function dx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 10v6",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"7.5",r:"1",fill:"currentColor"})]})}function hx(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"m4 12 15-7-6 14-2.5-5.2L4 12Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function fx(){const[e,t]=v.useState(localStorage.getItem("token")||""),[n,r]=v.useState(()=>typeof window<"u"&&localStorage.getItem("superadmin_token")||""),[a,i]=v.useState(null),[l,o]=v.useState(null),[c,h]=v.useState(null),[x,p]=v.useState([]),[y,L]=v.useState({id:"",display_name:""}),[m,b]=v.useState(()=>{if(typeof window>"u")return{};try{return JSON.parse(localStorage.getItem("last_read_map")||"{}")}catch{return{}}}),[w,u]=v.useState({email:"",password:""}),[f,g]=v.useState(""),[k,P]=v.useState("chats"),[j,O]=v.useState(()=>typeof window<"u"?window.location.pathname:"/"),[C,I]=v.useState(()=>localStorage.getItem("theme")||"light"),[U,Y]=v.useState(!1),[le,fe]=v.useState(!1),[xe,ke]=v.useState(!1),[ne,Ce]=v.useState(!0),[B,W]=v.useState(!1),S=v.useRef(null),H=v.useRef(null),G=v.useRef(0),[Z,T]=v.useState("users"),[X,Q]=v.useState("list"),[V,ae]=v.useState(()=>Xi(null)),[ce,ue]=v.useState(!1),[me,Ve]=v.useState(!1),[Fe,We]=v.useState(!1),ut=v.useMemo(()=>{const d=Object.keys(V||{}).filter(E=>!zu.includes(E));return[...zu,...d]},[V]),[De,Be]=v.useState({status:"",assigned_user_id:"",tag:"",search:"",phone_number_id:""}),He=j.startsWith("/superadmin"),[Ut,_]=v.useState([]),[M,ie]=v.useState(null),[ge,qe]=v.useState([]),[Vt,Bn]=v.useState(""),[ns,Ms]=v.useState("text"),[zn,Ft]=v.useState([]),[ss,R]=v.useState([]),[Ne,Is]=v.useState(""),[$n,Jt]=v.useState(""),[N,z]=v.useState(""),[q,ee]=v.useState(!1),[ye,Wt]=v.useState({name:"",color:"#6b7280"}),[Qe,dt]=v.useState(!1),[Zt,te]=v.useState(""),{pushToast:J}=ec(),Bs=v.useRef(new Map),zs=v.useRef(new Map),$s=v.useRef(new Map),Us=v.useRef(new Map),tc=v.useRef(new Map),[$r,xf]=v.useState(null),[Vs,Fs]=v.useState([]),[jf,Nf]=v.useState([]),[wf,_f]=v.useState([]),[kf,Sf]=v.useState(""),[mx,gx]=v.useState(null),[vx,yx]=v.useState([]),[xx,jx]=v.useState(null),[pn,nc]=v.useState({name:"",template_id:"",scheduled_for:""}),[mn,sc]=v.useState({status:"",tag:"",assigned_user_id:"",verified_only:!1}),[rc,Ws]=v.useState([]),[yt,ac]=v.useState({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),[Ur,vi]=v.useState(null),[Ef,Cf]=v.useState([]),[bf,Tf]=v.useState([]),[rt,ic]=v.useState({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),[Ze,lc]=v.useState({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),[oc,Lf]=v.useState({id:"",name:"",language:"es",category:"",body_preview:"",is_active:!0}),[Af,Rf]=v.useState([]),en=v.useCallback((d,E={})=>{if(typeof window>"u")return;const A=d||"/";if(window.location.pathname===A){O(A);return}E.replace?window.history.replaceState({},"",A):window.history.pushState({},"",A),O(A)},[]),Pf=v.useMemo(()=>Vs.find(d=>d.id===pn.template_id),[Vs,pn.template_id]),Of=v.useMemo(()=>{const d=[...ge].reverse().find(E=>E.type==="note");return(d==null?void 0:d.text)||""},[ge]),Df=v.useMemo(()=>ge.filter(d=>d.type==="note"),[ge]);v.useEffect(()=>{if(typeof window>"u")return;const d=()=>{O(window.location.pathname||"/")};return window.addEventListener("popstate",d),()=>window.removeEventListener("popstate",d)},[]),v.useEffect(()=>{is(e||null)},[e]),v.useEffect(()=>{document.body.dataset.theme=C,localStorage.setItem("theme",C)},[C]),v.useEffect(()=>{W(!1),Ce(!0),requestAnimationFrame(()=>{Wr()}),M&&yi(M)},[M==null?void 0:M.id]),v.useEffect(()=>{k==="chats"&&(W(!1),Ce(!0),requestAnimationFrame(()=>{Wr()}))},[k,M==null?void 0:M.id]),v.useEffect(()=>{M&&(ne?Wr():W(!0))},[ge,M==null?void 0:M.id,ne]),v.useEffect(()=>{k!=="chats"&&Ce(!1)},[k]),v.useEffect(()=>{if(!e)return;let d=!0;return de("/api/me").then(E=>{d&&i(E.user)}).catch(()=>{d&&(t(""),i(null))}),()=>{d=!1}},[e]),v.useEffect(()=>{if(!a||a.role==="superadmin"){o(null),p([]),Vu(null);return}let d=!0;return de("/api/branding").then(E=>{d&&o(E.branding||null)}).catch(()=>{d&&o(null)}),de("/api/tenant").then(E=>{d&&h(E.tenant||null)}).catch(()=>{d&&h(null)}),de("/api/channels").then(E=>{d&&p(E.channels||[])}).catch(()=>{d&&p([])}),()=>{d=!1}},[a]),v.useEffect(()=>{Vu(l)},[l]),v.useEffect(()=>{if(a){if(a.role==="superadmin"){He||en("/superadmin",{replace:!0});return}He&&en("/",{replace:!0})}},[a,He,en]),v.useEffect(()=>{a&&a.role!=="superadmin"&&(Mf(),Vr())},[a]),v.useEffect(()=>{a&&a.role!=="superadmin"&&If()},[a]),v.useEffect(()=>{!a||k!=="chats"||a.role!=="superadmin"&&Bf()},[a,k,De]),v.useEffect(()=>{a&&a.role!=="superadmin"&&(k==="dashboard"&&uc(),k==="campaigns"&&(rs(),Hr()))},[a,k]),v.useEffect(()=>{if(!a||k!=="admin")return;const d=(V==null?void 0:V[a.role])||rn[a.role],E=at(d,"settings","users"),A=at(d,"settings","bot"),$=at(d,"settings","general"),pe=at(d,"settings","templates"),re=at(d,"settings","audit");Z==="users"&&E&&Hs(),Z==="bot"&&A&&op(),Z==="general"&&$&&gn(),Z==="templates"&&pe&&rs(),Z==="audit"&&re&&wp()},[a,k,Z,V]),v.useEffect(()=>{if(!a||k!=="admin")return;const d=(V==null?void 0:V[a.role])||rn[a.role],A=["general","users","bot","templates","audit","odoo"].filter($=>at(d,"settings",$));if(!A.length){P(result.user.role==="superadmin"?"superadmin":"chats");return}A.includes(Z)||T(A[0])},[a,k,Z,V]),v.useEffect(()=>{if(!e||(a==null?void 0:a.role)==="superadmin")return;const d=ly(e),E={current:null},A=()=>{if(E.current)return E.current;const re=new Audio("/sounds/notify.wav");return re.volume=1,E.current=re,re},$=()=>{const re=A();re.play().then(()=>{re.pause(),re.currentTime=0}).catch(()=>{})};window.addEventListener("click",$,{once:!0}),window.addEventListener("touchstart",$,{once:!0});const pe=()=>{if(!(typeof window>"u"))try{const re=A();re.currentTime=0,re.play().catch(()=>{})}catch{}};return d.on("conversation:update",({conversation:re})=>{const we=tc.current.get(re.id);tc.current.set(re.id,re.status),re.status==="pending"&&!re.assigned_user_id&&we!=="pending"&&(pe(),J({message:"Nueva conversacin pendiente"})),_(je=>{const ht=je.map(tn=>tn.id===re.id?{...tn,...re}:tn);return ht.find(tn=>tn.id===re.id)||ht.push(re),Ji(ht)}),ie(je=>(je==null?void 0:je.id)===re.id?{...je,...re}:je)}),d.on("message:new",({conversation:re,message:we})=>{re.status==="pending"&&!re.assigned_user_id&&pe();const je={...re,last_message_text:(we==null?void 0:we.text)||null,last_message_type:(we==null?void 0:we.type)||null,last_message_direction:(we==null?void 0:we.direction)||null,last_message_at:(we==null?void 0:we.created_at)||re.last_message_at};_(ht=>{const tn=ht.map(Qs=>Qs.id===re.id?{...Qs,...je}:Qs);return tn.find(Qs=>Qs.id===re.id)||tn.push(je),Ji(tn)}),ie(ht=>(ht==null?void 0:ht.id)===re.id?{...ht,...je}:ht),qe(ht=>!M||M.id!==re.id?ht:(yi(je),[...ht,we]))}),()=>{d.disconnect()}},[e,M]),v.useEffect(()=>{if(!a)return;if(a.role==="superadmin"){k!=="superadmin"&&P("superadmin");return}const d=(V==null?void 0:V[a.role])||rn[a.role],E=at(d,"modules","chat"),A=at(d,"modules","dashboard"),$=at(d,"modules","campaigns"),pe=at(d,"modules","settings");k==="chats"&&!E&&P(A?"dashboard":$?"campaigns":"admin"),k==="dashboard"&&!A&&P(E?"chats":$?"campaigns":"admin"),k==="campaigns"&&!$&&P(E?"chats":A?"dashboard":"admin"),k==="admin"&&!pe&&P(E?"chats":A?"dashboard":"campaigns")},[a,k,V]),v.useEffect(()=>{if(!a||a.role!=="admin"||!ce||!me||Fe)return;const d=setTimeout(()=>{const E=G.current;We(!0),ze("/api/admin/role-permissions",{permissions:V}).then(()=>{G.current===E&&Ve(!1)}).catch(A=>{te(K(A))}).finally(()=>{We(!1)})},350);return()=>clearTimeout(d)},[a,V,me,ce,Fe]);async function Mf(){try{const d=await de("/api/users");R(d.users||[])}catch(d){te(K(d))}}async function If(){try{const d=await de("/api/role-permissions"),E=Xi(d.permissions||null);G.current=0,ae(E),Ve(!1),ue(!0)}catch(d){te(K(d)),ue(!0)}}async function Vr(){try{const d=await de("/api/tags");Ft(d.tags||[])}catch(d){te(K(d))}}async function Bf(){try{const d=Zy(De),E=await de(`/api/conversations${d}`);_(Ji(E.conversations||[]))}catch(d){te(K(d))}}async function zf(d){dt(!0);try{const E=await de(`/api/conversations/${d}`);let A=E.conversation;const $=E.messages||[];if((A==null?void 0:A.status)==="pending"&&!A.assigned_user_id&&(a!=null&&a.id))try{A=(await ze(`/api/conversations/${d}/assign`,{})).conversation}catch(pe){String(K(pe)).includes("already_assigned")&&J({type:"error",message:"Conversacin tomada por otro operador"})}ie(A),qe($),yi(A)}catch(E){te(K(E))}finally{dt(!1)}}async function $f(d){d.preventDefault(),g("");try{const E=await Te("/api/auth/login",{email:w.email,password:w.password});t(E.token),is(E.token),i(E.user),r(""),localStorage.removeItem("superadmin_token");const A=E.user.role==="superadmin";P(A?"superadmin":"chats"),A?en("/superadmin",{replace:!0}):He&&en("/",{replace:!0})}catch{g("Credenciales invalidas")}}function Fr(){t(""),is(null),i(null),_([]),ie(null),qe([]),P("chats"),ke(!1),ae(Xi(null)),ue(!1),Ve(!1),We(!1),G.current=0,r(""),localStorage.removeItem("superadmin_token"),en("/",{replace:!0})}async function cc(d){const E=await Te(`/api/superadmin/tenants/${d}/impersonate`);!n&&e&&(localStorage.setItem("superadmin_token",e),r(e)),t(E.token),is(E.token),i(E.user),P("chats"),en("/",{replace:!0})}function Uf(){const d=n||(typeof window<"u"?localStorage.getItem("superadmin_token"):"");if(!d){Fr();return}localStorage.removeItem("superadmin_token"),r(""),t(d),is(d),i(null),P("chats"),en("/superadmin",{replace:!0})}function Vf(d){ae(E=>typeof d=="function"?d(E):d),G.current+=1,Ve(!0)}function Ff(){I(d=>d==="light"?"dark":"light")}function Wr(){const d=H.current;d&&(d.scrollTop=d.scrollHeight,Ce(!0),W(!1))}function yi(d){!(d!=null&&d.id)||!(d!=null&&d.last_message_at)||b(E=>{const A={...E,[d.id]:d.last_message_at};return localStorage.setItem("last_read_map",JSON.stringify(A)),A})}function Wf(){const d=H.current;if(!d)return;const A=d.scrollHeight-d.scrollTop-d.clientHeight<24;Ce(A),A&&W(!1)}function Hf(){ie(null),qe([])}function qf(d){var E;Bn(d),(E=S.current)==null||E.focus()}async function Qf(d){if(d.preventDefault(),!M||!Vt.trim())return;const E=Vt.trim();Bn("");try{await Te(`/api/conversations/${M.id}/messages`,{text:E,type:ns})}catch(A){te(K(A))}}async function Gf(d){if(d.preventDefault(),!M||!$n.trim())return;const E=$n.trim();Jt("");try{const A=await Te(`/api/conversations/${M.id}/messages`,{text:E,type:"note"});A!=null&&A.message&&qe($=>[...$,A.message]),A!=null&&A.conversation&&ie(A.conversation)}catch(A){te(K(A))}}async function Yf(){if(M)try{const d=await ze(`/api/conversations/${M.id}/assign`);ie(d.conversation)}catch(d){const E=K(d)||"No se pudo tomar la conversacion";J({type:"error",message:E})}}async function Kf(){if(!(!M||!N))try{const d=await ze(`/api/conversations/${M.id}/assign`,{user_id:N});ie(d.conversation),z(""),J({message:"Conversacin reasignada"})}catch(d){const E=K(d)||"No se pudo reasignar";J({type:"error",message:E})}}async function Xf(d){if(M)try{const E=await ze(`/api/conversations/${M.id}/status`,{status:d});ie(E.conversation)}catch(E){te(K(E))}}async function Jf(d){var A;if(!M)return;const E=((A=M.tags)==null?void 0:A.some($=>$.name===d))||!1;if(E){const $=`${M.id}:${d}`;if(Us.current.has($))return;const pe=M,re={...M,tags:(M.tags||[]).filter(je=>je.name!==d)};ie(re);const we=setTimeout(async()=>{try{const je=await Te(`/api/conversations/${pe.id}/tags`,{add:[],remove:[d]});(M==null?void 0:M.id)===pe.id&&ie(je.conversation)}catch(je){(M==null?void 0:M.id)===pe.id&&ie(pe),J({type:"error",message:K(je)||"No se pudo eliminar el tag"})}finally{Us.current.delete($)}},8e3);Us.current.set($,{timer:we,snapshot:pe}),J({message:"Tag eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const je=Us.current.get($);je!=null&&je.timer&&clearTimeout(je.timer),je!=null&&je.snapshot?ie(je.snapshot):ie(pe),Us.current.delete($),J({message:"Eliminacin cancelada"})}});return}try{const $=await Te(`/api/conversations/${M.id}/tags`,{add:E?[]:[d],remove:E?[d]:[]});ie($.conversation)}catch($){te(K($))}}async function Zf(d){if(d.preventDefault(),!Ne.trim()||!M)return;const E=Ne.trim();Is("");try{const A=await Te(`/api/conversations/${M.id}/tags`,{add:[E]});ie(A.conversation),await Vr()}catch(A){te(K(A))}}async function ep(d){d.preventDefault();const E=ye.name.trim();if(!E){te("Completa el nombre de la etiqueta");return}try{await Te("/api/tags",{name:E,color:ye.color||null}),Wt({name:"",color:"#6b7280"}),await Vr(),J({message:"Etiqueta creada"})}catch(A){te(K(A))}}async function tp(d,E){if(d)try{await Fn(`/api/tags/${d}`),ie(A=>A&&{...A,tags:(A.tags||[]).filter($=>$.name!==E)}),await Vr(),J({message:"Etiqueta eliminada"})}catch(A){te(K(A))}}async function uc(){try{const d=await de("/api/dashboard/metrics");xf(d)}catch(d){te(K(d))}}async function rs(){try{const d=await de("/api/templates").catch(()=>de("/api/admin/templates"));Fs(d.templates||[])}catch(d){te(K(d))}}async function Hr(){try{const d=await de("/api/admin/campaigns");Nf(d.campaigns||[])}catch(d){te(K(d))}}async function np(d){Sf(d);try{const E=await de(`/api/admin/campaigns/${d}/messages`);_f(E.messages||[])}catch(E){te(K(E))}}async function sp(d){if(d.preventDefault(),!pn.name.trim()||!pn.template_id){te("Completa el nombre y plantilla");return}const E={};mn.status&&(E.status=mn.status),mn.tag&&(E.tag=mn.tag.trim()),mn.assigned_user_id&&(E.assigned_user_id=mn.assigned_user_id),mn.verified_only&&(E.verified_only=!0);try{await Te("/api/admin/campaigns",{name:pn.name.trim(),template_id:pn.template_id,audience_filter:E,scheduled_for:pn.scheduled_for||null}),nc({name:"",template_id:"",scheduled_for:""}),sc({status:"",tag:"",assigned_user_id:"",verified_only:!1}),await Hr(),J({message:"Campaa creada correctamente"})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al crear campaa"})}}async function rp(d){try{await Te(`/api/admin/campaigns/${d}/send`,{}),await Hr()}catch(E){te(K(E))}}async function ap(){try{await de("/api/templates/sync"),await rs()}catch(d){te(K(d))}}async function Hs(){try{const d=await de("/api/admin/users");Ws(d.users||[])}catch(d){te(K(d))}}async function ip(d){if(d.preventDefault(),!yt.name.trim()||!yt.role){te("Completa los campos requeridos");return}try{yt.id?(await ze(`/api/admin/users/${yt.id}`,{name:yt.name.trim(),role:yt.role,is_active:yt.is_active,password:yt.password||void 0}),J({message:"Usuario actualizado correctamente"})):(await Te("/api/admin/users",{name:yt.name.trim(),email:yt.email.trim().toLowerCase(),role:yt.role,password:yt.password}),J({message:"Usuario creado correctamente"})),ac({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),await Hs()}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al guardar usuario"})}}async function lp(d){if(!d||Bs.current.has(d))return;let E=null;try{E=rc.slice(),Ws($=>$.filter(pe=>pe.id!==d));const A=setTimeout(async()=>{try{await Fn(`/api/admin/users/${d}`),await Hs(),J({message:"Usuario eliminado definitivamente"})}catch($){E?Ws(E):await Hs(),J({type:"error",message:K($)||"No se pudo eliminar el usuario"})}finally{Bs.current.delete(d)}},8e3);Bs.current.set(d,{timer:A,snapshot:E}),J({message:"Usuario eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const $=Bs.current.get(d);$!=null&&$.timer&&clearTimeout($.timer),$!=null&&$.snapshot?Ws($.snapshot):E?Ws(E):await Hs(),Bs.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al eliminar usuario"})}}async function op(){try{const d=await de("/api/admin/settings");vi(d.settings)}catch(d){te(K(d))}}async function cp(){if(Ur)try{const d=await ze("/api/admin/settings",{bot_enabled:Ur.bot_enabled,auto_reply_enabled:Ur.auto_reply_enabled});vi(d.settings)}catch(d){te(K(d))}}async function gn(){try{const[d,E]=await Promise.all([de("/api/admin/branches"),de("/api/admin/services")]);Cf(d.branches||[]),Tf(E.services||[])}catch(d){te(K(d))}}async function up(){try{const d=await de("/api/channels");p(d.channels||[])}catch{p([])}}function dp(d){L({id:d.id,display_name:d.display_name||""})}async function hp(d){if(d.preventDefault(),!!y.id)try{await ze(`/api/channels/${y.id}`,{display_name:y.display_name.trim()}),L({id:"",display_name:""}),await up(),J({message:"Canal actualizado correctamente"})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al guardar canal"})}}async function fp(d){const E=V==null?void 0:V[d];if(!(!d||zs.current.has(d)))try{ae($=>{const pe={...$};return delete pe[d],pe});const A=setTimeout(async()=>{try{await Fn(`/api/admin/role-permissions/${d}`),J({message:"Rol eliminado definitivamente"})}catch($){E&&ae(pe=>({...pe,[d]:E})),J({type:"error",message:K($)||"No se pudo eliminar el rol"})}finally{zs.current.delete(d)}},8e3);zs.current.set(d,{timer:A,currentPermissions:E}),J({message:"Rol eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const $=zs.current.get(d);$!=null&&$.timer&&clearTimeout($.timer),$!=null&&$.currentPermissions&&ae(pe=>({...pe,[d]:$.currentPermissions})),zs.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al eliminar rol"})}}async function pp(d){if(d.preventDefault(),!rt.code.trim()||!rt.name.trim()){te("Completa codigo y nombre");return}const E={code:rt.code.trim(),name:rt.name.trim(),address:rt.address.trim(),lat:rt.lat!==""?Number(rt.lat):0,lng:rt.lng!==""?Number(rt.lng):0,hours_text:rt.hours_text.trim(),phone:rt.phone.trim()||null,is_active:rt.is_active};try{rt.id?(await ze(`/api/admin/branches/${rt.id}`,E),J({message:"Sucursal actualizada correctamente"})):(await Te("/api/admin/branches",E),J({message:"Sucursal creada correctamente"})),ic({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),await gn()}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al guardar sucursal"})}}async function mp(d){try{await Fn(`/api/admin/branches/${d}`),await gn(),J({message:"Sucursal eliminada correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await ze(`/api/admin/branches/${d}`,{is_active:!0}),await gn(),J({message:"Sucursal restaurada"})}catch(E){J({type:"error",message:K(E)||"No se pudo restaurar la sucursal"})}}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar sucursal"})}}async function gp(d){if(d.preventDefault(),!Ze.code.trim()||!Ze.name.trim()){te("Completa codigo y nombre");return}const E={code:Ze.code.trim(),name:Ze.name.trim(),subtitle:Ze.subtitle.trim()||null,description:Ze.description.trim(),price_bob:Ze.price_bob?Number(Ze.price_bob):0,duration_min:Ze.duration_min?Number(Ze.duration_min):null,image_url:Ze.image_url.trim()||null,is_featured:Ze.is_featured,is_active:Ze.is_active};try{Ze.id?(await ze(`/api/admin/services/${Ze.id}`,E),J({message:"Servicio actualizado correctamente"})):(await Te("/api/admin/services",E),J({message:"Servicio creado correctamente"})),lc({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),await gn()}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al guardar servicio"})}}async function vp(d){try{await Fn(`/api/admin/services/${d}`),await gn(),J({message:"Servicio eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await ze(`/api/admin/services/${d}`,{is_active:!0}),await gn(),J({message:"Servicio restaurado"})}catch(E){J({type:"error",message:K(E)||"No se pudo restaurar el servicio"})}}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar servicio"})}}async function yp(d,E,A){if(d)try{await Te(`/api/admin/services/${d.id}/branches`,{branch_id:E,is_available:A}),await gn()}catch($){te(K($))}}async function xp(d,E){d!=null&&d.preventDefault&&d.preventDefault();const A=E||oc||{},$=typeof A.name=="string"?A.name.trim():"";if(!$)return te("Completa el nombre"),null;const pe={name:$,category:A.category||"UTILITY",language:A.language||"es",body_text:A.body_text||A.body_preview||"",header_type:A.header_type||null,header_content:A.header_content||null,footer_text:A.footer_text||null,buttons:A.buttons||A.buttons_json||[]},re=A.variable_mappings||A.variableMappings||[];try{let we=null;return A.id?(we=await _u(`/api/templates/${A.id}`,pe),await _u(`/api/templates/${A.id}/mappings`,{mappings:re}),J({message:"Borrador actualizado correctamente"})):(we=await Te("/api/templates/draft",{...pe,variable_mappings:re}),J({message:"Borrador creado correctamente"})),await rs(),(we==null?void 0:we.template)||null}catch(we){return te(K(we)),J({type:"error",message:K(we)||"Error al guardar plantilla"}),null}}async function jp(d){if(d)try{await Te(`/api/templates/${d}/submit`,{}),await rs(),J({message:"Plantilla enviada a revisin de Meta"})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al enviar a Meta"})}}async function Np(d){if(d&&!$s.current.has(d))try{const E=Vs.slice();Fs($=>$.filter(pe=>pe.id!==d));const A=setTimeout(async()=>{try{await Fn(`/api/templates/${d}`),await rs(),J({message:"Plantilla eliminada definitivamente"})}catch($){Fs(E),J({type:"error",message:K($)||"No se pudo eliminar la plantilla"})}finally{$s.current.delete(d)}},8e3);$s.current.set(d,{timer:A,snapshot:E}),J({message:"Plantilla eliminada. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const $=$s.current.get(d);$!=null&&$.timer&&clearTimeout($.timer),$!=null&&$.snapshot?Fs($.snapshot):Fs(E),$s.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar plantilla"})}}async function wp(){try{const d=await de("/api/admin/audit?limit=200");Rf(d.logs||[])}catch(d){te(K(d))}}const dc={open:0,pending:0,closed:0};(($r==null?void 0:$r.status_counts)||[]).forEach(d=>{dc[d.status]=d._count.status});const _p=He?"Acceso al control plane":"Acceso a bandeja multiusuario";if(!e||!a)return s.jsx("div",{className:"login-shell",children:s.jsxs("div",{className:"login-card",children:[s.jsx("div",{className:"login-title",children:"Perzivalh"}),s.jsx("div",{className:"login-subtitle",children:_p}),s.jsxs("form",{className:"login-form",onSubmit:$f,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:w.email,onChange:d=>u(E=>({...E,email:d.target.value})),required:!0})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Password"}),s.jsx("input",{type:"password",value:w.password,onChange:d=>u(E=>({...E,password:d.target.value})),required:!0})]}),f?s.jsx("div",{className:"error",children:f}):null,s.jsx("button",{className:"primary",type:"submit",children:"Entrar"})]})]})});if((a==null?void 0:a.role)==="superadmin"&&He)return s.jsx("main",{className:"superadmin-page",children:s.jsx(Iu,{route:j,onNavigate:en,onImpersonateTenant:cc,onLogout:Fr})});const qs=(V==null?void 0:V[a.role])||rn[a.role],kp=at(qs,"modules","chat"),Sp=at(qs,"modules","dashboard"),Ep=at(qs,"modules","campaigns"),Cp=at(qs,"modules","settings"),bp=Jy(a,["admin"]),Tp=at(qs,"modules","chat","write"),Lp=["Confirmar Cita","Solicitar Resultados","Urgencia"],hc={open:"Bot activo",pending:"Pendiente",assigned:"Tomada"},Ap=M?M.display_name||M.phone_e164||M.wa_id:"Selecciona un chat",Rp=(M==null?void 0:M.phone_e164)||(M==null?void 0:M.wa_id)||"",Pp=M?hc[M.status]||"Sin estado":"",Op=[{id:"chats",label:"Chats",icon:tx,enabled:kp},{id:"dashboard",label:"Dashboard",icon:nx,enabled:Sp},{id:"campaigns",label:"Campanas",icon:sx,enabled:Ep},{id:"admin",label:"Configuraciones",icon:rx,enabled:Cp}],xi=[];let fc="";ge.forEach(d=>{const E=d.created_at,A=E?new Date(E):null,$=A&&!Number.isNaN(A.getTime())?`${A.getFullYear()}-${A.getMonth()}-${A.getDate()}`:"";$&&$!==fc&&(xi.push(s.jsx("div",{className:"day-pill",children:Xy(E)},`day-${$}`)),fc=$),xi.push(s.jsxs("div",{className:`message ${d.direction} ${d.type==="note"?"note":""}`,children:[s.jsx("div",{className:"message-text",children:d.text||`[${d.type}]`}),s.jsx("div",{className:"message-meta",children:Ki(d.created_at)})]},d.id))});const Dp=!!n&&a.role!=="superadmin";return s.jsxs("div",{className:`app-shell ${k==="admin"?"admin-shell":""}`,children:[s.jsx(uy,{navItems:Op,view:k,onSetView:P,theme:C,onToggleTheme:Ff,user:a,logoUrl:(l==null?void 0:l.logo_url)||"",brandName:(l==null?void 0:l.brand_name)||"",isProfileOpen:xe,onToggleProfile:()=>ke(d=>!d),onLogout:Fr,onReturnToSuperadmin:Uf,showReturnToSuperadmin:Dp,getInitial:$u,SunIcon:ax,MoonIcon:ix}),k==="admin"?s.jsx(Oy,{settingsSection:Z,setSettingsSection:T,settingsTab:X,setSettingsTab:Q,rolePermissions:V,setRolePermissions:Vf,defaultRolePermissions:rn,currentRole:a.role,isAdmin:bp,adminUsers:rc,userForm:yt,setUserForm:ac,roleOptions:ut,handleUserSubmit:ip,handleUserDelete:lp,settings:Ur,setSettings:vi,handleSaveSettings:cp,planName:(c==null?void 0:c.plan)||"",branches:Ef,services:bf,branchForm:rt,setBranchForm:ic,handleBranchSubmit:pp,handleBranchDisable:mp,serviceForm:Ze,setServiceForm:lc,handleServiceSubmit:gp,handleServiceDisable:vp,handleServiceBranchToggle:yp,tenantChannels:x,channelForm:y,setChannelForm:L,handleChannelSelect:dp,handleChannelSubmit:hp,handleRoleDelete:fp,templates:Vs,templateForm:oc,setTemplateForm:Lf,handleTemplateSubmit:xp,handleTemplateSubmitToMeta:jp,handleTemplateDelete:Np,handleSyncTemplates:ap,auditLogs:Af,formatDate:Ki,useShellLayout:!0,pageError:Zt}):k==="superadmin"?s.jsx("main",{className:"content content-page",children:s.jsx(Iu,{onImpersonateTenant:cc,onLogout:Fr})}):s.jsxs("main",{className:`content ${k==="chats"?"content-chats":"content-page"}`,children:[k==="chats"&&s.jsx(dy,{activeConversation:M,conversations:Ut,channels:x,brandName:(l==null?void 0:l.brand_name)||"",lastReadMap:m,filters:De,showFilters:U,users:ss,tags:zn,statusOptions:Bu,statusLabels:hc,formatListTime:Ky,formatCompactDate:Yy,messageBlocks:xi,messageDraft:Vt,messageMode:ns,quickActions:Lp,tagInput:Ne,noteInput:$n,notesList:Df,latestNote:Of,loadingConversation:Qe,isInfoOpen:le,hasUnread:B,activeName:Ap,activePhone:Rp,activeStatusLabel:Pp,canManageStatus:Tp,currentUser:a,messageInputRef:S,chatBodyRef:H,setShowFilters:Y,setFilters:Be,loadConversation:zf,handleBackToList:Hf,setIsInfoOpen:fe,handleChatScroll:Wf,handleAssignSelf:Yf,handleStatusChange:Xf,handleToggleTag:Jf,handleAddTag:Zf,setNoteInput:Jt,handleAddNote:Gf,reassignUserId:N,setReassignUserId:z,handleReassignConversation:Kf,handleOpenTagManager:()=>ee(!0),handleCloseTagManager:()=>ee(!1),showTagManager:q,tagManagerForm:ye,setTagManagerForm:Wt,handleCreateTag:ep,handleDeleteTag:tp,handleQuickAction:qf,handleSendMessage:Qf,setMessageMode:Ms,setMessageDraft:Bn,scrollChatToBottom:Wr,getInitial:$u,PlusIcon:ox,SearchIcon:lx,VideoIcon:cx,PhoneIcon:ux,InfoIcon:dx,SendIcon:hx}),k==="dashboard"&&s.jsx(py,{statusCounts:dc,metrics:$r,onRefresh:uc}),k==="campaigns"&&s.jsx(gy,{campaignForm:pn,setCampaignForm:nc,campaignFilter:mn,setCampaignFilter:sc,templates:Vs,campaigns:jf,selectedCampaignId:kf,campaignMessages:wf,users:ss,tags:zn,selectedTemplate:Pf,statusOptions:Bu,onCreateCampaign:sp,onLoadCampaigns:Hr,onLoadCampaignMessages:np,onSendCampaign:rp,formatDate:Ki}),Zt&&s.jsx("div",{className:"error-banner",children:Zt})]})]})}const px=tf(document.getElementById("root"));px.render(s.jsx(oy,{children:s.jsx(fx,{})}));
