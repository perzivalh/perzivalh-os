(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var $u={exports:{}},Zi={},Vu={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dr=Symbol.for("react.element"),Op=Symbol.for("react.portal"),Dp=Symbol.for("react.fragment"),Mp=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),Bp=Symbol.for("react.provider"),zp=Symbol.for("react.context"),Up=Symbol.for("react.forward_ref"),$p=Symbol.for("react.suspense"),Vp=Symbol.for("react.memo"),Fp=Symbol.for("react.lazy"),fc=Symbol.iterator;function Wp(e){return e===null||typeof e!="object"?null:(e=fc&&e[fc]||e["@@iterator"],typeof e=="function"?e:null)}var Fu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wu=Object.assign,Hu={};function Ps(e,t,n){this.props=e,this.context=t,this.refs=Hu,this.updater=n||Fu}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ps.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qu(){}qu.prototype=Ps.prototype;function Zl(e,t,n){this.props=e,this.context=t,this.refs=Hu,this.updater=n||Fu}var eo=Zl.prototype=new qu;eo.constructor=Zl;Wu(eo,Ps.prototype);eo.isPureReactComponent=!0;var pc=Array.isArray,Qu=Object.prototype.hasOwnProperty,to={current:null},Gu={key:!0,ref:!0,__self:!0,__source:!0};function Yu(e,t,n){var s,i={},a=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Qu.call(t,s)&&!Gu.hasOwnProperty(s)&&(i[s]=t[s]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),h=0;h<o;h++)c[h]=arguments[h+2];i.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:Dr,type:e,key:a,ref:l,props:i,_owner:to.current}}function Hp(e,t){return{$$typeof:Dr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function no(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dr}function qp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var mc=/\/+/g;function ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qp(""+e.key):t.toString(36)}function hi(e,t,n,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Dr:case Op:l=!0}}if(l)return l=e,i=i(l),e=s===""?"."+ja(l,0):s,pc(i)?(n="",e!=null&&(n=e.replace(mc,"$&/")+"/"),hi(i,t,n,"",function(h){return h})):i!=null&&(no(i)&&(i=Hp(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(mc,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=s===""?".":s+":",pc(e))for(var o=0;o<e.length;o++){a=e[o];var c=s+ja(a,o);l+=hi(a,t,n,c,i)}else if(c=Wp(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=s+ja(a,o++),l+=hi(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Qr(e,t,n){if(e==null)return e;var s=[],i=0;return hi(e,s,"","",function(a){return t.call(n,a,i++)}),s}function Qp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var at={current:null},fi={transition:null},Gp={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:fi,ReactCurrentOwner:to};function Ku(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Qr,forEach:function(e,t,n){Qr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qr(e,function(){t++}),t},toArray:function(e){return Qr(e,function(t){return t})||[]},only:function(e){if(!no(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Ps;oe.Fragment=Dp;oe.Profiler=Ip;oe.PureComponent=Zl;oe.StrictMode=Mp;oe.Suspense=$p;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gp;oe.act=Ku;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Wu({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=to.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Qu.call(t,c)&&!Gu.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){o=Array(c);for(var h=0;h<c;h++)o[h]=arguments[h+2];s.children=o}return{$$typeof:Dr,type:e.type,key:i,ref:a,props:s,_owner:l}};oe.createContext=function(e){return e={$$typeof:zp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bp,_context:e},e.Consumer=e};oe.createElement=Yu;oe.createFactory=function(e){var t=Yu.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:Up,render:e}};oe.isValidElement=no;oe.lazy=function(e){return{$$typeof:Fp,_payload:{_status:-1,_result:e},_init:Qp}};oe.memo=function(e,t){return{$$typeof:Vp,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=fi.transition;fi.transition={};try{e()}finally{fi.transition=t}};oe.unstable_act=Ku;oe.useCallback=function(e,t){return at.current.useCallback(e,t)};oe.useContext=function(e){return at.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return at.current.useDeferredValue(e)};oe.useEffect=function(e,t){return at.current.useEffect(e,t)};oe.useId=function(){return at.current.useId()};oe.useImperativeHandle=function(e,t,n){return at.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return at.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return at.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return at.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return at.current.useReducer(e,t,n)};oe.useRef=function(e){return at.current.useRef(e)};oe.useState=function(e){return at.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return at.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return at.current.useTransition()};oe.version="18.3.1";Vu.exports=oe;var g=Vu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=g,Kp=Symbol.for("react.element"),Xp=Symbol.for("react.fragment"),Jp=Object.prototype.hasOwnProperty,Zp=Yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,em={key:!0,ref:!0,__self:!0,__source:!0};function Xu(e,t,n){var s,i={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)Jp.call(t,s)&&!em.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:Kp,type:e,key:a,ref:l,props:i,_owner:Zp.current}}Zi.Fragment=Xp;Zi.jsx=Xu;Zi.jsxs=Xu;$u.exports=Zi;var r=$u.exports,Ju={exports:{}},Nt={},Zu={exports:{}},ed={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,W){var S=B.length;B.push(W);e:for(;0<S;){var H=S-1>>>1,G=B[H];if(0<i(G,W))B[H]=W,B[S]=G,S=H;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var W=B[0],S=B.pop();if(S!==W){B[0]=S;e:for(var H=0,G=B.length,Z=G>>>1;H<Z;){var b=2*(H+1)-1,X=B[b],Q=b+1,V=B[Q];if(0>i(X,S))Q<G&&0>i(V,X)?(B[H]=V,B[Q]=S,H=Q):(B[H]=X,B[b]=S,H=b);else if(Q<G&&0>i(V,S))B[H]=V,B[Q]=S,H=Q;else break e}}return W}function i(B,W){var S=B.sortIndex-W.sortIndex;return S!==0?S:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],h=[],x=1,p=null,y=3,T=!1,v=!1,L=!1,N=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(B){for(var W=n(h);W!==null;){if(W.callback===null)s(h);else if(W.startTime<=B)s(h),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(h)}}function k(B){if(L=!1,m(B),!v)if(n(c)!==null)v=!0,se(P);else{var W=n(h);W!==null&&Ee(k,W.startTime-B)}}function P(B,W){v=!1,L&&(L=!1,u(C),C=-1),T=!0;var S=y;try{for(m(W),p=n(c);p!==null&&(!(p.expirationTime>W)||B&&!Y());){var H=p.callback;if(typeof H=="function"){p.callback=null,y=p.priorityLevel;var G=H(p.expirationTime<=W);W=e.unstable_now(),typeof G=="function"?p.callback=G:p===n(c)&&s(c),m(W)}else s(c);p=n(c)}if(p!==null)var Z=!0;else{var b=n(h);b!==null&&Ee(k,b.startTime-W),Z=!1}return Z}finally{p=null,y=S,T=!1}}var j=!1,O=null,C=-1,I=5,$=-1;function Y(){return!(e.unstable_now()-$<I)}function le(){if(O!==null){var B=e.unstable_now();$=B;var W=!0;try{W=O(!0,B)}finally{W?pe():(j=!1,O=null)}}else j=!1}var pe;if(typeof f=="function")pe=function(){f(le)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,_e=je.port2;je.port1.onmessage=le,pe=function(){_e.postMessage(null)}}else pe=function(){N(le,0)};function se(B){O=B,j||(j=!0,pe())}function Ee(B,W){C=N(function(){B(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){v||T||(v=!0,se(P))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(B){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var S=y;y=W;try{return B()}finally{y=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var S=y;y=B;try{return W()}finally{y=S}},e.unstable_scheduleCallback=function(B,W,S){var H=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?H+S:H):S=H,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=S+G,B={id:x++,callback:W,priorityLevel:B,startTime:S,expirationTime:G,sortIndex:-1},S>H?(B.sortIndex=S,t(h,B),n(c)===null&&B===n(h)&&(L?(u(C),C=-1):L=!0,Ee(k,S-H))):(B.sortIndex=G,t(c,B),v||T||(v=!0,se(P))),B},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(B){var W=y;return function(){var S=y;y=W;try{return B.apply(this,arguments)}finally{y=S}}}})(ed);Zu.exports=ed;var tm=Zu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm=g,jt=tm;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var td=new Set,yr={};function ts(e,t){Es(e,t),Es(e+"Capture",t)}function Es(e,t){for(yr[e]=t,e=0;e<t.length;e++)td.add(t[e])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Za=Object.prototype.hasOwnProperty,sm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gc={},vc={};function rm(e){return Za.call(vc,e)?!0:Za.call(gc,e)?!1:sm.test(e)?vc[e]=!0:(gc[e]=!0,!1)}function im(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function am(e,t,n,s){if(t===null||typeof t>"u"||im(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lt(e,t,n,s,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var so=/[\-:]([a-z])/g;function ro(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(so,ro);Ke[t]=new lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(so,ro);Ke[t]=new lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(so,ro);Ke[t]=new lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new lt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function io(e,t,n,s){var i=Ke.hasOwnProperty(t)?Ke[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(am(t,n,i,s)&&(n=null),s||i===null?rm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var pn=nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gr=Symbol.for("react.element"),os=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),ao=Symbol.for("react.strict_mode"),el=Symbol.for("react.profiler"),nd=Symbol.for("react.provider"),sd=Symbol.for("react.context"),lo=Symbol.for("react.forward_ref"),tl=Symbol.for("react.suspense"),nl=Symbol.for("react.suspense_list"),oo=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),rd=Symbol.for("react.offscreen"),yc=Symbol.iterator;function Ys(e){return e===null||typeof e!="object"?null:(e=yc&&e[yc]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,Na;function rr(e){if(Na===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Na=t&&t[1]||""}return`
`+Na+e}var wa=!1;function _a(e,t){if(!e||wa)return"";wa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var s=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){s=h}e.call(t.prototype)}else{try{throw Error()}catch(h){s=h}e()}}catch(h){if(h&&s&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=s.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{wa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?rr(e):""}function lm(e){switch(e.tag){case 5:return rr(e.type);case 16:return rr("Lazy");case 13:return rr("Suspense");case 19:return rr("SuspenseList");case 0:case 2:case 15:return e=_a(e.type,!1),e;case 11:return e=_a(e.type.render,!1),e;case 1:return e=_a(e.type,!0),e;default:return""}}function sl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cs:return"Fragment";case os:return"Portal";case el:return"Profiler";case ao:return"StrictMode";case tl:return"Suspense";case nl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sd:return(e.displayName||"Context")+".Consumer";case nd:return(e._context.displayName||"Context")+".Provider";case lo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oo:return t=e.displayName||null,t!==null?t:sl(e.type)||"Memo";case xn:t=e._payload,e=e._init;try{return sl(e(t))}catch{}}return null}function om(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sl(t);case 8:return t===ao?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function On(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function id(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cm(e){var t=id(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yr(e){e._valueTracker||(e._valueTracker=cm(e))}function ad(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=id(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function bi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rl(e,t){var n=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function xc(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=On(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ld(e,t){t=t.checked,t!=null&&io(e,"checked",t,!1)}function il(e,t){ld(e,t);var n=On(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?al(e,t.type,n):t.hasOwnProperty("defaultValue")&&al(e,t.type,On(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function al(e,t,n){(t!=="number"||bi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ir=Array.isArray;function js(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+On(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ll(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(ir(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:On(n)}}function od(e,t){var n=On(t.value),s=On(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function wc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ol(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kr,ud=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kr=Kr||document.createElement("div"),Kr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},um=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(e){um.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cr[t]=cr[e]})});function dd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cr.hasOwnProperty(e)&&cr[e]?(""+t).trim():t+"px"}function hd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=dd(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var dm=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cl(e,t){if(t){if(dm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function ul(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dl=null;function co(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hl=null,Ns=null,ws=null;function _c(e){if(e=Br(e)){if(typeof hl!="function")throw Error(D(280));var t=e.stateNode;t&&(t=ra(t),hl(e.stateNode,e.type,t))}}function fd(e){Ns?ws?ws.push(e):ws=[e]:Ns=e}function pd(){if(Ns){var e=Ns,t=ws;if(ws=Ns=null,_c(e),t)for(e=0;e<t.length;e++)_c(t[e])}}function md(e,t){return e(t)}function gd(){}var ka=!1;function vd(e,t,n){if(ka)return e(t,n);ka=!0;try{return md(e,t,n)}finally{ka=!1,(Ns!==null||ws!==null)&&(gd(),pd())}}function jr(e,t){var n=e.stateNode;if(n===null)return null;var s=ra(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var fl=!1;if(un)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){fl=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{fl=!1}function hm(e,t,n,s,i,a,l,o,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(x){this.onError(x)}}var ur=!1,Ti=null,Li=!1,pl=null,fm={onError:function(e){ur=!0,Ti=e}};function pm(e,t,n,s,i,a,l,o,c){ur=!1,Ti=null,hm.apply(fm,arguments)}function mm(e,t,n,s,i,a,l,o,c){if(pm.apply(this,arguments),ur){if(ur){var h=Ti;ur=!1,Ti=null}else throw Error(D(198));Li||(Li=!0,pl=h)}}function ns(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kc(e){if(ns(e)!==e)throw Error(D(188))}function gm(e){var t=e.alternate;if(!t){if(t=ns(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return kc(i),e;if(a===s)return kc(i),t;a=a.sibling}throw Error(D(188))}if(n.return!==s.return)n=i,s=a;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,s=a;break}if(o===s){l=!0,s=i,n=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===n){l=!0,n=a,s=i;break}if(o===s){l=!0,s=a,n=i;break}o=o.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==s)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function xd(e){return e=gm(e),e!==null?jd(e):null}function jd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jd(e);if(t!==null)return t;e=e.sibling}return null}var Nd=jt.unstable_scheduleCallback,Sc=jt.unstable_cancelCallback,vm=jt.unstable_shouldYield,ym=jt.unstable_requestPaint,Pe=jt.unstable_now,xm=jt.unstable_getCurrentPriorityLevel,uo=jt.unstable_ImmediatePriority,wd=jt.unstable_UserBlockingPriority,Ai=jt.unstable_NormalPriority,jm=jt.unstable_LowPriority,_d=jt.unstable_IdlePriority,ea=null,Gt=null;function Nm(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ea,e,void 0,(e.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:km,wm=Math.log,_m=Math.LN2;function km(e){return e>>>=0,e===0?32:31-(wm(e)/_m|0)|0}var Xr=64,Jr=4194304;function ar(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ri(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?s=ar(o):(a&=l,a!==0&&(s=ar(a)))}else l=n&~i,l!==0?s=ar(l):a!==0&&(s=ar(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Bt(t),i=1<<n,s|=e[n],t&=~i;return s}function Sm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Em(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Bt(a),o=1<<l,c=i[l];c===-1?(!(o&n)||o&s)&&(i[l]=Sm(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function ml(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kd(){var e=Xr;return Xr<<=1,!(Xr&4194240)&&(Xr=64),e}function Sa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bt(t),e[t]=n}function Cm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Bt(n),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~a}}function ho(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Bt(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var ye=0;function Sd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ed,fo,Cd,bd,Td,gl=!1,Zr=[],Sn=null,En=null,Cn=null,Nr=new Map,wr=new Map,Nn=[],bm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ec(e,t){switch(e){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Nr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wr.delete(t.pointerId)}}function Xs(e,t,n,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Br(t),t!==null&&fo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Tm(e,t,n,s,i){switch(t){case"focusin":return Sn=Xs(Sn,e,t,n,s,i),!0;case"dragenter":return En=Xs(En,e,t,n,s,i),!0;case"mouseover":return Cn=Xs(Cn,e,t,n,s,i),!0;case"pointerover":var a=i.pointerId;return Nr.set(a,Xs(Nr.get(a)||null,e,t,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,wr.set(a,Xs(wr.get(a)||null,e,t,n,s,i)),!0}return!1}function Ld(e){var t=Hn(e.target);if(t!==null){var n=ns(t);if(n!==null){if(t=n.tag,t===13){if(t=yd(n),t!==null){e.blockedOn=t,Td(e.priority,function(){Cd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);dl=s,n.target.dispatchEvent(s),dl=null}else return t=Br(n),t!==null&&fo(t),e.blockedOn=n,!1;t.shift()}return!0}function Cc(e,t,n){pi(e)&&n.delete(t)}function Lm(){gl=!1,Sn!==null&&pi(Sn)&&(Sn=null),En!==null&&pi(En)&&(En=null),Cn!==null&&pi(Cn)&&(Cn=null),Nr.forEach(Cc),wr.forEach(Cc)}function Js(e,t){e.blockedOn===t&&(e.blockedOn=null,gl||(gl=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,Lm)))}function _r(e){function t(i){return Js(i,e)}if(0<Zr.length){Js(Zr[0],e);for(var n=1;n<Zr.length;n++){var s=Zr[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Sn!==null&&Js(Sn,e),En!==null&&Js(En,e),Cn!==null&&Js(Cn,e),Nr.forEach(t),wr.forEach(t),n=0;n<Nn.length;n++)s=Nn[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)Ld(n),n.blockedOn===null&&Nn.shift()}var _s=pn.ReactCurrentBatchConfig,Pi=!0;function Am(e,t,n,s){var i=ye,a=_s.transition;_s.transition=null;try{ye=1,po(e,t,n,s)}finally{ye=i,_s.transition=a}}function Rm(e,t,n,s){var i=ye,a=_s.transition;_s.transition=null;try{ye=4,po(e,t,n,s)}finally{ye=i,_s.transition=a}}function po(e,t,n,s){if(Pi){var i=vl(e,t,n,s);if(i===null)Da(e,t,s,Oi,n),Ec(e,s);else if(Tm(i,e,t,n,s))s.stopPropagation();else if(Ec(e,s),t&4&&-1<bm.indexOf(e)){for(;i!==null;){var a=Br(i);if(a!==null&&Ed(a),a=vl(e,t,n,s),a===null&&Da(e,t,s,Oi,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else Da(e,t,s,null,n)}}var Oi=null;function vl(e,t,n,s){if(Oi=null,e=co(s),e=Hn(e),e!==null)if(t=ns(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oi=e,null}function Ad(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xm()){case uo:return 1;case wd:return 4;case Ai:case jm:return 16;case _d:return 536870912;default:return 16}default:return 16}}var _n=null,mo=null,mi=null;function Rd(){if(mi)return mi;var e,t=mo,n=t.length,s,i="value"in _n?_n.value:_n.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===i[a-s];s++);return mi=i.slice(e,1<s?1-s:void 0)}function gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ei(){return!0}function bc(){return!1}function wt(e){function t(n,s,i,a,l){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ei:bc,this.isPropagationStopped=bc,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),t}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=wt(Os),Ir=Ae({},Os,{view:0,detail:0}),Pm=wt(Ir),Ea,Ca,Zs,ta=Ae({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zs&&(Zs&&e.type==="mousemove"?(Ea=e.screenX-Zs.screenX,Ca=e.screenY-Zs.screenY):Ca=Ea=0,Zs=e),Ea)},movementY:function(e){return"movementY"in e?e.movementY:Ca}}),Tc=wt(ta),Om=Ae({},ta,{dataTransfer:0}),Dm=wt(Om),Mm=Ae({},Ir,{relatedTarget:0}),ba=wt(Mm),Im=Ae({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),Bm=wt(Im),zm=Ae({},Os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Um=wt(zm),$m=Ae({},Os,{data:0}),Lc=wt($m),Vm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wm[e])?!!t[e]:!1}function vo(){return Hm}var qm=Ae({},Ir,{key:function(e){if(e.key){var t=Vm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vo,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qm=wt(qm),Gm=Ae({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ac=wt(Gm),Ym=Ae({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vo}),Km=wt(Ym),Xm=Ae({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jm=wt(Xm),Zm=Ae({},ta,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eg=wt(Zm),tg=[9,13,27,32],yo=un&&"CompositionEvent"in window,dr=null;un&&"documentMode"in document&&(dr=document.documentMode);var ng=un&&"TextEvent"in window&&!dr,Pd=un&&(!yo||dr&&8<dr&&11>=dr),Rc=" ",Pc=!1;function Od(e,t){switch(e){case"keyup":return tg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function sg(e,t){switch(e){case"compositionend":return Dd(t);case"keypress":return t.which!==32?null:(Pc=!0,Rc);case"textInput":return e=t.data,e===Rc&&Pc?null:e;default:return null}}function rg(e,t){if(us)return e==="compositionend"||!yo&&Od(e,t)?(e=Rd(),mi=mo=_n=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pd&&t.locale!=="ko"?null:t.data;default:return null}}var ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ig[e.type]:t==="textarea"}function Md(e,t,n,s){fd(s),t=Di(t,"onChange"),0<t.length&&(n=new go("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var hr=null,kr=null;function ag(e){Qd(e,0)}function na(e){var t=fs(e);if(ad(t))return e}function lg(e,t){if(e==="change")return t}var Id=!1;if(un){var Ta;if(un){var La="oninput"in document;if(!La){var Dc=document.createElement("div");Dc.setAttribute("oninput","return;"),La=typeof Dc.oninput=="function"}Ta=La}else Ta=!1;Id=Ta&&(!document.documentMode||9<document.documentMode)}function Mc(){hr&&(hr.detachEvent("onpropertychange",Bd),kr=hr=null)}function Bd(e){if(e.propertyName==="value"&&na(kr)){var t=[];Md(t,kr,e,co(e)),vd(ag,t)}}function og(e,t,n){e==="focusin"?(Mc(),hr=t,kr=n,hr.attachEvent("onpropertychange",Bd)):e==="focusout"&&Mc()}function cg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return na(kr)}function ug(e,t){if(e==="click")return na(t)}function dg(e,t){if(e==="input"||e==="change")return na(t)}function hg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:hg;function Sr(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Za.call(t,i)||!Ut(e[i],t[i]))return!1}return!0}function Ic(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bc(e,t){var n=Ic(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ic(n)}}function zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ud(){for(var e=window,t=bi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bi(e.document)}return t}function xo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fg(e){var t=Ud(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zd(n.ownerDocument.documentElement,n)){if(s!==null&&xo(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=Bc(n,a);var l=Bc(n,s);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pg=un&&"documentMode"in document&&11>=document.documentMode,ds=null,yl=null,fr=null,xl=!1;function zc(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xl||ds==null||ds!==bi(s)||(s=ds,"selectionStart"in s&&xo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),fr&&Sr(fr,s)||(fr=s,s=Di(yl,"onSelect"),0<s.length&&(t=new go("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ds)))}function ti(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hs={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionend:ti("Transition","TransitionEnd")},Aa={},$d={};un&&($d=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function sa(e){if(Aa[e])return Aa[e];if(!hs[e])return e;var t=hs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $d)return Aa[e]=t[n];return e}var Vd=sa("animationend"),Fd=sa("animationiteration"),Wd=sa("animationstart"),Hd=sa("transitionend"),qd=new Map,Uc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,t){qd.set(e,t),ts(t,[e])}for(var Ra=0;Ra<Uc.length;Ra++){var Pa=Uc[Ra],mg=Pa.toLowerCase(),gg=Pa[0].toUpperCase()+Pa.slice(1);Mn(mg,"on"+gg)}Mn(Vd,"onAnimationEnd");Mn(Fd,"onAnimationIteration");Mn(Wd,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(Hd,"onTransitionEnd");Es("onMouseEnter",["mouseout","mouseover"]);Es("onMouseLeave",["mouseout","mouseover"]);Es("onPointerEnter",["pointerout","pointerover"]);Es("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vg=new Set("cancel close invalid load scroll toggle".split(" ").concat(lr));function $c(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,mm(s,t,void 0,e),e.currentTarget=null}function Qd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;$c(i,o,h),a=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,h=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;$c(i,o,h),a=c}}}if(Li)throw e=pl,Li=!1,pl=null,e}function ke(e,t){var n=t[kl];n===void 0&&(n=t[kl]=new Set);var s=e+"__bubble";n.has(s)||(Gd(t,e,2,!1),n.add(s))}function Oa(e,t,n){var s=0;t&&(s|=4),Gd(n,e,s,t)}var ni="_reactListening"+Math.random().toString(36).slice(2);function Er(e){if(!e[ni]){e[ni]=!0,td.forEach(function(n){n!=="selectionchange"&&(vg.has(n)||Oa(n,!1,e),Oa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ni]||(t[ni]=!0,Oa("selectionchange",!1,t))}}function Gd(e,t,n,s){switch(Ad(t)){case 1:var i=Am;break;case 4:i=Rm;break;default:i=po}n=i.bind(null,t,n,e),i=void 0,!fl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Da(e,t,n,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=Hn(o),l===null)return;if(c=l.tag,c===5||c===6){s=a=l;continue e}o=o.parentNode}}s=s.return}vd(function(){var h=a,x=co(n),p=[];e:{var y=qd.get(e);if(y!==void 0){var T=go,v=e;switch(e){case"keypress":if(gi(n)===0)break e;case"keydown":case"keyup":T=Qm;break;case"focusin":v="focus",T=ba;break;case"focusout":v="blur",T=ba;break;case"beforeblur":case"afterblur":T=ba;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Dm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Km;break;case Vd:case Fd:case Wd:T=Bm;break;case Hd:T=Jm;break;case"scroll":T=Pm;break;case"wheel":T=eg;break;case"copy":case"cut":case"paste":T=Um;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Ac}var L=(t&4)!==0,N=!L&&e==="scroll",u=L?y!==null?y+"Capture":null:y;L=[];for(var f=h,m;f!==null;){m=f;var k=m.stateNode;if(m.tag===5&&k!==null&&(m=k,u!==null&&(k=jr(f,u),k!=null&&L.push(Cr(f,k,m)))),N)break;f=f.return}0<L.length&&(y=new T(y,v,null,n,x),p.push({event:y,listeners:L}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",y&&n!==dl&&(v=n.relatedTarget||n.fromElement)&&(Hn(v)||v[dn]))break e;if((T||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,T?(v=n.relatedTarget||n.toElement,T=h,v=v?Hn(v):null,v!==null&&(N=ns(v),v!==N||v.tag!==5&&v.tag!==6)&&(v=null)):(T=null,v=h),T!==v)){if(L=Tc,k="onMouseLeave",u="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(L=Ac,k="onPointerLeave",u="onPointerEnter",f="pointer"),N=T==null?y:fs(T),m=v==null?y:fs(v),y=new L(k,f+"leave",T,n,x),y.target=N,y.relatedTarget=m,k=null,Hn(x)===h&&(L=new L(u,f+"enter",v,n,x),L.target=m,L.relatedTarget=N,k=L),N=k,T&&v)t:{for(L=T,u=v,f=0,m=L;m;m=as(m))f++;for(m=0,k=u;k;k=as(k))m++;for(;0<f-m;)L=as(L),f--;for(;0<m-f;)u=as(u),m--;for(;f--;){if(L===u||u!==null&&L===u.alternate)break t;L=as(L),u=as(u)}L=null}else L=null;T!==null&&Vc(p,y,T,L,!1),v!==null&&N!==null&&Vc(p,N,v,L,!0)}}e:{if(y=h?fs(h):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var P=lg;else if(Oc(y))if(Id)P=dg;else{P=cg;var j=og}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(P=ug);if(P&&(P=P(e,h))){Md(p,P,n,x);break e}j&&j(e,y,h),e==="focusout"&&(j=y._wrapperState)&&j.controlled&&y.type==="number"&&al(y,"number",y.value)}switch(j=h?fs(h):window,e){case"focusin":(Oc(j)||j.contentEditable==="true")&&(ds=j,yl=h,fr=null);break;case"focusout":fr=yl=ds=null;break;case"mousedown":xl=!0;break;case"contextmenu":case"mouseup":case"dragend":xl=!1,zc(p,n,x);break;case"selectionchange":if(pg)break;case"keydown":case"keyup":zc(p,n,x)}var O;if(yo)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else us?Od(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Pd&&n.locale!=="ko"&&(us||C!=="onCompositionStart"?C==="onCompositionEnd"&&us&&(O=Rd()):(_n=x,mo="value"in _n?_n.value:_n.textContent,us=!0)),j=Di(h,C),0<j.length&&(C=new Lc(C,e,null,n,x),p.push({event:C,listeners:j}),O?C.data=O:(O=Dd(n),O!==null&&(C.data=O)))),(O=ng?sg(e,n):rg(e,n))&&(h=Di(h,"onBeforeInput"),0<h.length&&(x=new Lc("onBeforeInput","beforeinput",null,n,x),p.push({event:x,listeners:h}),x.data=O))}Qd(p,t)})}function Cr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Di(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=jr(e,n),a!=null&&s.unshift(Cr(e,a,i)),a=jr(e,t),a!=null&&s.push(Cr(e,a,i))),e=e.return}return s}function as(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vc(e,t,n,s,i){for(var a=t._reactName,l=[];n!==null&&n!==s;){var o=n,c=o.alternate,h=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&h!==null&&(o=h,i?(c=jr(n,a),c!=null&&l.unshift(Cr(n,c,o))):i||(c=jr(n,a),c!=null&&l.push(Cr(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var yg=/\r\n?/g,xg=/\u0000|\uFFFD/g;function Fc(e){return(typeof e=="string"?e:""+e).replace(yg,`
`).replace(xg,"")}function si(e,t,n){if(t=Fc(t),Fc(e)!==t&&n)throw Error(D(425))}function Mi(){}var jl=null,Nl=null;function wl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _l=typeof setTimeout=="function"?setTimeout:void 0,jg=typeof clearTimeout=="function"?clearTimeout:void 0,Wc=typeof Promise=="function"?Promise:void 0,Ng=typeof queueMicrotask=="function"?queueMicrotask:typeof Wc<"u"?function(e){return Wc.resolve(null).then(e).catch(wg)}:_l;function wg(e){setTimeout(function(){throw e})}function Ma(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),_r(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);_r(t)}function bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Ds,br="__reactProps$"+Ds,dn="__reactContainer$"+Ds,kl="__reactEvents$"+Ds,_g="__reactListeners$"+Ds,kg="__reactHandles$"+Ds;function Hn(e){var t=e[Qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[Qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hc(e);e!==null;){if(n=e[Qt])return n;e=Hc(e)}return t}e=n,n=e.parentNode}return null}function Br(e){return e=e[Qt]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function ra(e){return e[br]||null}var Sl=[],ps=-1;function In(e){return{current:e}}function Se(e){0>ps||(e.current=Sl[ps],Sl[ps]=null,ps--)}function we(e,t){ps++,Sl[ps]=e.current,e.current=t}var Dn={},tt=In(Dn),ft=In(!1),Kn=Dn;function Cs(e,t){var n=e.type.contextTypes;if(!n)return Dn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function pt(e){return e=e.childContextTypes,e!=null}function Ii(){Se(ft),Se(tt)}function qc(e,t,n){if(tt.current!==Dn)throw Error(D(168));we(tt,t),we(ft,n)}function Yd(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(D(108,om(e)||"Unknown",i));return Ae({},n,s)}function Bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dn,Kn=tt.current,we(tt,e),we(ft,ft.current),!0}function Qc(e,t,n){var s=e.stateNode;if(!s)throw Error(D(169));n?(e=Yd(e,t,Kn),s.__reactInternalMemoizedMergedChildContext=e,Se(ft),Se(tt),we(tt,e)):Se(ft),we(ft,n)}var rn=null,ia=!1,Ia=!1;function Kd(e){rn===null?rn=[e]:rn.push(e)}function Sg(e){ia=!0,Kd(e)}function Bn(){if(!Ia&&rn!==null){Ia=!0;var e=0,t=ye;try{var n=rn;for(ye=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}rn=null,ia=!1}catch(i){throw rn!==null&&(rn=rn.slice(e+1)),Nd(uo,Bn),i}finally{ye=t,Ia=!1}}return null}var ms=[],gs=0,zi=null,Ui=0,Et=[],Ct=0,Xn=null,ln=1,on="";function Vn(e,t){ms[gs++]=Ui,ms[gs++]=zi,zi=e,Ui=t}function Xd(e,t,n){Et[Ct++]=ln,Et[Ct++]=on,Et[Ct++]=Xn,Xn=e;var s=ln;e=on;var i=32-Bt(s)-1;s&=~(1<<i),n+=1;var a=32-Bt(t)+i;if(30<a){var l=i-i%5;a=(s&(1<<l)-1).toString(32),s>>=l,i-=l,ln=1<<32-Bt(t)+i|n<<i|s,on=a+e}else ln=1<<a|n<<i|s,on=e}function jo(e){e.return!==null&&(Vn(e,1),Xd(e,1,0))}function No(e){for(;e===zi;)zi=ms[--gs],ms[gs]=null,Ui=ms[--gs],ms[gs]=null;for(;e===Xn;)Xn=Et[--Ct],Et[Ct]=null,on=Et[--Ct],Et[Ct]=null,ln=Et[--Ct],Et[Ct]=null}var xt=null,yt=null,Ce=!1,It=null;function Jd(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Gc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,yt=bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xn!==null?{id:ln,overflow:on}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xt=e,yt=null,!0):!1;default:return!1}}function El(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cl(e){if(Ce){var t=yt;if(t){var n=t;if(!Gc(e,t)){if(El(e))throw Error(D(418));t=bn(n.nextSibling);var s=xt;t&&Gc(e,t)?Jd(s,n):(e.flags=e.flags&-4097|2,Ce=!1,xt=e)}}else{if(El(e))throw Error(D(418));e.flags=e.flags&-4097|2,Ce=!1,xt=e}}}function Yc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function ri(e){if(e!==xt)return!1;if(!Ce)return Yc(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wl(e.type,e.memoizedProps)),t&&(t=yt)){if(El(e))throw Zd(),Error(D(418));for(;t;)Jd(e,t),t=bn(t.nextSibling)}if(Yc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yt=bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=xt?bn(e.stateNode.nextSibling):null;return!0}function Zd(){for(var e=yt;e;)e=bn(e.nextSibling)}function bs(){yt=xt=null,Ce=!1}function wo(e){It===null?It=[e]:It.push(e)}var Eg=pn.ReactCurrentBatchConfig;function er(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var s=n.stateNode}if(!s)throw Error(D(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function ii(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Kc(e){var t=e._init;return t(e._payload)}function eh(e){function t(u,f){if(e){var m=u.deletions;m===null?(u.deletions=[f],u.flags|=16):m.push(f)}}function n(u,f){if(!e)return null;for(;f!==null;)t(u,f),f=f.sibling;return null}function s(u,f){for(u=new Map;f!==null;)f.key!==null?u.set(f.key,f):u.set(f.index,f),f=f.sibling;return u}function i(u,f){return u=Rn(u,f),u.index=0,u.sibling=null,u}function a(u,f,m){return u.index=m,e?(m=u.alternate,m!==null?(m=m.index,m<f?(u.flags|=2,f):m):(u.flags|=2,f)):(u.flags|=1048576,f)}function l(u){return e&&u.alternate===null&&(u.flags|=2),u}function o(u,f,m,k){return f===null||f.tag!==6?(f=Wa(m,u.mode,k),f.return=u,f):(f=i(f,m),f.return=u,f)}function c(u,f,m,k){var P=m.type;return P===cs?x(u,f,m.props.children,k,m.key):f!==null&&(f.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===xn&&Kc(P)===f.type)?(k=i(f,m.props),k.ref=er(u,f,m),k.return=u,k):(k=_i(m.type,m.key,m.props,null,u.mode,k),k.ref=er(u,f,m),k.return=u,k)}function h(u,f,m,k){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=Ha(m,u.mode,k),f.return=u,f):(f=i(f,m.children||[]),f.return=u,f)}function x(u,f,m,k,P){return f===null||f.tag!==7?(f=Yn(m,u.mode,k,P),f.return=u,f):(f=i(f,m),f.return=u,f)}function p(u,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Wa(""+f,u.mode,m),f.return=u,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Gr:return m=_i(f.type,f.key,f.props,null,u.mode,m),m.ref=er(u,null,f),m.return=u,m;case os:return f=Ha(f,u.mode,m),f.return=u,f;case xn:var k=f._init;return p(u,k(f._payload),m)}if(ir(f)||Ys(f))return f=Yn(f,u.mode,m,null),f.return=u,f;ii(u,f)}return null}function y(u,f,m,k){var P=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return P!==null?null:o(u,f,""+m,k);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Gr:return m.key===P?c(u,f,m,k):null;case os:return m.key===P?h(u,f,m,k):null;case xn:return P=m._init,y(u,f,P(m._payload),k)}if(ir(m)||Ys(m))return P!==null?null:x(u,f,m,k,null);ii(u,m)}return null}function T(u,f,m,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return u=u.get(m)||null,o(f,u,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Gr:return u=u.get(k.key===null?m:k.key)||null,c(f,u,k,P);case os:return u=u.get(k.key===null?m:k.key)||null,h(f,u,k,P);case xn:var j=k._init;return T(u,f,m,j(k._payload),P)}if(ir(k)||Ys(k))return u=u.get(m)||null,x(f,u,k,P,null);ii(f,k)}return null}function v(u,f,m,k){for(var P=null,j=null,O=f,C=f=0,I=null;O!==null&&C<m.length;C++){O.index>C?(I=O,O=null):I=O.sibling;var $=y(u,O,m[C],k);if($===null){O===null&&(O=I);break}e&&O&&$.alternate===null&&t(u,O),f=a($,f,C),j===null?P=$:j.sibling=$,j=$,O=I}if(C===m.length)return n(u,O),Ce&&Vn(u,C),P;if(O===null){for(;C<m.length;C++)O=p(u,m[C],k),O!==null&&(f=a(O,f,C),j===null?P=O:j.sibling=O,j=O);return Ce&&Vn(u,C),P}for(O=s(u,O);C<m.length;C++)I=T(O,u,C,m[C],k),I!==null&&(e&&I.alternate!==null&&O.delete(I.key===null?C:I.key),f=a(I,f,C),j===null?P=I:j.sibling=I,j=I);return e&&O.forEach(function(Y){return t(u,Y)}),Ce&&Vn(u,C),P}function L(u,f,m,k){var P=Ys(m);if(typeof P!="function")throw Error(D(150));if(m=P.call(m),m==null)throw Error(D(151));for(var j=P=null,O=f,C=f=0,I=null,$=m.next();O!==null&&!$.done;C++,$=m.next()){O.index>C?(I=O,O=null):I=O.sibling;var Y=y(u,O,$.value,k);if(Y===null){O===null&&(O=I);break}e&&O&&Y.alternate===null&&t(u,O),f=a(Y,f,C),j===null?P=Y:j.sibling=Y,j=Y,O=I}if($.done)return n(u,O),Ce&&Vn(u,C),P;if(O===null){for(;!$.done;C++,$=m.next())$=p(u,$.value,k),$!==null&&(f=a($,f,C),j===null?P=$:j.sibling=$,j=$);return Ce&&Vn(u,C),P}for(O=s(u,O);!$.done;C++,$=m.next())$=T(O,u,C,$.value,k),$!==null&&(e&&$.alternate!==null&&O.delete($.key===null?C:$.key),f=a($,f,C),j===null?P=$:j.sibling=$,j=$);return e&&O.forEach(function(le){return t(u,le)}),Ce&&Vn(u,C),P}function N(u,f,m,k){if(typeof m=="object"&&m!==null&&m.type===cs&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Gr:e:{for(var P=m.key,j=f;j!==null;){if(j.key===P){if(P=m.type,P===cs){if(j.tag===7){n(u,j.sibling),f=i(j,m.props.children),f.return=u,u=f;break e}}else if(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===xn&&Kc(P)===j.type){n(u,j.sibling),f=i(j,m.props),f.ref=er(u,j,m),f.return=u,u=f;break e}n(u,j);break}else t(u,j);j=j.sibling}m.type===cs?(f=Yn(m.props.children,u.mode,k,m.key),f.return=u,u=f):(k=_i(m.type,m.key,m.props,null,u.mode,k),k.ref=er(u,f,m),k.return=u,u=k)}return l(u);case os:e:{for(j=m.key;f!==null;){if(f.key===j)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){n(u,f.sibling),f=i(f,m.children||[]),f.return=u,u=f;break e}else{n(u,f);break}else t(u,f);f=f.sibling}f=Ha(m,u.mode,k),f.return=u,u=f}return l(u);case xn:return j=m._init,N(u,f,j(m._payload),k)}if(ir(m))return v(u,f,m,k);if(Ys(m))return L(u,f,m,k);ii(u,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(n(u,f.sibling),f=i(f,m),f.return=u,u=f):(n(u,f),f=Wa(m,u.mode,k),f.return=u,u=f),l(u)):n(u,f)}return N}var Ts=eh(!0),th=eh(!1),$i=In(null),Vi=null,vs=null,_o=null;function ko(){_o=vs=Vi=null}function So(e){var t=$i.current;Se($i),e._currentValue=t}function bl(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ks(e,t){Vi=e,_o=vs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},vs===null){if(Vi===null)throw Error(D(308));vs=e,Vi.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return t}var qn=null;function Eo(e){qn===null?qn=[e]:qn.push(e)}function nh(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,Eo(t)):(n.next=i.next,i.next=n),t.interleaved=n,hn(e,s)}function hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function Co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,fe&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,hn(e,n)}return i=s.interleaved,i===null?(t.next=t,Eo(s)):(t.next=i.next,i.next=t),s.interleaved=t,hn(e,n)}function vi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ho(e,n)}}function Xc(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fi(e,t,n,s){var i=e.updateQueue;jn=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,h=c.next;c.next=null,l===null?a=h:l.next=h,l=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==l&&(o===null?x.firstBaseUpdate=h:o.next=h,x.lastBaseUpdate=c))}if(a!==null){var p=i.baseState;l=0,x=h=c=null,o=a;do{var y=o.lane,T=o.eventTime;if((s&y)===y){x!==null&&(x=x.next={eventTime:T,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,L=o;switch(y=t,T=n,L.tag){case 1:if(v=L.payload,typeof v=="function"){p=v.call(T,p,y);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=L.payload,y=typeof v=="function"?v.call(T,p,y):v,y==null)break e;p=Ae({},p,y);break e;case 2:jn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[o]:y.push(o))}else T={eventTime:T,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(h=x=T,c=p):x=x.next=T,l|=y;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;y=o,o=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(x===null&&(c=p),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=x,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Zn|=l,e.lanes=l,e.memoizedState=p}}function Jc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(D(191,i));i.call(s)}}}var zr={},Yt=In(zr),Tr=In(zr),Lr=In(zr);function Qn(e){if(e===zr)throw Error(D(174));return e}function bo(e,t){switch(we(Lr,t),we(Tr,e),we(Yt,zr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ol(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ol(t,e)}Se(Yt),we(Yt,t)}function Ls(){Se(Yt),Se(Tr),Se(Lr)}function rh(e){Qn(Lr.current);var t=Qn(Yt.current),n=ol(t,e.type);t!==n&&(we(Tr,e),we(Yt,n))}function To(e){Tr.current===e&&(Se(Yt),Se(Tr))}var Te=In(0);function Wi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=[];function Lo(){for(var e=0;e<Ba.length;e++)Ba[e]._workInProgressVersionPrimary=null;Ba.length=0}var yi=pn.ReactCurrentDispatcher,za=pn.ReactCurrentBatchConfig,Jn=0,Le=null,ze=null,qe=null,Hi=!1,pr=!1,Ar=0,Cg=0;function Je(){throw Error(D(321))}function Ao(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ut(e[n],t[n]))return!1;return!0}function Ro(e,t,n,s,i,a){if(Jn=a,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yi.current=e===null||e.memoizedState===null?Ag:Rg,e=n(s,i),pr){a=0;do{if(pr=!1,Ar=0,25<=a)throw Error(D(301));a+=1,qe=ze=null,t.updateQueue=null,yi.current=Pg,e=n(s,i)}while(pr)}if(yi.current=qi,t=ze!==null&&ze.next!==null,Jn=0,qe=ze=Le=null,Hi=!1,t)throw Error(D(300));return e}function Po(){var e=Ar!==0;return Ar=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Le.memoizedState=qe=e:qe=qe.next=e,qe}function Rt(){if(ze===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=qe===null?Le.memoizedState:qe.next;if(t!==null)qe=t,ze=e;else{if(e===null)throw Error(D(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},qe===null?Le.memoizedState=qe=e:qe=qe.next=e}return qe}function Rr(e,t){return typeof t=="function"?t(e):t}function Ua(e){var t=Rt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var s=ze,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var o=l=null,c=null,h=a;do{var x=h.lane;if((Jn&x)===x)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),s=h.hasEagerState?h.eagerState:e(s,h.action);else{var p={lane:x,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(o=c=p,l=s):c=c.next=p,Le.lanes|=x,Zn|=x}h=h.next}while(h!==null&&h!==a);c===null?l=s:c.next=o,Ut(s,t.memoizedState)||(ht=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Le.lanes|=a,Zn|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $a(e){var t=Rt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);Ut(a,t.memoizedState)||(ht=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function ih(){}function ah(e,t){var n=Le,s=Rt(),i=t(),a=!Ut(s.memoizedState,i);if(a&&(s.memoizedState=i,ht=!0),s=s.queue,Oo(ch.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Pr(9,oh.bind(null,n,s,i,t),void 0,null),Qe===null)throw Error(D(349));Jn&30||lh(n,t,i)}return i}function lh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function oh(e,t,n,s){t.value=n,t.getSnapshot=s,uh(t)&&dh(e)}function ch(e,t,n){return n(function(){uh(t)&&dh(e)})}function uh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ut(e,n)}catch{return!0}}function dh(e){var t=hn(e,1);t!==null&&zt(t,e,1,-1)}function Zc(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:e},t.queue=e,e=e.dispatch=Lg.bind(null,Le,e),[t.memoizedState,e]}function Pr(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function hh(){return Rt().memoizedState}function xi(e,t,n,s){var i=qt();Le.flags|=e,i.memoizedState=Pr(1|t,n,void 0,s===void 0?null:s)}function aa(e,t,n,s){var i=Rt();s=s===void 0?null:s;var a=void 0;if(ze!==null){var l=ze.memoizedState;if(a=l.destroy,s!==null&&Ao(s,l.deps)){i.memoizedState=Pr(t,n,a,s);return}}Le.flags|=e,i.memoizedState=Pr(1|t,n,a,s)}function eu(e,t){return xi(8390656,8,e,t)}function Oo(e,t){return aa(2048,8,e,t)}function fh(e,t){return aa(4,2,e,t)}function ph(e,t){return aa(4,4,e,t)}function mh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gh(e,t,n){return n=n!=null?n.concat([e]):null,aa(4,4,mh.bind(null,t,e),n)}function Do(){}function vh(e,t){var n=Rt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Ao(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function yh(e,t){var n=Rt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Ao(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function xh(e,t,n){return Jn&21?(Ut(n,t)||(n=kd(),Le.lanes|=n,Zn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function bg(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var s=za.transition;za.transition={};try{e(!1),t()}finally{ye=n,za.transition=s}}function jh(){return Rt().memoizedState}function Tg(e,t,n){var s=An(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Nh(e))wh(t,n);else if(n=nh(e,t,n,s),n!==null){var i=it();zt(n,e,s,i),_h(n,t,s)}}function Lg(e,t,n){var s=An(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nh(e))wh(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,n);if(i.hasEagerState=!0,i.eagerState=o,Ut(o,l)){var c=t.interleaved;c===null?(i.next=i,Eo(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=nh(e,t,i,s),n!==null&&(i=it(),zt(n,e,s,i),_h(n,t,s))}}function Nh(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function wh(e,t){pr=Hi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _h(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ho(e,n)}}var qi={readContext:At,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Ag={readContext:At,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:eu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xi(4194308,4,mh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return xi(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=qt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Tg.bind(null,Le,e),[s.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:Zc,useDebugValue:Do,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Zc(!1),t=e[0];return e=bg.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Le,i=qt();if(Ce){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Qe===null)throw Error(D(349));Jn&30||lh(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,eu(ch.bind(null,s,a,e),[e]),s.flags|=2048,Pr(9,oh.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=qt(),t=Qe.identifierPrefix;if(Ce){var n=on,s=ln;n=(s&~(1<<32-Bt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ar++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Cg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rg={readContext:At,useCallback:vh,useContext:At,useEffect:Oo,useImperativeHandle:gh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:yh,useReducer:Ua,useRef:hh,useState:function(){return Ua(Rr)},useDebugValue:Do,useDeferredValue:function(e){var t=Rt();return xh(t,ze.memoizedState,e)},useTransition:function(){var e=Ua(Rr)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:ih,useSyncExternalStore:ah,useId:jh,unstable_isNewReconciler:!1},Pg={readContext:At,useCallback:vh,useContext:At,useEffect:Oo,useImperativeHandle:gh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:yh,useReducer:$a,useRef:hh,useState:function(){return $a(Rr)},useDebugValue:Do,useDeferredValue:function(e){var t=Rt();return ze===null?t.memoizedState=e:xh(t,ze.memoizedState,e)},useTransition:function(){var e=$a(Rr)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:ih,useSyncExternalStore:ah,useId:jh,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Tl(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var la={isMounted:function(e){return(e=e._reactInternals)?ns(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=it(),i=An(e),a=cn(s,i);a.payload=t,n!=null&&(a.callback=n),t=Tn(e,a,i),t!==null&&(zt(t,e,i,s),vi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=it(),i=An(e),a=cn(s,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Tn(e,a,i),t!==null&&(zt(t,e,i,s),vi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),s=An(e),i=cn(n,s);i.tag=2,t!=null&&(i.callback=t),t=Tn(e,i,s),t!==null&&(zt(t,e,s,n),vi(t,e,s))}};function tu(e,t,n,s,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,l):t.prototype&&t.prototype.isPureReactComponent?!Sr(n,s)||!Sr(i,a):!0}function kh(e,t,n){var s=!1,i=Dn,a=t.contextType;return typeof a=="object"&&a!==null?a=At(a):(i=pt(t)?Kn:tt.current,s=t.contextTypes,a=(s=s!=null)?Cs(e,i):Dn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=la,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function nu(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&la.enqueueReplaceState(t,t.state,null)}function Ll(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Co(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=At(a):(a=pt(t)?Kn:tt.current,i.context=Cs(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Tl(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&la.enqueueReplaceState(i,i.state,null),Fi(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function As(e,t){try{var n="",s=t;do n+=lm(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Va(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Al(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Og=typeof WeakMap=="function"?WeakMap:Map;function Sh(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Gi||(Gi=!0,$l=s),Al(e,t)},n}function Eh(e,t,n){n=cn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){Al(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Al(e,t),typeof s!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function su(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Og;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=Gg.bind(null,e,t,n),t.then(e,e))}function ru(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iu(e,t,n,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,Tn(n,t,1))),n.lanes|=1),e)}var Dg=pn.ReactCurrentOwner,ht=!1;function rt(e,t,n,s){t.child=e===null?th(t,null,n,s):Ts(t,e.child,n,s)}function au(e,t,n,s,i){n=n.render;var a=t.ref;return ks(t,i),s=Ro(e,t,n,s,a,i),n=Po(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,fn(e,t,i)):(Ce&&n&&jo(t),t.flags|=1,rt(e,t,s,i),t.child)}function lu(e,t,n,s,i){if(e===null){var a=n.type;return typeof a=="function"&&!Fo(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Ch(e,t,a,s,i)):(e=_i(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Sr,n(l,s)&&e.ref===t.ref)return fn(e,t,i)}return t.flags|=1,e=Rn(a,s),e.ref=t.ref,e.return=t,t.child=e}function Ch(e,t,n,s,i){if(e!==null){var a=e.memoizedProps;if(Sr(a,s)&&e.ref===t.ref)if(ht=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,fn(e,t,i)}return Rl(e,t,n,s,i)}function bh(e,t,n){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(xs,vt),vt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(xs,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,we(xs,vt),vt|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,we(xs,vt),vt|=s;return rt(e,t,i,n),t.child}function Th(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rl(e,t,n,s,i){var a=pt(n)?Kn:tt.current;return a=Cs(t,a),ks(t,i),n=Ro(e,t,n,s,a,i),s=Po(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,fn(e,t,i)):(Ce&&s&&jo(t),t.flags|=1,rt(e,t,n,i),t.child)}function ou(e,t,n,s,i){if(pt(n)){var a=!0;Bi(t)}else a=!1;if(ks(t,i),t.stateNode===null)ji(e,t),kh(t,n,s),Ll(t,n,s,i),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=At(h):(h=pt(n)?Kn:tt.current,h=Cs(t,h));var x=n.getDerivedStateFromProps,p=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==h)&&nu(t,l,s,h),jn=!1;var y=t.memoizedState;l.state=y,Fi(t,s,l,i),c=t.memoizedState,o!==s||y!==c||ft.current||jn?(typeof x=="function"&&(Tl(t,n,x,s),c=t.memoizedState),(o=jn||tu(t,n,o,s,y,c,h))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=h,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,sh(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Ot(t.type,o),l.props=h,p=t.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=At(c):(c=pt(n)?Kn:tt.current,c=Cs(t,c));var T=n.getDerivedStateFromProps;(x=typeof T=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||y!==c)&&nu(t,l,s,c),jn=!1,y=t.memoizedState,l.state=y,Fi(t,s,l,i);var v=t.memoizedState;o!==p||y!==v||ft.current||jn?(typeof T=="function"&&(Tl(t,n,T,s),v=t.memoizedState),(h=jn||tu(t,n,h,s,y,v,c)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,v,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),l.props=s,l.state=v,l.context=c,s=h):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),s=!1)}return Pl(e,t,n,s,a,i)}function Pl(e,t,n,s,i,a){Th(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return i&&Qc(t,n,!1),fn(e,t,a);s=t.stateNode,Dg.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Ts(t,e.child,null,a),t.child=Ts(t,null,o,a)):rt(e,t,o,a),t.memoizedState=s.state,i&&Qc(t,n,!0),t.child}function Lh(e){var t=e.stateNode;t.pendingContext?qc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qc(e,t.context,!1),bo(e,t.containerInfo)}function cu(e,t,n,s,i){return bs(),wo(i),t.flags|=256,rt(e,t,n,s),t.child}var Ol={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ah(e,t,n){var s=t.pendingProps,i=Te.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),we(Te,i&1),e===null)return Cl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=ua(l,s,0,null),e=Yn(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Dl(n),t.memoizedState=Ol,e):Mo(t,l));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Mg(e,t,l,s,o,i,n);if(a){a=s.fallback,l=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Rn(i,c),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Rn(o,a):(a=Yn(a,l,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l=l===null?Dl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ol,s}return a=e.child,e=a.sibling,s=Rn(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Mo(e,t){return t=ua({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ai(e,t,n,s){return s!==null&&wo(s),Ts(t,e.child,null,n),e=Mo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mg(e,t,n,s,i,a,l){if(n)return t.flags&256?(t.flags&=-257,s=Va(Error(D(422))),ai(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=ua({mode:"visible",children:s.children},i,0,null),a=Yn(a,i,l,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Ts(t,e.child,null,l),t.child.memoizedState=Dl(l),t.memoizedState=Ol,a);if(!(t.mode&1))return ai(e,t,l,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(D(419)),s=Va(a,s,void 0),ai(e,t,l,s)}if(o=(l&e.childLanes)!==0,ht||o){if(s=Qe,s!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,hn(e,i),zt(s,e,i,-1))}return Vo(),s=Va(Error(D(421))),ai(e,t,l,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Yg.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,yt=bn(i.nextSibling),xt=t,Ce=!0,It=null,e!==null&&(Et[Ct++]=ln,Et[Ct++]=on,Et[Ct++]=Xn,ln=e.id,on=e.overflow,Xn=t),t=Mo(t,s.children),t.flags|=4096,t)}function uu(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),bl(e.return,t,n)}function Fa(e,t,n,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function Rh(e,t,n){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(rt(e,t,s.children,n),s=Te.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uu(e,n,t);else if(e.tag===19)uu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(we(Te,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Wi(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fa(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Wi(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fa(t,!0,n,null,a);break;case"together":Fa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ji(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=Rn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Rn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ig(e,t,n){switch(t.tag){case 3:Lh(t),bs();break;case 5:rh(t);break;case 1:pt(t.type)&&Bi(t);break;case 4:bo(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;we($i,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(we(Te,Te.current&1),t.flags|=128,null):n&t.child.childLanes?Ah(e,t,n):(we(Te,Te.current&1),e=fn(e,t,n),e!==null?e.sibling:null);we(Te,Te.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Rh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Te,Te.current),s)break;return null;case 22:case 23:return t.lanes=0,bh(e,t,n)}return fn(e,t,n)}var Ph,Ml,Oh,Dh;Ph=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ml=function(){};Oh=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Qn(Yt.current);var a=null;switch(n){case"input":i=rl(e,i),s=rl(e,s),a=[];break;case"select":i=Ae({},i,{value:void 0}),s=Ae({},s,{value:void 0}),a=[];break;case"textarea":i=ll(e,i),s=ll(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Mi)}cl(n,s);var l;n=null;for(h in i)if(!s.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var o=i[h];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(yr.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in s){var c=s[h];if(o=i!=null?i[h]:void 0,s.hasOwnProperty(h)&&c!==o&&(c!=null||o!=null))if(h==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(a||(a=[]),a.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(yr.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ke("scroll",e),a||o===c||(a=[])):(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}};Dh=function(e,t,n,s){n!==s&&(t.flags|=4)};function tr(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Bg(e,t,n){var s=t.pendingProps;switch(No(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return pt(t.type)&&Ii(),Ze(t),null;case 3:return s=t.stateNode,Ls(),Se(ft),Se(tt),Lo(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,It!==null&&(Wl(It),It=null))),Ml(e,t),Ze(t),null;case 5:To(t);var i=Qn(Lr.current);if(n=t.type,e!==null&&t.stateNode!=null)Oh(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(D(166));return Ze(t),null}if(e=Qn(Yt.current),ri(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Qt]=t,s[br]=a,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(i=0;i<lr.length;i++)ke(lr[i],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":xc(s,a),ke("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},ke("invalid",s);break;case"textarea":Nc(s,a),ke("invalid",s)}cl(n,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&si(s.textContent,o,e),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&si(s.textContent,o,e),i=["children",""+o]):yr.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ke("scroll",s)}switch(n){case"input":Yr(s),jc(s,a,!0);break;case"textarea":Yr(s),wc(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Mi)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[Qt]=t,e[br]=s,Ph(e,t,!1,!1),t.stateNode=e;e:{switch(l=ul(n,s),n){case"dialog":ke("cancel",e),ke("close",e),i=s;break;case"iframe":case"object":case"embed":ke("load",e),i=s;break;case"video":case"audio":for(i=0;i<lr.length;i++)ke(lr[i],e);i=s;break;case"source":ke("error",e),i=s;break;case"img":case"image":case"link":ke("error",e),ke("load",e),i=s;break;case"details":ke("toggle",e),i=s;break;case"input":xc(e,s),i=rl(e,s),ke("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=Ae({},s,{value:void 0}),ke("invalid",e);break;case"textarea":Nc(e,s),i=ll(e,s),ke("invalid",e);break;default:i=s}cl(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?hd(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ud(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xr(e,c):typeof c=="number"&&xr(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(yr.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ke("scroll",e):c!=null&&io(e,a,c,l))}switch(n){case"input":Yr(e),jc(e,s,!1);break;case"textarea":Yr(e),wc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+On(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?js(e,!!s.multiple,a,!1):s.defaultValue!=null&&js(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Mi)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)Dh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(D(166));if(n=Qn(Lr.current),Qn(Yt.current),ri(t)){if(s=t.stateNode,n=t.memoizedProps,s[Qt]=t,(a=s.nodeValue!==n)&&(e=xt,e!==null))switch(e.tag){case 3:si(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&si(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Qt]=t,t.stateNode=s}return Ze(t),null;case 13:if(Se(Te),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&yt!==null&&t.mode&1&&!(t.flags&128))Zd(),bs(),t.flags|=98560,a=!1;else if(a=ri(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(D(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(D(317));a[Qt]=t}else bs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),a=!1}else It!==null&&(Wl(It),It=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?Ue===0&&(Ue=3):Vo())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return Ls(),Ml(e,t),e===null&&Er(t.stateNode.containerInfo),Ze(t),null;case 10:return So(t.type._context),Ze(t),null;case 17:return pt(t.type)&&Ii(),Ze(t),null;case 19:if(Se(Te),a=t.memoizedState,a===null)return Ze(t),null;if(s=(t.flags&128)!==0,l=a.rendering,l===null)if(s)tr(a,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Wi(e),l!==null){for(t.flags|=128,tr(a,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Te,Te.current&1|2),t.child}e=e.sibling}a.tail!==null&&Pe()>Rs&&(t.flags|=128,s=!0,tr(a,!1),t.lanes=4194304)}else{if(!s)if(e=Wi(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),tr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Ce)return Ze(t),null}else 2*Pe()-a.renderingStartTime>Rs&&n!==1073741824&&(t.flags|=128,s=!0,tr(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Pe(),t.sibling=null,n=Te.current,we(Te,s?n&1|2:n&1),t):(Ze(t),null);case 22:case 23:return $o(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?vt&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function zg(e,t){switch(No(t),t.tag){case 1:return pt(t.type)&&Ii(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ls(),Se(ft),Se(tt),Lo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return To(t),null;case 13:if(Se(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));bs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(Te),null;case 4:return Ls(),null;case 10:return So(t.type._context),null;case 22:case 23:return $o(),null;case 24:return null;default:return null}}var li=!1,et=!1,Ug=typeof WeakSet=="function"?WeakSet:Set,F=null;function ys(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Re(e,t,s)}else n.current=null}function Il(e,t,n){try{n()}catch(s){Re(e,t,s)}}var du=!1;function $g(e,t){if(jl=Pi,e=Ud(),xo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,h=0,x=0,p=e,y=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(o=l+i),p!==a||s!==0&&p.nodeType!==3||(c=l+s),p.nodeType===3&&(l+=p.nodeValue.length),(T=p.firstChild)!==null;)y=p,p=T;for(;;){if(p===e)break t;if(y===n&&++h===i&&(o=l),y===a&&++x===s&&(c=l),(T=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=T}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nl={focusedElem:e,selectionRange:n},Pi=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var L=v.memoizedProps,N=v.memoizedState,u=t.stateNode,f=u.getSnapshotBeforeUpdate(t.elementType===t.type?L:Ot(t.type,L),N);u.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(k){Re(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return v=du,du=!1,v}function mr(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Il(t,n,a)}i=i.next}while(i!==s)}}function oa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Bl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Mh(e){var t=e.alternate;t!==null&&(e.alternate=null,Mh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[br],delete t[kl],delete t[_g],delete t[kg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ih(e){return e.tag===5||e.tag===3||e.tag===4}function hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ih(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zl(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mi));else if(s!==4&&(e=e.child,e!==null))for(zl(e,t,n),e=e.sibling;e!==null;)zl(e,t,n),e=e.sibling}function Ul(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Ul(e,t,n),e=e.sibling;e!==null;)Ul(e,t,n),e=e.sibling}var Ge=null,Dt=!1;function yn(e,t,n){for(n=n.child;n!==null;)Bh(e,t,n),n=n.sibling}function Bh(e,t,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ea,n)}catch{}switch(n.tag){case 5:et||ys(n,t);case 6:var s=Ge,i=Dt;Ge=null,yn(e,t,n),Ge=s,Dt=i,Ge!==null&&(Dt?(e=Ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Dt?(e=Ge,n=n.stateNode,e.nodeType===8?Ma(e.parentNode,n):e.nodeType===1&&Ma(e,n),_r(e)):Ma(Ge,n.stateNode));break;case 4:s=Ge,i=Dt,Ge=n.stateNode.containerInfo,Dt=!0,yn(e,t,n),Ge=s,Dt=i;break;case 0:case 11:case 14:case 15:if(!et&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Il(n,t,l),i=i.next}while(i!==s)}yn(e,t,n);break;case 1:if(!et&&(ys(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Re(n,t,o)}yn(e,t,n);break;case 21:yn(e,t,n);break;case 22:n.mode&1?(et=(s=et)||n.memoizedState!==null,yn(e,t,n),et=s):yn(e,t,n);break;default:yn(e,t,n)}}function fu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ug),t.forEach(function(s){var i=Kg.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Pt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ge=o.stateNode,Dt=!1;break e;case 3:Ge=o.stateNode.containerInfo,Dt=!0;break e;case 4:Ge=o.stateNode.containerInfo,Dt=!0;break e}o=o.return}if(Ge===null)throw Error(D(160));Bh(a,l,i),Ge=null,Dt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Re(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zh(t,e),t=t.sibling}function zh(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pt(t,e),Ht(e),s&4){try{mr(3,e,e.return),oa(3,e)}catch(L){Re(e,e.return,L)}try{mr(5,e,e.return)}catch(L){Re(e,e.return,L)}}break;case 1:Pt(t,e),Ht(e),s&512&&n!==null&&ys(n,n.return);break;case 5:if(Pt(t,e),Ht(e),s&512&&n!==null&&ys(n,n.return),e.flags&32){var i=e.stateNode;try{xr(i,"")}catch(L){Re(e,e.return,L)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&ld(i,a),ul(o,l);var h=ul(o,a);for(l=0;l<c.length;l+=2){var x=c[l],p=c[l+1];x==="style"?hd(i,p):x==="dangerouslySetInnerHTML"?ud(i,p):x==="children"?xr(i,p):io(i,x,p,h)}switch(o){case"input":il(i,a);break;case"textarea":od(i,a);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var T=a.value;T!=null?js(i,!!a.multiple,T,!1):y!==!!a.multiple&&(a.defaultValue!=null?js(i,!!a.multiple,a.defaultValue,!0):js(i,!!a.multiple,a.multiple?[]:"",!1))}i[br]=a}catch(L){Re(e,e.return,L)}}break;case 6:if(Pt(t,e),Ht(e),s&4){if(e.stateNode===null)throw Error(D(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(L){Re(e,e.return,L)}}break;case 3:if(Pt(t,e),Ht(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{_r(t.containerInfo)}catch(L){Re(e,e.return,L)}break;case 4:Pt(t,e),Ht(e);break;case 13:Pt(t,e),Ht(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(zo=Pe())),s&4&&fu(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(et=(h=et)||x,Pt(t,e),et=h):Pt(t,e),Ht(e),s&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!x&&e.mode&1)for(F=e,x=e.child;x!==null;){for(p=F=x;F!==null;){switch(y=F,T=y.child,y.tag){case 0:case 11:case 14:case 15:mr(4,y,y.return);break;case 1:ys(y,y.return);var v=y.stateNode;if(typeof v.componentWillUnmount=="function"){s=y,n=y.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(L){Re(s,n,L)}}break;case 5:ys(y,y.return);break;case 22:if(y.memoizedState!==null){mu(p);continue}}T!==null?(T.return=y,F=T):mu(p)}x=x.sibling}e:for(x=null,p=e;;){if(p.tag===5){if(x===null){x=p;try{i=p.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=dd("display",l))}catch(L){Re(e,e.return,L)}}}else if(p.tag===6){if(x===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(L){Re(e,e.return,L)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Pt(t,e),Ht(e),s&4&&fu(e);break;case 21:break;default:Pt(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ih(n)){var s=n;break e}n=n.return}throw Error(D(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(xr(i,""),s.flags&=-33);var a=hu(e);Ul(e,a,i);break;case 3:case 4:var l=s.stateNode.containerInfo,o=hu(e);zl(e,o,l);break;default:throw Error(D(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vg(e,t,n){F=e,Uh(e)}function Uh(e,t,n){for(var s=(e.mode&1)!==0;F!==null;){var i=F,a=i.child;if(i.tag===22&&s){var l=i.memoizedState!==null||li;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||et;o=li;var h=et;if(li=l,(et=c)&&!h)for(F=i;F!==null;)l=F,c=l.child,l.tag===22&&l.memoizedState!==null?gu(i):c!==null?(c.return=l,F=c):gu(i);for(;a!==null;)F=a,Uh(a),a=a.sibling;F=i,li=o,et=h}pu(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,F=a):pu(e)}}function pu(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||oa(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!et)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Jc(t,a,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Jc(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var x=h.memoizedState;if(x!==null){var p=x.dehydrated;p!==null&&_r(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}et||t.flags&512&&Bl(t)}catch(y){Re(t,t.return,y)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function mu(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function gu(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oa(4,t)}catch(c){Re(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){Re(t,i,c)}}var a=t.return;try{Bl(t)}catch(c){Re(t,a,c)}break;case 5:var l=t.return;try{Bl(t)}catch(c){Re(t,l,c)}}}catch(c){Re(t,t.return,c)}if(t===e){F=null;break}var o=t.sibling;if(o!==null){o.return=t.return,F=o;break}F=t.return}}var Fg=Math.ceil,Qi=pn.ReactCurrentDispatcher,Io=pn.ReactCurrentOwner,Lt=pn.ReactCurrentBatchConfig,fe=0,Qe=null,De=null,Ye=0,vt=0,xs=In(0),Ue=0,Or=null,Zn=0,ca=0,Bo=0,gr=null,dt=null,zo=0,Rs=1/0,sn=null,Gi=!1,$l=null,Ln=null,oi=!1,kn=null,Yi=0,vr=0,Vl=null,Ni=-1,wi=0;function it(){return fe&6?Pe():Ni!==-1?Ni:Ni=Pe()}function An(e){return e.mode&1?fe&2&&Ye!==0?Ye&-Ye:Eg.transition!==null?(wi===0&&(wi=kd()),wi):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Ad(e.type)),e):1}function zt(e,t,n,s){if(50<vr)throw vr=0,Vl=null,Error(D(185));Mr(e,n,s),(!(fe&2)||e!==Qe)&&(e===Qe&&(!(fe&2)&&(ca|=n),Ue===4&&wn(e,Ye)),mt(e,s),n===1&&fe===0&&!(t.mode&1)&&(Rs=Pe()+500,ia&&Bn()))}function mt(e,t){var n=e.callbackNode;Em(e,t);var s=Ri(e,e===Qe?Ye:0);if(s===0)n!==null&&Sc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Sc(n),t===1)e.tag===0?Sg(vu.bind(null,e)):Kd(vu.bind(null,e)),Ng(function(){!(fe&6)&&Bn()}),n=null;else{switch(Sd(s)){case 1:n=uo;break;case 4:n=wd;break;case 16:n=Ai;break;case 536870912:n=_d;break;default:n=Ai}n=Gh(n,$h.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $h(e,t){if(Ni=-1,wi=0,fe&6)throw Error(D(327));var n=e.callbackNode;if(Ss()&&e.callbackNode!==n)return null;var s=Ri(e,e===Qe?Ye:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ki(e,s);else{t=s;var i=fe;fe|=2;var a=Fh();(Qe!==e||Ye!==t)&&(sn=null,Rs=Pe()+500,Gn(e,t));do try{qg();break}catch(o){Vh(e,o)}while(!0);ko(),Qi.current=a,fe=i,De!==null?t=0:(Qe=null,Ye=0,t=Ue)}if(t!==0){if(t===2&&(i=ml(e),i!==0&&(s=i,t=Fl(e,i))),t===1)throw n=Or,Gn(e,0),wn(e,s),mt(e,Pe()),n;if(t===6)wn(e,s);else{if(i=e.current.alternate,!(s&30)&&!Wg(i)&&(t=Ki(e,s),t===2&&(a=ml(e),a!==0&&(s=a,t=Fl(e,a))),t===1))throw n=Or,Gn(e,0),wn(e,s),mt(e,Pe()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(D(345));case 2:Fn(e,dt,sn);break;case 3:if(wn(e,s),(s&130023424)===s&&(t=zo+500-Pe(),10<t)){if(Ri(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){it(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=_l(Fn.bind(null,e,dt,sn),t);break}Fn(e,dt,sn);break;case 4:if(wn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var l=31-Bt(s);a=1<<l,l=t[l],l>i&&(i=l),s&=~a}if(s=i,s=Pe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Fg(s/1960))-s,10<s){e.timeoutHandle=_l(Fn.bind(null,e,dt,sn),s);break}Fn(e,dt,sn);break;case 5:Fn(e,dt,sn);break;default:throw Error(D(329))}}}return mt(e,Pe()),e.callbackNode===n?$h.bind(null,e):null}function Fl(e,t){var n=gr;return e.current.memoizedState.isDehydrated&&(Gn(e,t).flags|=256),e=Ki(e,t),e!==2&&(t=dt,dt=n,t!==null&&Wl(t)),e}function Wl(e){dt===null?dt=e:dt.push.apply(dt,e)}function Wg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!Ut(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t){for(t&=~Bo,t&=~ca,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),s=1<<n;e[n]=-1,t&=~s}}function vu(e){if(fe&6)throw Error(D(327));Ss();var t=Ri(e,0);if(!(t&1))return mt(e,Pe()),null;var n=Ki(e,t);if(e.tag!==0&&n===2){var s=ml(e);s!==0&&(t=s,n=Fl(e,s))}if(n===1)throw n=Or,Gn(e,0),wn(e,t),mt(e,Pe()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,dt,sn),mt(e,Pe()),null}function Uo(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(Rs=Pe()+500,ia&&Bn())}}function es(e){kn!==null&&kn.tag===0&&!(fe&6)&&Ss();var t=fe;fe|=1;var n=Lt.transition,s=ye;try{if(Lt.transition=null,ye=1,e)return e()}finally{ye=s,Lt.transition=n,fe=t,!(fe&6)&&Bn()}}function $o(){vt=xs.current,Se(xs)}function Gn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,jg(n)),De!==null)for(n=De.return;n!==null;){var s=n;switch(No(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ii();break;case 3:Ls(),Se(ft),Se(tt),Lo();break;case 5:To(s);break;case 4:Ls();break;case 13:Se(Te);break;case 19:Se(Te);break;case 10:So(s.type._context);break;case 22:case 23:$o()}n=n.return}if(Qe=e,De=e=Rn(e.current,null),Ye=vt=t,Ue=0,Or=null,Bo=ca=Zn=0,dt=gr=null,qn!==null){for(t=0;t<qn.length;t++)if(n=qn[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var l=a.next;a.next=i,s.next=l}n.pending=s}qn=null}return e}function Vh(e,t){do{var n=De;try{if(ko(),yi.current=qi,Hi){for(var s=Le.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Hi=!1}if(Jn=0,qe=ze=Le=null,pr=!1,Ar=0,Io.current=null,n===null||n.return===null){Ue=1,Or=t,De=null;break}e:{var a=e,l=n.return,o=n,c=t;if(t=Ye,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,x=o,p=x.tag;if(!(x.mode&1)&&(p===0||p===11||p===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var T=ru(l);if(T!==null){T.flags&=-257,iu(T,l,o,a,t),T.mode&1&&su(a,h,t),t=T,c=h;var v=t.updateQueue;if(v===null){var L=new Set;L.add(c),t.updateQueue=L}else v.add(c);break e}else{if(!(t&1)){su(a,h,t),Vo();break e}c=Error(D(426))}}else if(Ce&&o.mode&1){var N=ru(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),iu(N,l,o,a,t),wo(As(c,o));break e}}a=c=As(c,o),Ue!==4&&(Ue=2),gr===null?gr=[a]:gr.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var u=Sh(a,c,t);Xc(a,u);break e;case 1:o=c;var f=a.type,m=a.stateNode;if(!(a.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ln===null||!Ln.has(m)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=Eh(a,o,t);Xc(a,k);break e}}a=a.return}while(a!==null)}Hh(n)}catch(P){t=P,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function Fh(){var e=Qi.current;return Qi.current=qi,e===null?qi:e}function Vo(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Qe===null||!(Zn&268435455)&&!(ca&268435455)||wn(Qe,Ye)}function Ki(e,t){var n=fe;fe|=2;var s=Fh();(Qe!==e||Ye!==t)&&(sn=null,Gn(e,t));do try{Hg();break}catch(i){Vh(e,i)}while(!0);if(ko(),fe=n,Qi.current=s,De!==null)throw Error(D(261));return Qe=null,Ye=0,Ue}function Hg(){for(;De!==null;)Wh(De)}function qg(){for(;De!==null&&!vm();)Wh(De)}function Wh(e){var t=Qh(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Hh(e):De=t,Io.current=null}function Hh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=zg(n,t),n!==null){n.flags&=32767,De=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,De=null;return}}else if(n=Bg(n,t,vt),n!==null){De=n;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Ue===0&&(Ue=5)}function Fn(e,t,n){var s=ye,i=Lt.transition;try{Lt.transition=null,ye=1,Qg(e,t,n,s)}finally{Lt.transition=i,ye=s}return null}function Qg(e,t,n,s){do Ss();while(kn!==null);if(fe&6)throw Error(D(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Cm(e,a),e===Qe&&(De=Qe=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oi||(oi=!0,Gh(Ai,function(){return Ss(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Lt.transition,Lt.transition=null;var l=ye;ye=1;var o=fe;fe|=4,Io.current=null,$g(e,n),zh(n,e),fg(Nl),Pi=!!jl,Nl=jl=null,e.current=n,Vg(n),ym(),fe=o,ye=l,Lt.transition=a}else e.current=n;if(oi&&(oi=!1,kn=e,Yi=i),a=e.pendingLanes,a===0&&(Ln=null),Nm(n.stateNode),mt(e,Pe()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Gi)throw Gi=!1,e=$l,$l=null,e;return Yi&1&&e.tag!==0&&Ss(),a=e.pendingLanes,a&1?e===Vl?vr++:(vr=0,Vl=e):vr=0,Bn(),null}function Ss(){if(kn!==null){var e=Sd(Yi),t=Lt.transition,n=ye;try{if(Lt.transition=null,ye=16>e?16:e,kn===null)var s=!1;else{if(e=kn,kn=null,Yi=0,fe&6)throw Error(D(331));var i=fe;for(fe|=4,F=e.current;F!==null;){var a=F,l=a.child;if(F.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var h=o[c];for(F=h;F!==null;){var x=F;switch(x.tag){case 0:case 11:case 15:mr(8,x,a)}var p=x.child;if(p!==null)p.return=x,F=p;else for(;F!==null;){x=F;var y=x.sibling,T=x.return;if(Mh(x),x===h){F=null;break}if(y!==null){y.return=T,F=y;break}F=T}}}var v=a.alternate;if(v!==null){var L=v.child;if(L!==null){v.child=null;do{var N=L.sibling;L.sibling=null,L=N}while(L!==null)}}F=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,F=l;else e:for(;F!==null;){if(a=F,a.flags&2048)switch(a.tag){case 0:case 11:case 15:mr(9,a,a.return)}var u=a.sibling;if(u!==null){u.return=a.return,F=u;break e}F=a.return}}var f=e.current;for(F=f;F!==null;){l=F;var m=l.child;if(l.subtreeFlags&2064&&m!==null)m.return=l,F=m;else e:for(l=f;F!==null;){if(o=F,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:oa(9,o)}}catch(P){Re(o,o.return,P)}if(o===l){F=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,F=k;break e}F=o.return}}if(fe=i,Bn(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ea,e)}catch{}s=!0}return s}finally{ye=n,Lt.transition=t}}return!1}function yu(e,t,n){t=As(n,t),t=Sh(e,t,1),e=Tn(e,t,1),t=it(),e!==null&&(Mr(e,1,t),mt(e,t))}function Re(e,t,n){if(e.tag===3)yu(e,e,n);else for(;t!==null;){if(t.tag===3){yu(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ln===null||!Ln.has(s))){e=As(n,e),e=Eh(t,e,1),t=Tn(t,e,1),e=it(),t!==null&&(Mr(t,1,e),mt(t,e));break}}t=t.return}}function Gg(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(Ye&n)===n&&(Ue===4||Ue===3&&(Ye&130023424)===Ye&&500>Pe()-zo?Gn(e,0):Bo|=n),mt(e,t)}function qh(e,t){t===0&&(e.mode&1?(t=Jr,Jr<<=1,!(Jr&130023424)&&(Jr=4194304)):t=1);var n=it();e=hn(e,t),e!==null&&(Mr(e,t,n),mt(e,n))}function Yg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qh(e,n)}function Kg(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(D(314))}s!==null&&s.delete(t),qh(e,n)}var Qh;Qh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,Ig(e,t,n);ht=!!(e.flags&131072)}else ht=!1,Ce&&t.flags&1048576&&Xd(t,Ui,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ji(e,t),e=t.pendingProps;var i=Cs(t,tt.current);ks(t,n),i=Ro(null,t,s,e,i,n);var a=Po();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(s)?(a=!0,Bi(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Co(t),i.updater=la,t.stateNode=i,i._reactInternals=t,Ll(t,s,e,n),t=Pl(null,t,s,!0,a,n)):(t.tag=0,Ce&&a&&jo(t),rt(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(ji(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=Jg(s),e=Ot(s,e),i){case 0:t=Rl(null,t,s,e,n);break e;case 1:t=ou(null,t,s,e,n);break e;case 11:t=au(null,t,s,e,n);break e;case 14:t=lu(null,t,s,Ot(s.type,e),n);break e}throw Error(D(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ot(s,i),Rl(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ot(s,i),ou(e,t,s,i,n);case 3:e:{if(Lh(t),e===null)throw Error(D(387));s=t.pendingProps,a=t.memoizedState,i=a.element,sh(e,t),Fi(t,s,null,n);var l=t.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=As(Error(D(423)),t),t=cu(e,t,s,n,i);break e}else if(s!==i){i=As(Error(D(424)),t),t=cu(e,t,s,n,i);break e}else for(yt=bn(t.stateNode.containerInfo.firstChild),xt=t,Ce=!0,It=null,n=th(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bs(),s===i){t=fn(e,t,n);break e}rt(e,t,s,n)}t=t.child}return t;case 5:return rh(t),e===null&&Cl(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,wl(s,i)?l=null:a!==null&&wl(s,a)&&(t.flags|=32),Th(e,t),rt(e,t,l,n),t.child;case 6:return e===null&&Cl(t),null;case 13:return Ah(e,t,n);case 4:return bo(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ts(t,null,s,n):rt(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ot(s,i),au(e,t,s,i,n);case 7:return rt(e,t,t.pendingProps,n),t.child;case 8:return rt(e,t,t.pendingProps.children,n),t.child;case 12:return rt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,we($i,s._currentValue),s._currentValue=l,a!==null)if(Ut(a.value,l)){if(a.children===i.children&&!ft.current){t=fn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=cn(-1,n&-n),c.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var x=h.pending;x===null?c.next=c:(c.next=x.next,x.next=c),h.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),bl(a.return,n,t),o.lanes|=n;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(D(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),bl(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}rt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,ks(t,n),i=At(i),s=s(i),t.flags|=1,rt(e,t,s,n),t.child;case 14:return s=t.type,i=Ot(s,t.pendingProps),i=Ot(s.type,i),lu(e,t,s,i,n);case 15:return Ch(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ot(s,i),ji(e,t),t.tag=1,pt(s)?(e=!0,Bi(t)):e=!1,ks(t,n),kh(t,s,i),Ll(t,s,i,n),Pl(null,t,s,!0,e,n);case 19:return Rh(e,t,n);case 22:return bh(e,t,n)}throw Error(D(156,t.tag))};function Gh(e,t){return Nd(e,t)}function Xg(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,s){return new Xg(e,t,n,s)}function Fo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jg(e){if(typeof e=="function")return Fo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lo)return 11;if(e===oo)return 14}return 2}function Rn(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _i(e,t,n,s,i,a){var l=2;if(s=e,typeof e=="function")Fo(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case cs:return Yn(n.children,i,a,t);case ao:l=8,i|=8;break;case el:return e=Tt(12,n,t,i|2),e.elementType=el,e.lanes=a,e;case tl:return e=Tt(13,n,t,i),e.elementType=tl,e.lanes=a,e;case nl:return e=Tt(19,n,t,i),e.elementType=nl,e.lanes=a,e;case rd:return ua(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nd:l=10;break e;case sd:l=9;break e;case lo:l=11;break e;case oo:l=14;break e;case xn:l=16,s=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Tt(l,n,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function Yn(e,t,n,s){return e=Tt(7,e,s,t),e.lanes=n,e}function ua(e,t,n,s){return e=Tt(22,e,s,t),e.elementType=rd,e.lanes=n,e.stateNode={isHidden:!1},e}function Wa(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function Ha(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zg(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sa(0),this.expirationTimes=Sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sa(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wo(e,t,n,s,i,a,l,o,c){return e=new Zg(e,t,n,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Tt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Co(a),e}function ev(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:os,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Yh(e){if(!e)return Dn;e=e._reactInternals;e:{if(ns(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(pt(n))return Yd(e,n,t)}return t}function Kh(e,t,n,s,i,a,l,o,c){return e=Wo(n,s,!0,e,i,a,l,o,c),e.context=Yh(null),n=e.current,s=it(),i=An(n),a=cn(s,i),a.callback=t??null,Tn(n,a,i),e.current.lanes=i,Mr(e,i,s),mt(e,s),e}function da(e,t,n,s){var i=t.current,a=it(),l=An(i);return n=Yh(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(a,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Tn(i,t,l),e!==null&&(zt(e,i,l,a),vi(e,i,l)),l}function Xi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ho(e,t){xu(e,t),(e=e.alternate)&&xu(e,t)}function tv(){return null}var Xh=typeof reportError=="function"?reportError:function(e){console.error(e)};function qo(e){this._internalRoot=e}ha.prototype.render=qo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));da(e,t,null,null)};ha.prototype.unmount=qo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;es(function(){da(null,e,null,null)}),t[dn]=null}};function ha(e){this._internalRoot=e}ha.prototype.unstable_scheduleHydration=function(e){if(e){var t=bd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nn.length&&t!==0&&t<Nn[n].priority;n++);Nn.splice(n,0,e),n===0&&Ld(e)}};function Qo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ju(){}function nv(e,t,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var h=Xi(l);a.call(h)}}var l=Kh(t,s,e,0,null,!1,!1,"",ju);return e._reactRootContainer=l,e[dn]=l.current,Er(e.nodeType===8?e.parentNode:e),es(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var h=Xi(c);o.call(h)}}var c=Wo(e,0,!1,null,null,!1,!1,"",ju);return e._reactRootContainer=c,e[dn]=c.current,Er(e.nodeType===8?e.parentNode:e),es(function(){da(t,c,n,s)}),c}function pa(e,t,n,s,i){var a=n._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=Xi(l);o.call(c)}}da(t,l,e,i)}else l=nv(n,t,e,i,s);return Xi(l)}Ed=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ar(t.pendingLanes);n!==0&&(ho(t,n|1),mt(t,Pe()),!(fe&6)&&(Rs=Pe()+500,Bn()))}break;case 13:es(function(){var s=hn(e,1);if(s!==null){var i=it();zt(s,e,1,i)}}),Ho(e,1)}};fo=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var n=it();zt(t,e,134217728,n)}Ho(e,134217728)}};Cd=function(e){if(e.tag===13){var t=An(e),n=hn(e,t);if(n!==null){var s=it();zt(n,e,t,s)}Ho(e,t)}};bd=function(){return ye};Td=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};hl=function(e,t,n){switch(t){case"input":if(il(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=ra(s);if(!i)throw Error(D(90));ad(s),il(s,i)}}}break;case"textarea":od(e,n);break;case"select":t=n.value,t!=null&&js(e,!!n.multiple,t,!1)}};md=Uo;gd=es;var sv={usingClientEntryPoint:!1,Events:[Br,fs,ra,fd,pd,Uo]},nr={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rv={bundleType:nr.bundleType,version:nr.version,rendererPackageName:nr.rendererPackageName,rendererConfig:nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xd(e),e===null?null:e.stateNode},findFiberByHostInstance:nr.findFiberByHostInstance||tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ci=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ci.isDisabled&&ci.supportsFiber)try{ea=ci.inject(rv),Gt=ci}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sv;Nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qo(t))throw Error(D(200));return ev(e,t,null,n)};Nt.createRoot=function(e,t){if(!Qo(e))throw Error(D(299));var n=!1,s="",i=Xh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Wo(e,1,!1,null,null,n,!1,s,i),e[dn]=t.current,Er(e.nodeType===8?e.parentNode:e),new qo(t)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=xd(t),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return es(e)};Nt.hydrate=function(e,t,n){if(!fa(t))throw Error(D(200));return pa(null,e,t,!0,n)};Nt.hydrateRoot=function(e,t,n){if(!Qo(e))throw Error(D(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",l=Xh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Kh(t,null,e,1,n??null,i,!1,a,l),e[dn]=t.current,Er(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ha(t)};Nt.render=function(e,t,n){if(!fa(t))throw Error(D(200));return pa(null,e,t,!1,n)};Nt.unmountComponentAtNode=function(e){if(!fa(e))throw Error(D(40));return e._reactRootContainer?(es(function(){pa(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};Nt.unstable_batchedUpdates=Uo;Nt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!fa(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return pa(e,t,n,!1,s)};Nt.version="18.3.1-next-f1338f8080-20240426";function Jh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jh)}catch(e){console.error(e)}}Jh(),Ju.exports=Nt;var iv=Ju.exports,Zh,Nu=iv;Zh=Nu.createRoot,Nu.hydrateRoot;const av="http://localhost:3000";let Hl=localStorage.getItem("token");function ls(e){Hl=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async function Ur(e,t={}){const n={"Content-Type":"application/json",...t.headers||{}};Hl&&(n.Authorization=`Bearer ${Hl}`);const s=await fetch(`${av}${e}`,{...t,headers:n});if(!s.ok){const a=(await s.json().catch(()=>({}))).error||"request_failed";throw new Error(a)}return s.json()}function he(e){return Ur(e,{method:"GET"})}function be(e,t){return Ur(e,{method:"POST",body:JSON.stringify(t||{})})}function Be(e,t){return Ur(e,{method:"PATCH",body:JSON.stringify(t||{})})}function wu(e,t){return Ur(e,{method:"PUT",body:JSON.stringify(t||{})})}function Wn(e){return Ur(e,{method:"DELETE"})}const Xt=Object.create(null);Xt.open="0";Xt.close="1";Xt.ping="2";Xt.pong="3";Xt.message="4";Xt.upgrade="5";Xt.noop="6";const ki=Object.create(null);Object.keys(Xt).forEach(e=>{ki[Xt[e]]=e});const ql={type:"error",data:"parser error"},ef=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",tf=typeof ArrayBuffer=="function",nf=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Go=({type:e,data:t},n,s)=>ef&&t instanceof Blob?n?s(t):_u(t,s):tf&&(t instanceof ArrayBuffer||nf(t))?n?s(t):_u(new Blob([t]),s):s(Xt[e]+(t||"")),_u=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function ku(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let qa;function lv(e,t){if(ef&&e.data instanceof Blob)return e.data.arrayBuffer().then(ku).then(t);if(tf&&(e.data instanceof ArrayBuffer||nf(e.data)))return t(ku(e.data));Go(e,!1,n=>{qa||(qa=new TextEncoder),t(qa.encode(n))})}const Su="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",or=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Su.length;e++)or[Su.charCodeAt(e)]=e;const ov=e=>{let t=e.length*.75,n=e.length,s,i=0,a,l,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),x=new Uint8Array(h);for(s=0;s<n;s+=4)a=or[e.charCodeAt(s)],l=or[e.charCodeAt(s+1)],o=or[e.charCodeAt(s+2)],c=or[e.charCodeAt(s+3)],x[i++]=a<<2|l>>4,x[i++]=(l&15)<<4|o>>2,x[i++]=(o&3)<<6|c&63;return h},cv=typeof ArrayBuffer=="function",Yo=(e,t)=>{if(typeof e!="string")return{type:"message",data:sf(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:uv(e.substring(1),t)}:ki[n]?e.length>1?{type:ki[n],data:e.substring(1)}:{type:ki[n]}:ql},uv=(e,t)=>{if(cv){const n=ov(e);return sf(n,t)}else return{base64:!0,data:e}},sf=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},rf="",dv=(e,t)=>{const n=e.length,s=new Array(n);let i=0;e.forEach((a,l)=>{Go(a,!1,o=>{s[l]=o,++i===n&&t(s.join(rf))})})},hv=(e,t)=>{const n=e.split(rf),s=[];for(let i=0;i<n.length;i++){const a=Yo(n[i],t);if(s.push(a),a.type==="error")break}return s};function fv(){return new TransformStream({transform(e,t){lv(e,n=>{const s=n.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,s)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Qa;function ui(e){return e.reduce((t,n)=>t+n.length,0)}function di(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)n[i]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function pv(e,t){Qa||(Qa=new TextDecoder);const n=[];let s=0,i=-1,a=!1;return new TransformStream({transform(l,o){for(n.push(l);;){if(s===0){if(ui(n)<1)break;const c=di(n,1);a=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(ui(n)<2)break;const c=di(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(ui(n)<8)break;const c=di(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),x=h.getUint32(0);if(x>Math.pow(2,21)-1){o.enqueue(ql);break}i=x*Math.pow(2,32)+h.getUint32(4),s=3}else{if(ui(n)<i)break;const c=di(n,i);o.enqueue(Yo(a?c:Qa.decode(c),t)),s=0}if(i===0||i>e){o.enqueue(ql);break}}}})}const af=4;function Me(e){if(e)return mv(e)}function mv(e){for(var t in Me.prototype)e[t]=Me.prototype[t];return e}Me.prototype.on=Me.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Me.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Me.prototype.off=Me.prototype.removeListener=Me.prototype.removeAllListeners=Me.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,i=0;i<n.length;i++)if(s=n[i],s===t||s.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Me.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,i=n.length;s<i;++s)n[s].apply(this,t)}return this};Me.prototype.emitReserved=Me.prototype.emit;Me.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Me.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ma=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),bt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),gv="arraybuffer";function lf(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const vv=bt.setTimeout,yv=bt.clearTimeout;function ga(e,t){t.useNativeTimers?(e.setTimeoutFn=vv.bind(bt),e.clearTimeoutFn=yv.bind(bt)):(e.setTimeoutFn=bt.setTimeout.bind(bt),e.clearTimeoutFn=bt.clearTimeout.bind(bt))}const xv=1.33;function jv(e){return typeof e=="string"?Nv(e):Math.ceil((e.byteLength||e.size)*xv)}function Nv(e){let t=0,n=0;for(let s=0,i=e.length;s<i;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function of(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function wv(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function _v(e){let t={},n=e.split("&");for(let s=0,i=n.length;s<i;s++){let a=n[s].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class kv extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class Ko extends Me{constructor(t){super(),this.writable=!1,ga(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new kv(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Yo(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=wv(t);return n.length?"?"+n:""}}class Sv extends Ko{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};hv(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,dv(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=of()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let cf=!1;try{cf=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ev=cf;function Cv(){}class bv extends Sv{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class Kt extends Me{constructor(t,n,s){super(),this.createRequest=t,ga(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=lf(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Kt.requestsCount++,Kt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Cv,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Kt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Kt.requestsCount=0;Kt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Eu);else if(typeof addEventListener=="function"){const e="onpagehide"in bt?"pagehide":"unload";addEventListener(e,Eu,!1)}}function Eu(){for(let e in Kt.requests)Kt.requests.hasOwnProperty(e)&&Kt.requests[e].abort()}const Tv=function(){const e=uf({xdomain:!1});return e&&e.responseType!==null}();class Lv extends bv{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Tv&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Kt(uf,this.uri(),t)}}function uf(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Ev))return new XMLHttpRequest}catch{}if(!t)try{return new bt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const df=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Av extends Ko{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=df?{}:lf(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;Go(s,this.supportsBinary,a=>{try{this.doWrite(s,a)}catch{}i&&ma(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=of()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Ga=bt.WebSocket||bt.MozWebSocket;class Rv extends Av{createSocket(t,n,s){return df?new Ga(t,n,s):n?new Ga(t,n):new Ga(t)}doWrite(t,n){this.ws.send(n)}}class Pv extends Ko{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=pv(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),i=fv();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{s.read().then(({done:o,value:c})=>{o||(this.onPacket(c),a())}).catch(o=>{})};a();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;this._writer.write(s).then(()=>{i&&ma(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Ov={websocket:Rv,webtransport:Pv,polling:Lv},Dv=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Mv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ql(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let i=Dv.exec(e||""),a={},l=14;for(;l--;)a[Mv[l]]=i[l]||"";return n!=-1&&s!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=Iv(a,a.path),a.queryKey=Bv(a,a.query),a}function Iv(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Bv(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,a){i&&(n[i]=a)}),n}const Gl=typeof addEventListener=="function"&&typeof removeEventListener=="function",Si=[];Gl&&addEventListener("offline",()=>{Si.forEach(e=>e())},!1);class Pn extends Me{constructor(t,n){if(super(),this.binaryType=gv,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=Ql(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=Ql(n.host).host);ga(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=_v(this.opts.query)),Gl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Si.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=af,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Pn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Pn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(n+=jv(i)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ma(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,i){if(typeof n=="function"&&(i=n,n=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const a={type:t,data:n,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Pn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Gl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Si.indexOf(this._offlineEventListener);s!==-1&&Si.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Pn.protocol=af;class zv extends Pn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;Pn.priorWebsocketSuccess=!1;const i=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!s)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Pn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function a(){s||(s=!0,x(),n.close(),n=null)}const l=p=>{const y=new Error("probe error: "+p);y.transport=n.name,a(),this.emitReserved("upgradeError",y)};function o(){l("transport closed")}function c(){l("socket closed")}function h(p){n&&p.name!==n.name&&a()}const x=()=>{n.removeListener("open",i),n.removeListener("error",l),n.removeListener("close",o),this.off("close",c),this.off("upgrading",h)};n.once("open",i),n.once("error",l),n.once("close",o),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let Uv=class extends zv{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>Ov[i]).filter(i=>!!i)),super(t,s)}};function $v(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=Ql(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+t,s.href=s.protocol+"://"+a+(n&&n.port===s.port?"":":"+s.port),s}const Vv=typeof ArrayBuffer=="function",Fv=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,hf=Object.prototype.toString,Wv=typeof Blob=="function"||typeof Blob<"u"&&hf.call(Blob)==="[object BlobConstructor]",Hv=typeof File=="function"||typeof File<"u"&&hf.call(File)==="[object FileConstructor]";function Xo(e){return Vv&&(e instanceof ArrayBuffer||Fv(e))||Wv&&e instanceof Blob||Hv&&e instanceof File}function Ei(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(Ei(e[n]))return!0;return!1}if(Xo(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ei(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ei(e[n]))return!0;return!1}function qv(e){const t=[],n=e.data,s=e;return s.data=Yl(n,t),s.attachments=t.length,{packet:s,buffers:t}}function Yl(e,t){if(!e)return e;if(Xo(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=Yl(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=Yl(e[s],t));return n}return e}function Qv(e,t){return e.data=Kl(e.data,t),delete e.attachments,e}function Kl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Kl(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Kl(e[n],t));return e}const ff=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Gv=5;var re;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(re||(re={}));class Yv{constructor(t){this.replacer=t}encode(t){return(t.type===re.EVENT||t.type===re.ACK)&&Ei(t)?this.encodeAsBinary({type:t.type===re.EVENT?re.BINARY_EVENT:re.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===re.BINARY_EVENT||t.type===re.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=qv(t),s=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(s),i}}class Jo extends Me{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===re.BINARY_EVENT;s||n.type===re.BINARY_ACK?(n.type=s?re.EVENT:re.ACK,this.reconstructor=new Kv(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Xo(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(re[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===re.BINARY_EVENT||s.type===re.BINARY_ACK){const a=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(a,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(t.charAt(n+1)==="/"){const a=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(a,n)}else s.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const a=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}s.id=Number(t.substring(a,n+1))}if(t.charAt(++n)){const a=this.tryParse(t.substr(n));if(Jo.isPayloadValid(s.type,a))s.data=a;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case re.CONNECT:return Ji(n);case re.DISCONNECT:return n===void 0;case re.CONNECT_ERROR:return typeof n=="string"||Ji(n);case re.EVENT:case re.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&ff.indexOf(n[0])===-1);case re.ACK:case re.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Kv{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Qv(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Xv(e){return typeof e=="string"}const Jv=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function Zv(e){return e===void 0||Jv(e)}function Ji(e){return Object.prototype.toString.call(e)==="[object Object]"}function ey(e,t){switch(e){case re.CONNECT:return t===void 0||Ji(t);case re.DISCONNECT:return t===void 0;case re.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&ff.indexOf(t[0])===-1);case re.ACK:return Array.isArray(t);case re.CONNECT_ERROR:return typeof t=="string"||Ji(t);default:return!1}}function ty(e){return Xv(e.nsp)&&Zv(e.id)&&ey(e.type,e.data)}const ny=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Jo,Encoder:Yv,get PacketType(){return re},isPacketValid:ty,protocol:Gv},Symbol.toStringTag,{value:"Module"}));function Mt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const sy=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class pf extends Me{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Mt(t,"open",this.onopen.bind(this)),Mt(t,"packet",this.onpacket.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,i,a;if(sy.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:re.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const x=this.ids++,p=n.pop();this._registerAckCallback(x,p),l.id=x}const o=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i),l=(...o)=>{this.io.clearTimeoutFn(a),n.apply(this,o)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((s,i)=>{const a=(l,o)=>l?i(l):s(o);a.withError=!0,n.push(a),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>(this._queue[0],i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...a)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:re.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case re.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case re.EVENT:case re.BINARY_EVENT:this.onevent(t);break;case re.ACK:case re.BINARY_ACK:this.onack(t);break;case re.DISCONNECT:this.ondisconnect();break;case re.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...i){s||(s=!0,n.packet({type:re.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:re.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function Ms(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ms.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Ms.prototype.reset=function(){this.attempts=0};Ms.prototype.setMin=function(e){this.ms=e};Ms.prototype.setMax=function(e){this.max=e};Ms.prototype.setJitter=function(e){this.jitter=e};class Xl extends Me{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,ga(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ms({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||ny;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Uv(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=Mt(n,"open",function(){s.onopen(),t&&t()}),a=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},l=Mt(n,"error",a);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),n.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Mt(t,"ping",this.onping.bind(this)),Mt(t,"data",this.ondata.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this)),Mt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){ma(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new pf(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const sr={};function Ci(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=$v(e,t.path||"/socket.io"),s=n.source,i=n.id,a=n.path,l=sr[i]&&a in sr[i].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return o?c=new Xl(s,t):(sr[i]||(sr[i]=new Xl(s,t)),c=sr[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Ci,{Manager:Xl,Socket:pf,io:Ci,connect:Ci});const ry="http://localhost:3000";function iy(e){return Ci(ry,{auth:{token:e}})}const mf=g.createContext(null);function ay({children:e}){const[t,n]=g.useState([]),s=g.useRef(new Map),i=o=>{n(h=>h.filter(x=>x.id!==o));const c=s.current.get(o);c&&(clearTimeout(c),s.current.delete(o))},a=({message:o,type:c="success",actionLabel:h,onAction:x,duration:p=6e3})=>{const y=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if(n(T=>[...T,{id:y,message:o,type:c,actionLabel:h,onAction:x,duration:p}]),p>0){const T=setTimeout(()=>i(y),p);s.current.set(y,T)}return y},l=o=>o==="error"?r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M12 4.5c.5 0 .95.26 1.2.68l6.5 11.25a1.35 1.35 0 0 1-1.2 2.02H5.5a1.35 1.35 0 0 1-1.2-2.02L10.8 5.18c.25-.42.7-.68 1.2-.68Zm0 4.25a.9.9 0 0 0-.9.9v5.5a.9.9 0 1 0 1.8 0v-5.5a.9.9 0 0 0-.9-.9Zm0 8.3a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z",fill:"currentColor"})}):o==="info"?r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M12 3.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17Zm0 3.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Zm-1.2 4.2h2.4v6.1h-2.4v-6.1Z",fill:"currentColor"})}):r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M9.5 16.6 5.6 12.7a1 1 0 1 1 1.4-1.4l2.5 2.5 7.5-7.5a1 1 0 1 1 1.4 1.4l-8.9 8.9a1 1 0 0 1-1.4 0Z",fill:"currentColor"})});return r.jsxs(mf.Provider,{value:{pushToast:a,removeToast:i},children:[e,r.jsx("div",{className:"toast-container",children:t.map(o=>r.jsxs("div",{className:`toast toast-${o.type}`,style:{"--toast-duration":`${o.duration}ms`},children:[r.jsx("div",{className:"toast-icon",children:l(o.type)}),r.jsx("div",{className:"toast-message",children:o.message}),o.actionLabel&&r.jsx("button",{className:"toast-action",type:"button",onClick:()=>{o.onAction&&Promise.resolve(o.onAction()).catch(()=>{}),i(o.id)},children:o.actionLabel}),r.jsx("button",{className:"toast-close",type:"button",onClick:()=>i(o.id),children:"x"}),o.duration>0&&r.jsx("div",{className:`toast-progress toast-progress-${o.type}`})]},o.id))})]})}function Zo(){const e=g.useContext(mf);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function ly({user:e,isOpen:t,onToggle:n,onLogout:s,onReturnToSuperadmin:i,showReturnToSuperadmin:a,getInitial:l}){return r.jsxs("div",{className:"rail-profile",children:[r.jsx("button",{className:`profile-button ${t?"active":""}`,type:"button",onClick:n,title:"Perfil","aria-label":"Perfil",children:r.jsx("span",{children:l(e.name)})}),t&&r.jsxs("div",{className:"profile-card",children:[r.jsx("div",{className:"profile-title",children:e.name}),r.jsx("div",{className:"profile-meta",children:e.email||"Sin correo"}),r.jsx("div",{className:"profile-role",children:e.role}),a?r.jsx("button",{className:"ghost",type:"button",onClick:i,children:"Volver a superadmin"}):null,r.jsx("button",{className:"primary",type:"button",onClick:s,children:"Salir"})]})]})}function oy({navItems:e,view:t,onSetView:n,theme:s,onToggleTheme:i,user:a,logoUrl:l,brandName:o,isProfileOpen:c,onToggleProfile:h,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:T,SunIcon:v,MoonIcon:L}){const N=(o||"P").trim().charAt(0)||"P";return r.jsxs("aside",{className:"nav-rail",children:[r.jsx("button",{className:"rail-logo",type:"button",title:"Perzivalh",children:l?r.jsx("img",{src:l,alt:o||"Logo"}):r.jsx("span",{className:"logo-mark",children:N})}),r.jsx("nav",{className:"rail-nav",children:e.map(u=>{const f=u.icon;return r.jsx("button",{className:`rail-button ${t===u.id?"active":""}`,onClick:()=>u.enabled&&n(u.id),title:u.label,"aria-label":u.label,type:"button",disabled:!u.enabled,children:r.jsx(f,{className:"rail-icon"})},u.id)})}),r.jsx("div",{className:"rail-spacer"}),r.jsx("button",{className:"rail-button",type:"button",onClick:i,title:s==="dark"?"Tema claro":"Tema oscuro","aria-label":s==="dark"?"Tema claro":"Tema oscuro",children:s==="dark"?r.jsx(v,{className:"rail-icon"}):r.jsx(L,{className:"rail-icon"})}),r.jsx(ly,{user:a,isOpen:c,onToggle:h,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:T})]})}function cy({activeConversation:e,conversations:t,channels:n,brandName:s,lastReadMap:i,filters:a,showFilters:l,users:o,tags:c,statusOptions:h,statusLabels:x,formatListTime:p,formatCompactDate:y,messageBlocks:T,messageDraft:v,messageMode:L,quickActions:N,tagInput:u,noteInput:f,notesList:m,latestNote:k,loadingConversation:P,isInfoOpen:j,hasUnread:O,activeName:C,activePhone:I,activeStatusLabel:$,canManageStatus:Y,currentUser:le,messageInputRef:pe,chatBodyRef:je,setShowFilters:_e,setFilters:se,loadConversation:Ee,handleBackToList:B,setIsInfoOpen:W,handleChatScroll:S,handleAssignSelf:H,handleStatusChange:G,handleToggleTag:Z,handleAddTag:b,setNoteInput:X,handleAddNote:Q,reassignUserId:V,setReassignUserId:ie,handleReassignConversation:ue,handleOpenTagManager:de,handleCloseTagManager:ge,showTagManager:$e,tagManagerForm:Ve,setTagManagerForm:Fe,handleCreateTag:ot,handleDeleteTag:Oe,handleQuickAction:Ie,handleSendMessage:We,setMessageMode:$t,setMessageDraft:w,scrollChatToBottom:M,getInitial:ae,PlusIcon:ve,SearchIcon:He,VideoIcon:Vt,PhoneIcon:zn,InfoIcon:ss,SendIcon:Is}){const Un=new Map((n||[]).map(R=>[R.phone_number_id,R.display_name||(R.phone_number_id?`Linea ${String(R.phone_number_id).slice(-4)}`:"")])),Ft=(e==null?void 0:e.assigned_user_id)&&e.assigned_user_id!==(le==null?void 0:le.id);function rs(R){if(!R)return"Sin mensajes";const Ne=R.last_message_preview||R.last_message_text||R.last_message||"";return Ne||(R.last_message_type?`[${R.last_message_type}]`:"Sin mensajes")}return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:`chat-shell ${e?"has-active":""}`,children:[r.jsxs("aside",{className:"chat-list-panel",children:[r.jsxs("div",{className:"chat-list-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"list-title",children:(s||"Perzivalh").toUpperCase()}),r.jsx("div",{className:"list-subtitle",children:"Chats"})]}),r.jsx("button",{className:"icon-button add-chat",type:"button",title:"Nuevo chat",children:r.jsx(ve,{className:"icon"})})]}),r.jsxs("div",{className:"chat-search",children:[r.jsx(He,{className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Buscar pacientes o mensajes",value:a.search,onFocus:()=>_e(!0),onClick:()=>_e(!0),onChange:R=>se(Ne=>({...Ne,search:R.target.value}))}),l&&r.jsx("button",{className:"search-close",type:"button",onClick:()=>_e(!1),"aria-label":"Cerrar filtros",children:"x"})]}),l&&r.jsxs("div",{className:"chat-filters",children:[r.jsxs("label",{className:"filter-field",children:[r.jsx("span",{children:"Status"}),r.jsxs("select",{value:a.status,onChange:R=>se(Ne=>({...Ne,status:R.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),h.map(R=>r.jsx("option",{value:R,children:x[R]||R},R))]})]}),r.jsxs("label",{className:"filter-field",children:[r.jsx("span",{children:"Asignado"}),r.jsxs("select",{value:a.assigned_user_id,onChange:R=>se(Ne=>({...Ne,assigned_user_id:R.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"unassigned",children:"Sin asignar"}),o.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("label",{className:"filter-field",children:[r.jsx("span",{children:"Tags"}),r.jsxs("select",{value:a.tag,onChange:R=>se(Ne=>({...Ne,tag:R.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),c.map(R=>r.jsx("option",{value:R.name,children:R.name},R.id))]})]})]}),r.jsxs("div",{className:"list-header",children:[r.jsxs("select",{className:"line-filter",value:a.phone_number_id,onChange:R=>se(Ne=>({...Ne,phone_number_id:R.target.value})),children:[r.jsx("option",{value:"",children:"Todas las lineas"}),(n||[]).map(R=>r.jsx("option",{value:R.phone_number_id,children:R.display_name||`Linea ${String(R.phone_number_id).slice(-4)}`},R.id))]}),r.jsx("span",{children:t.length})]}),r.jsx("div",{className:"conversation-list",children:t.map((R,Ne)=>{var Zt,te,J;const Bs=(e==null?void 0:e.id)===R.id,$n=R.status==="pending"&&!R.assigned_user_id,Jt=R.display_name||R.phone_e164||R.wa_id||"Sin nombre",_=rs(R),z=Number(R.unread_count||R.unread_messages||R.unread||0),q=((te=(Zt=R.tags)==null?void 0:Zt[0])==null?void 0:te.name)||"",ee=(J=R.assigned_user)!=null&&J.name?`Tomada por ${R.assigned_user.name}`:"",xe=R.phone_number_id?Un.get(R.phone_number_id)||`Linea ${String(R.phone_number_id).slice(-4)}`:"",Wt=(i==null?void 0:i[R.id])||null,_t=R.last_message_at,ct=_t&&(!Wt||new Date(_t).getTime()>new Date(Wt).getTime())&&R.last_message_direction==="in";return r.jsxs("button",{className:`conversation-item ${Bs?"active":""}`,onClick:()=>Ee(R.id),style:{animationDelay:`${Math.min(Ne,6)*60}ms`},children:[r.jsxs("div",{className:"avatar",children:[r.jsx("span",{children:ae(Jt)}),$n&&r.jsx("span",{className:"presence-dot"})]}),r.jsxs("div",{className:"conversation-body",children:[r.jsxs("div",{className:"conversation-row",children:[r.jsx("span",{className:"conversation-name",children:Jt}),r.jsxs("div",{className:"conversation-right",children:[r.jsx("span",{className:"conversation-time",children:p(R.last_message_at)}),z>0&&r.jsx("span",{className:"conversation-unread",children:z})]})]}),r.jsx("div",{className:`conversation-preview ${ct?"unread":""}`,children:_}),r.jsxs("div",{className:"conversation-meta",children:[xe&&r.jsx("span",{className:"status-pill line-pill",children:xe}),ee&&r.jsx("span",{className:"status-pill assignee-pill",children:ee}),q&&r.jsx("span",{className:"status-pill tag-pill",children:q})]})]})]},R.id)})})]}),r.jsxs("div",{className:`chat-view ${j?"info-open":"info-closed"}`,children:[r.jsx("div",{className:"chat-main",children:r.jsxs("div",{className:"chat-card",children:[r.jsxs("header",{className:"chat-topbar",children:[r.jsxs("div",{className:"chat-title",children:[e&&r.jsx("button",{className:"back-button",type:"button",onClick:B,children:"Chats"}),r.jsx("div",{className:"chat-avatar",children:r.jsx("span",{children:ae(C)})}),r.jsxs("div",{children:[r.jsx("div",{className:"chat-name",children:C}),e?r.jsx("div",{className:"chat-status",children:$}):r.jsx("div",{className:"chat-status muted",children:"Elige una conversacion"})]})]}),r.jsxs("div",{className:"chat-actions",children:[r.jsx("button",{className:"icon-button",type:"button",title:"Video",children:r.jsx(Vt,{className:"icon"})}),r.jsx("button",{className:"icon-button",type:"button",title:"Llamar",children:r.jsx(zn,{className:"icon"})}),r.jsx("button",{className:"icon-button",type:"button",title:"Buscar",children:r.jsx(He,{className:"icon"})}),r.jsx("button",{className:`icon-button ${j?"active":""}`,type:"button",title:"Info",onClick:()=>W(R=>!R),children:r.jsx(ss,{className:"icon"})})]})]}),r.jsxs("div",{className:"chat-body",ref:je,onScroll:S,children:[P&&r.jsx("div",{className:"empty",children:"Cargando..."}),!P&&!e&&r.jsx("div",{className:"empty",children:"Selecciona una conversacion"}),!P&&e&&r.jsxs(r.Fragment,{children:[T.length?T:r.jsx("div",{className:"empty-state",children:"Sin mensajes"}),r.jsx("div",{className:"chat-encryption",children:"Los mensajes estan cifrados de extremo a extremo."})]})]}),O&&r.jsx("button",{className:"new-message-banner",type:"button",onClick:M,children:"Nuevos mensajes"}),r.jsxs("form",{className:"chat-composer",onSubmit:We,children:[Ft&&r.jsx("div",{className:"assign-warning",children:"Conversacion tomada por otro operador."}),r.jsx("div",{className:"quick-actions",children:N.map(R=>r.jsx("button",{className:"quick-action",type:"button",onClick:()=>Ie(R),disabled:Ft,children:R},R))}),r.jsxs("div",{className:"composer-row",children:[r.jsxs("select",{className:"message-mode",value:L,onChange:R=>$t(R.target.value),disabled:Ft,children:[r.jsx("option",{value:"text",children:"WhatsApp"}),r.jsx("option",{value:"note",children:"Nota interna"})]}),r.jsx("input",{ref:pe,type:"text",placeholder:"Escribe un mensaje...",value:v,onChange:R=>w(R.target.value),disabled:Ft}),r.jsx("button",{className:"send-button",type:"submit",disabled:Ft,children:r.jsx(Is,{className:"icon"})})]})]})]})}),r.jsxs("aside",{className:"chat-info",children:[r.jsxs("div",{className:"info-card",children:[r.jsx("div",{className:"info-avatar",children:r.jsx("span",{children:ae(C)})}),r.jsx("div",{className:"info-name",children:C}),r.jsx("div",{className:"info-phone",children:I||"Sin telefono"}),r.jsx("button",{className:"primary",type:"button",children:"Abrir en Odoo"})]}),r.jsxs("div",{className:"info-section",children:[r.jsx("div",{className:"section-title",children:"Informacion del paciente"}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{children:"Ultima visita"}),r.jsx("span",{children:y((e==null?void 0:e.last_visit_at)||(e==null?void 0:e.last_visit))})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{children:"Tratamiento actual"}),r.jsx("span",{children:(e==null?void 0:e.current_treatment)||(e==null?void 0:e.treatment)||"-"})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{children:"Alergias"}),r.jsx("span",{children:(e==null?void 0:e.allergies)||"Ninguna reportada"})]})]}),r.jsxs("div",{className:"info-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("div",{className:"section-title",children:"Etiquetas"}),r.jsx("button",{className:"link-button",type:"button",onClick:de,children:"Gestionar"})]}),r.jsx("div",{className:"tag-list",children:((e==null?void 0:e.tags)||[]).length?e.tags.map(R=>r.jsxs("span",{className:"tag-chip",children:[r.jsx("span",{className:"tag-chip-label",children:R.name}),r.jsx("button",{className:"tag-remove",type:"button",title:"Quitar etiqueta",onClick:()=>Z(R.name),children:"x"})]},R.name)):r.jsx("div",{className:"empty-state",children:"Sin etiquetas"})}),r.jsxs("form",{className:"tag-form",onSubmit:b,children:[r.jsxs("select",{value:u,onChange:R=>setTagInput(R.target.value),children:[r.jsx("option",{value:"",children:"Selecciona etiqueta..."}),c.filter(R=>!((e==null?void 0:e.tags)||[]).some(Ne=>Ne.name===R.name)).map(R=>r.jsx("option",{value:R.name,children:R.name},R.id))]}),r.jsx("button",{className:"icon-button",type:"submit",title:"Agregar",children:r.jsx(ve,{className:"icon"})})]})]}),r.jsxs("div",{className:"info-section",children:[r.jsx("div",{className:"section-title",children:"Notas internas"}),m!=null&&m.length?r.jsx("div",{className:"notes-stack",children:m.slice(-5).map(R=>r.jsx("div",{className:"note-card",children:R.text},R.id))}):r.jsx("div",{className:"empty-state",children:"Sin notas internas"}),r.jsxs("form",{className:"note-form",onSubmit:Q,children:[r.jsx("input",{type:"text",placeholder:"Agregar nota interna...",value:f,onChange:R=>X(R.target.value),disabled:!e}),r.jsx("button",{className:"icon-button",type:"submit",title:"Guardar nota",children:r.jsx(ve,{className:"icon"})})]})]}),e&&r.jsxs("div",{className:"info-section",children:[r.jsx("div",{className:"section-title",children:"Acciones"}),r.jsxs("div",{className:"action-stack",children:[r.jsx("button",{className:"ghost",type:"button",onClick:H,disabled:Ft,children:"Tomar conversacion"}),Y&&r.jsxs("div",{className:"reassign-row",children:[r.jsxs("select",{value:V,onChange:R=>ie(R.target.value),children:[r.jsx("option",{value:"",children:"Reasignar a..."}),o.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]}),r.jsx("button",{className:"ghost",type:"button",onClick:ue,disabled:!V,children:"Reasignar"})]}),Y&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>G("open"),children:"Reactivar bot"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>G("pending"),children:"Liberar para otro operador"})]})]})]})]})]})]}),$e&&r.jsx("div",{className:"modal-overlay",onClick:ge,children:r.jsxs("div",{className:"modal-card",onClick:R=>R.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("div",{className:"modal-title",children:"Gestion de etiquetas"}),r.jsx("button",{className:"modal-close",type:"button",onClick:ge,children:"x"})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("form",{className:"tag-manager-form",onSubmit:ot,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre"}),r.jsx("input",{type:"text",value:Ve.name,onChange:R=>Fe(Ne=>({...Ne,name:R.target.value})),placeholder:"Nombre de etiqueta"})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Color"}),r.jsx("input",{type:"color",value:Ve.color,onChange:R=>Fe(Ne=>({...Ne,color:R.target.value}))})]}),r.jsx("div",{className:"modal-actions",children:r.jsx("button",{className:"primary",type:"submit",children:"Crear etiqueta"})})]}),r.jsx("div",{className:"tag-manager-list",children:(c||[]).map(R=>r.jsxs("div",{className:"tag-manager-row",children:[r.jsx("span",{className:"tag-chip",style:{borderColor:R.color||"#cbd5f5"},children:r.jsx("span",{className:"tag-chip-label",children:R.name})}),r.jsx("div",{className:"tag-manager-actions",children:r.jsx("button",{className:"danger soft",type:"button",onClick:()=>Oe(R.id,R.name),children:"Eliminar"})})]},R.id))})]})]})})]})}const uy=[{day:"2024-01-01",in_count:210,out_count:90},{day:"2024-01-04",in_count:280,out_count:120},{day:"2024-01-07",in_count:240,out_count:110},{day:"2024-01-10",in_count:320,out_count:140},{day:"2024-01-13",in_count:300,out_count:130},{day:"2024-01-17",in_count:310,out_count:135},{day:"2024-01-20",in_count:290,out_count:120},{day:"2024-01-24",in_count:260,out_count:115},{day:"2024-01-27",in_count:330,out_count:150},{day:"2024-01-30",in_count:340,out_count:160}];function dy(e){const t=e?new Date(e):null;if(!t||Number.isNaN(t.getTime()))return"--";const n=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${String(t.getDate()).padStart(2,"0")} ${n[t.getMonth()].toUpperCase()}`}function Cu(e){return e.length?e.map((t,n)=>`${n===0?"M":"L"}${t.x} ${t.y}`).join(" "):""}function hy({statusCounts:e,metrics:t,onRefresh:n}){var P;const s=(e.open||0)+(e.pending||0),i=t!=null&&t.avg_first_reply_seconds?Number(t.avg_first_reply_seconds)/60:null,a=i?`${i.toFixed(1)}m`:"-",l=(t==null?void 0:t.conversion_rate)??(t==null?void 0:t.conversion_rate_percent)??null,c=`${(l==null?18.4:l>1?l:l*100).toFixed(1)}%`,h=((P=t==null?void 0:t.message_volume)==null?void 0:P.length)>0?t.message_volume.slice(-10):uy,x=Math.max(...h.map(j=>j.in_count+j.out_count),1),p=h.length*42+30,y=220,T=150,v=180,L=h.map((j,O)=>{const I=(j.in_count+j.out_count)/x*T,$=j.in_count/x*T,Y=j.out_count/x*T;return{x:22+O*42,totalHeight:I,inHeight:$,outHeight:Y}}),N=Cu(L.map((j,O)=>({x:j.x+10,y:v-j.inHeight}))),u=Cu(L.map(j=>({x:j.x+10,y:v-j.outHeight}))),f=Array.from(new Set([0,Math.floor(h.length/3),Math.floor(2*h.length/3),h.length-1])),m=Math.round((t==null?void 0:t.team_efficiency)||94),k=((t==null?void 0:t.top_tags)||[]).slice(0,3);return r.jsxs("section",{className:"dashboard-layout",children:[r.jsxs("div",{className:"dashboard-main",children:[r.jsxs("header",{className:"dashboard-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dashboard-kicker",children:"PODOPIE Enterprise"}),r.jsx("h2",{className:"dashboard-title",children:"Dashboard"}),r.jsx("div",{className:"dashboard-subtitle",children:"Marketing Analytics & WhatsApp CRM Overview"})]}),r.jsxs("div",{className:"dashboard-actions",children:[r.jsxs("button",{className:"dash-filter",type:"button",children:[r.jsx("span",{className:"dash-filter-icon","aria-hidden":"true"}),"Ultimos 30 dias"]}),r.jsx("button",{className:"primary",type:"button",onClick:n,children:"Generar Reporte"})]})]}),r.jsxs("div",{className:"dashboard-kpis",children:[r.jsxs("div",{className:"dash-kpi",children:[r.jsxs("div",{className:"dash-kpi-top",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-kpi-label",children:"Conversaciones activas"}),r.jsx("div",{className:"dash-kpi-value",children:s.toLocaleString()})]}),r.jsx("div",{className:"dash-kpi-icon",children:"C"})]}),r.jsx("div",{className:"dash-kpi-change up",children:"+12.5%"})]}),r.jsxs("div",{className:"dash-kpi",children:[r.jsxs("div",{className:"dash-kpi-top",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-kpi-label",children:"Tiempo de respuesta"}),r.jsx("div",{className:"dash-kpi-value",children:a})]}),r.jsx("div",{className:"dash-kpi-icon",children:"T"})]}),r.jsx("div",{className:"dash-kpi-change down",children:"-0.8m"})]}),r.jsxs("div",{className:"dash-kpi",children:[r.jsxs("div",{className:"dash-kpi-top",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-kpi-label",children:"Tasa de conversion"}),r.jsx("div",{className:"dash-kpi-value",children:c})]}),r.jsx("div",{className:"dash-kpi-icon",children:"%"})]}),r.jsx("div",{className:"dash-kpi-change up",children:"+2.1%"})]})]}),r.jsxs("div",{className:"dash-card dash-chart-card",children:[r.jsxs("div",{className:"dash-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-card-title",children:"Flujo de Mensajes"}),r.jsx("div",{className:"dash-card-subtitle",children:"Volumen diario"})]}),r.jsxs("div",{className:"dash-legend",children:[r.jsxs("span",{className:"dash-legend-item",children:[r.jsx("span",{className:"dash-legend-dot in"})," Entrantes"]}),r.jsxs("span",{className:"dash-legend-item",children:[r.jsx("span",{className:"dash-legend-dot out"})," Salientes"]})]})]}),r.jsx("div",{className:"dash-chart",children:r.jsxs("svg",{className:"dash-chart-svg",viewBox:`0 0 ${p} ${y}`,preserveAspectRatio:"none",children:[r.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"60",x2:p,y2:"60"}),r.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"120",x2:p,y2:"120"}),L.map((j,O)=>r.jsxs("g",{children:[r.jsx("rect",{className:"dash-bar in",x:j.x,y:v-j.inHeight,width:"20",height:j.inHeight,rx:"6"}),r.jsx("rect",{className:"dash-bar out",x:j.x,y:v-j.inHeight-j.outHeight,width:"20",height:j.outHeight,rx:"6"})]},`bar-${O}`)),r.jsx("path",{className:"dash-line in",d:N}),r.jsx("path",{className:"dash-line out",d:u})]})}),r.jsx("div",{className:"dash-chart-labels",children:f.map(j=>{var O;return r.jsx("span",{children:dy((O=h[j])==null?void 0:O.day)},`label-${j}`)})})]}),r.jsxs("div",{className:"dashboard-lower",children:[r.jsxs("div",{className:"dash-card",children:[r.jsxs("div",{className:"dash-card-header",children:[r.jsx("div",{className:"dash-card-title",children:"Ultimas etiquetas detectadas"}),r.jsx("button",{className:"link-button",type:"button",children:"Ver todo"})]}),r.jsxs("div",{className:"dash-tag-table",children:[r.jsxs("div",{className:"dash-tag-head",children:[r.jsx("span",{children:"Etiqueta"}),r.jsx("span",{children:"Frecuencia"}),r.jsx("span",{children:"Accion"})]}),k.map(j=>r.jsxs("div",{className:"dash-tag-row",children:[r.jsx("span",{className:"dash-tag-chip",children:j.name}),r.jsx("span",{className:"dash-tag-count",children:j.count}),r.jsx("span",{className:"dash-tag-action",children:">"})]},j.name)),!k.length&&r.jsx("div",{className:"empty-state",children:"Sin etiquetas recientes"})]})]}),r.jsxs("div",{className:"dash-card",children:[r.jsxs("div",{className:"dash-card-header",children:[r.jsx("div",{className:"dash-card-title",children:"Actividad de Campana"}),r.jsx("span",{className:"dash-pill",children:"Monitor"})]}),r.jsxs("div",{className:"dash-campaign",children:[r.jsx("div",{className:"dash-campaign-title",children:'Campana de Verano "Pies Sanos"'}),r.jsxs("div",{className:"dash-campaign-meta",children:[r.jsx("span",{className:"dash-pill solid",children:"84% enviado"}),r.jsx("span",{className:"dash-muted",children:"Hace 2 horas"})]}),r.jsx("div",{className:"dash-progress",children:r.jsx("div",{className:"dash-progress-fill",style:{width:"84%"}})}),r.jsx("div",{className:"dash-muted",children:"1,240 destinatarios"})]})]})]})]}),r.jsxs("aside",{className:"dashboard-side",children:[r.jsxs("div",{className:"dash-card",children:[r.jsx("div",{className:"dash-card-title",children:"Performance de Operadores"}),r.jsx("div",{className:"dash-card-subtitle",children:"Top 5 leaderboard - hoy"}),r.jsx("div",{className:"dash-operator-list",children:[{name:"Lucia Fernandez",role:"Especialista CRM",resolved:84,pending:3},{name:"Ricardo Gomez",role:"Atencion Pacientes",resolved:71,pending:8},{name:"Ana Martinez",role:"Soporte Medico",resolved:65,pending:12}].map(j=>r.jsxs("div",{className:"dash-operator",children:[r.jsx("div",{className:"dash-operator-avatar",children:j.name[0]}),r.jsxs("div",{className:"dash-operator-meta",children:[r.jsx("div",{className:"dash-operator-name",children:j.name}),r.jsx("div",{className:"dash-operator-role",children:j.role}),r.jsxs("div",{className:"dash-operator-stats",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-stat-label",children:"Resueltos"}),r.jsx("div",{className:"dash-stat-value",children:j.resolved})]}),r.jsxs("div",{children:[r.jsx("div",{className:"dash-stat-label",children:"Pendientes"}),r.jsx("div",{className:"dash-stat-value danger",children:j.pending})]})]})]})]},j.name))})]}),r.jsxs("div",{className:"dash-card",children:[r.jsx("div",{className:"dash-card-title",children:"Eficiencia de Equipo"}),r.jsxs("div",{className:"dash-efficiency",children:[r.jsxs("div",{className:"dash-efficiency-value",children:[m,"%"]}),r.jsx("div",{className:"dash-progress",children:r.jsx("div",{className:"dash-progress-fill",style:{width:`${m}%`}})}),r.jsx("div",{className:"dash-muted",children:"Objetivo diario: 500 conversiones"})]})]})]})]})}const fy={draft:"BORRADOR",scheduled:"PROGRAMADA",sending:"ENVIANDO",sent:"FINALIZADA",failed:"ERROR"};function py({campaignForm:e,setCampaignForm:t,campaignFilter:n,setCampaignFilter:s,templates:i,campaigns:a,selectedCampaignId:l,campaignMessages:o,users:c,tags:h,selectedTemplate:x,statusOptions:p,onCreateCampaign:y,onLoadCampaigns:T,onLoadCampaignMessages:v,onSendCampaign:L,formatDate:N}){const[u,f]=g.useState(""),[m,k]=g.useState(!1),{pushToast:P}=Zo(),[j,O]=g.useState(!1),[C,I]=g.useState(!1),[$,Y]=g.useState(!1),[le,pe]=g.useState(!1),[je,_e]=g.useState(null),[se,Ee]=g.useState({name:"",description:"",rules:[]}),[B,W]=g.useState(!1),[S,H]=g.useState([]),[G,Z]=g.useState(!1),[b,X]=g.useState(null),[Q,V]=g.useState([]);g.useEffect(()=>{ie(),ue()},[]);async function ie(){try{const w=await he("/api/audiences");w&&w.segments&&V(w.segments)}catch(w){console.error("Failed to load segments",w)}}async function ue(){try{const w=await he("/api/contacts/stats");X(w||null)}catch(w){console.error("Failed to load Odoo stats",w),X(null)}}async function de(){pe(!0),_e(null);try{const w=await be("/api/contacts/import-odoo",{source:"odoo"});_e(w),ie(),ue(),P({message:"Contactos importados correctamente"})}catch(w){_e({error:w.message||"Error al importar"}),P({type:"error",message:w.message||"Error al importar contactos"})}finally{pe(!1)}}async function ge(w){if(w.preventDefault(),!!se.name.trim()){W(!0);try{await be("/api/audiences",{name:se.name,description:se.description,rules_json:se.rules.length?se.rules:[{field:"all",operator:"eq",value:!0}]}),I(!1),Ee({name:"",description:"",rules:[]}),ie(),P({message:"Segmento creado correctamente"})}catch(M){P({type:"error",message:M.message||"No se pudo crear el segmento"})}finally{W(!1)}}}async function $e(){Z(!0);try{const w=await he("/api/contacts");H((w==null?void 0:w.contacts)||[])}catch(w){console.error("Failed to load contacts",w)}finally{Z(!1)}}function Ve(){Y(!0),$e()}const Fe=g.useMemo(()=>{const w={id:"odoo",name:"odoo",subtitle:"Origen: Odoo",count:(b==null?void 0:b.total)||0,type:"odoo"},M=(h||[]).slice(0,6).map((ve,He)=>({id:ve.id||`tag-${ve.name}-${He}`,name:ve.name,subtitle:"Segmento por etiqueta",count:ve.count||ve.total||0,type:"tag"})),ae=Q.map(ve=>({id:ve.id,name:ve.name,subtitle:ve.description||"Segmento personalizado",count:ve.estimated_count||0,type:"custom"}));return[w,...ae,...M]},[h,Q,b]),ot=g.useMemo(()=>{const w=u.trim().toLowerCase();return w?i.filter(M=>{var He,Vt;const ae=((He=M.name)==null?void 0:He.toLowerCase())||"",ve=((Vt=M.category)==null?void 0:Vt.toLowerCase())||"";return ae.includes(w)||ve.includes(w)}):i},[u,i]),Oe=g.useMemo(()=>Fe.find(w=>w.name===n.tag),[Fe,n.tag]),Ie=g.useMemo(()=>n.tag?`tag:${n.tag}`:n.assigned_user_id?`assigned:${n.assigned_user_id}`:n.status?`status:${n.status}`:n.verified_only?"verified":"",[n]);function We(w){s(M=>{const ae={...M,status:"",tag:"",assigned_user_id:"",verified_only:!1};return w.startsWith("tag:")?ae.tag=w.slice(4):w.startsWith("status:")?ae.status=w.slice(7):w.startsWith("assigned:")?ae.assigned_user_id=w.slice(9):w==="verified"&&(ae.verified_only=!0),ae})}function $t(w){t(M=>({...M,template_id:w}))}return r.jsxs("section",{className:"campaigns-page",children:[r.jsxs("header",{className:"campaigns-header",children:[r.jsxs("div",{className:"campaigns-title",children:[r.jsx("span",{className:"campaigns-mark"}),r.jsxs("div",{children:[r.jsxs("div",{className:"campaigns-title-row",children:[r.jsx("span",{className:"campaigns-brand",children:"PODOPIE"}),r.jsx("span",{className:"campaigns-divider"}),r.jsx("span",{className:"campaigns-heading",children:"Campaigns"})]}),r.jsx("div",{className:"campaigns-subtitle",children:"Gestion de envios masivos y audiencias para CRM WhatsApp"})]})]}),r.jsxs("div",{className:"campaigns-actions",children:[r.jsx("button",{className:"campaigns-ghost",type:"button",onClick:()=>O(!0),children:"Importar Contactos"}),r.jsx("button",{className:"campaigns-danger",type:"button",onClick:()=>I(!0),children:"+ Nuevo Segmento"})]})]}),j&&r.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:r.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Importar Contactos"}),r.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{children:"Importar contactos desde Odoo (pacientes y partners)"}),je&&r.jsx("div",{className:`import-result ${je.error?"error":"success"}`,children:je.error?r.jsxs("span",{children:[" ",je.error]}):r.jsxs("span",{children:[" Importados: ",je.imported||0," contactos (",je.new||0," nuevos, ",je.updated||0," actualizados)"]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"btn-primary",onClick:de,disabled:le,children:le?"Importando...":" Importar desde Odoo"}),r.jsx("button",{className:"btn-secondary",onClick:Ve,children:" Ver Contactos Existentes"})]})]})]})}),C&&r.jsx("div",{className:"modal-overlay",onClick:()=>I(!1),children:r.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Nuevo Segmento"}),r.jsx("button",{className:"modal-close",onClick:()=>I(!1),children:""})]}),r.jsxs("form",{className:"modal-body",onSubmit:ge,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Nombre del Segmento"}),r.jsx("input",{type:"text",placeholder:"Ej: Pacientes Onicomicosis",value:se.name,onChange:w=>Ee({...se,name:w.target.value}),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Descripcin"}),r.jsx("textarea",{placeholder:"Descripcin opcional...",value:se.description,onChange:w=>Ee({...se,description:w.target.value}),rows:"2"})]}),r.jsxs("div",{className:"form-field",children:[r.jsx("span",{children:"Reglas de Filtro"}),r.jsxs("select",{onChange:w=>{w.target.value&&Ee({...se,rules:[...se.rules,{field:w.target.value,operator:"eq",value:""}]})},children:[r.jsx("option",{value:"",children:"+ Agregar filtro..."}),r.jsx("option",{value:"is_patient",children:"Es paciente"}),r.jsx("option",{value:"has_phone",children:"Tiene telfono"}),r.jsx("option",{value:"tag",children:"Tiene etiqueta"})]}),se.rules.map((w,M)=>r.jsxs("div",{className:"filter-rule",children:[r.jsx("span",{className:"rule-badge",children:w.field}),r.jsx("button",{type:"button",onClick:()=>{Ee({...se,rules:se.rules.filter((ae,ve)=>ve!==M)})},children:""})]},M))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-ghost",onClick:()=>I(!1),children:"Cancelar"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:B,children:B?"Guardando...":"Crear Segmento"})]})]})]})}),$&&r.jsx("div",{className:"modal-overlay",onClick:()=>Y(!1),children:r.jsxs("div",{className:"modal-content modal-large",onClick:w=>w.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:["Contactos (",S.length,")"]}),r.jsx("button",{className:"modal-close",onClick:()=>Y(!1),children:""})]}),r.jsx("div",{className:"modal-body",children:G?r.jsx("div",{className:"loading",children:"Cargando contactos..."}):S.length===0?r.jsx("div",{className:"empty-state",children:"No hay contactos. Importa desde Odoo."}):r.jsxs("div",{className:"contacts-table",children:[r.jsxs("div",{className:"contacts-header",children:[r.jsx("span",{children:"Nombre"}),r.jsx("span",{children:"Telfono"}),r.jsx("span",{children:"Email"}),r.jsx("span",{children:"Tipo"})]}),S.slice(0,50).map(w=>r.jsxs("div",{className:"contacts-row",children:[r.jsx("span",{children:w.name}),r.jsx("span",{children:w.phone_e164||"-"}),r.jsx("span",{children:w.email||"-"}),r.jsx("span",{className:"contact-type",children:w.is_patient?"Paciente":"Contacto"})]},w.id)),S.length>50&&r.jsxs("div",{className:"contacts-more",children:["...y ",S.length-50," ms"]})]})})]})}),r.jsxs("div",{className:"campaigns-layout",children:[r.jsxs("aside",{className:"campaigns-audiences",children:[r.jsx("div",{className:"campaigns-section-title",children:"Mis audiencias"}),r.jsx("div",{className:"audience-list",children:Fe.map(w=>r.jsxs("button",{type:"button",className:`audience-card ${n.tag===w.name?"active":""}`,onClick:()=>{if(w.type==="odoo"){Ve();return}s(M=>({...M,tag:w.name}))},children:[r.jsxs("div",{className:"audience-title",children:[r.jsx("span",{children:w.name}),r.jsx("span",{className:"audience-count",children:w.count})]}),r.jsx("div",{className:"audience-subtitle",children:w.subtitle})]},w.id))})]}),r.jsxs("div",{className:"campaigns-templates",children:[r.jsxs("div",{className:"campaigns-section-header",children:[r.jsx("div",{className:"campaigns-section-title",children:"Plantillas Meta (HSM)"}),r.jsxs("div",{className:"template-search",children:[r.jsx("span",{className:"template-search-icon","aria-hidden":"true"}),r.jsx("input",{type:"text",placeholder:"Buscar plantilla...",value:u,onChange:w=>f(w.target.value)})]})]}),r.jsxs("div",{className:"template-grid",children:[ot.map(w=>{const M=w.is_active?"APROBADA":"PENDIENTE",ae=w.is_active?"approved":"pending",ve=(w.category||"Marketing").toUpperCase(),He=w.id===e.template_id;return r.jsxs("div",{className:`template-card ${He?"selected":""}`,children:[r.jsxs("div",{className:"template-head",children:[r.jsx("div",{className:"template-name",children:w.name}),r.jsx("span",{className:`template-status ${ae}`,children:M})]}),r.jsx("div",{className:"template-category",children:ve}),r.jsx("div",{className:"template-preview",children:w.body_preview||"Sin preview"}),r.jsx("button",{className:"template-action",type:"button",onClick:()=>$t(w.id),children:"Previsualizar"})]},w.id)}),!ot.length&&r.jsx("div",{className:"empty-state",children:"Sin plantillas disponibles"})]})]}),r.jsxs("aside",{className:"campaigns-create",children:[r.jsx("div",{className:"campaigns-section-title",children:"Nueva campana"}),r.jsxs("form",{className:"campaigns-form",onSubmit:y,children:[r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Nombre de campana"}),r.jsx("input",{type:"text",placeholder:"Ej: Promo Onicomicosis Mar",value:e.name,onChange:w=>t(M=>({...M,name:w.target.value}))})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Seleccionar audiencia"}),r.jsxs("select",{value:Ie,onChange:w=>We(w.target.value),children:[r.jsx("option",{value:"",children:"Selecciona un segmento..."}),Fe.filter(w=>w.type!=="odoo").map(w=>r.jsx("option",{value:`tag:${w.name}`,children:w.name},`seg-${w.id}`)),r.jsx("option",{value:"verified",children:"Solo verificados"}),r.jsx("option",{value:"assigned:unassigned",children:"Sin asignar"}),p.map(w=>r.jsxs("option",{value:`status:${w}`,children:["Status: ",w]},`status-${w}`))]})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Plantilla Meta"}),r.jsxs("select",{value:e.template_id,onChange:w=>t(M=>({...M,template_id:w.target.value})),children:[r.jsx("option",{value:"",children:"Selecciona plantilla..."}),i.map(w=>r.jsx("option",{value:w.id,children:w.name},w.id))]})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Programacion"}),r.jsx("input",{type:"datetime-local",value:e.scheduled_for,onChange:w=>t(M=>({...M,scheduled_for:w.target.value}))})]}),r.jsx("button",{className:"campaigns-advanced-toggle",type:"button",onClick:()=>k(w=>!w),children:m?"Ocultar filtros avanzados":"Filtros avanzados"}),m&&r.jsxs("div",{className:"campaigns-advanced",children:[r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Status filtro"}),r.jsxs("select",{value:n.status,onChange:w=>s(M=>({...M,status:w.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),p.map(w=>r.jsx("option",{value:w,children:w},w))]})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Asignado"}),r.jsxs("select",{value:n.assigned_user_id,onChange:w=>s(M=>({...M,assigned_user_id:w.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"unassigned",children:"Sin asignar"}),c.map(w=>r.jsx("option",{value:w.id,children:w.name},w.id))]})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Tag"}),r.jsxs("select",{value:n.tag,onChange:w=>s(M=>({...M,tag:w.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),h.map(w=>r.jsx("option",{value:w.name,children:w.name},w.id))]})]}),r.jsxs("label",{className:"campaigns-toggle",children:[r.jsx("input",{type:"checkbox",checked:n.verified_only,onChange:w=>s(M=>({...M,verified_only:w.target.checked}))}),"Solo verificados"]})]}),r.jsx("button",{className:"campaigns-launch",type:"submit",children:"Lanzar Campana"}),r.jsxs("div",{className:"campaigns-hint",children:["Se enviaran aproximadamente"," ",r.jsx("strong",{children:(Oe==null?void 0:Oe.count)||0})," mensajes HSM"]}),r.jsx("div",{className:"campaigns-preview-box",children:(x==null?void 0:x.body_preview)||"Selecciona una plantilla para ver preview"})]})]})]}),r.jsxs("section",{className:"campaigns-history",children:[r.jsxs("div",{className:"campaigns-history-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"campaigns-history-title",children:"Historial de Envios"}),r.jsx("div",{className:"campaigns-history-subtitle",children:"Ultimos 30 dias"})]}),r.jsx("button",{className:"campaigns-link",type:"button",onClick:T,children:"Ver todo el historial"})]}),r.jsxs("div",{className:"history-table",children:[r.jsxs("div",{className:"history-head",children:[r.jsx("span",{children:"Campana / Fecha"}),r.jsx("span",{children:"Alcance"}),r.jsx("span",{children:"Tasa de lectura"}),r.jsx("span",{children:"Respuestas"}),r.jsx("span",{children:"Estado"}),r.jsx("span",{children:"Acciones"})]}),a.map(w=>{const M=fy[w.status]||w.status,ae=w.audience_count||w.messages_count||w.total||"--";return r.jsxs("div",{className:"history-row",children:[r.jsxs("div",{className:"history-title",children:[r.jsx("div",{className:"history-name",children:w.name}),r.jsx("div",{className:"history-date",children:N(w.created_at)})]}),r.jsxs("div",{className:"history-metric",children:[r.jsx("div",{className:"history-value",children:ae}),r.jsx("div",{className:"history-label",children:"contactos"})]}),r.jsxs("div",{className:"history-meter",children:[r.jsx("div",{className:"history-value",children:"--"}),r.jsx("div",{className:"history-bar",children:r.jsx("div",{className:"history-bar-fill",style:{width:"0%"}})})]}),r.jsxs("div",{className:"history-metric",children:[r.jsx("div",{className:"history-value",children:"--"}),r.jsx("div",{className:"history-label",children:"mensajes"})]}),r.jsx("div",{className:`history-status ${w.status}`,children:M}),r.jsxs("div",{className:"history-actions",children:[r.jsx("button",{className:"campaigns-ghost small",type:"button",onClick:()=>v(w.id),children:"Ver mensajes"}),r.jsx("button",{className:"campaigns-danger small",type:"button",onClick:()=>L(w.id),disabled:w.status==="sending",children:"Enviar"})]})]},w.id)}),!a.length&&r.jsx("div",{className:"empty-state",children:"Sin campanas registradas"})]}),l&&r.jsxs("div",{className:"campaigns-messages",children:[r.jsx("div",{className:"campaigns-history-title",children:"Mensajes"}),r.jsxs("div",{className:"history-table",children:[r.jsxs("div",{className:"history-head",children:[r.jsx("span",{children:"WA"}),r.jsx("span",{children:"Status"}),r.jsx("span",{children:"Enviado"})]}),o.map(w=>r.jsxs("div",{className:"history-row",children:[r.jsx("span",{children:w.wa_id}),r.jsx("span",{children:w.status}),r.jsx("span",{children:N(w.sent_at)})]},w.id))]})]})]})]})}const my={admin:{title:"Administrador",subtitle:"Acceso total",tone:"alert"},recepcion:{title:"Operador",subtitle:"Atencion al cliente",tone:"info"},caja:{title:"Supervisor",subtitle:"Auditoria y gestion",tone:"dark"},marketing:{title:"Marketing",subtitle:"Crecimiento y campanas",tone:"info"},doctor:{title:"Doctor",subtitle:"Atencion al cliente",tone:"dark"}},bu=[{id:"chat",label:"Chat"},{id:"dashboard",label:"Dashboard"},{id:"campaigns",label:"Campanas"}],Tu=[{id:"general",label:"General"},{id:"users",label:"Gestion de Usuarios"},{id:"bot",label:"Configuracion de Bot"},{id:"templates",label:"Plantillas de Meta"},{id:"audit",label:"Registros / Auditoria"},{id:"odoo",label:"Integracion Odoo"}];function Lu(e){return my[e]||{title:e,subtitle:"Acceso personalizado",tone:"info"}}function gy({settingsTab:e,setSettingsTab:t,rolePermissions:n,setRolePermissions:s,isAdmin:i,adminUsers:a,userForm:l,setUserForm:o,roleOptions:c,handleUserSubmit:h,handleUserDelete:x,defaultRolePermissions:p,handleRoleDelete:y}){const[T,v]=g.useState(""),[L,N]=g.useState(!1),[u,f]=g.useState(""),[m,k]=g.useState(null),[P,j]=g.useState(!1),[O,C]=g.useState("create"),[I,$]=g.useState("recepcion"),[Y,le]=g.useState({modules:{},settings:{}}),pe=g.useMemo(()=>{const b=T.trim().toLowerCase(),X=a||[];return b?X.filter(Q=>{var ue,de;const V=((ue=Q.name)==null?void 0:ue.toLowerCase())||"",ie=((de=Q.email)==null?void 0:de.toLowerCase())||"";return V.includes(b)||ie.includes(b)}):X},[a,T]);function je(b){const X=(n==null?void 0:n[b])||(p==null?void 0:p[b])||{modules:{},settings:{}};return{modules:{...X.modules||{}},settings:{...X.settings||{}}}}function _e(b,X="edit"){C(X),$(b),le(je(b)),j(!0)}function se(b,X,Q){le(V=>{const ie={...V},ue={...ie[b]||{}},de={...ue[X]||{}},ge=!de[Q];return de[Q]=ge,Q==="write"&&ge&&(de.read=!0),Q==="read"&&!ge&&(de.write=!1),ue[X]=de,ie[b]=ue,ie})}function Ee(){I&&(s(b=>({...b,[I]:Y})),j(!1))}function B(){I&&y&&y(I),j(!1)}function W(b,X,Q,V){i&&s(ie=>{var Fe,ot;const ue={...ie},de={modules:{...(Fe=ue[b])==null?void 0:Fe.modules},settings:{...(ot=ue[b])==null?void 0:ot.settings}},ge={...de[X]},$e={...ge[Q]},Ve=!$e[V];return $e[V]=Ve,V==="write"&&Ve&&($e.read=!0),V==="read"&&!Ve&&($e.write=!1),ge[Q]=$e,de[X]=ge,ue[b]=de,ue})}function S(b){return Lu(b).title.toUpperCase()}function H(b,X){return b!=null&&b.id?`OP-${b.id.slice(-4).toUpperCase()}`:`OP-${String(X+1).padStart(4,"0")}`}function G(b){o({id:b.id,name:b.name,email:b.email,role:b.role,password:"",is_active:b.is_active}),N(!0)}function Z(){o({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),N(!0)}return r.jsxs("div",{className:"users-page",children:[r.jsxs("header",{className:"users-header",children:[r.jsxs("div",{className:"users-title-row",children:[r.jsx("span",{className:"users-kicker"}),r.jsxs("div",{children:[r.jsx("div",{className:"users-title",children:"Gestion de Usuarios"}),r.jsx("div",{className:"users-subtitle",children:"Administra los accesos y roles de los operadores de tu empresa."})]})]}),r.jsxs("div",{className:"users-actions",children:[e==="list"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"users-search",children:[r.jsx("span",{className:"users-search-icon","aria-hidden":"true"}),r.jsx("input",{type:"text",placeholder:"Buscar usuario...",value:T,onChange:b=>v(b.target.value)})]}),r.jsx("button",{className:"settings-primary",type:"button",onClick:Z,children:"Nuevo Usuario"})]}),e==="roles"&&r.jsx("button",{className:"settings-primary",type:"button",onClick:()=>_e("recepcion","create"),children:"+ Nuevo Rol"})]})]}),r.jsxs("div",{className:"users-tabs",children:[r.jsx("button",{className:`users-tab ${e==="list"?"active":""}`,type:"button",onClick:()=>t("list"),children:"Lista de Usuarios"}),r.jsx("button",{className:`users-tab ${e==="roles"?"active":""}`,type:"button",onClick:()=>t("roles"),children:"Roles y Permisos"})]}),e==="list"&&r.jsxs("div",{className:"users-table",children:[r.jsxs("div",{className:"users-table-head",children:[r.jsx("span",{children:"Nombre / Usuario"}),r.jsx("span",{children:"Email"}),r.jsx("span",{children:"Rol"}),r.jsx("span",{children:"Estado"}),r.jsx("span",{children:"Acciones"})]}),pe.map((b,X)=>{var Q;return r.jsxs("div",{className:"users-row",children:[r.jsxs("div",{className:"users-cell user-name",children:[r.jsx("div",{className:"user-avatar",children:((Q=b.name)==null?void 0:Q[0])||"?"}),r.jsxs("div",{children:[r.jsx("div",{className:"user-title",children:b.name}),r.jsx("div",{className:"user-id",children:H(b,X)})]})]}),r.jsx("div",{className:"users-cell",children:b.email}),r.jsx("div",{className:"users-cell",children:r.jsx("span",{className:`role-pill ${b.role}`,children:S(b.role)})}),r.jsx("div",{className:"users-cell",children:r.jsx("span",{className:`status-pill ${b.is_active?"active":"inactive"}`,children:b.is_active?"Activo":"Inactivo"})}),r.jsx("div",{className:"users-cell",children:r.jsxs("div",{className:"users-actions-menu",children:[r.jsx("button",{className:"users-action",type:"button",onClick:()=>f(V=>V===b.id?"":b.id),children:"..."}),u===b.id&&r.jsxs("div",{className:"users-menu",children:[r.jsx("button",{type:"button",onClick:()=>{f(""),G(b)},children:"Editar"}),r.jsx("button",{type:"button",onClick:()=>{f(""),k(b)},children:"Eliminar"})]})]})})]},b.id)}),!pe.length&&r.jsx("div",{className:"empty-state",children:"Sin usuarios para mostrar"})]}),e==="roles"&&r.jsx("div",{className:"roles-grid",children:c.map(b=>{const X=Lu(b),Q=n==null?void 0:n[b];return r.jsxs("div",{className:"role-card",children:[r.jsxs("div",{className:"role-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"role-title",children:X.title}),r.jsx("div",{className:`role-subtitle ${X.tone}`,children:X.subtitle})]}),r.jsx("button",{className:"role-edit",type:"button",onClick:()=>_e(b,"edit"),children:"edit"})]}),r.jsxs("div",{className:"role-permissions",children:[r.jsxs("div",{className:"perm-head",children:[r.jsx("span",{}),r.jsx("span",{children:"Lectura"}),r.jsx("span",{children:"Escritura"})]}),bu.map(V=>{var ie,ue,de,ge;return r.jsxs("div",{className:"perm-row",children:[r.jsx("span",{children:V.label}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((ue=(ie=Q==null?void 0:Q.modules)==null?void 0:ie[V.id])==null?void 0:ue.read)||!1,disabled:!i,onChange:()=>W(b,"modules",V.id,"read")}),r.jsx("span",{})]}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((ge=(de=Q==null?void 0:Q.modules)==null?void 0:de[V.id])==null?void 0:ge.write)||!1,disabled:!i,onChange:()=>W(b,"modules",V.id,"write")}),r.jsx("span",{})]})]},V.id)})]}),r.jsxs("div",{className:"role-settings",children:[r.jsx("div",{className:"role-settings-title",children:"Configuracion"}),Tu.map(V=>{var ie,ue,de,ge;return r.jsxs("div",{className:"perm-row",children:[r.jsx("span",{children:V.label}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((ue=(ie=Q==null?void 0:Q.settings)==null?void 0:ie[V.id])==null?void 0:ue.read)||!1,disabled:!i,onChange:()=>W(b,"settings",V.id,"read")}),r.jsx("span",{})]}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((ge=(de=Q==null?void 0:Q.settings)==null?void 0:de[V.id])==null?void 0:ge.write)||!1,disabled:!i,onChange:()=>W(b,"settings",V.id,"write")}),r.jsx("span",{})]})]},V.id)})]})]},b)})}),L&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-card",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("div",{className:"modal-title",children:l.id?"Editar usuario":"Crear usuario"}),r.jsx("button",{className:"modal-close",type:"button",onClick:()=>N(!1),children:"x"})]}),r.jsxs("form",{className:"form-grid",onSubmit:async b=>{await h(b),N(!1)},children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre"}),r.jsx("input",{type:"text",value:l.name,onChange:b=>o(X=>({...X,name:b.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:l.email,onChange:b=>o(X=>({...X,email:b.target.value})),disabled:!!l.id})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Rol"}),r.jsx("select",{value:l.role,onChange:b=>o(X=>({...X,role:b.target.value})),children:c.map(b=>r.jsx("option",{value:b,children:b},b))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Password"}),r.jsx("input",{type:"password",value:l.password,onChange:b=>o(X=>({...X,password:b.target.value}))})]}),r.jsxs("label",{className:"toggle",children:[r.jsx("input",{type:"checkbox",checked:l.is_active,onChange:b=>o(X=>({...X,is_active:b.target.checked}))}),"Activo"]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"primary",type:"submit",children:l.id?"Guardar cambios":"Crear"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>N(!1),children:"Cancelar"})]})]})]})}),m&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-card",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("div",{className:"modal-title",children:"Eliminar usuario"}),r.jsx("button",{className:"modal-close",type:"button",onClick:()=>k(null),children:"x"})]}),r.jsxs("p",{className:"modal-text",children:["Vas a desactivar a ",r.jsx("strong",{children:m.email}),". Continuar?"]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"danger",type:"button",onClick:()=>{x==null||x(m.id),k(null)},children:"Eliminar"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>k(null),children:"Cancelar"})]})]})}),P&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-card modal-lg",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("div",{className:"modal-title",children:O==="create"?"Nuevo rol":"Editar rol"}),r.jsx("button",{className:"modal-close",type:"button",onClick:()=>j(!1),children:"x"})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Rol"}),O==="edit"?r.jsx("select",{value:I,disabled:!0,children:c.map(b=>r.jsx("option",{value:b,children:b},b))}):r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",list:"role-options",placeholder:"nuevo-rol",value:I,onChange:b=>$(b.target.value)}),r.jsx("datalist",{id:"role-options",children:c.map(b=>r.jsx("option",{value:b},b))})]})]}),r.jsxs("div",{className:"role-permissions",children:[r.jsxs("div",{className:"perm-head",children:[r.jsx("span",{children:"Modulos"}),r.jsx("span",{children:"Lectura"}),r.jsx("span",{children:"Escritura"})]}),bu.map(b=>{var X,Q,V,ie;return r.jsxs("div",{className:"perm-row",children:[r.jsx("span",{children:b.label}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((Q=(X=Y==null?void 0:Y.modules)==null?void 0:X[b.id])==null?void 0:Q.read)||!1,onChange:()=>se("modules",b.id,"read")}),r.jsx("span",{})]}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((ie=(V=Y==null?void 0:Y.modules)==null?void 0:V[b.id])==null?void 0:ie.write)||!1,onChange:()=>se("modules",b.id,"write")}),r.jsx("span",{})]})]},b.id)})]}),r.jsxs("div",{className:"role-settings",children:[r.jsxs("div",{className:"perm-head",children:[r.jsx("span",{children:"Configuracion"}),r.jsx("span",{children:"Lectura"}),r.jsx("span",{children:"Escritura"})]}),Tu.map(b=>{var X,Q,V,ie;return r.jsxs("div",{className:"perm-row",children:[r.jsx("span",{children:b.label}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((Q=(X=Y==null?void 0:Y.settings)==null?void 0:X[b.id])==null?void 0:Q.read)||!1,onChange:()=>se("settings",b.id,"read")}),r.jsx("span",{})]}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((ie=(V=Y==null?void 0:Y.settings)==null?void 0:V[b.id])==null?void 0:ie.write)||!1,onChange:()=>se("settings",b.id,"write")}),r.jsx("span",{})]})]},b.id)})]})]}),r.jsxs("div",{className:"form-actions",children:[O==="edit"&&r.jsx("button",{className:"danger",type:"button",onClick:B,children:"Eliminar rol"}),r.jsx("button",{className:"primary",type:"button",onClick:Ee,disabled:!I,children:"Guardar"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>j(!1),children:"Cancelar"})]})]})})]})}function vy({branches:e,branchForm:t,setBranchForm:n,handleBranchSubmit:s,handleBranchDisable:i,services:a,serviceForm:l,setServiceForm:o,handleServiceSubmit:c,handleServiceDisable:h,handleServiceBranchToggle:x,tenantChannels:p,channelForm:y,setChannelForm:T,handleChannelSelect:v,handleChannelSubmit:L}){return r.jsxs("div",{className:"page-grid",children:[r.jsxs("div",{className:"panel",children:[r.jsx("div",{className:"panel-title",children:"Sucursales"}),r.jsxs("div",{className:"table",children:[r.jsxs("div",{className:"table-head",children:[r.jsx("span",{children:"Nombre"}),r.jsx("span",{children:"Codigo"}),r.jsx("span",{children:"Estado"}),r.jsx("span",{children:"Accion"})]}),e.map(N=>r.jsxs("div",{className:"table-row",children:[r.jsx("span",{children:N.name}),r.jsx("span",{children:N.code}),r.jsx("span",{children:N.is_active?"Activa":"Inactiva"}),r.jsxs("div",{className:"row-actions",children:[r.jsx("button",{className:"ghost",onClick:()=>n({id:N.id,code:N.code,name:N.name,address:N.address,lat:N.lat,lng:N.lng,hours_text:N.hours_text,phone:N.phone||"",is_active:N.is_active}),children:"Editar"}),r.jsx("button",{className:"danger",onClick:()=>i(N.id),children:"Desactivar"})]})]},N.id))]}),r.jsx("div",{className:"panel-title",children:t.id?"Editar sucursal":"Crear sucursal"}),r.jsxs("form",{className:"form-grid",onSubmit:s,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Codigo"}),r.jsx("input",{type:"text",value:t.code,onChange:N=>n(u=>({...u,code:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre"}),r.jsx("input",{type:"text",value:t.name,onChange:N=>n(u=>({...u,name:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Direccion"}),r.jsx("input",{type:"text",value:t.address,onChange:N=>n(u=>({...u,address:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Lat"}),r.jsx("input",{type:"number",value:t.lat,onChange:N=>n(u=>({...u,lat:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Lng"}),r.jsx("input",{type:"number",value:t.lng,onChange:N=>n(u=>({...u,lng:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Telefono"}),r.jsx("input",{type:"text",value:t.phone,onChange:N=>n(u=>({...u,phone:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Horarios"}),r.jsx("textarea",{rows:"3",value:t.hours_text,onChange:N=>n(u=>({...u,hours_text:N.target.value}))})]}),r.jsxs("label",{className:"toggle",children:[r.jsx("input",{type:"checkbox",checked:t.is_active,onChange:N=>n(u=>({...u,is_active:N.target.checked}))}),"Activa"]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),r.jsxs("div",{className:"panel",children:[r.jsx("div",{className:"panel-title",children:"Servicios"}),r.jsxs("div",{className:"table",children:[r.jsxs("div",{className:"table-head",children:[r.jsx("span",{children:"Servicio"}),r.jsx("span",{children:"Precio"}),r.jsx("span",{children:"Estado"}),r.jsx("span",{children:"Accion"})]}),a.map(N=>r.jsxs("div",{className:"table-row",children:[r.jsx("span",{children:N.name}),r.jsxs("span",{children:["Bs ",N.price_bob]}),r.jsx("span",{children:N.is_active?"Activo":"Inactivo"}),r.jsxs("div",{className:"row-actions",children:[r.jsx("button",{className:"ghost",onClick:()=>o({id:N.id,code:N.code,name:N.name,subtitle:N.subtitle||"",description:N.description,price_bob:N.price_bob,duration_min:N.duration_min||"",image_url:N.image_url||"",is_featured:N.is_featured,is_active:N.is_active}),children:"Editar"}),r.jsx("button",{className:"danger",onClick:()=>h(N.id),children:"Desactivar"})]})]},N.id))]}),r.jsx("div",{className:"panel-title",children:l.id?"Editar servicio":"Crear servicio"}),r.jsxs("form",{className:"form-grid",onSubmit:c,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Codigo"}),r.jsx("input",{type:"text",value:l.code,onChange:N=>o(u=>({...u,code:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre"}),r.jsx("input",{type:"text",value:l.name,onChange:N=>o(u=>({...u,name:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Subtitulo"}),r.jsx("input",{type:"text",value:l.subtitle,onChange:N=>o(u=>({...u,subtitle:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Descripcion"}),r.jsx("textarea",{rows:"3",value:l.description,onChange:N=>o(u=>({...u,description:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Precio (Bs)"}),r.jsx("input",{type:"number",value:l.price_bob,onChange:N=>o(u=>({...u,price_bob:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Duracion (min)"}),r.jsx("input",{type:"number",value:l.duration_min,onChange:N=>o(u=>({...u,duration_min:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Imagen URL"}),r.jsx("input",{type:"text",value:l.image_url,onChange:N=>o(u=>({...u,image_url:N.target.value}))})]}),r.jsxs("label",{className:"toggle",children:[r.jsx("input",{type:"checkbox",checked:l.is_featured,onChange:N=>o(u=>({...u,is_featured:N.target.checked}))}),"Destacado"]}),r.jsxs("label",{className:"toggle",children:[r.jsx("input",{type:"checkbox",checked:l.is_active,onChange:N=>o(u=>({...u,is_active:N.target.checked}))}),"Activo"]}),l.id&&r.jsxs("div",{className:"field",children:[r.jsx("span",{children:"Disponibilidad por sucursal"}),r.jsx("div",{className:"chip-grid",children:e.map(N=>{var m,k;const u=(k=(m=a.find(P=>P.id===l.id))==null?void 0:m.branches)==null?void 0:k.find(P=>{var O;return(((O=P.branch)==null?void 0:O.id)||P.branch_id)===N.id}),f=(u==null?void 0:u.is_available)||!1;return r.jsxs("label",{className:"chip",children:[r.jsx("input",{type:"checkbox",checked:f,onChange:P=>x(a.find(j=>j.id===l.id),N.id,P.target.checked)}),N.name]},N.id)})})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),r.jsxs("div",{className:"panel",children:[r.jsx("div",{className:"panel-title",children:"Lineas de WhatsApp"}),r.jsxs("div",{className:"table",children:[r.jsxs("div",{className:"table-head",children:[r.jsx("span",{children:"Nombre"}),r.jsx("span",{children:"Phone ID"}),r.jsx("span",{children:"Accion"})]}),(p||[]).map(N=>r.jsxs("div",{className:"table-row",children:[r.jsx("span",{children:N.display_name||"Linea sin nombre"}),r.jsx("span",{children:N.phone_number_id}),r.jsx("button",{className:"ghost",onClick:()=>v(N),children:"Renombrar"})]},N.id)),!(p!=null&&p.length)&&r.jsx("div",{className:"empty-state",children:"Sin lineas registradas"})]}),r.jsx("div",{className:"panel-title",children:y.id?"Editar linea":"Selecciona una linea"}),r.jsxs("form",{className:"form-grid",onSubmit:L,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre visible"}),r.jsx("input",{type:"text",value:y.display_name,onChange:N=>T(u=>({...u,display_name:N.target.value})),disabled:!y.id})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{className:"primary",type:"submit",disabled:!y.id,children:"Guardar"})})]})]})]})}function yy(){var v,L,N,u,f,m,k,P,j,O;const[e,t]=g.useState([]),[n,s]=g.useState(null),[i,a]=g.useState(!0),[l,o]=g.useState("");g.useEffect(()=>{c()},[]);async function c(){a(!0);try{const[C,I]=await Promise.all([he("/api/admin/bots"),he("/api/admin/bots/metrics")]);t(C.bots||[]),s(I.metrics),o("")}catch(C){console.error(C),o(C.message||"Error al cargar datos")}finally{a(!1)}}async function h(C,I){try{await Be(`/api/admin/bots/${C}`,{is_active:I}),t($=>$.map(Y=>Y.id===C?{...Y,is_active:I}:Y))}catch($){o($.message||"Error al cambiar estado")}}const x=C=>{if(!C)return"Sin actividad reciente";const I=new Date(C),Y=new Date-I,le=Math.floor(Y/6e4);if(le<1)return"Hace un momento";if(le<60)return`ltima actividad: hace ${le} min`;const pe=Math.floor(le/60);return pe<24?`ltima actividad: hace ${pe}h`:`ltima actividad: ${I.toLocaleDateString()}`},p=e.filter(C=>C.is_active).length,y=p>0?"ACTIVO":"INACTIVO",T=p>0?"active":"inactive";return r.jsxs("div",{className:"bot-section",children:[r.jsxs("div",{className:"bot-section-header",children:[r.jsxs("div",{className:"bot-section-title-area",children:[r.jsx("div",{className:"bot-section-icon",children:""}),r.jsxs("div",{children:[r.jsx("h2",{className:"bot-section-title",children:"Gestin de Bots"}),r.jsx("p",{className:"bot-section-subtitle",children:"Administra los flujos automatizados y el rendimiento tcnico."})]})]}),r.jsxs("div",{className:"bot-section-global-toggle",children:[r.jsx("span",{className:"bot-toggle-label",children:"ESTADO DEL BOT:"}),r.jsxs("div",{className:`bot-toggle-pill ${T}`,children:[r.jsx("span",{className:"bot-toggle-dot"}),r.jsx("span",{children:y})]})]})]}),l&&r.jsx("div",{className:"bot-error",children:l}),r.jsxs("div",{className:"bot-section-content",children:[r.jsxs("div",{className:"bot-flows-panel",children:[r.jsx("div",{className:"bot-panel-header",children:r.jsx("span",{className:"bot-panel-title",children:"MONITOREO DE FLUJOS"})}),i?r.jsx("div",{className:"bot-loading",children:"Cargando bots..."}):e.length===0?r.jsxs("div",{className:"bot-empty",children:[r.jsx("p",{children:"No hay bots asignados a tu cuenta."}),r.jsx("p",{className:"bot-empty-hint",children:"Contacta con soporte si necesitas activar un bot."})]}):r.jsx("div",{className:"bot-flows-list",children:e.map(C=>r.jsxs("div",{className:"bot-flow-card",children:[r.jsxs("div",{className:"bot-flow-info",children:[r.jsx("span",{className:"bot-flow-icon",children:C.flow_icon||""}),r.jsxs("div",{children:[r.jsx("div",{className:"bot-flow-name",children:C.flow_name}),r.jsxs("div",{className:`bot-flow-status ${C.is_active?"active":"inactive"}`,children:[" ",C.is_active?"ACTIVO":"INACTIVO"]})]})]}),r.jsx("div",{className:"bot-flow-actions",children:r.jsxs("label",{className:"bot-toggle-switch",children:[r.jsx("input",{type:"checkbox",checked:C.is_active,onChange:()=>h(C.id,!C.is_active)}),r.jsx("span",{className:"bot-toggle-slider"})]})}),r.jsx("div",{className:"bot-flow-meta",children:x(C.updated_at)}),C.flow_description&&r.jsx("div",{className:"bot-flow-desc",children:C.flow_description})]},C.id))})]}),r.jsxs("div",{className:"bot-metrics-panel",children:[r.jsx("div",{className:"bot-panel-header",children:r.jsx("span",{className:"bot-panel-title",children:"MTRICAS DE EFICACIA DETALLADAS"})}),r.jsxs("div",{className:"bot-metrics-grid",children:[r.jsxs("div",{className:"bot-metric-card",children:[r.jsx("div",{className:"bot-metric-icon",children:""}),r.jsxs("div",{className:`bot-metric-badge ${((v=n==null?void 0:n.interactions)==null?void 0:v.change)>=0?"positive":"neutral"}`,children:[((L=n==null?void 0:n.interactions)==null?void 0:L.change)>0?"+":"",(N=n==null?void 0:n.interactions)==null?void 0:N.change,"% ",(u=n==null?void 0:n.interactions)==null?void 0:u.label]}),r.jsx("div",{className:"bot-metric-label",children:"INTERACCIONES"}),r.jsx("div",{className:"bot-metric-value",children:n?n.interactions.value:"--"}),r.jsx("div",{className:"bot-metric-sub",children:"Total de sesiones iniciadas hoy"})]}),r.jsxs("div",{className:"bot-metric-card",children:[r.jsx("div",{className:"bot-metric-icon",children:""}),r.jsxs("div",{className:"bot-metric-badge neutral",children:["Objetivo: ",(f=n==null?void 0:n.resolution)==null?void 0:f.target,"%"]}),r.jsx("div",{className:"bot-metric-label",children:"RESOLUCIN FINAL"}),r.jsxs("div",{className:"bot-metric-value",children:[n?n.resolution.value:"--","%"]}),r.jsx("div",{className:"bot-metric-progress",children:r.jsx("div",{className:"bot-metric-progress-fill",style:{width:`${n?n.resolution.value:0}%`}})})]}),r.jsxs("div",{className:"bot-metric-card",children:[r.jsx("div",{className:"bot-metric-icon",children:""}),r.jsxs("div",{className:"bot-metric-badge sla",children:[" ",(m=n==null?void 0:n.uptime)==null?void 0:m.status]}),r.jsx("div",{className:"bot-metric-label",children:"VIDA DEL PROCESO"}),r.jsx("div",{className:"bot-metric-value",children:n?n.uptime.value:"--"}),r.jsx("div",{className:"bot-metric-sub",children:"UPTIME SISTEMA"})]}),r.jsxs("div",{className:"bot-metric-card",children:[r.jsx("div",{className:`bot-metric-icon ${((k=n==null?void 0:n.errors)==null?void 0:k.value)>0?"error":""}`,children:""}),r.jsx("div",{className:`bot-metric-badge ${((P=n==null?void 0:n.errors)==null?void 0:P.value)===0?"stable":"neutral"}`,children:(j=n==null?void 0:n.errors)==null?void 0:j.status}),r.jsx("div",{className:"bot-metric-label",children:"ERRORES"}),r.jsx("div",{className:"bot-metric-value",children:n?n.errors.value:"--"}),r.jsxs("div",{className:`bot-metric-sub ${((O=n==null?void 0:n.errors)==null?void 0:O.critical)>0?"error-sub":""}`,children:["CRTICOS: ",n?n.errors.critical:0]})]})]})]})]})]})}const Au={DRAFT:{bg:"#e3e8ef",text:"#475569",label:"BORRADOR"},PENDING:{bg:"#fef3c7",text:"#d97706",label:"PENDIENTE"},APPROVED:{bg:"#d1fae5",text:"#059669",label:"APROBADA"},REJECTED:{bg:"#fee2e2",text:"#dc2626",label:"RECHAZADA"},PAUSED:{bg:"#fef3c7",text:"#d97706",label:"PAUSADA"},DISABLED:{bg:"#e5e7eb",text:"#6b7280",label:"DESHABILITADA"}},xy=[{value:"UTILITY",label:"Utility"},{value:"MARKETING",label:"Marketing"},{value:"AUTHENTICATION",label:"Authentication"}],jy=[{value:"es",label:"Espaol (ES)"},{value:"en",label:"English (EN)"}];function Ny({templates:e=[],templateForm:t,setTemplateForm:n,handleTemplateSubmit:s,handleTemplateSubmitToMeta:i,handleTemplateDelete:a,handleSyncTemplates:l,onLoadTemplates:o}){const[c,h]=g.useState("list"),[x,p]=g.useState(null),[y,T]=g.useState(""),[v,L]=g.useState(!1),[N,u]=g.useState(""),[f,m]=g.useState(!1),[k,P]=g.useState(null),[j,O]=g.useState({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),[C,I]=g.useState([]);g.useEffect(()=>{o&&o()},[]),g.useEffect(()=>{if(!k)return;const S=H=>{H.target.closest(".template-card-menu")||P(null)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[k]);const $=async()=>{L(!0);try{await l()}finally{L(!1)}},Y=()=>{p(null),O({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),I([]),h("editor")},le=S=>{p(S),O({name:S.name||"",category:S.category||"UTILITY",language:S.language||"es",body_text:S.body_text||S.body_preview||"",header_type:S.header_type||"",header_content:S.header_content||"",footer_text:S.footer_text||"",buttons:S.buttons_json||[]}),I(S.variable_mappings||[]),h("editor")},pe=async S=>{!(S!=null&&S.id)||!a||!window.confirm(`Eliminar la plantilla "${S.name}"? Esta accin la ocultar localmente y la eliminar de Meta si aplica.`)||(await a(S.id),P(null))},je=async S=>{S.preventDefault();const H={...j,id:x==null?void 0:x.id,variable_mappings:C};if(n&&n(H),s){const G=await s(null,H);G&&p(G)}},_e=async()=>{if(i){m(!0);try{let S=x==null?void 0:x.id;if(!S){const H={...j,variable_mappings:C},G=await s(null,H);S=G==null?void 0:G.id,G&&p(G)}S&&(await i(S),h("list"),p(null))}finally{m(!1)}}},se=()=>{h("list"),p(null)},B=(S=>{const H=S.match(/\{\{(\d+)\}\}/g)||[];return[...new Set(H)].map(G=>parseInt(G.replace(/[{}]/g,"")))})(j.body_text),W=e.filter(S=>{var Z;const H=!y||((Z=S.name)==null?void 0:Z.toLowerCase().includes(y.toLowerCase()))||(S.body_text||S.body_preview||"").toLowerCase().includes(y.toLowerCase()),G=!N||S.status===N;return H&&G});return c==="list"?r.jsxs("div",{className:"templates-section",children:[r.jsxs("div",{className:"templates-header",children:[r.jsxs("div",{className:"templates-title-row",children:[r.jsx("h1",{children:"Plantillas de Meta"}),r.jsxs("span",{className:"meta-connected-badge",children:[r.jsx("span",{className:"status-dot"}),"CONECTADO A META API"]})]}),r.jsxs("div",{className:"templates-actions",children:[r.jsx("div",{className:"search-input-wrap",children:r.jsx("input",{type:"text",placeholder:"Buscar plantillas...",value:y,onChange:S=>T(S.target.value)})}),r.jsxs("select",{value:N,onChange:S=>u(S.target.value),className:"status-filter-select",children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"APPROVED",children:"Aprobadas"}),r.jsx("option",{value:"PENDING",children:"Pendientes"}),r.jsx("option",{value:"REJECTED",children:"Rechazadas"}),r.jsx("option",{value:"DRAFT",children:"Borradores"})]}),r.jsx("button",{className:"btn-sync",onClick:$,disabled:v,children:v?" Sincronizando...":" Sincronizar"}),r.jsxs("button",{className:"btn-create-template",onClick:Y,children:[r.jsx("span",{children:"+"})," Crear Nueva Plantilla"]})]})]}),r.jsxs("div",{className:"templates-grid",children:[W.map(S=>{var G;const H=Au[S.status]||Au.DRAFT;return r.jsxs("div",{className:"template-card",onClick:()=>le(S),children:[r.jsxs("div",{className:"template-card-head",children:[r.jsx("div",{className:"template-category-icon",children:S.category==="MARKETING"?"":S.category==="UTILITY"?"":""}),r.jsx("span",{className:"template-status-badge",style:{backgroundColor:H.bg,color:H.text},children:H.label})]}),r.jsx("h3",{className:"template-card-name",children:S.name}),r.jsxs("div",{className:"template-card-meta",children:[r.jsx("span",{className:"tag-category",children:S.category}),r.jsx("span",{className:"tag-language",children:S.language==="es"?"ESPAOL (ES)":(G=S.language)==null?void 0:G.toUpperCase()})]}),(S.body_text||S.body_preview)&&r.jsxs("p",{className:"template-card-preview",children:[(S.body_text||S.body_preview).slice(0,80),"..."]}),r.jsxs("div",{className:"template-card-actions",children:[r.jsx("button",{className:"btn-preview",onClick:Z=>{Z.stopPropagation(),le(S)},children:" Previsualizar"}),r.jsxs("div",{className:"template-card-menu",onClick:Z=>Z.stopPropagation(),children:[r.jsx("button",{className:"btn-more",type:"button",onClick:()=>P(Z=>Z===S.id?null:S.id),children:""}),k===S.id&&r.jsxs("div",{className:"template-menu-dropdown",children:[r.jsx("button",{type:"button",className:"menu-item",onClick:()=>le(S),children:"Editar"}),r.jsx("button",{type:"button",className:"menu-item danger",onClick:()=>pe(S),children:"Eliminar"})]})]})]})]},S.id)}),r.jsxs("div",{className:"template-card template-card-create",onClick:Y,children:[r.jsx("div",{className:"create-icon",children:"+"}),r.jsx("h3",{children:"Crear nueva plantilla"}),r.jsx("p",{children:"Empieza a disear tu flujo de WhatsApp"})]})]}),W.length===0&&!y&&r.jsx("div",{className:"templates-empty",children:r.jsx("p",{children:"No hay plantillas. Crea una nueva o sincroniza desde Meta."})})]}):r.jsxs("div",{className:"template-editor",children:[r.jsxs("div",{className:"editor-header",children:[r.jsxs("div",{className:"editor-breadcrumb",children:[r.jsx("button",{className:"btn-back",onClick:se,children:" Volver"}),r.jsx("span",{className:"breadcrumb-sep",children:"/"}),r.jsx("span",{children:x?"Editar Plantilla":"Nueva Plantilla"})]}),r.jsxs("div",{className:"editor-actions",children:[r.jsx("button",{className:"btn-save-draft",onClick:je,children:" Guardar Borrador"}),((x==null?void 0:x.status)==="DRAFT"||(x==null?void 0:x.status)==="REJECTED"||!x)&&r.jsx("button",{className:"btn-primary",onClick:_e,disabled:f||!j.name||!j.body_text,children:f?"Enviando...":"Enviar a Meta"}),r.jsx("button",{className:"btn-discard",onClick:se,children:" Descartar"})]})]}),r.jsxs("div",{className:"editor-layout",children:[r.jsxs("div",{className:"editor-form-panel",children:[r.jsxs("div",{className:"form-section",children:[r.jsx("h3",{children:" General Settings"}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Template Name"}),r.jsx("input",{type:"text",placeholder:"patient_appointment_reminder",value:j.name,onChange:S=>O({...j,name:S.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")})})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Category"}),r.jsx("select",{value:j.category,onChange:S=>O({...j,category:S.target.value}),children:xy.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Language"}),r.jsx("select",{value:j.language,onChange:S=>O({...j,language:S.target.value}),children:jy.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))})]})]})]}),r.jsxs("div",{className:"form-section",children:[r.jsxs("div",{className:"form-section-header",children:[r.jsx("h3",{children:" Message Body"}),r.jsx("button",{className:"btn-insert-var",type:"button",onClick:()=>{const S=B.length+1;O({...j,body_text:j.body_text+`{{${S}}}`})},children:"+ Insert Variable"})]}),r.jsx("textarea",{rows:"6",placeholder:"Hola {{1}}, te recordamos tu cita en PODOPIE para el da {{2}} a las {{3}}. Por favor, confirma tu asistencia.",value:j.body_text,onChange:S=>O({...j,body_text:S.target.value})}),r.jsxs("div",{className:"char-count",children:[j.body_text.length," / 1024"]})]})]}),r.jsxs("div",{className:"editor-preview-panel",children:[r.jsxs("div",{className:"phone-frame",children:[r.jsxs("div",{className:"phone-header",children:[r.jsx("span",{className:"phone-back",children:""}),r.jsxs("div",{className:"phone-contact",children:[r.jsx("div",{className:"phone-avatar",children:""}),r.jsx("div",{className:"phone-name",children:"PODOPIE Clinic"})]}),r.jsx("div",{className:"phone-icons",children:" "})]}),r.jsxs("div",{className:"phone-body",children:[r.jsx("div",{className:"phone-date-label",children:"TODAY"}),r.jsxs("div",{className:"phone-message",children:[r.jsx("div",{className:"message-bubble",children:j.body_text||"Tu mensaje aparecer aqu..."}),r.jsx("div",{className:"message-time",children:"10:42 AM"})]}),j.buttons&&j.buttons.length>0&&r.jsx("div",{className:"phone-buttons",children:j.buttons.map((S,H)=>r.jsx("button",{className:"phone-action-btn",children:S.text||`Button ${H+1}`},H))})]})]}),r.jsx("div",{className:"preview-label",children:" High-fidelity dynamic preview"})]}),r.jsxs("div",{className:"editor-mapping-panel",children:[r.jsxs("div",{className:"mapping-tabs",children:[r.jsx("button",{className:"tab active",children:"VARIABLES"}),r.jsx("button",{className:"tab",children:"BUTTONS"})]}),r.jsxs("div",{className:"mapping-section",children:[r.jsx("h4",{children:"ODOO FIELD MAPPING"}),B.length===0?r.jsxs("p",{className:"mapping-empty",children:["Agrega variables ","{{1}}",", ","{{2}}","... en tu mensaje"]}):B.map(S=>{const H=C.find(G=>G.var_index===S)||{};return r.jsxs("div",{className:"mapping-item",children:[r.jsxs("div",{className:"mapping-var-badge",children:[`{{${S}}}`," Variable"]}),r.jsxs("select",{value:H.source_path||"",onChange:G=>{const Z=C.filter(b=>b.var_index!==S);Z.push({var_index:S,source_type:"odoo",source_path:G.target.value}),I(Z)},children:[r.jsx("option",{value:"",children:"Select Odoo Field..."}),r.jsx("option",{value:"partner_id.name",children:"patient_id.name"}),r.jsx("option",{value:"start_date",children:"start_date (Formatted)"}),r.jsx("option",{value:"start_time",children:"start_time"}),r.jsx("option",{value:"partner_id.phone",children:"patient_phone"})]}),r.jsx("span",{className:`mapping-status ${H.source_path?"linked":"needs"}`,children:H.source_path?" Linked":" Needs mapping"})]},S)})]}),r.jsxs("div",{className:"mapping-section",children:[r.jsxs("div",{className:"mapping-section-header",children:[r.jsx("h4",{children:"ACTION BUTTONS"}),r.jsx("button",{className:"btn-add-button",onClick:()=>{O({...j,buttons:[...j.buttons||[],{type:"QUICK_REPLY",text:""}]})},children:"+ Add Button"})]}),(j.buttons||[]).map((S,H)=>r.jsxs("div",{className:"button-item",children:[r.jsx("span",{className:"button-icon",children:""}),r.jsx("input",{type:"text",placeholder:"Button text",value:S.text||"",onChange:G=>{const Z=[...j.buttons];Z[H]={...Z[H],text:G.target.value},O({...j,buttons:Z})}}),r.jsx("button",{className:"btn-remove",onClick:()=>{const G=j.buttons.filter((Z,b)=>b!==H);O({...j,buttons:G})},children:""})]},H))]}),r.jsxs("div",{className:"mapping-tip",children:[r.jsx("span",{className:"tip-icon",children:""}),r.jsx("span",{children:"Tip: Asegrate de que tus variables estn correctamente mapeadas a campos de Odoo antes de enviar."})]})]})]})]})}const Ru={campaigns:"",users:"",bot:"",chat:"",templates:"",audience:"",system:""},wy={"user.created":"USUARIO CREADO","user.updated":"USUARIO EDITADO","user.disabled":"USUARIO ELIMINADO",template_draft_created:"PLANTILLA CREADA",template_draft_updated:"PLANTILLA EDITADA",template_submitted:"PLANTILLA ENVIADA",template_deleted:"PLANTILLA ELIMINADA",template_restored:"PLANTILLA RESTAURADA",audience_created:"SEGMENTO CREADO",audience_updated:"SEGMENTO EDITADO",audience_deleted:"SEGMENTO ELIMINADO","campaign.created":"CAMPAA CREADA","campaign.queued":"CAMPAA EN COLA","campaign.sending":"CAMPAA LANZADA","settings.updated":"CONFIG ACTUALIZADA","role_permissions.updated":"PERMISOS CAMBIADOS","role_permissions.deleted":"ROL ELIMINADO","conversation.status_changed":"CHAT ACTUALIZADO","conversation.tag_added":"TAG AGREGADO","conversation.tag_removed":"TAG ELIMINADO"};function gf(e){var s;const t=((s=e==null?void 0:e.data_json)==null?void 0:s.entity)||"";if(t==="template")return"templates";if(t==="audience")return"audience";if(t==="campaign")return"campaigns";if(t==="conversation")return"chat";const n=(e==null?void 0:e.action)||"";return n.includes("user")?"users":n.includes("campaign")?"campaigns":n.includes("template")?"templates":n.includes("audience")?"audience":n.includes("bot")?"bot":n.includes("conversation")?"chat":"system"}function Ya(e){if(!e)return{date:"--",time:"--"};const t=new Date(e);return Number.isNaN(t.getTime())?{date:"--",time:"--"}:{date:t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),time:t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}function _y(e,t="csv"){const s=[["timestamp","usuario","email","accion","modulo","data"].join(",")];e.forEach(h=>{var v,L;const x=((v=h.user)==null?void 0:v.name)||"Sistema",p=((L=h.user)==null?void 0:L.email)||"",y=gf(h),T=[new Date(h.created_at).toISOString(),x,p,h.action,y,JSON.stringify(h.data_json||{})];s.push(T.map(N=>`"${String(N).replace(/"/g,'""')}"`).join(","))});const i=s.join(`
`),a=t==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"text/csv;charset=utf-8;",l=t==="excel"?"audit_logs.xlsx":"audit_logs.csv",o=new Blob([i],{type:a}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download=l,document.body.appendChild(c),c.click(),document.body.removeChild(c)}function ky(){var j,O;const[e,t]=g.useState(""),[n,s]=g.useState(""),[i,a]=g.useState(""),[l,o]=g.useState(1),[c]=g.useState(6),[h,x]=g.useState(0),[p,y]=g.useState([]),[T,v]=g.useState(!1),[L,N]=g.useState(null),u=Math.max(1,Math.ceil(h/c)),f=async({pageOverride:C}={})=>{v(!0);try{const I=new URLSearchParams;I.set("page",String(C||l)),I.set("page_size",String(c)),e.trim()&&I.set("q",e.trim()),n&&I.set("from",n),i&&I.set("to",i);const $=await he(`/api/admin/audit?${I.toString()}`);y($.logs||[]),x($.total||0)}finally{v(!1)}};g.useEffect(()=>{f()},[l]);const m=()=>{o(1),f({pageOverride:1})},k=async(C="csv")=>{const I=new URLSearchParams;I.set("page","1"),I.set("page_size","1000"),e.trim()&&I.set("q",e.trim()),n&&I.set("from",n),i&&I.set("to",i);const $=await he(`/api/admin/audit?${I.toString()}`);_y($.logs||[],C)},P=g.useMemo(()=>{const C=[],I=Math.max(1,l-1),$=Math.min(u,I+2);for(let Y=I;Y<=$;Y+=1)C.push(Y);return C},[l,u]);return r.jsxs("div",{className:"audit-module",children:[r.jsxs("div",{className:"audit-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"audit-title",children:"Registros / Auditoria"}),r.jsx("div",{className:"audit-subtitle",children:"Monitorea acciones de usuarios y eventos del sistema"})]}),r.jsxs("div",{className:"audit-export-group",children:[r.jsx("button",{className:"audit-export",type:"button",onClick:()=>k("excel"),children:" Exportar Excel"}),r.jsx("button",{className:"audit-export outline",type:"button",onClick:()=>k("csv"),children:" Exportar CSV"})]})]}),r.jsxs("div",{className:"audit-filters",children:[r.jsxs("div",{className:"audit-search",children:[r.jsx("span",{className:"audit-search-icon"}),r.jsx("input",{type:"text",placeholder:"Filtrar por usuario o accion..",value:e,onChange:C=>t(C.target.value)})]}),r.jsxs("div",{className:"audit-date",children:[r.jsx("span",{children:"Desde"}),r.jsx("input",{type:"date",value:n,onChange:C=>s(C.target.value)})]}),r.jsxs("div",{className:"audit-date",children:[r.jsx("span",{children:"Hasta"}),r.jsx("input",{type:"date",value:i,onChange:C=>a(C.target.value)})]}),r.jsx("button",{className:"audit-filter-btn",type:"button",onClick:m,children:"Filtrar"})]}),r.jsxs("div",{className:"audit-card",children:[r.jsxs("div",{className:"audit-table-head",children:[r.jsx("span",{children:"Timestamp"}),r.jsx("span",{children:"Usuario"}),r.jsx("span",{children:"Accion"}),r.jsx("span",{children:"Modulo"})]}),T&&r.jsx("div",{className:"audit-empty",children:"Cargando registros..."}),!T&&!p.length&&r.jsx("div",{className:"audit-empty",children:"Sin registros para mostrar"}),!T&&p.map(C=>{var je,_e;const I=Ya(C.created_at),$=gf(C),Y=wy[C.action]||C.action,le=((je=C.user)==null?void 0:je.name)||"System Bot",pe=((_e=C.user)==null?void 0:_e.email)||"automated@service";return r.jsxs("button",{type:"button",className:"audit-row",onClick:()=>N(C),children:[r.jsxs("div",{className:"audit-cell time",children:[r.jsx("div",{children:I.date}),r.jsx("div",{className:"audit-time",children:I.time})]}),r.jsxs("div",{className:"audit-cell user",children:[r.jsx("div",{className:"audit-avatar",children:(le==null?void 0:le[0])||"S"}),r.jsxs("div",{children:[r.jsx("div",{className:"audit-user-name",children:le}),r.jsx("div",{className:"audit-user-email",children:pe})]})]}),r.jsx("div",{className:"audit-cell action",children:r.jsx("span",{className:"audit-action-pill",children:Y})}),r.jsxs("div",{className:"audit-cell module",children:[r.jsx("span",{className:"audit-module-icon",children:Ru[$]||Ru.system}),$.charAt(0).toUpperCase()+$.slice(1)]})]},C.id)})]}),r.jsxs("div",{className:"audit-footer",children:[r.jsxs("div",{children:["Mostrando ",p.length," de ",h," registros"]}),r.jsxs("div",{className:"audit-pagination",children:[r.jsx("button",{type:"button",disabled:l<=1,onClick:()=>o(C=>Math.max(1,C-1)),children:""}),P.map(C=>r.jsx("button",{type:"button",className:C===l?"active":"",onClick:()=>o(C),children:C},C)),r.jsx("button",{type:"button",disabled:l>=u,onClick:()=>o(C=>Math.min(u,C+1)),children:""})]})]}),L&&r.jsx("div",{className:"audit-modal",children:r.jsxs("div",{className:"audit-modal-card",children:[r.jsxs("div",{className:"audit-modal-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"audit-modal-title",children:"Detalle del registro"}),r.jsx("div",{className:"audit-modal-subtitle",children:L.action})]}),r.jsx("button",{type:"button",onClick:()=>N(null),children:""})]}),r.jsxs("div",{className:"audit-modal-body",children:[r.jsxs("div",{className:"audit-detail",children:[r.jsx("span",{children:"Usuario"}),r.jsx("strong",{children:((j=L.user)==null?void 0:j.name)||"System Bot"}),r.jsx("small",{children:((O=L.user)==null?void 0:O.email)||"automated@service"})]}),r.jsxs("div",{className:"audit-detail",children:[r.jsx("span",{children:"Timestamp"}),r.jsx("strong",{children:Ya(L.created_at).date}),r.jsx("small",{children:Ya(L.created_at).time})]}),r.jsxs("div",{className:"audit-detail full",children:[r.jsx("span",{children:"Data"}),r.jsx("pre",{children:JSON.stringify(L.data_json||{},null,2)})]})]})]})})]})}function Sy(){return r.jsxs("div",{className:"panel",children:[r.jsx("div",{className:"panel-title",children:"Integracion Odoo"}),r.jsx("div",{className:"empty-state",children:"Seccion en construccion"})]})}function Ey(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6",strokeWidth:"2"}),r.jsx("circle",{cx:"9",cy:"6",r:"2",strokeWidth:"2"}),r.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeWidth:"2"}),r.jsx("circle",{cx:"15",cy:"12",r:"2",strokeWidth:"2"}),r.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18",strokeWidth:"2"}),r.jsx("circle",{cx:"11",cy:"18",r:"2",strokeWidth:"2"})]})}function Cy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"9",cy:"8",r:"3",strokeWidth:"2"}),r.jsx("path",{d:"M4 20c0-3 2.7-5.5 6-5.5s6 2.5 6 5.5",strokeWidth:"2"}),r.jsx("circle",{cx:"17",cy:"9",r:"2",strokeWidth:"2"}),r.jsx("path",{d:"M14 20c0-1.8 1.4-3.4 3.2-4",strokeWidth:"2"})]})}function by(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"2"}),r.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"2"}),r.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"2"}),r.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"2"})]})}function Ty(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"2",strokeWidth:"2"}),r.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"9",strokeWidth:"2"}),r.jsx("line",{x1:"9",y1:"13",x2:"15",y2:"13",strokeWidth:"2"})]})}function Ly(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"6",y:"5",width:"12",height:"15",rx:"2",strokeWidth:"2"}),r.jsx("path",{d:"M9 5h6",strokeWidth:"2"}),r.jsx("path",{d:"M9 10h6",strokeWidth:"2"}),r.jsx("path",{d:"M9 14h6",strokeWidth:"2"})]})}function Ay(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"M8 4h4a2 2 0 1 1 0 4h-1v2h2a2 2 0 1 1 0 4h-2v2H8a2 2 0 1 1-4 0V8a2 2 0 1 1 4 0z",strokeWidth:"2"})})}function Ry({settingsSection:e,setSettingsSection:t,settingsTab:n,setSettingsTab:s,rolePermissions:i,setRolePermissions:a,currentRole:l,isAdmin:o,adminUsers:c,userForm:h,setUserForm:x,roleOptions:p,handleUserSubmit:y,settings:T,setSettings:v,handleSaveSettings:L,branches:N,services:u,branchForm:f,setBranchForm:m,handleBranchSubmit:k,handleBranchDisable:P,serviceForm:j,setServiceForm:O,handleServiceSubmit:C,handleServiceDisable:I,handleServiceBranchToggle:$,templates:Y,templateForm:le,setTemplateForm:pe,handleTemplateSubmit:je,handleTemplateSubmitToMeta:_e,handleTemplateDelete:se,handleSyncTemplates:Ee,auditLogs:B,formatDate:W,planName:S,tenantChannels:H,channelForm:G,setChannelForm:Z,handleChannelSelect:b,handleChannelSubmit:X,handleUserDelete:Q,defaultRolePermissions:V,handleRoleDelete:ie,useShellLayout:ue=!1,pageError:de}){const ge=i==null?void 0:i[l],$e=[{title:"Principal",items:[{id:"general",label:"General",icon:Ey},{id:"users",label:"Gestion de Usuarios",icon:Cy},{id:"bot",label:"Configuracion de Bot",icon:by}]},{title:"Canales e Integraciones",items:[{id:"templates",label:"Plantillas de Meta",icon:Ty},{id:"audit",label:"Registros / Auditoria",icon:Ly},{id:"odoo",label:"Integracion Odoo",icon:Ay}]}];function Ve(Oe){var Ie,We;return!!((We=(Ie=ge==null?void 0:ge.settings)==null?void 0:Ie[Oe])!=null&&We.read)}function Fe(Oe){Ve(Oe)&&t(Oe)}const ot=r.jsxs(r.Fragment,{children:[r.jsxs("aside",{className:"settings-sidebar",children:[r.jsxs("div",{className:"settings-header",children:[r.jsx("div",{className:"settings-title",children:"CONFIGURACION"}),r.jsx("div",{className:"settings-version",children:"PODOPIE OS V2.0"})]}),$e.map(Oe=>r.jsxs("div",{className:"settings-group",children:[r.jsx("div",{className:"settings-group-title",children:Oe.title}),r.jsx("div",{className:"settings-group-list",children:Oe.items.map(Ie=>{const We=!Ve(Ie.id),$t=Ie.icon;return r.jsxs("button",{className:`settings-item ${e===Ie.id?"active":""}`,type:"button",onClick:()=>Fe(Ie.id),disabled:We,children:[r.jsx("span",{className:"settings-icon","aria-hidden":"true",children:r.jsx($t,{className:"settings-icon-svg"})}),Ie.label]},Ie.id)})})]},Oe.title)),r.jsxs("div",{className:"settings-plan",children:[r.jsx("div",{className:"settings-plan-label",children:"Plan actual"}),r.jsx("div",{className:"settings-plan-name",children:S||"Sin plan"})]})]}),r.jsxs("div",{className:"settings-content",children:[e==="users"&&r.jsx(gy,{settingsTab:n,setSettingsTab:s,rolePermissions:i,setRolePermissions:a,isAdmin:o,adminUsers:c,userForm:h,setUserForm:x,roleOptions:p,handleUserSubmit:y,handleUserDelete:Q,defaultRolePermissions:V,handleRoleDelete:ie}),e==="general"&&r.jsx(vy,{branches:N,branchForm:f,setBranchForm:m,handleBranchSubmit:k,handleBranchDisable:P,services:u,serviceForm:j,setServiceForm:O,handleServiceSubmit:C,handleServiceDisable:I,handleServiceBranchToggle:$,tenantChannels:H,channelForm:G,setChannelForm:Z,handleChannelSelect:b,handleChannelSubmit:X}),e==="bot"&&r.jsx(yy,{settings:T,setSettings:v,handleSaveSettings:L}),e==="templates"&&r.jsx(Ny,{templates:Y,templateForm:le,setTemplateForm:pe,handleTemplateSubmit:je,handleTemplateSubmitToMeta:_e,handleTemplateDelete:se,handleSyncTemplates:Ee}),e==="audit"&&r.jsx(ky,{auditLogs:B,formatDate:W}),e==="odoo"&&r.jsx(Sy,{}),de&&r.jsx("div",{className:"error-banner",children:de})]})]});return ue?ot:r.jsx("section",{className:"settings-layout",children:ot})}function Py(){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"1.8"}),r.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"1.8"}),r.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"1.8"}),r.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"1.8"})]})}function Oy({tenantId:e,tenantBots:t,availableFlows:n,loading:s,onAddBot:i,onRemoveBot:a}){const[l,o]=g.useState(""),c=new Set(t.map(p=>p.flow_id)),h=n.filter(p=>!c.has(p.id));function x(){l&&(i(l),o(""))}return r.jsxs("section",{className:"sa-bot-card","data-tenant":e||"",children:[r.jsxs("header",{className:"sa-bot-header",children:[r.jsx("div",{className:"sa-bot-icon-large","aria-hidden":"true",children:r.jsx(Py,{})}),r.jsxs("div",{className:"sa-bot-title-group",children:[r.jsx("h3",{children:"Asignacion de Bots"}),r.jsx("p",{children:"Selecciona que flujos estaran disponibles para este cliente. Los flujos asignados apareceran inmediatamente en el panel del usuario."})]})]}),r.jsx("div",{className:"sa-bot-body",children:s?r.jsx("div",{className:"sa-bot-loading",children:"Cargando asignaciones..."}):t.length===0?r.jsxs("div",{className:"sa-bot-empty",children:[r.jsx("div",{className:"sa-bot-empty-icon",children:"+"}),r.jsx("div",{className:"sa-bot-empty-title",children:"Sin bots asignados"}),r.jsx("div",{className:"sa-bot-empty-sub",children:"Agrega un flujo desde el selector para activarlo en este tenant."})]}):r.jsx("div",{className:"sa-bot-grid",children:t.map(p=>r.jsxs("div",{className:"sa-assigned-bot",children:[r.jsx("div",{className:"sa-bot-item-icon",children:p.flow_icon||">"}),r.jsxs("div",{className:"sa-bot-item-info",children:[r.jsx("span",{className:"sa-bot-item-name",children:p.flow_name||p.flow_id}),r.jsx("span",{className:"sa-bot-item-desc",children:p.flow_description||"Sin descripcion"})]}),r.jsx("button",{type:"button",className:"sa-btn-remove",title:"Quitar bot del cliente",onClick:()=>a(p.id),children:"Quitar"})]},p.id))})}),r.jsxs("div",{className:"sa-bot-controls",children:[r.jsxs("div",{className:"sa-select-container",children:[r.jsx("label",{className:"sa-select-label",children:"Asignar bot"}),r.jsxs("select",{className:"sa-select-styled",value:l,onChange:p=>o(p.target.value),disabled:h.length===0,children:[r.jsx("option",{value:"",children:h.length===0?"No hay mas bots disponibles":"Selecciona un bot para asignar"}),h.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))]})]}),r.jsx("button",{type:"button",className:"sa-btn-assign",onClick:x,disabled:!l,children:"Asignar Bot"})]})]})}const St={name:"",slug:"",plan:"",db_url:"",phone_number_id:"",line_name:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",brand_name:"",logo_url:"",brand_primary:"#22d3ee",brand_accent:"#38bdf8",brand_bg:"#0b0f16",timezone:"",odoo_base_url:"",odoo_db_name:"",odoo_username:"",odoo_password:""},Dy=[{value:"starter",label:"Starter"},{value:"growth",label:"Growth"},{value:"scale",label:"Scale"},{value:"enterprise",label:"Enterprise"}];function My(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),r.jsx("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),r.jsx("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),r.jsx("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"})]})}function Jl(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Iy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"12",cy:"12",r:"3.5",strokeWidth:"1.6"}),r.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1.2l2-1.5-2-3.5-2.4.7a7.2 7.2 0 0 0-2-1.2L12 2 9.5 4.3a7.2 7.2 0 0 0-2 1.2l-2.4-.7-2 3.5 2 1.5A7 7 0 0 0 5 12c0 .4 0 .8.1 1.2l-2 1.5 2 3.5 2.4-.7a7.2 7.2 0 0 0 2 1.2L12 22l2.5-2.3a7.2 7.2 0 0 0 2-1.2l2.4.7 2-3.5-2-1.5c.1-.4.1-.8.1-1.2Z",strokeWidth:"1.2",strokeLinejoin:"round"})]})}function By(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.6"}),r.jsx("path",{d:"M16.5 16.5 20 20",strokeWidth:"1.6",strokeLinecap:"round"})]})}function zy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M6 12h12",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"m13 6 6 6-6 6",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Uy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M18 6 6 18",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"m6 6 12 12",strokeWidth:"1.8",strokeLinecap:"round"})]})}function $y(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56",strokeWidth:"1.8",strokeLinecap:"round"})})}function Pu(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Ou(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"m2 2 20 20",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Vy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",strokeWidth:"1.8"}),r.jsx("path",{d:"M12 18h.01",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Fy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"m15 5 4 4",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Wy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M3 6h18",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",strokeWidth:"1.8",strokeLinecap:"round"})]})}const Du={display_name:"",phone_number_id:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",is_active:!0,is_default:!1};function Hy({isOpen:e,onClose:t,initialData:n,onSave:s,tenantId:i}){const[a,l]=g.useState(Du),[o,c]=g.useState(!1),[h,x]=g.useState(!1),[p,y]=g.useState(!1),[T,v]=g.useState(null);if(g.useEffect(()=>{e&&(l(n||{...Du}),v(null))},[e,n]),!e)return null;const L=async N=>{if(N.preventDefault(),y(!0),v(null),!a.phone_number_id||!a.verify_token||!n&&!a.wa_token){v("Los campos ID de Telfono, Verify Token y Access Token son obligatorios."),y(!1);return}try{await s({...a,tenant_id:i}),t()}catch(u){console.error("Error saving channel:",u),v(u.message||"Error al guardar la lnea.")}finally{y(!1)}};return r.jsx("div",{className:"sa-modal-overlay",onClick:t,children:r.jsxs("div",{className:"sa-modal-content",onClick:N=>N.stopPropagation(),children:[r.jsxs("div",{className:"sa-modal-header",children:[r.jsx("div",{className:"sa-modal-title",children:n?"Editar Lnea WhatsApp":"Nueva Lnea WhatsApp"}),r.jsx("button",{className:"sa-modal-close",onClick:t,children:r.jsx(Uy,{width:24,height:24})})]}),r.jsxs("div",{className:"sa-modal-body",children:[T&&r.jsx("div",{className:"sa-alert",style:{marginBottom:"1rem"},children:T}),r.jsxs("div",{className:"sa-form-grid",children:[r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Nombre para mostrar (Opcional)"}),r.jsx("input",{value:a.display_name||"",onChange:N=>l({...a,display_name:N.target.value}),placeholder:"Ej: Ventas Principal"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Phone Number ID *"}),r.jsx("input",{value:a.phone_number_id||"",onChange:N=>l({...a,phone_number_id:N.target.value}),placeholder:"Identificador del nmero de telfono"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"WABA ID (WhatsApp Business Account ID)"}),r.jsx("input",{value:a.waba_id||"",onChange:N=>l({...a,waba_id:N.target.value}),placeholder:"Identificador de la cuenta de WhatsApp Business"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Verify Token (Webhook) *"}),r.jsx("input",{value:a.verify_token||"",onChange:N=>l({...a,verify_token:N.target.value}),placeholder:"Token de verificacin webhook"})]}),r.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{children:"Permanent Access Token *"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:o?"text":"password",value:a.wa_token||"",onChange:N=>l({...a,wa_token:N.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"Token de acceso permanente",style:{width:"100%",paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>c(!o),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:o?r.jsx(Ou,{width:18,height:18}):r.jsx(Pu,{width:18,height:18})})]})]}),r.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{children:"App Secret (Opcional)"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:h?"text":"password",value:a.app_secret||"",onChange:N=>l({...a,app_secret:N.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"App Secret de Meta",style:{width:"100%",paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>x(!h),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:h?r.jsx(Ou,{width:18,height:18}):r.jsx(Pu,{width:18,height:18})})]})]})]}),r.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"2rem"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[r.jsx("input",{type:"checkbox",checked:!!a.is_active,onChange:N=>l({...a,is_active:N.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Activa"]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[r.jsx("input",{type:"checkbox",checked:!!a.is_default,onChange:N=>l({...a,is_default:N.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Principal (Por Defecto)"]})]})]}),r.jsxs("div",{className:"sa-modal-footer",children:[r.jsx("button",{className:"sa-btn ghost",onClick:t,disabled:p,children:"Cancelar"}),r.jsx("button",{className:"sa-btn primary",onClick:L,disabled:p,children:p?r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx($y,{width:16,height:16,className:"animate-spin"})," Guardando..."]}):"Guardar Lnea"})]})]})})}function qy({channels:e=[],tenantId:t,onRefresh:n}){const[s,i]=g.useState(!1),[a,l]=g.useState(null),o=()=>{l(null),i(!0)},c=p=>{l(p),i(!0)},h=async p=>{const y=a?`/api/superadmin/channels/${a.id}`:"/api/superadmin/channels",v=await fetch(y,{method:a?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(p)});if(!v.ok){const L=await v.json();throw new Error(L.error||"Error al guardar")}await n()},x=async p=>{if(confirm("Ests seguro de que deseas eliminar esta lnea? Esta accin no se puede deshacer."))try{if(!(await fetch(`/api/superadmin/channels/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar");await n()}catch(y){console.error("Error deleting channel:",y),alert("No se pudo eliminar la lnea.")}};return r.jsxs("section",{className:"sa-lines-card",children:[r.jsxs("header",{className:"sa-lines-header",children:[r.jsxs("div",{className:"sa-lines-title",children:[r.jsx("div",{className:"sa-lines-icon",children:r.jsx(Vy,{width:24,height:24})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Lneas de WhatsApp Cloud"}),r.jsx("p",{children:"Gestiona las conexiones activas de WhatsApp para este tenant."})]})]}),r.jsxs("button",{className:"sa-btn primary",onClick:o,children:[r.jsx(Jl,{width:16,height:16,style:{marginRight:"0.5rem"}}),"Agregar Nueva Lnea"]})]}),r.jsx("div",{className:"sa-lines-body",children:r.jsxs("div",{className:"sa-lines-grid",children:[e.map(p=>r.jsxs("div",{className:`sa-line-card ${p.is_active?"":"opacity-75"}`,children:[r.jsxs("div",{className:"sa-line-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"sa-line-name",children:p.display_name||"Sin nombre"}),r.jsxs("div",{className:"sa-line-meta",children:["ID: ",p.phone_number_id]})]}),r.jsx("div",{className:`sa-line-status ${p.is_active?"active":""}`,title:p.is_active?"Activo":"Inactivo"})]}),r.jsxs("div",{className:"sa-line-badges",children:[p.is_default&&r.jsx("span",{className:"sa-line-badge default",children:"DEFAULT"}),!p.is_active&&r.jsx("span",{className:"sa-status warn",children:"INACTIVO"})]}),r.jsxs("div",{className:"sa-line-details",children:[r.jsxs("div",{className:"sa-line-detail",children:[r.jsx("span",{className:"sa-detail-label",children:"WABA ID"}),r.jsx("span",{className:"sa-detail-value",children:p.waba_id||"-"})]}),r.jsxs("div",{className:"sa-line-detail",children:[r.jsx("span",{className:"sa-detail-label",children:"Verify Token"}),r.jsx("span",{className:"sa-detail-value",children:p.verify_token?`${p.verify_token.substring(0,16)}...`:"-"})]})]}),r.jsxs("div",{className:"sa-line-actions",children:[r.jsx("button",{className:"sa-btn ghost",onClick:()=>c(p),title:"Editar",children:r.jsx(Fy,{width:16,height:16})}),r.jsx("button",{className:"sa-btn ghost",onClick:()=>x(p.id),title:"Eliminar",style:{color:"#f87171"},children:r.jsx(Wy,{width:16,height:16})})]})]},p.id)),r.jsxs("button",{type:"button",className:"sa-line-add-card",onClick:o,children:[r.jsx("div",{className:"sa-add-icon-circle",children:r.jsx(Jl,{width:24,height:24})}),r.jsx("span",{children:"Nueva Conexin"})]})]})}),r.jsx(Hy,{isOpen:s,onClose:()=>i(!1),initialData:a,onSave:h,tenantId:t})]})}function Mu({route:e="/superadmin",onNavigate:t,onImpersonateTenant:n,onLogout:s=()=>{}}){const[i,a]=g.useState([]),[l,o]=g.useState([]),[c,h]=g.useState(""),[x,p]=g.useState(""),[y,T]=g.useState("Verificacion de red: sistema ok"),[v,L]=g.useState(St),[N,u]=g.useState(!1),[f,m]=g.useState(!1),[k,P]=g.useState(""),[j,O]=g.useState(""),[C,I]=g.useState(!0),[$,Y]=g.useState(St),[le,pe]=g.useState(!0),[je,_e]=g.useState(!1),se=g.useRef(""),[Ee,B]=g.useState([]),[W,S]=g.useState([]),[H,G]=g.useState(!1),{pushToast:Z}=Zo(),b=g.useMemo(()=>{if(!e)return"";const _=e.match(/^\/superadmin\/tenants\/([^/]+)\/?$/)||e.match(/^\/superadmin\/tenant\/([^/]+)\/?$/)||e.match(/^\/superadmin\/edit\/([^/]+)\/?$/);return _?_[1]:""},[e]),X=e.startsWith("/superadmin/new"),Q=!!b,V=X||Q,ie=g.useCallback(_=>{if(t){t(_,{replace:!1});return}typeof window>"u"||window.history.pushState({},"",_)},[t]);async function ue(){try{const _=await he("/api/superadmin/tenants");a(_.tenants||[]);const z=await he("/api/superadmin/channels");o(z.channels||[]),p("")}catch(_){p(_.message||"No se pudo cargar datos.")}}g.useEffect(()=>{ue(),ve()},[]),g.useMemo(()=>{const _=new Map;return l.forEach(z=>{const q=_.get(z.tenant_id)||0;_.set(z.tenant_id,q+1)}),_},[l]);const de=g.useMemo(()=>{const _=c.trim().toLowerCase();return _?i.filter(z=>{const q=String(z.name||"").toLowerCase(),ee=String(z.slug||"").toLowerCase(),xe=String(z.id||"").toLowerCase();return q.includes(_)||ee.includes(_)||xe.includes(_)}):i.slice()},[i,c]),ge=i.length,$e=i.filter(_=>_.is_active).length;i.filter(_=>_.has_database).length;const Ve=i.filter(_=>_.has_odoo).length,Fe=ge?Math.round(Ve/ge*100):0;function ot(_){if(!_)return"--";const z=new Date(_);return Number.isNaN(z.getTime())?"--":z.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"2-digit"})}function Oe(_){return 10+Math.abs(Array.from(_).reduce((ee,xe)=>ee+xe.charCodeAt(0),0))%70}function Ie(){L(St),Y(St),O(""),I(!0),pe(!0),S([]),T("Verificacion de red: sistema ok"),se.current=""}function We(){Ie(),p(""),ie("/superadmin/new")}function $t(){se.current="",ie("/superadmin")}async function w(_){if(n)try{p(""),P(_),await n(_)}catch(z){p(z.message||"No se pudo entrar al tenant.")}finally{P("")}}function M(_){const z={};return Object.keys(St).forEach(q=>{const ee=_[q];z[q]=typeof ee=="string"?ee.trim():ee||""}),{...St,...z}}async function ae(_){if(_){se.current=_,O(_),L(St),Y(St),I(!0),pe(!0),S([]),_e(!0),p("");try{const z=await he(`/api/superadmin/tenants/${_}/details`);if(se.current!==_)return;const q=z.tenant||{},ee=z.branding||null,xe=z.odoo||null,Wt=z.database||null,_t=z.channel||null,ct=(ee==null?void 0:ee.colors)||{},Zt=M({...St,name:q.name||"",slug:q.slug||"",plan:q.plan||"",db_url:(Wt==null?void 0:Wt.db_url)||"",brand_name:(ee==null?void 0:ee.brand_name)||"",logo_url:(ee==null?void 0:ee.logo_url)||"",brand_primary:(ct==null?void 0:ct.primary)||St.brand_primary,brand_accent:(ct==null?void 0:ct.accent)||St.brand_accent,brand_bg:(ct==null?void 0:ct.bg)||St.brand_bg,odoo_base_url:(xe==null?void 0:xe.base_url)||"",odoo_db_name:(xe==null?void 0:xe.db_name)||"",odoo_username:(xe==null?void 0:xe.username)||"",odoo_password:(xe==null?void 0:xe.password)||""});L(Zt),Y(Zt),O(q.id||_),I(!!q.is_active),pe(!!q.is_active),T("Modo edicion: cambios pendientes"),await He(_)}catch(z){p(z.message||"No se pudo cargar tenant.")}finally{_e(!1)}}}async function ve(){try{const _=await he("/api/superadmin/flows");B(_.flows||[])}catch(_){console.error("Error loading flows",_)}}async function He(_){if(_){G(!0);try{const z=await he(`/api/superadmin/tenant-bots?tenant_id=${_}`);S(z.tenant_bots||[])}catch(z){console.error("Error loading tenant bots",z)}finally{G(!1)}}}async function Vt(_,z){try{await Be(`/api/superadmin/tenant-bots/${_}`,{is_active:z}),S(q=>q.map(ee=>ee.id===_?{...ee,is_active:z}:ee))}catch(q){p(q.message||"Error al cambiar estado del bot.")}}async function zn(_){if(j)try{const z=await be("/api/superadmin/tenant-bots",{tenant_id:j,flow_id:_});z.tenant_bot&&(S(q=>[z.tenant_bot,...q]),Z({message:"Bot agregado correctamente"}))}catch(z){p(z.message||"Error al agregar bot."),Z({type:"error",message:z.message||"Error al agregar bot"})}}async function ss(_){const z=W.find(q=>q.id===_);try{await Wn(`/api/superadmin/tenant-bots/${_}`),S(q=>q.filter(ee=>ee.id!==_)),Z({message:"Bot eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{if(!z)return;const q=await be("/api/superadmin/tenant-bots",{tenant_id:z.tenant_id,flow_id:z.flow_id});q!=null&&q.tenant_bot&&z.is_active===!1&&await Be(`/api/superadmin/tenant-bots/${q.tenant_bot.id}`,{is_active:!1}),await He(j),Z({message:"Bot restaurado"})}catch(q){Z({type:"error",message:(q==null?void 0:q.message)||"No se pudo restaurar el bot"})}}})}catch(q){p(q.message||"Error al eliminar bot."),Z({type:"error",message:q.message||"Error al eliminar bot"})}}async function Is(_){p(""),ie(`/superadmin/tenants/${_.id}`)}function Un(){const _=v.name.trim(),z=v.slug.trim(),q=v.db_url.trim();return!_||!z?{ok:!1,message:"Nombre y subdominio son requeridos."}:!j&&!q?{ok:!1,message:"Tenant DB URL es requerido."}:(v.brand_name.trim()||v.logo_url.trim()||v.brand_primary||v.brand_accent||v.brand_bg)&&!v.brand_name.trim()?{ok:!1,message:"Brand name es requerido."}:(v.odoo_base_url||v.odoo_db_name||v.odoo_username||v.odoo_password)&&(!v.odoo_base_url||!v.odoo_db_name||!v.odoo_username||!j&&!v.odoo_password)?{ok:!1,message:"Odoo incompleto: base_url, db_name, username, password."}:{ok:!0}}function Ft(_){if(!_)return"Verificacion completada";const z=[];if(_.database){const q=_.database.ok?"DB ok":"DB error",ee=typeof _.database.latency_ms=="number"?` (${_.database.latency_ms}ms)`:"";z.push(`${q}${ee}`)}if(_.odoo){const q=_.odoo.ok?"Odoo ok":"Odoo error",ee=typeof _.odoo.latency_ms=="number"?` (${_.odoo.latency_ms}ms)`:"";z.push(`${q}${ee}`)}return z.length?`Verificacion completada: ${z.join(" | ")}`:"Verificacion completada"}function rs(_){if(_!=null&&_.database&&!_.database.ok){const z=_.database.details||_.database.error;return R(z||"Error en DB")}if(_!=null&&_.odoo&&!_.odoo.ok){const z=_.odoo.details||_.odoo.error;return R(z||"Error en Odoo")}return"No se pudo validar conexion"}function R(_){const z=(_||"").toString(),q=z.toLowerCase();return q.includes("missing")?"Completa los campos de Odoo":q.includes("db_connection_failed")?"No se pudo conectar a la base de datos":q.includes("odoo")&&q.includes("failed")?"No se pudo autenticar en Odoo":z||"No se pudo validar conexion"}async function Ne(){const _=Un();if(!_.ok){T(_.message);return}u(!0),T("Verificando conexion...");try{const z=await be("/api/superadmin/tenants/validate",{db_url:v.db_url.trim(),odoo_base_url:v.odoo_base_url.trim(),odoo_db_name:v.odoo_db_name.trim(),odoo_username:v.odoo_username.trim(),odoo_password:v.odoo_password.trim()}),q=Ft(z.checks);T(q),z.ok?Z({message:q}):Z({type:"error",message:rs(z.checks)})}catch(z){T("Error validando conexion"),Z({type:"error",message:z.message||"No se pudo validar conexion"})}finally{u(!1)}}async function Bs(_){var q;if(_.preventDefault(),Q&&!Jt)return;const z=Un();if(!z.ok){p(z.message);return}try{m(!0),p("");let ee=j;if(ee?await Be(`/api/superadmin/tenants/${ee}`,{name:v.name.trim(),slug:v.slug.trim(),plan:v.plan.trim(),is_active:C}):ee=(q=(await be("/api/superadmin/tenants",{name:v.name.trim(),slug:v.slug.trim(),plan:v.plan.trim()})).tenant)==null?void 0:q.id,!ee)throw new Error("tenant_not_ready");if(v.db_url.trim()&&await be(`/api/superadmin/tenants/${ee}/database`,{db_url:v.db_url.trim()}),(v.brand_name.trim()||v.logo_url.trim())&&await Be("/api/superadmin/branding",{tenant_id:ee,brand_name:v.brand_name.trim(),logo_url:v.logo_url.trim()||null,colors:null}),v.odoo_base_url||v.odoo_db_name||v.odoo_username||v.odoo_password){const _t={tenant_id:ee,base_url:v.odoo_base_url.trim(),db_name:v.odoo_db_name.trim(),username:v.odoo_username.trim()};v.odoo_password.trim()&&(_t.password=v.odoo_password.trim()),await Be("/api/superadmin/odoo",_t)}if(await ue(),j){const _t=M(v);L(_t),Y(_t),pe(C),T("Cambios guardados"),Z({message:"Tenant actualizado correctamente"})}else Ie(),Z({message:"Tenant creado correctamente"})}catch(ee){p(ee.message||"No se pudo guardar tenant."),Z({type:"error",message:ee.message||"No se pudo guardar tenant"})}finally{m(!1)}}async function $n(){if(!j)return;const _=!C;try{m(!0),p(""),await Be(`/api/superadmin/tenants/${j}`,{is_active:_}),I(_),pe(_),T(_?"Tenant reactivado":"Tenant bloqueado"),await ue()}catch(z){p(z.message||"No se pudo cambiar estado del tenant.")}finally{m(!1)}}const Jt=g.useMemo(()=>!j&&!Q||C!==le?!0:Object.keys($).some(_=>{const z=String(v[_]??""),q=String($[_]??"");return z!==q}),[le,$,C,j,Q,v]);return g.useEffect(()=>{if(Q&&b&&b!==j){ae(b);return}X&&(j||je)&&Ie()},[je,j,X,Q,b]),r.jsxs("div",{className:"sa-shell",children:[r.jsxs("aside",{className:"sa-rail",children:[r.jsx("div",{className:"sa-rail-logo",children:"PRZV"}),r.jsxs("button",{type:"button",className:`sa-rail-btn ${V?"":"active"}`,onClick:$t,children:[r.jsx(My,{className:"sa-rail-icon"}),r.jsx("span",{children:"Dashboard"})]}),r.jsxs("button",{type:"button",className:`sa-rail-btn ${X?"active":""}`,onClick:We,children:[r.jsx(Jl,{className:"sa-rail-icon"}),r.jsx("span",{children:"Nuevo"})]}),r.jsxs("button",{type:"button",className:"sa-rail-btn",children:[r.jsx(Iy,{className:"sa-rail-icon"}),r.jsx("span",{children:"Ajustes"})]}),r.jsxs("div",{className:"sa-rail-footer",children:[r.jsx("div",{className:"sa-avatar",children:"SA"}),r.jsxs("div",{children:[r.jsx("div",{className:"sa-role",children:"Superadmin"}),r.jsx("div",{className:"sa-meta",children:"Control plane"})]})]})]}),r.jsxs("main",{className:"sa-main",children:[!V&&r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sa-topbar",children:[r.jsxs("div",{children:[r.jsx("div",{className:"sa-kicker",children:"Panel de control Perzivalh"}),r.jsxs("div",{className:"sa-title",children:["Sistema operativo ",r.jsx("span",{className:"sa-dot"})]}),r.jsx("div",{className:"sa-subtitle",children:"Estado general del entorno"})]}),r.jsxs("div",{className:"sa-top-actions",children:[r.jsx("span",{className:"sa-version",children:"v0.4 stable"}),r.jsx("button",{className:"sa-btn ghost",type:"button",onClick:ue,children:"Recargar"}),r.jsx("button",{className:"sa-btn ghost",type:"button",onClick:s,children:"Cerrar sesion"}),r.jsx("button",{className:"sa-btn primary",type:"button",onClick:We,children:"Nuevo tenant"})]})]}),r.jsxs("section",{className:"sa-kpi-grid",children:[r.jsxs("div",{className:"sa-kpi-card",children:[r.jsx("div",{className:"sa-kpi-label",children:"Total de empresas (tenants)"}),r.jsx("div",{className:"sa-kpi-value",children:ge}),r.jsxs("div",{className:"sa-kpi-meta",children:["+",$e," activas"]})]}),r.jsxs("div",{className:"sa-kpi-card",children:[r.jsx("div",{className:"sa-kpi-label",children:"Usuarios activos totales"}),r.jsx("div",{className:"sa-kpi-value",children:"--"}),r.jsx("div",{className:"sa-kpi-meta",children:"En tiempo real"})]}),r.jsxs("div",{className:"sa-kpi-card",children:[r.jsx("div",{className:"sa-kpi-label",children:"Mensajes hoy"}),r.jsx("div",{className:"sa-kpi-value",children:"--"}),r.jsx("div",{className:"sa-kpi-meta",children:"Canal API"})]}),r.jsxs("div",{className:"sa-kpi-card",children:[r.jsx("div",{className:"sa-kpi-label",children:"Conexiones Odoo activas"}),r.jsxs("div",{className:"sa-kpi-value",children:[Fe,"%"]}),r.jsxs("div",{className:"sa-kpi-meta",children:[Ve," sincronizadas"]})]})]}),r.jsxs("section",{className:"sa-table-card",children:[r.jsxs("div",{className:"sa-table-header",children:[r.jsxs("div",{className:"sa-search",children:[r.jsx(By,{className:"sa-search-icon"}),r.jsx("input",{value:c,onChange:_=>h(_.target.value),placeholder:"Filtrar empresas..."})]}),r.jsxs("div",{className:"sa-table-actions",children:[r.jsx("button",{className:"sa-btn ghost",type:"button",children:"Ordenar por salud"}),r.jsx("button",{className:"sa-btn ghost",type:"button",children:"Exportar CSV"})]})]}),r.jsxs("div",{className:"sa-table",children:[r.jsxs("div",{className:"sa-table-head",children:[r.jsx("div",{children:"ID referencia"}),r.jsx("div",{children:"Nombre de la empresa"}),r.jsx("div",{children:"Estado"}),r.jsx("div",{children:"Uso de recursos"}),r.jsx("div",{children:"Tiempo de actividad"}),r.jsx("div",{children:"Acciones"})]}),de.length?de.map(_=>{var xe;const z=Oe(_.id||"tenant"),q=_.has_database?"db":"no-db",ee=_.has_database;return r.jsxs("div",{className:"sa-table-row",children:[r.jsx("div",{className:"sa-ref",children:((xe=_.slug)==null?void 0:xe.toUpperCase())||"TENANT"}),r.jsxs("div",{children:[r.jsx("div",{className:"sa-tenant-name",children:_.name}),r.jsx("div",{className:"sa-tenant-meta",children:_.id.slice(0,8)})]}),r.jsx("div",{className:`sa-status ${_.is_active?"ok":"warn"}`,children:_.is_active?"activo":"inactivo"}),r.jsxs("div",{children:[r.jsx("div",{className:"sa-progress",children:r.jsx("span",{className:`sa-progress-fill ${q}`,style:{width:`${z}%`}})}),r.jsxs("div",{className:"sa-tenant-meta",children:[z,"% carga"]})]}),r.jsx("div",{className:"sa-tenant-meta",children:ot(_.created_at)}),r.jsx("div",{children:r.jsxs("div",{className:"sa-action-group",children:[r.jsx("button",{className:"sa-action",type:"button",onClick:()=>w(_.id),disabled:!ee||k===_.id,children:ee?k===_.id?"Entrando...":"Entrar":"Sin DB"}),r.jsx("button",{className:"sa-link",type:"button",onClick:()=>Is(_),children:r.jsx(zy,{className:"sa-link-icon"})})]})})]},_.id)}):r.jsx("div",{className:"sa-empty",children:"Sin tenants para mostrar."})]}),r.jsxs("div",{className:"sa-footer-note",children:["Mostrando ",de.length||0," empresas en produccion"]})]})]}),V&&r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sa-create-header",children:[r.jsx("button",{className:"sa-back",type:"button",onClick:$t,children:"Volver al dashboard"}),r.jsx("div",{className:"sa-create-title",children:Q?"Editar tenant":"Registrar nuevo tenant"}),r.jsxs("div",{className:"sa-create-actions",children:[r.jsx("div",{className:"sa-create-meta",children:"Modo: superadmin"}),r.jsx("button",{className:"sa-btn ghost",type:"button",onClick:s,children:"Cerrar sesion"})]})]}),x?r.jsx("div",{className:"sa-alert",children:x}):null,r.jsxs("form",{className:"sa-form",onSubmit:Bs,children:[r.jsxs("div",{className:"sa-form-grid sa-form-grid-2",children:[r.jsxs("div",{className:"sa-form-section",children:[r.jsx("div",{className:"sa-section-title",children:"Identidad del tenant"}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Nombre de la empresa"}),r.jsx("input",{value:v.name,onChange:_=>L({...v,name:_.target.value}),placeholder:"Ej. Empresa Alfa"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Subdominio reservado"}),r.jsx("input",{value:v.slug,onChange:_=>L({...v,slug:_.target.value}),placeholder:"alfa-salud"})]}),r.jsxs("div",{className:"sa-field sa-field-row",children:[r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Plan"}),r.jsxs("select",{value:v.plan,onChange:_=>L({...v,plan:_.target.value}),children:[r.jsx("option",{value:"",children:"Seleccionar"}),Dy.map(_=>r.jsx("option",{value:_.value,children:_.label},_.value))]})]}),Q&&r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Estado del tenant"}),r.jsxs("select",{value:C?"active":"inactive",onChange:_=>I(_.target.value==="active"),children:[r.jsx("option",{value:"active",children:"Activo"}),r.jsx("option",{value:"inactive",children:"Bloqueado"})]})]})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Brand name"}),r.jsx("input",{value:v.brand_name,onChange:_=>L({...v,brand_name:_.target.value}),placeholder:"Perzivalh"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Logo URL"}),r.jsx("input",{value:v.logo_url,onChange:_=>L({...v,logo_url:_.target.value}),placeholder:"https://"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Paleta de colores"}),r.jsx("div",{className:"sa-note",children:"Personalizacin deshabilitada por ahora."})]}),!Q&&r.jsx("div",{className:"sa-note",children:"Nota: al registrar un tenant se inicia el aprovisionamiento en el entorno de produccion."})]}),r.jsxs("div",{className:"sa-form-section",children:[r.jsx("div",{className:"sa-section-title",children:"Variables de entorno (envs)"}),r.jsxs("div",{className:"sa-subsection",children:[r.jsx("div",{className:"sa-subsection-title",children:"Base de datos"}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Tenant DB URL"}),r.jsx("input",{value:v.db_url,onChange:_=>L({...v,db_url:_.target.value}),placeholder:"postgresql://..."})]})]}),r.jsxs("div",{className:"sa-subsection",children:[r.jsx("div",{className:"sa-subsection-title",children:"Odoo (opcional)"}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Odoo Base URL"}),r.jsx("input",{value:v.odoo_base_url,onChange:_=>L({...v,odoo_base_url:_.target.value}),placeholder:"https://odoo-instancia"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Odoo DB Name"}),r.jsx("input",{value:v.odoo_db_name,onChange:_=>L({...v,odoo_db_name:_.target.value}),placeholder:"db_tenant_prod"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Odoo User"}),r.jsx("input",{value:v.odoo_username,onChange:_=>L({...v,odoo_username:_.target.value}),placeholder:"usuario@empresa.com"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Odoo Password (opcional)"}),r.jsx("input",{type:"password",value:v.odoo_password,onChange:_=>L({...v,odoo_password:_.target.value}),placeholder:"********"})]})]})]})]}),r.jsxs("div",{className:"sa-form-actions",children:[r.jsx("div",{className:"sa-status-note",children:Q?je?"Cargando datos...":Jt?"Cambios pendientes":"Sin cambios":y}),r.jsx("div",{className:"sa-form-buttons",children:Q?r.jsxs(r.Fragment,{children:[Jt&&r.jsx("button",{className:"sa-btn primary",type:"submit",disabled:f,children:f?"Guardando...":"Guardar cambios"}),r.jsx("button",{className:"sa-btn danger",type:"button",onClick:$n,disabled:f||!j,children:C?"Bloquear tenant":"Reactivar tenant"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"sa-btn ghost",type:"button",onClick:Ne,disabled:N||f,children:N?"Validando...":"Validar conexion"}),r.jsx("button",{className:"sa-btn primary",type:"submit",disabled:f,children:f?"Guardando...":"Desplegar instancia"})]})})]})]}),j?r.jsx(qy,{channels:l.filter(_=>_.tenant_id===j),tenantId:j,onRefresh:ue}):r.jsx("div",{style:{marginTop:"2rem",padding:"1rem",border:"1px dashed rgba(255,255,255,0.2)",borderRadius:"12px",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textAlign:"center"},children:"Crea el tenant primero para configurar las lneas de WhatsApp."}),j&&r.jsx(Oy,{tenantId:j,tenantBots:W,availableFlows:Ee,loading:H,onToggleBot:Vt,onAddBot:zn,onRemoveBot:ss})]})]})]})}const Iu=["open","pending","assigned"],Bu=["admin","recepcion","caja","marketing","doctor"],an={admin:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!0},campaigns:{read:!0,write:!0},settings:{read:!0,write:!0}},settings:{general:{read:!0,write:!0},users:{read:!0,write:!0},bot:{read:!0,write:!0},templates:{read:!0,write:!0},audit:{read:!0,write:!0},odoo:{read:!0,write:!0}}},recepcion:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},caja:{modules:{chat:{read:!0,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},marketing:{modules:{chat:{read:!1,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!0,write:!0},settings:{read:!0,write:!1}},settings:{general:{read:!0,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!0,write:!0},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},doctor:{modules:{chat:{read:!0,write:!1},dashboard:{read:!1,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}}};function Ka(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleString()}function Qy(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString()}function Gy(e){if(!e)return"-";const t=new Date(e);if(Number.isNaN(t.getTime()))return"-";const n=new Date,s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=Math.round((s-i)/864e5);return a===0?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):a===1?"Ayer":["Dom","Lun","Mar","Mie","Jue","Vie","Sab"][t.getDay()]}function Yy(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date,s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=Math.round((s-i)/864e5);if(a===0)return"Hoy";if(a===1)return"Ayer";const l=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],o=`${t.getDate()} ${l[t.getMonth()]}`;return t.getFullYear()!==n.getFullYear()?`${o} ${t.getFullYear()}`:o}function K(e){return e?typeof e=="string"?e:e.message||"Error inesperado":"Error inesperado"}function Ky(e,t){return e?t.includes(e.role):!1}function Xa(e){if(!e||typeof e!="object")return{...an};const t={...an};return Object.entries(e).forEach(([n,s])=>{var i,a;!s||typeof s!="object"||(t[n]={modules:{...(i=an[n])==null?void 0:i.modules,...s.modules},settings:{...(a=an[n])==null?void 0:a.settings,...s.settings}})}),t}function st(e,t,n,s="read"){var a;const i=(a=e==null?void 0:e[t])==null?void 0:a[n];return i?!!i[s]:!1}function Ja(e){const t=n=>n.status==="pending"&&!n.assigned_user_id?0:n.status==="pending"&&n.assigned_user_id?1:n.status==="assigned"?2:3;return[...e].sort((n,s)=>{const i=t(n),a=t(s);if(i!==a)return i-a;const l=new Date(n.last_message_at||n.created_at||0).getTime();return new Date(s.last_message_at||s.created_at||0).getTime()-l})}function Xy(e){const t=new URLSearchParams;Object.entries(e||{}).forEach(([s,i])=>{i==null||i===""||t.append(s,i)});const n=t.toString();return n?`?${n}`:""}function zu(e){if(!e)return"?";const t=e.trim();return t?t[0].toUpperCase():"?"}function Uu(e){if(typeof document>"u")return;const t=document.documentElement.style;t.removeProperty("--accent"),t.removeProperty("--accent-strong"),t.removeProperty("--accent-soft"),t.removeProperty("--accent-soft-2"),t.removeProperty("--scroll-thumb"),t.removeProperty("--scroll-thumb-hover")}function Jy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M4.5 5.5h15v10H8l-3.5 3.5V5.5Z",strokeWidth:"1.8",strokeLinejoin:"round"}),r.jsx("path",{d:"M8 9h8",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M8 12.5h5",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Zy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),r.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),r.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),r.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"})]})}function ex(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M6 9a6 6 0 1 1 12 0c0 4.2 2 5.5 2 5.5H4S6 13.2 6 9Z",strokeWidth:"1.8",strokeLinejoin:"round"}),r.jsx("path",{d:"M9.5 19a2.5 2.5 0 0 0 5 0",strokeWidth:"1.8"})]})}function tx(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"2",strokeLinecap:"round"})]})}function nx(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"12",cy:"12",r:"4",strokeWidth:"1.8"}),r.jsx("path",{d:"M12 3v2.5",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M12 18.5V21",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M3 12h2.5",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M18.5 12H21",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M5.2 5.2l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M17 17l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M5.2 18.8 7 17",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M17 7l1.8-1.8",strokeWidth:"1.8",strokeLinecap:"round"})]})}function sx(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"M20 14.2A8.5 8.5 0 1 1 9.8 4 6.5 6.5 0 0 0 20 14.2Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function rx(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.8"}),r.jsx("path",{d:"M16.5 16.5 21 21",strokeWidth:"1.8",strokeLinecap:"round"})]})}function ix(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function ax(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"3.5",y:"6",width:"11",height:"12",rx:"2",strokeWidth:"1.8"}),r.jsx("path",{d:"m14.5 10 6-3v10l-6-3",strokeWidth:"1.8"})]})}function lx(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"M6.5 4.5 9 3l2.5 4-2.5 1.5c1.2 2.3 3.2 4.3 5.5 5.5L16 11l4 2.5-1.5 2.5c-.7 1.2-2.2 1.7-3.6 1.3a15.9 15.9 0 0 1-7.7-7.7c-.4-1.4.1-2.9 1.3-3.6Z",strokeWidth:"1.6",strokeLinejoin:"round"})})}function ox(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"1.8"}),r.jsx("path",{d:"M12 10v6",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"7.5",r:"1",fill:"currentColor"})]})}function cx(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"m4 12 15-7-6 14-2.5-5.2L4 12Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function ux(){const[e,t]=g.useState(localStorage.getItem("token")||""),[n,s]=g.useState(()=>typeof window<"u"&&localStorage.getItem("superadmin_token")||""),[i,a]=g.useState(null),[l,o]=g.useState(null),[c,h]=g.useState(null),[x,p]=g.useState([]),[y,T]=g.useState({id:"",display_name:""}),[v,L]=g.useState(()=>{if(typeof window>"u")return{};try{return JSON.parse(localStorage.getItem("last_read_map")||"{}")}catch{return{}}}),[N,u]=g.useState({email:"",password:""}),[f,m]=g.useState(""),[k,P]=g.useState("chats"),[j,O]=g.useState(()=>typeof window<"u"?window.location.pathname:"/"),[C,I]=g.useState(()=>localStorage.getItem("theme")||"light"),[$,Y]=g.useState(!1),[le,pe]=g.useState(!1),[je,_e]=g.useState(!1),[se,Ee]=g.useState(!0),[B,W]=g.useState(!1),S=g.useRef(null),H=g.useRef(null),G=g.useRef(0),[Z,b]=g.useState("users"),[X,Q]=g.useState("list"),[V,ie]=g.useState(()=>Xa(null)),[ue,de]=g.useState(!1),[ge,$e]=g.useState(!1),[Ve,Fe]=g.useState(!1),ot=g.useMemo(()=>{const d=Object.keys(V||{}).filter(E=>!Bu.includes(E));return[...Bu,...d]},[V]),[Oe,Ie]=g.useState({status:"",assigned_user_id:"",tag:"",search:"",phone_number_id:""}),We=j.startsWith("/superadmin"),[$t,w]=g.useState([]),[M,ae]=g.useState(null),[ve,He]=g.useState([]),[Vt,zn]=g.useState(""),[ss,Is]=g.useState("text"),[Un,Ft]=g.useState([]),[rs,R]=g.useState([]),[Ne,Bs]=g.useState(""),[$n,Jt]=g.useState(""),[_,z]=g.useState(""),[q,ee]=g.useState(!1),[xe,Wt]=g.useState({name:"",color:"#6b7280"}),[_t,ct]=g.useState(!1),[Zt,te]=g.useState(""),{pushToast:J}=Zo(),zs=g.useRef(new Map),Us=g.useRef(new Map),$s=g.useRef(new Map),Vs=g.useRef(new Map),ec=g.useRef(new Map),[$r,vf]=g.useState(null),[Fs,Ws]=g.useState([]),[yf,xf]=g.useState([]),[jf,Nf]=g.useState([]),[wf,_f]=g.useState(""),[hx,fx]=g.useState(null),[px,mx]=g.useState([]),[gx,vx]=g.useState(null),[mn,tc]=g.useState({name:"",template_id:"",scheduled_for:""}),[gn,nc]=g.useState({status:"",tag:"",assigned_user_id:"",verified_only:!1}),[sc,Hs]=g.useState([]),[gt,rc]=g.useState({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),[Vr,va]=g.useState(null),[kf,Sf]=g.useState([]),[Ef,Cf]=g.useState([]),[nt,ic]=g.useState({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),[Xe,ac]=g.useState({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),[lc,bf]=g.useState({id:"",name:"",language:"es",category:"",body_preview:"",is_active:!0}),[Tf,Lf]=g.useState([]),en=g.useCallback((d,E={})=>{if(typeof window>"u")return;const A=d||"/";if(window.location.pathname===A){O(A);return}E.replace?window.history.replaceState({},"",A):window.history.pushState({},"",A),O(A)},[]),Af=g.useMemo(()=>Fs.find(d=>d.id===mn.template_id),[Fs,mn.template_id]),Rf=g.useMemo(()=>{const d=[...ve].reverse().find(E=>E.type==="note");return(d==null?void 0:d.text)||""},[ve]),Pf=g.useMemo(()=>ve.filter(d=>d.type==="note"),[ve]);g.useEffect(()=>{if(typeof window>"u")return;const d=()=>{O(window.location.pathname||"/")};return window.addEventListener("popstate",d),()=>window.removeEventListener("popstate",d)},[]),g.useEffect(()=>{ls(e||null)},[e]),g.useEffect(()=>{document.body.dataset.theme=C,localStorage.setItem("theme",C)},[C]),g.useEffect(()=>{W(!1),Ee(!0),requestAnimationFrame(()=>{Hr()}),M&&ya(M)},[M==null?void 0:M.id]),g.useEffect(()=>{k==="chats"&&(W(!1),Ee(!0),requestAnimationFrame(()=>{Hr()}))},[k,M==null?void 0:M.id]),g.useEffect(()=>{M&&(se?Hr():W(!0))},[ve,M==null?void 0:M.id,se]),g.useEffect(()=>{k!=="chats"&&Ee(!1)},[k]),g.useEffect(()=>{if(!e)return;let d=!0;return he("/api/me").then(E=>{d&&a(E.user)}).catch(()=>{d&&(t(""),a(null))}),()=>{d=!1}},[e]),g.useEffect(()=>{if(!i||i.role==="superadmin"){o(null),p([]),Uu();return}let d=!0;return he("/api/branding").then(E=>{d&&o(E.branding||null)}).catch(()=>{d&&o(null)}),he("/api/tenant").then(E=>{d&&h(E.tenant||null)}).catch(()=>{d&&h(null)}),he("/api/channels").then(E=>{d&&p(E.channels||[])}).catch(()=>{d&&p([])}),()=>{d=!1}},[i]),g.useEffect(()=>{Uu()},[l]),g.useEffect(()=>{if(i){if(i.role==="superadmin"){We||en("/superadmin",{replace:!0});return}We&&en("/",{replace:!0})}},[i,We,en]),g.useEffect(()=>{i&&i.role!=="superadmin"&&(Of(),Fr())},[i]),g.useEffect(()=>{i&&i.role!=="superadmin"&&Df()},[i]),g.useEffect(()=>{!i||k!=="chats"||i.role!=="superadmin"&&Mf()},[i,k,Oe]),g.useEffect(()=>{i&&i.role!=="superadmin"&&(k==="dashboard"&&cc(),k==="campaigns"&&(is(),qr()))},[i,k]),g.useEffect(()=>{if(!i||k!=="admin")return;const d=(V==null?void 0:V[i.role])||an[i.role],E=st(d,"settings","users"),A=st(d,"settings","bot"),U=st(d,"settings","general"),me=st(d,"settings","templates"),tn=st(d,"settings","audit");Z==="users"&&E&&qs(),Z==="bot"&&A&&ap(),Z==="general"&&U&&vn(),Z==="templates"&&me&&is(),Z==="audit"&&tn&&jp()},[i,k,Z,V]),g.useEffect(()=>{if(!i||k!=="admin")return;const d=(V==null?void 0:V[i.role])||an[i.role],A=["general","users","bot","templates","audit","odoo"].filter(U=>st(d,"settings",U));if(!A.length){P(result.user.role==="superadmin"?"superadmin":"chats");return}A.includes(Z)||b(A[0])},[i,k,Z,V]),g.useEffect(()=>{if(!e||(i==null?void 0:i.role)==="superadmin")return;const d=iy(e),E={current:null},A=["/sounds/new-notification-09-352705.wav","/sounds/new-notification-09-352705.mp3"],U=()=>{if(E.current)return E.current;const ne=new Audio(A[0]);ne.volume=1;let ce=0;return ne.addEventListener("error",()=>{ce+=1,ce<A.length&&(ne.src=A[ce],ne.load())}),E.current=ne,ne},me=()=>{const ne=U();ne.play().then(()=>{ne.pause(),ne.currentTime=0}).catch(()=>{})};window.addEventListener("click",me,{once:!0}),window.addEventListener("touchstart",me,{once:!0});const tn=()=>{if(!(typeof window>"u"))try{const ne=U();ne.currentTime=0,ne.play().catch(()=>{})}catch{}};return d.on("conversation:update",({conversation:ne})=>{const ce=ec.current.get(ne.id);ec.current.set(ne.id,ne.status),ne.status==="pending"&&!ne.assigned_user_id&&ce!=="pending"&&(tn(),J({message:"Nueva conversacin pendiente"})),w(kt=>{const ut=kt.map(nn=>nn.id===ne.id?{...nn,...ne}:nn);return ut.find(nn=>nn.id===ne.id)||ut.push(ne),Ja(ut)}),ae(kt=>(kt==null?void 0:kt.id)===ne.id?{...kt,...ne}:kt)}),d.on("message:new",({conversation:ne,message:ce})=>{ne.status==="pending"&&!ne.assigned_user_id&&tn();const kt={...ne,last_message_text:(ce==null?void 0:ce.text)||null,last_message_type:(ce==null?void 0:ce.type)||null,last_message_direction:(ce==null?void 0:ce.direction)||null,last_message_at:(ce==null?void 0:ce.created_at)||ne.last_message_at};w(ut=>{const nn=ut.map(Gs=>Gs.id===ne.id?{...Gs,...kt}:Gs);return nn.find(Gs=>Gs.id===ne.id)||nn.push(kt),Ja(nn)}),ae(ut=>(ut==null?void 0:ut.id)===ne.id?{...ut,...kt}:ut),He(ut=>!M||M.id!==ne.id?ut:(ya(kt),[...ut,ce]))}),()=>{d.disconnect()}},[e,M]),g.useEffect(()=>{if(!i)return;if(i.role==="superadmin"){k!=="superadmin"&&P("superadmin");return}const d=(V==null?void 0:V[i.role])||an[i.role],E=st(d,"modules","chat"),A=st(d,"modules","dashboard"),U=st(d,"modules","campaigns"),me=st(d,"modules","settings");k==="chats"&&!E&&P(A?"dashboard":U?"campaigns":"admin"),k==="dashboard"&&!A&&P(E?"chats":U?"campaigns":"admin"),k==="campaigns"&&!U&&P(E?"chats":A?"dashboard":"admin"),k==="admin"&&!me&&P(E?"chats":A?"dashboard":"campaigns")},[i,k,V]),g.useEffect(()=>{if(!i||i.role!=="admin"||!ue||!ge||Ve)return;const d=setTimeout(()=>{const E=G.current;Fe(!0),Be("/api/admin/role-permissions",{permissions:V}).then(()=>{G.current===E&&$e(!1)}).catch(A=>{te(K(A))}).finally(()=>{Fe(!1)})},350);return()=>clearTimeout(d)},[i,V,ge,ue,Ve]);async function Of(){try{const d=await he("/api/users");R(d.users||[])}catch(d){te(K(d))}}async function Df(){try{const d=await he("/api/role-permissions"),E=Xa(d.permissions||null);G.current=0,ie(E),$e(!1),de(!0)}catch(d){te(K(d)),de(!0)}}async function Fr(){try{const d=await he("/api/tags");Ft(d.tags||[])}catch(d){te(K(d))}}async function Mf(){try{const d=Xy(Oe),E=await he(`/api/conversations${d}`);w(Ja(E.conversations||[]))}catch(d){te(K(d))}}async function If(d){ct(!0);try{const E=await he(`/api/conversations/${d}`);let A=E.conversation;const U=E.messages||[];if((A==null?void 0:A.status)==="pending"&&!A.assigned_user_id&&(i!=null&&i.id))try{A=(await Be(`/api/conversations/${d}/assign`,{})).conversation}catch(me){String(K(me)).includes("already_assigned")&&J({type:"error",message:"Conversacin tomada por otro operador"})}ae(A),He(U),ya(A)}catch(E){te(K(E))}finally{ct(!1)}}async function Bf(d){d.preventDefault(),m("");try{const E=await be("/api/auth/login",{email:N.email,password:N.password});t(E.token),ls(E.token),a(E.user),s(""),localStorage.removeItem("superadmin_token");const A=E.user.role==="superadmin";P(A?"superadmin":"chats"),A?en("/superadmin",{replace:!0}):We&&en("/",{replace:!0})}catch{m("Credenciales invalidas")}}function Wr(){t(""),ls(null),a(null),w([]),ae(null),He([]),P("chats"),_e(!1),ie(Xa(null)),de(!1),$e(!1),Fe(!1),G.current=0,s(""),localStorage.removeItem("superadmin_token"),en("/",{replace:!0})}async function oc(d){const E=await be(`/api/superadmin/tenants/${d}/impersonate`);!n&&e&&(localStorage.setItem("superadmin_token",e),s(e)),t(E.token),ls(E.token),a(E.user),P("chats"),en("/",{replace:!0})}function zf(){const d=n||(typeof window<"u"?localStorage.getItem("superadmin_token"):"");if(!d){Wr();return}localStorage.removeItem("superadmin_token"),s(""),t(d),ls(d),a(null),P("chats"),en("/superadmin",{replace:!0})}function Uf(d){ie(E=>typeof d=="function"?d(E):d),G.current+=1,$e(!0)}function $f(){I(d=>d==="light"?"dark":"light")}function Hr(){const d=H.current;d&&(d.scrollTop=d.scrollHeight,Ee(!0),W(!1))}function ya(d){!(d!=null&&d.id)||!(d!=null&&d.last_message_at)||L(E=>{const A={...E,[d.id]:d.last_message_at};return localStorage.setItem("last_read_map",JSON.stringify(A)),A})}function Vf(){const d=H.current;if(!d)return;const A=d.scrollHeight-d.scrollTop-d.clientHeight<24;Ee(A),A&&W(!1)}function Ff(){ae(null),He([])}function Wf(d){var E;zn(d),(E=S.current)==null||E.focus()}async function Hf(d){if(d.preventDefault(),!M||!Vt.trim())return;const E=Vt.trim();zn("");try{await be(`/api/conversations/${M.id}/messages`,{text:E,type:ss})}catch(A){te(K(A))}}async function qf(d){if(d.preventDefault(),!M||!$n.trim())return;const E=$n.trim();Jt("");try{const A=await be(`/api/conversations/${M.id}/messages`,{text:E,type:"note"});A!=null&&A.message&&He(U=>[...U,A.message]),A!=null&&A.conversation&&ae(A.conversation)}catch(A){te(K(A))}}async function Qf(){if(M)try{const d=await Be(`/api/conversations/${M.id}/assign`);ae(d.conversation)}catch(d){const E=K(d)||"No se pudo tomar la conversacion";J({type:"error",message:E})}}async function Gf(){if(!(!M||!_))try{const d=await Be(`/api/conversations/${M.id}/assign`,{user_id:_});ae(d.conversation),z(""),J({message:"Conversacin reasignada"})}catch(d){const E=K(d)||"No se pudo reasignar";J({type:"error",message:E})}}async function Yf(d){if(M)try{const E=await Be(`/api/conversations/${M.id}/status`,{status:d});ae(E.conversation)}catch(E){te(K(E))}}async function Kf(d){var A;if(!M)return;const E=((A=M.tags)==null?void 0:A.some(U=>U.name===d))||!1;if(E){const U=`${M.id}:${d}`;if(Vs.current.has(U))return;const me=M,tn={...M,tags:(M.tags||[]).filter(ce=>ce.name!==d)};ae(tn);const ne=setTimeout(async()=>{try{const ce=await be(`/api/conversations/${me.id}/tags`,{add:[],remove:[d]});(M==null?void 0:M.id)===me.id&&ae(ce.conversation)}catch(ce){(M==null?void 0:M.id)===me.id&&ae(me),J({type:"error",message:K(ce)||"No se pudo eliminar el tag"})}finally{Vs.current.delete(U)}},8e3);Vs.current.set(U,{timer:ne,snapshot:me}),J({message:"Tag eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const ce=Vs.current.get(U);ce!=null&&ce.timer&&clearTimeout(ce.timer),ce!=null&&ce.snapshot?ae(ce.snapshot):ae(me),Vs.current.delete(U),J({message:"Eliminacin cancelada"})}});return}try{const U=await be(`/api/conversations/${M.id}/tags`,{add:E?[]:[d],remove:E?[d]:[]});ae(U.conversation)}catch(U){te(K(U))}}async function Xf(d){if(d.preventDefault(),!Ne.trim()||!M)return;const E=Ne.trim();Bs("");try{const A=await be(`/api/conversations/${M.id}/tags`,{add:[E]});ae(A.conversation),await Fr()}catch(A){te(K(A))}}async function Jf(d){d.preventDefault();const E=xe.name.trim();if(!E){te("Completa el nombre de la etiqueta");return}try{await be("/api/tags",{name:E,color:xe.color||null}),Wt({name:"",color:"#6b7280"}),await Fr(),J({message:"Etiqueta creada"})}catch(A){te(K(A))}}async function Zf(d,E){if(d)try{await Wn(`/api/tags/${d}`),ae(A=>A&&{...A,tags:(A.tags||[]).filter(U=>U.name!==E)}),await Fr(),J({message:"Etiqueta eliminada"})}catch(A){te(K(A))}}async function cc(){try{const d=await he("/api/dashboard/metrics");vf(d)}catch(d){te(K(d))}}async function is(){try{const d=await he("/api/templates").catch(()=>he("/api/admin/templates"));Ws(d.templates||[])}catch(d){te(K(d))}}async function qr(){try{const d=await he("/api/admin/campaigns");xf(d.campaigns||[])}catch(d){te(K(d))}}async function ep(d){_f(d);try{const E=await he(`/api/admin/campaigns/${d}/messages`);Nf(E.messages||[])}catch(E){te(K(E))}}async function tp(d){if(d.preventDefault(),!mn.name.trim()||!mn.template_id){te("Completa el nombre y plantilla");return}const E={};gn.status&&(E.status=gn.status),gn.tag&&(E.tag=gn.tag.trim()),gn.assigned_user_id&&(E.assigned_user_id=gn.assigned_user_id),gn.verified_only&&(E.verified_only=!0);try{await be("/api/admin/campaigns",{name:mn.name.trim(),template_id:mn.template_id,audience_filter:E,scheduled_for:mn.scheduled_for||null}),tc({name:"",template_id:"",scheduled_for:""}),nc({status:"",tag:"",assigned_user_id:"",verified_only:!1}),await qr(),J({message:"Campaa creada correctamente"})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al crear campaa"})}}async function np(d){try{await be(`/api/admin/campaigns/${d}/send`,{}),await qr()}catch(E){te(K(E))}}async function sp(){try{await he("/api/templates/sync"),await is()}catch(d){te(K(d))}}async function qs(){try{const d=await he("/api/admin/users");Hs(d.users||[])}catch(d){te(K(d))}}async function rp(d){if(d.preventDefault(),!gt.name.trim()||!gt.role){te("Completa los campos requeridos");return}try{gt.id?(await Be(`/api/admin/users/${gt.id}`,{name:gt.name.trim(),role:gt.role,is_active:gt.is_active,password:gt.password||void 0}),J({message:"Usuario actualizado correctamente"})):(await be("/api/admin/users",{name:gt.name.trim(),email:gt.email.trim().toLowerCase(),role:gt.role,password:gt.password}),J({message:"Usuario creado correctamente"})),rc({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),await qs()}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al guardar usuario"})}}async function ip(d){if(!d||zs.current.has(d))return;let E=null;try{E=sc.slice(),Hs(U=>U.filter(me=>me.id!==d));const A=setTimeout(async()=>{try{await Wn(`/api/admin/users/${d}`),await qs(),J({message:"Usuario eliminado definitivamente"})}catch(U){E?Hs(E):await qs(),J({type:"error",message:K(U)||"No se pudo eliminar el usuario"})}finally{zs.current.delete(d)}},8e3);zs.current.set(d,{timer:A,snapshot:E}),J({message:"Usuario eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const U=zs.current.get(d);U!=null&&U.timer&&clearTimeout(U.timer),U!=null&&U.snapshot?Hs(U.snapshot):E?Hs(E):await qs(),zs.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al eliminar usuario"})}}async function ap(){try{const d=await he("/api/admin/settings");va(d.settings)}catch(d){te(K(d))}}async function lp(){if(Vr)try{const d=await Be("/api/admin/settings",{bot_enabled:Vr.bot_enabled,auto_reply_enabled:Vr.auto_reply_enabled});va(d.settings)}catch(d){te(K(d))}}async function vn(){try{const[d,E]=await Promise.all([he("/api/admin/branches"),he("/api/admin/services")]);Sf(d.branches||[]),Cf(E.services||[])}catch(d){te(K(d))}}async function op(){try{const d=await he("/api/channels");p(d.channels||[])}catch{p([])}}function cp(d){T({id:d.id,display_name:d.display_name||""})}async function up(d){if(d.preventDefault(),!!y.id)try{await Be(`/api/channels/${y.id}`,{display_name:y.display_name.trim()}),T({id:"",display_name:""}),await op(),J({message:"Canal actualizado correctamente"})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al guardar canal"})}}async function dp(d){const E=V==null?void 0:V[d];if(!(!d||Us.current.has(d)))try{ie(U=>{const me={...U};return delete me[d],me});const A=setTimeout(async()=>{try{await Wn(`/api/admin/role-permissions/${d}`),J({message:"Rol eliminado definitivamente"})}catch(U){E&&ie(me=>({...me,[d]:E})),J({type:"error",message:K(U)||"No se pudo eliminar el rol"})}finally{Us.current.delete(d)}},8e3);Us.current.set(d,{timer:A,currentPermissions:E}),J({message:"Rol eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const U=Us.current.get(d);U!=null&&U.timer&&clearTimeout(U.timer),U!=null&&U.currentPermissions&&ie(me=>({...me,[d]:U.currentPermissions})),Us.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al eliminar rol"})}}async function hp(d){if(d.preventDefault(),!nt.code.trim()||!nt.name.trim()){te("Completa codigo y nombre");return}const E={code:nt.code.trim(),name:nt.name.trim(),address:nt.address.trim(),lat:nt.lat!==""?Number(nt.lat):0,lng:nt.lng!==""?Number(nt.lng):0,hours_text:nt.hours_text.trim(),phone:nt.phone.trim()||null,is_active:nt.is_active};try{nt.id?(await Be(`/api/admin/branches/${nt.id}`,E),J({message:"Sucursal actualizada correctamente"})):(await be("/api/admin/branches",E),J({message:"Sucursal creada correctamente"})),ic({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),await vn()}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al guardar sucursal"})}}async function fp(d){try{await Wn(`/api/admin/branches/${d}`),await vn(),J({message:"Sucursal eliminada correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await Be(`/api/admin/branches/${d}`,{is_active:!0}),await vn(),J({message:"Sucursal restaurada"})}catch(E){J({type:"error",message:K(E)||"No se pudo restaurar la sucursal"})}}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar sucursal"})}}async function pp(d){if(d.preventDefault(),!Xe.code.trim()||!Xe.name.trim()){te("Completa codigo y nombre");return}const E={code:Xe.code.trim(),name:Xe.name.trim(),subtitle:Xe.subtitle.trim()||null,description:Xe.description.trim(),price_bob:Xe.price_bob?Number(Xe.price_bob):0,duration_min:Xe.duration_min?Number(Xe.duration_min):null,image_url:Xe.image_url.trim()||null,is_featured:Xe.is_featured,is_active:Xe.is_active};try{Xe.id?(await Be(`/api/admin/services/${Xe.id}`,E),J({message:"Servicio actualizado correctamente"})):(await be("/api/admin/services",E),J({message:"Servicio creado correctamente"})),ac({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),await vn()}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al guardar servicio"})}}async function mp(d){try{await Wn(`/api/admin/services/${d}`),await vn(),J({message:"Servicio eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await Be(`/api/admin/services/${d}`,{is_active:!0}),await vn(),J({message:"Servicio restaurado"})}catch(E){J({type:"error",message:K(E)||"No se pudo restaurar el servicio"})}}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar servicio"})}}async function gp(d,E,A){if(d)try{await be(`/api/admin/services/${d.id}/branches`,{branch_id:E,is_available:A}),await vn()}catch(U){te(K(U))}}async function vp(d,E){d!=null&&d.preventDefault&&d.preventDefault();const A=E||lc||{},U=typeof A.name=="string"?A.name.trim():"";if(!U)return te("Completa el nombre"),null;const me={name:U,category:A.category||"UTILITY",language:A.language||"es",body_text:A.body_text||A.body_preview||"",header_type:A.header_type||null,header_content:A.header_content||null,footer_text:A.footer_text||null,buttons:A.buttons||A.buttons_json||[]},tn=A.variable_mappings||A.variableMappings||[];try{let ne=null;return A.id?(ne=await wu(`/api/templates/${A.id}`,me),await wu(`/api/templates/${A.id}/mappings`,{mappings:tn}),J({message:"Borrador actualizado correctamente"})):(ne=await be("/api/templates/draft",{...me,variable_mappings:tn}),J({message:"Borrador creado correctamente"})),await is(),(ne==null?void 0:ne.template)||null}catch(ne){return te(K(ne)),J({type:"error",message:K(ne)||"Error al guardar plantilla"}),null}}async function yp(d){if(d)try{await be(`/api/templates/${d}/submit`,{}),await is(),J({message:"Plantilla enviada a revisin de Meta"})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al enviar a Meta"})}}async function xp(d){if(d&&!$s.current.has(d))try{const E=Fs.slice();Ws(U=>U.filter(me=>me.id!==d));const A=setTimeout(async()=>{try{await Wn(`/api/templates/${d}`),await is(),J({message:"Plantilla eliminada definitivamente"})}catch(U){Ws(E),J({type:"error",message:K(U)||"No se pudo eliminar la plantilla"})}finally{$s.current.delete(d)}},8e3);$s.current.set(d,{timer:A,snapshot:E}),J({message:"Plantilla eliminada. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const U=$s.current.get(d);U!=null&&U.timer&&clearTimeout(U.timer),U!=null&&U.snapshot?Ws(U.snapshot):Ws(E),$s.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar plantilla"})}}async function jp(){try{const d=await he("/api/admin/audit?limit=200");Lf(d.logs||[])}catch(d){te(K(d))}}const uc={open:0,pending:0,closed:0};(($r==null?void 0:$r.status_counts)||[]).forEach(d=>{uc[d.status]=d._count.status});const Np=We?"Acceso al control plane":"Acceso a bandeja multiusuario";if(!e||!i)return r.jsx("div",{className:"login-shell",children:r.jsxs("div",{className:"login-card",children:[r.jsx("div",{className:"login-title",children:"Perzivalh"}),r.jsx("div",{className:"login-subtitle",children:Np}),r.jsxs("form",{className:"login-form",onSubmit:Bf,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:N.email,onChange:d=>u(E=>({...E,email:d.target.value})),required:!0})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Password"}),r.jsx("input",{type:"password",value:N.password,onChange:d=>u(E=>({...E,password:d.target.value})),required:!0})]}),f?r.jsx("div",{className:"error",children:f}):null,r.jsx("button",{className:"primary",type:"submit",children:"Entrar"})]})]})});if((i==null?void 0:i.role)==="superadmin"&&We)return r.jsx("main",{className:"superadmin-page",children:r.jsx(Mu,{route:j,onNavigate:en,onImpersonateTenant:oc,onLogout:Wr})});const Qs=(V==null?void 0:V[i.role])||an[i.role],wp=st(Qs,"modules","chat"),_p=st(Qs,"modules","dashboard"),kp=st(Qs,"modules","campaigns"),Sp=st(Qs,"modules","settings"),Ep=Ky(i,["admin"]),Cp=st(Qs,"modules","chat","write"),bp=["Confirmar Cita","Solicitar Resultados","Urgencia"],dc={open:"Bot activo",pending:"Pendiente",assigned:"Tomada"},Tp=M?M.display_name||M.phone_e164||M.wa_id:"Selecciona un chat",Lp=(M==null?void 0:M.phone_e164)||(M==null?void 0:M.wa_id)||"",Ap=M?dc[M.status]||"Sin estado":"",Rp=[{id:"chats",label:"Chats",icon:Jy,enabled:wp},{id:"dashboard",label:"Dashboard",icon:Zy,enabled:_p},{id:"campaigns",label:"Campanas",icon:ex,enabled:kp},{id:"admin",label:"Configuraciones",icon:tx,enabled:Sp}],xa=[];let hc="";ve.forEach(d=>{const E=d.created_at,A=E?new Date(E):null,U=A&&!Number.isNaN(A.getTime())?`${A.getFullYear()}-${A.getMonth()}-${A.getDate()}`:"";U&&U!==hc&&(xa.push(r.jsx("div",{className:"day-pill",children:Yy(E)},`day-${U}`)),hc=U),xa.push(r.jsxs("div",{className:`message ${d.direction} ${d.type==="note"?"note":""}`,children:[r.jsx("div",{className:"message-text",children:d.text||`[${d.type}]`}),r.jsx("div",{className:"message-meta",children:Ka(d.created_at)})]},d.id))});const Pp=!!n&&i.role!=="superadmin";return r.jsxs("div",{className:`app-shell ${k==="admin"?"admin-shell":""}`,children:[r.jsx(oy,{navItems:Rp,view:k,onSetView:P,theme:C,onToggleTheme:$f,user:i,logoUrl:(l==null?void 0:l.logo_url)||"",brandName:(l==null?void 0:l.brand_name)||"",isProfileOpen:je,onToggleProfile:()=>_e(d=>!d),onLogout:Wr,onReturnToSuperadmin:zf,showReturnToSuperadmin:Pp,getInitial:zu,SunIcon:nx,MoonIcon:sx}),k==="admin"?r.jsx(Ry,{settingsSection:Z,setSettingsSection:b,settingsTab:X,setSettingsTab:Q,rolePermissions:V,setRolePermissions:Uf,defaultRolePermissions:an,currentRole:i.role,isAdmin:Ep,adminUsers:sc,userForm:gt,setUserForm:rc,roleOptions:ot,handleUserSubmit:rp,handleUserDelete:ip,settings:Vr,setSettings:va,handleSaveSettings:lp,planName:(c==null?void 0:c.plan)||"",branches:kf,services:Ef,branchForm:nt,setBranchForm:ic,handleBranchSubmit:hp,handleBranchDisable:fp,serviceForm:Xe,setServiceForm:ac,handleServiceSubmit:pp,handleServiceDisable:mp,handleServiceBranchToggle:gp,tenantChannels:x,channelForm:y,setChannelForm:T,handleChannelSelect:cp,handleChannelSubmit:up,handleRoleDelete:dp,templates:Fs,templateForm:lc,setTemplateForm:bf,handleTemplateSubmit:vp,handleTemplateSubmitToMeta:yp,handleTemplateDelete:xp,handleSyncTemplates:sp,auditLogs:Tf,formatDate:Ka,useShellLayout:!0,pageError:Zt}):k==="superadmin"?r.jsx("main",{className:"content content-page",children:r.jsx(Mu,{onImpersonateTenant:oc,onLogout:Wr})}):r.jsxs("main",{className:`content ${k==="chats"?"content-chats":"content-page"}`,children:[k==="chats"&&r.jsx(cy,{activeConversation:M,conversations:$t,channels:x,brandName:(l==null?void 0:l.brand_name)||"",lastReadMap:v,filters:Oe,showFilters:$,users:rs,tags:Un,statusOptions:Iu,statusLabels:dc,formatListTime:Gy,formatCompactDate:Qy,messageBlocks:xa,messageDraft:Vt,messageMode:ss,quickActions:bp,tagInput:Ne,noteInput:$n,notesList:Pf,latestNote:Rf,loadingConversation:_t,isInfoOpen:le,hasUnread:B,activeName:Tp,activePhone:Lp,activeStatusLabel:Ap,canManageStatus:Cp,currentUser:i,messageInputRef:S,chatBodyRef:H,setShowFilters:Y,setFilters:Ie,loadConversation:If,handleBackToList:Ff,setIsInfoOpen:pe,handleChatScroll:Vf,handleAssignSelf:Qf,handleStatusChange:Yf,handleToggleTag:Kf,handleAddTag:Xf,setNoteInput:Jt,handleAddNote:qf,reassignUserId:_,setReassignUserId:z,handleReassignConversation:Gf,handleOpenTagManager:()=>ee(!0),handleCloseTagManager:()=>ee(!1),showTagManager:q,tagManagerForm:xe,setTagManagerForm:Wt,handleCreateTag:Jf,handleDeleteTag:Zf,handleQuickAction:Wf,handleSendMessage:Hf,setMessageMode:Is,setMessageDraft:zn,scrollChatToBottom:Hr,getInitial:zu,PlusIcon:ix,SearchIcon:rx,VideoIcon:ax,PhoneIcon:lx,InfoIcon:ox,SendIcon:cx}),k==="dashboard"&&r.jsx(hy,{statusCounts:uc,metrics:$r,onRefresh:cc}),k==="campaigns"&&r.jsx(py,{campaignForm:mn,setCampaignForm:tc,campaignFilter:gn,setCampaignFilter:nc,templates:Fs,campaigns:yf,selectedCampaignId:wf,campaignMessages:jf,users:rs,tags:Un,selectedTemplate:Af,statusOptions:Iu,onCreateCampaign:tp,onLoadCampaigns:qr,onLoadCampaignMessages:ep,onSendCampaign:np,formatDate:Ka}),Zt&&r.jsx("div",{className:"error-banner",children:Zt})]})]})}const dx=Zh(document.getElementById("root"));dx.render(r.jsx(ay,{children:r.jsx(ux,{})}));
