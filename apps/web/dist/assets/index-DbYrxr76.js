(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Wu={exports:{}},ei={},Hu={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dr=Symbol.for("react.element"),Ip=Symbol.for("react.portal"),Bp=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),$p=Symbol.for("react.profiler"),Up=Symbol.for("react.provider"),Vp=Symbol.for("react.context"),Fp=Symbol.for("react.forward_ref"),Wp=Symbol.for("react.suspense"),Hp=Symbol.for("react.memo"),qp=Symbol.for("react.lazy"),mc=Symbol.iterator;function Qp(e){return e===null||typeof e!="object"?null:(e=mc&&e[mc]||e["@@iterator"],typeof e=="function"?e:null)}var qu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qu=Object.assign,Gu={};function Ps(e,t,n){this.props=e,this.context=t,this.refs=Gu,this.updater=n||qu}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ps.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yu(){}Yu.prototype=Ps.prototype;function to(e,t,n){this.props=e,this.context=t,this.refs=Gu,this.updater=n||qu}var no=to.prototype=new Yu;no.constructor=to;Qu(no,Ps.prototype);no.isPureReactComponent=!0;var gc=Array.isArray,Ku=Object.prototype.hasOwnProperty,so={current:null},Xu={key:!0,ref:!0,__self:!0,__source:!0};function Ju(e,t,n){var r,a={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Ku.call(t,r)&&!Xu.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),h=0;h<o;h++)c[h]=arguments[h+2];a.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Dr,type:e,key:i,ref:l,props:a,_owner:so.current}}function Gp(e,t){return{$$typeof:Dr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ro(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dr}function Yp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vc=/\/+/g;function Ni(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yp(""+e.key):t.toString(36)}function fa(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Dr:case Ip:l=!0}}if(l)return l=e,a=a(l),e=r===""?"."+Ni(l,0):r,gc(a)?(n="",e!=null&&(n=e.replace(vc,"$&/")+"/"),fa(a,t,n,"",function(h){return h})):a!=null&&(ro(a)&&(a=Gp(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(vc,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=r===""?".":r+":",gc(e))for(var o=0;o<e.length;o++){i=e[o];var c=r+Ni(i,o);l+=fa(i,t,n,c,a)}else if(c=Qp(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=r+Ni(i,o++),l+=fa(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Qr(e,t,n){if(e==null)return e;var r=[],a=0;return fa(e,r,"","",function(i){return t.call(n,i,a++)}),r}function Kp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},pa={transition:null},Xp={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:pa,ReactCurrentOwner:so};function Zu(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Qr,forEach:function(e,t,n){Qr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qr(e,function(){t++}),t},toArray:function(e){return Qr(e,function(t){return t})||[]},only:function(e){if(!ro(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Ps;oe.Fragment=Bp;oe.Profiler=$p;oe.PureComponent=to;oe.StrictMode=zp;oe.Suspense=Wp;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xp;oe.act=Zu;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qu({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=so.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Ku.call(t,c)&&!Xu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var h=0;h<c;h++)o[h]=arguments[h+2];r.children=o}return{$$typeof:Dr,type:e.type,key:a,ref:i,props:r,_owner:l}};oe.createContext=function(e){return e={$$typeof:Vp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Up,_context:e},e.Consumer=e};oe.createElement=Ju;oe.createFactory=function(e){var t=Ju.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:Fp,render:e}};oe.isValidElement=ro;oe.lazy=function(e){return{$$typeof:qp,_payload:{_status:-1,_result:e},_init:Kp}};oe.memo=function(e,t){return{$$typeof:Hp,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=pa.transition;pa.transition={};try{e()}finally{pa.transition=t}};oe.unstable_act=Zu;oe.useCallback=function(e,t){return lt.current.useCallback(e,t)};oe.useContext=function(e){return lt.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};oe.useEffect=function(e,t){return lt.current.useEffect(e,t)};oe.useId=function(){return lt.current.useId()};oe.useImperativeHandle=function(e,t,n){return lt.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return lt.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return lt.current.useReducer(e,t,n)};oe.useRef=function(e){return lt.current.useRef(e)};oe.useState=function(e){return lt.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return lt.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return lt.current.useTransition()};oe.version="18.3.1";Hu.exports=oe;var v=Hu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=v,Zp=Symbol.for("react.element"),em=Symbol.for("react.fragment"),tm=Object.prototype.hasOwnProperty,nm=Jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sm={key:!0,ref:!0,__self:!0,__source:!0};function ed(e,t,n){var r,a={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)tm.call(t,r)&&!sm.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Zp,type:e,key:i,ref:l,props:a,_owner:nm.current}}ei.Fragment=em;ei.jsx=ed;ei.jsxs=ed;Wu.exports=ei;var s=Wu.exports,td={exports:{}},wt={},nd={exports:{}},sd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,W){var S=B.length;B.push(W);e:for(;0<S;){var H=S-1>>>1,G=B[H];if(0<a(G,W))B[H]=W,B[S]=G,S=H;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],S=B.pop();if(S!==W){B[0]=S;e:for(var H=0,G=B.length,Z=G>>>1;H<Z;){var T=2*(H+1)-1,X=B[T],Q=T+1,V=B[Q];if(0>a(X,S))Q<G&&0>a(V,X)?(B[H]=V,B[Q]=S,H=Q):(B[H]=X,B[T]=S,H=T);else if(Q<G&&0>a(V,S))B[H]=V,B[Q]=S,H=Q;else break e}}return W}function a(B,W){var S=B.sortIndex-W.sortIndex;return S!==0?S:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],h=[],x=1,p=null,y=3,L=!1,m=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(B){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=B)r(h),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(h)}}function k(B){if(b=!1,g(B),!m)if(n(c)!==null)m=!0,se(P);else{var W=n(h);W!==null&&Ee(k,W.startTime-B)}}function P(B,W){m=!1,b&&(b=!1,u(C),C=-1),L=!0;var S=y;try{for(g(W),p=n(c);p!==null&&(!(p.expirationTime>W)||B&&!Y());){var H=p.callback;if(typeof H=="function"){p.callback=null,y=p.priorityLevel;var G=H(p.expirationTime<=W);W=e.unstable_now(),typeof G=="function"?p.callback=G:p===n(c)&&r(c),g(W)}else r(c);p=n(c)}if(p!==null)var Z=!0;else{var T=n(h);T!==null&&Ee(k,T.startTime-W),Z=!1}return Z}finally{p=null,y=S,L=!1}}var j=!1,O=null,C=-1,I=5,U=-1;function Y(){return!(e.unstable_now()-U<I)}function le(){if(O!==null){var B=e.unstable_now();U=B;var W=!0;try{W=O(!0,B)}finally{W?pe():(j=!1,O=null)}}else j=!1}var pe;if(typeof f=="function")pe=function(){f(le)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,_e=je.port2;je.port1.onmessage=le,pe=function(){_e.postMessage(null)}}else pe=function(){w(le,0)};function se(B){O=B,j||(j=!0,pe())}function Ee(B,W){C=w(function(){B(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){m||L||(m=!0,se(P))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(B){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var S=y;y=W;try{return B()}finally{y=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var S=y;y=B;try{return W()}finally{y=S}},e.unstable_scheduleCallback=function(B,W,S){var H=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?H+S:H):S=H,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=S+G,B={id:x++,callback:W,priorityLevel:B,startTime:S,expirationTime:G,sortIndex:-1},S>H?(B.sortIndex=S,t(h,B),n(c)===null&&B===n(h)&&(b?(u(C),C=-1):b=!0,Ee(k,S-H))):(B.sortIndex=G,t(c,B),m||L||(m=!0,se(P))),B},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(B){var W=y;return function(){var S=y;y=W;try{return B.apply(this,arguments)}finally{y=S}}}})(sd);nd.exports=sd;var rm=nd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am=v,Nt=rm;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rd=new Set,yr={};function ts(e,t){Es(e,t),Es(e+"Capture",t)}function Es(e,t){for(yr[e]=t,e=0;e<t.length;e++)rd.add(t[e])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=Object.prototype.hasOwnProperty,im=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yc={},xc={};function lm(e){return tl.call(xc,e)?!0:tl.call(yc,e)?!1:im.test(e)?xc[e]=!0:(yc[e]=!0,!1)}function om(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cm(e,t,n,r){if(t===null||typeof t>"u"||om(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ot(e,t,n,r,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var ao=/[\-:]([a-z])/g;function io(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ao,io);Xe[t]=new ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ao,io);Xe[t]=new ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ao,io);Xe[t]=new ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function lo(e,t,n,r){var a=Xe.hasOwnProperty(t)?Xe[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cm(t,n,a,r)&&(n=null),r||a===null?lm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var pn=am.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gr=Symbol.for("react.element"),os=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),oo=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),ad=Symbol.for("react.provider"),id=Symbol.for("react.context"),co=Symbol.for("react.forward_ref"),sl=Symbol.for("react.suspense"),rl=Symbol.for("react.suspense_list"),uo=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),ld=Symbol.for("react.offscreen"),jc=Symbol.iterator;function Ys(e){return e===null||typeof e!="object"?null:(e=jc&&e[jc]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,wi;function rr(e){if(wi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wi=t&&t[1]||""}return`
`+wi+e}var _i=!1;function ki(e,t){if(!e||_i)return"";_i=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{_i=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?rr(e):""}function um(e){switch(e.tag){case 5:return rr(e.type);case 16:return rr("Lazy");case 13:return rr("Suspense");case 19:return rr("SuspenseList");case 0:case 2:case 15:return e=ki(e.type,!1),e;case 11:return e=ki(e.type.render,!1),e;case 1:return e=ki(e.type,!0),e;default:return""}}function al(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cs:return"Fragment";case os:return"Portal";case nl:return"Profiler";case oo:return"StrictMode";case sl:return"Suspense";case rl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case id:return(e.displayName||"Context")+".Consumer";case ad:return(e._context.displayName||"Context")+".Provider";case co:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uo:return t=e.displayName||null,t!==null?t:al(e.type)||"Memo";case xn:t=e._payload,e=e._init;try{return al(e(t))}catch{}}return null}function dm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return al(t);case 8:return t===oo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function On(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function od(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hm(e){var t=od(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yr(e){e._valueTracker||(e._valueTracker=hm(e))}function cd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=od(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ta(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function il(e,t){var n=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Nc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=On(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ud(e,t){t=t.checked,t!=null&&lo(e,"checked",t,!1)}function ll(e,t){ud(e,t);var n=On(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ol(e,t.type,n):t.hasOwnProperty("defaultValue")&&ol(e,t.type,On(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ol(e,t,n){(t!=="number"||Ta(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ar=Array.isArray;function js(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+On(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function cl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _c(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(ar(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:On(n)}}function dd(e,t){var n=On(t.value),r=On(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function kc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kr,fd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kr=Kr||document.createElement("div"),Kr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fm=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(e){fm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cr[t]=cr[e]})});function pd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cr.hasOwnProperty(e)&&cr[e]?(""+t).trim():t+"px"}function md(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=pd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var pm=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(e,t){if(t){if(pm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function hl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=null;function ho(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pl=null,Ns=null,ws=null;function Sc(e){if(e=Br(e)){if(typeof pl!="function")throw Error(D(280));var t=e.stateNode;t&&(t=ai(t),pl(e.stateNode,e.type,t))}}function gd(e){Ns?ws?ws.push(e):ws=[e]:Ns=e}function vd(){if(Ns){var e=Ns,t=ws;if(ws=Ns=null,Sc(e),t)for(e=0;e<t.length;e++)Sc(t[e])}}function yd(e,t){return e(t)}function xd(){}var Si=!1;function jd(e,t,n){if(Si)return e(t,n);Si=!0;try{return yd(e,t,n)}finally{Si=!1,(Ns!==null||ws!==null)&&(xd(),vd())}}function jr(e,t){var n=e.stateNode;if(n===null)return null;var r=ai(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var ml=!1;if(un)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){ml=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{ml=!1}function mm(e,t,n,r,a,i,l,o,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(x){this.onError(x)}}var ur=!1,La=null,Aa=!1,gl=null,gm={onError:function(e){ur=!0,La=e}};function vm(e,t,n,r,a,i,l,o,c){ur=!1,La=null,mm.apply(gm,arguments)}function ym(e,t,n,r,a,i,l,o,c){if(vm.apply(this,arguments),ur){if(ur){var h=La;ur=!1,La=null}else throw Error(D(198));Aa||(Aa=!0,gl=h)}}function ns(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Nd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ec(e){if(ns(e)!==e)throw Error(D(188))}function xm(e){var t=e.alternate;if(!t){if(t=ns(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ec(a),e;if(i===r)return Ec(a),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function wd(e){return e=xm(e),e!==null?_d(e):null}function _d(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_d(e);if(t!==null)return t;e=e.sibling}return null}var kd=Nt.unstable_scheduleCallback,Cc=Nt.unstable_cancelCallback,jm=Nt.unstable_shouldYield,Nm=Nt.unstable_requestPaint,Pe=Nt.unstable_now,wm=Nt.unstable_getCurrentPriorityLevel,fo=Nt.unstable_ImmediatePriority,Sd=Nt.unstable_UserBlockingPriority,Ra=Nt.unstable_NormalPriority,_m=Nt.unstable_LowPriority,Ed=Nt.unstable_IdlePriority,ti=null,Gt=null;function km(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ti,e,void 0,(e.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Cm,Sm=Math.log,Em=Math.LN2;function Cm(e){return e>>>=0,e===0?32:31-(Sm(e)/Em|0)|0}var Xr=64,Jr=4194304;function ir(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?r=ir(o):(i&=l,i!==0&&(r=ir(i)))}else l=n&~a,l!==0?r=ir(l):i!==0&&(r=ir(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Bt(t),a=1<<n,r|=e[n],t&=~a;return r}function bm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Bt(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&r)&&(a[l]=bm(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function vl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cd(){var e=Xr;return Xr<<=1,!(Xr&4194240)&&(Xr=64),e}function Ei(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bt(t),e[t]=n}function Lm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Bt(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function po(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Bt(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ye=0;function bd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Td,mo,Ld,Ad,Rd,yl=!1,Zr=[],Sn=null,En=null,Cn=null,Nr=new Map,wr=new Map,Nn=[],Am="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bc(e,t){switch(e){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Nr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wr.delete(t.pointerId)}}function Xs(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Br(t),t!==null&&mo(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Rm(e,t,n,r,a){switch(t){case"focusin":return Sn=Xs(Sn,e,t,n,r,a),!0;case"dragenter":return En=Xs(En,e,t,n,r,a),!0;case"mouseover":return Cn=Xs(Cn,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Nr.set(i,Xs(Nr.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,wr.set(i,Xs(wr.get(i)||null,e,t,n,r,a)),!0}return!1}function Pd(e){var t=Hn(e.target);if(t!==null){var n=ns(t);if(n!==null){if(t=n.tag,t===13){if(t=Nd(n),t!==null){e.blockedOn=t,Rd(e.priority,function(){Ld(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ma(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fl=r,n.target.dispatchEvent(r),fl=null}else return t=Br(n),t!==null&&mo(t),e.blockedOn=n,!1;t.shift()}return!0}function Tc(e,t,n){ma(e)&&n.delete(t)}function Pm(){yl=!1,Sn!==null&&ma(Sn)&&(Sn=null),En!==null&&ma(En)&&(En=null),Cn!==null&&ma(Cn)&&(Cn=null),Nr.forEach(Tc),wr.forEach(Tc)}function Js(e,t){e.blockedOn===t&&(e.blockedOn=null,yl||(yl=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,Pm)))}function _r(e){function t(a){return Js(a,e)}if(0<Zr.length){Js(Zr[0],e);for(var n=1;n<Zr.length;n++){var r=Zr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Sn!==null&&Js(Sn,e),En!==null&&Js(En,e),Cn!==null&&Js(Cn,e),Nr.forEach(t),wr.forEach(t),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)Pd(n),n.blockedOn===null&&Nn.shift()}var _s=pn.ReactCurrentBatchConfig,Oa=!0;function Om(e,t,n,r){var a=ye,i=_s.transition;_s.transition=null;try{ye=1,go(e,t,n,r)}finally{ye=a,_s.transition=i}}function Dm(e,t,n,r){var a=ye,i=_s.transition;_s.transition=null;try{ye=4,go(e,t,n,r)}finally{ye=a,_s.transition=i}}function go(e,t,n,r){if(Oa){var a=xl(e,t,n,r);if(a===null)Mi(e,t,r,Da,n),bc(e,r);else if(Rm(a,e,t,n,r))r.stopPropagation();else if(bc(e,r),t&4&&-1<Am.indexOf(e)){for(;a!==null;){var i=Br(a);if(i!==null&&Td(i),i=xl(e,t,n,r),i===null&&Mi(e,t,r,Da,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Mi(e,t,r,null,n)}}var Da=null;function xl(e,t,n,r){if(Da=null,e=ho(r),e=Hn(e),e!==null)if(t=ns(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Nd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Da=e,null}function Od(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wm()){case fo:return 1;case Sd:return 4;case Ra:case _m:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var _n=null,vo=null,ga=null;function Dd(){if(ga)return ga;var e,t=vo,n=t.length,r,a="value"in _n?_n.value:_n.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===a[i-r];r++);return ga=a.slice(e,1<r?1-r:void 0)}function va(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ea(){return!0}function Lc(){return!1}function _t(e){function t(n,r,a,i,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ea:Lc,this.isPropagationStopped=Lc,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),t}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yo=_t(Os),Ir=Ae({},Os,{view:0,detail:0}),Mm=_t(Ir),Ci,bi,Zs,ni=Ae({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zs&&(Zs&&e.type==="mousemove"?(Ci=e.screenX-Zs.screenX,bi=e.screenY-Zs.screenY):bi=Ci=0,Zs=e),Ci)},movementY:function(e){return"movementY"in e?e.movementY:bi}}),Ac=_t(ni),Im=Ae({},ni,{dataTransfer:0}),Bm=_t(Im),zm=Ae({},Ir,{relatedTarget:0}),Ti=_t(zm),$m=Ae({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),Um=_t($m),Vm=Ae({},Os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fm=_t(Vm),Wm=Ae({},Os,{data:0}),Rc=_t(Wm),Hm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qm[e])?!!t[e]:!1}function xo(){return Gm}var Ym=Ae({},Ir,{key:function(e){if(e.key){var t=Hm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=va(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xo,charCode:function(e){return e.type==="keypress"?va(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?va(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Km=_t(Ym),Xm=Ae({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pc=_t(Xm),Jm=Ae({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xo}),Zm=_t(Jm),eg=Ae({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),tg=_t(eg),ng=Ae({},ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sg=_t(ng),rg=[9,13,27,32],jo=un&&"CompositionEvent"in window,dr=null;un&&"documentMode"in document&&(dr=document.documentMode);var ag=un&&"TextEvent"in window&&!dr,Md=un&&(!jo||dr&&8<dr&&11>=dr),Oc=" ",Dc=!1;function Id(e,t){switch(e){case"keyup":return rg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function ig(e,t){switch(e){case"compositionend":return Bd(t);case"keypress":return t.which!==32?null:(Dc=!0,Oc);case"textInput":return e=t.data,e===Oc&&Dc?null:e;default:return null}}function lg(e,t){if(us)return e==="compositionend"||!jo&&Id(e,t)?(e=Dd(),ga=vo=_n=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Md&&t.locale!=="ko"?null:t.data;default:return null}}var og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!og[e.type]:t==="textarea"}function zd(e,t,n,r){gd(r),t=Ma(t,"onChange"),0<t.length&&(n=new yo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var hr=null,kr=null;function cg(e){Kd(e,0)}function si(e){var t=fs(e);if(cd(t))return e}function ug(e,t){if(e==="change")return t}var $d=!1;if(un){var Li;if(un){var Ai="oninput"in document;if(!Ai){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),Ai=typeof Ic.oninput=="function"}Li=Ai}else Li=!1;$d=Li&&(!document.documentMode||9<document.documentMode)}function Bc(){hr&&(hr.detachEvent("onpropertychange",Ud),kr=hr=null)}function Ud(e){if(e.propertyName==="value"&&si(kr)){var t=[];zd(t,kr,e,ho(e)),jd(cg,t)}}function dg(e,t,n){e==="focusin"?(Bc(),hr=t,kr=n,hr.attachEvent("onpropertychange",Ud)):e==="focusout"&&Bc()}function hg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return si(kr)}function fg(e,t){if(e==="click")return si(t)}function pg(e,t){if(e==="input"||e==="change")return si(t)}function mg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:mg;function Sr(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!tl.call(t,a)||!$t(e[a],t[a]))return!1}return!0}function zc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $c(e,t){var n=zc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zc(n)}}function Vd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fd(){for(var e=window,t=Ta();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ta(e.document)}return t}function No(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gg(e){var t=Fd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vd(n.ownerDocument.documentElement,n)){if(r!==null&&No(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=$c(n,i);var l=$c(n,r);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vg=un&&"documentMode"in document&&11>=document.documentMode,ds=null,jl=null,fr=null,Nl=!1;function Uc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nl||ds==null||ds!==Ta(r)||(r=ds,"selectionStart"in r&&No(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fr&&Sr(fr,r)||(fr=r,r=Ma(jl,"onSelect"),0<r.length&&(t=new yo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ds)))}function ta(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hs={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionend:ta("Transition","TransitionEnd")},Ri={},Wd={};un&&(Wd=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function ri(e){if(Ri[e])return Ri[e];if(!hs[e])return e;var t=hs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wd)return Ri[e]=t[n];return e}var Hd=ri("animationend"),qd=ri("animationiteration"),Qd=ri("animationstart"),Gd=ri("transitionend"),Yd=new Map,Vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,t){Yd.set(e,t),ts(t,[e])}for(var Pi=0;Pi<Vc.length;Pi++){var Oi=Vc[Pi],yg=Oi.toLowerCase(),xg=Oi[0].toUpperCase()+Oi.slice(1);Mn(yg,"on"+xg)}Mn(Hd,"onAnimationEnd");Mn(qd,"onAnimationIteration");Mn(Qd,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(Gd,"onTransitionEnd");Es("onMouseEnter",["mouseout","mouseover"]);Es("onMouseLeave",["mouseout","mouseover"]);Es("onPointerEnter",["pointerout","pointerover"]);Es("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jg=new Set("cancel close invalid load scroll toggle".split(" ").concat(lr));function Fc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ym(r,t,void 0,e),e.currentTarget=null}function Kd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Fc(a,o,h),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,h=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Fc(a,o,h),i=c}}}if(Aa)throw e=gl,Aa=!1,gl=null,e}function ke(e,t){var n=t[El];n===void 0&&(n=t[El]=new Set);var r=e+"__bubble";n.has(r)||(Xd(t,e,2,!1),n.add(r))}function Di(e,t,n){var r=0;t&&(r|=4),Xd(n,e,r,t)}var na="_reactListening"+Math.random().toString(36).slice(2);function Er(e){if(!e[na]){e[na]=!0,rd.forEach(function(n){n!=="selectionchange"&&(jg.has(n)||Di(n,!1,e),Di(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[na]||(t[na]=!0,Di("selectionchange",!1,t))}}function Xd(e,t,n,r){switch(Od(t)){case 1:var a=Om;break;case 4:a=Dm;break;default:a=go}n=a.bind(null,t,n,e),a=void 0,!ml||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Mi(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Hn(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}jd(function(){var h=i,x=ho(n),p=[];e:{var y=Yd.get(e);if(y!==void 0){var L=yo,m=e;switch(e){case"keypress":if(va(n)===0)break e;case"keydown":case"keyup":L=Km;break;case"focusin":m="focus",L=Ti;break;case"focusout":m="blur",L=Ti;break;case"beforeblur":case"afterblur":L=Ti;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Zm;break;case Hd:case qd:case Qd:L=Um;break;case Gd:L=tg;break;case"scroll":L=Mm;break;case"wheel":L=sg;break;case"copy":case"cut":case"paste":L=Fm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Pc}var b=(t&4)!==0,w=!b&&e==="scroll",u=b?y!==null?y+"Capture":null:y;b=[];for(var f=h,g;f!==null;){g=f;var k=g.stateNode;if(g.tag===5&&k!==null&&(g=k,u!==null&&(k=jr(f,u),k!=null&&b.push(Cr(f,k,g)))),w)break;f=f.return}0<b.length&&(y=new L(y,m,null,n,x),p.push({event:y,listeners:b}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",y&&n!==fl&&(m=n.relatedTarget||n.fromElement)&&(Hn(m)||m[dn]))break e;if((L||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,L?(m=n.relatedTarget||n.toElement,L=h,m=m?Hn(m):null,m!==null&&(w=ns(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(L=null,m=h),L!==m)){if(b=Ac,k="onMouseLeave",u="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(b=Pc,k="onPointerLeave",u="onPointerEnter",f="pointer"),w=L==null?y:fs(L),g=m==null?y:fs(m),y=new b(k,f+"leave",L,n,x),y.target=w,y.relatedTarget=g,k=null,Hn(x)===h&&(b=new b(u,f+"enter",m,n,x),b.target=g,b.relatedTarget=w,k=b),w=k,L&&m)t:{for(b=L,u=m,f=0,g=b;g;g=is(g))f++;for(g=0,k=u;k;k=is(k))g++;for(;0<f-g;)b=is(b),f--;for(;0<g-f;)u=is(u),g--;for(;f--;){if(b===u||u!==null&&b===u.alternate)break t;b=is(b),u=is(u)}b=null}else b=null;L!==null&&Wc(p,y,L,b,!1),m!==null&&w!==null&&Wc(p,w,m,b,!0)}}e:{if(y=h?fs(h):window,L=y.nodeName&&y.nodeName.toLowerCase(),L==="select"||L==="input"&&y.type==="file")var P=ug;else if(Mc(y))if($d)P=pg;else{P=hg;var j=dg}else(L=y.nodeName)&&L.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(P=fg);if(P&&(P=P(e,h))){zd(p,P,n,x);break e}j&&j(e,y,h),e==="focusout"&&(j=y._wrapperState)&&j.controlled&&y.type==="number"&&ol(y,"number",y.value)}switch(j=h?fs(h):window,e){case"focusin":(Mc(j)||j.contentEditable==="true")&&(ds=j,jl=h,fr=null);break;case"focusout":fr=jl=ds=null;break;case"mousedown":Nl=!0;break;case"contextmenu":case"mouseup":case"dragend":Nl=!1,Uc(p,n,x);break;case"selectionchange":if(vg)break;case"keydown":case"keyup":Uc(p,n,x)}var O;if(jo)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else us?Id(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Md&&n.locale!=="ko"&&(us||C!=="onCompositionStart"?C==="onCompositionEnd"&&us&&(O=Dd()):(_n=x,vo="value"in _n?_n.value:_n.textContent,us=!0)),j=Ma(h,C),0<j.length&&(C=new Rc(C,e,null,n,x),p.push({event:C,listeners:j}),O?C.data=O:(O=Bd(n),O!==null&&(C.data=O)))),(O=ag?ig(e,n):lg(e,n))&&(h=Ma(h,"onBeforeInput"),0<h.length&&(x=new Rc("onBeforeInput","beforeinput",null,n,x),p.push({event:x,listeners:h}),x.data=O))}Kd(p,t)})}function Cr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ma(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=jr(e,n),i!=null&&r.unshift(Cr(e,i,a)),i=jr(e,t),i!=null&&r.push(Cr(e,i,a))),e=e.return}return r}function is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wc(e,t,n,r,a){for(var i=t._reactName,l=[];n!==null&&n!==r;){var o=n,c=o.alternate,h=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&h!==null&&(o=h,a?(c=jr(n,i),c!=null&&l.unshift(Cr(n,c,o))):a||(c=jr(n,i),c!=null&&l.push(Cr(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Ng=/\r\n?/g,wg=/\u0000|\uFFFD/g;function Hc(e){return(typeof e=="string"?e:""+e).replace(Ng,`
`).replace(wg,"")}function sa(e,t,n){if(t=Hc(t),Hc(e)!==t&&n)throw Error(D(425))}function Ia(){}var wl=null,_l=null;function kl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sl=typeof setTimeout=="function"?setTimeout:void 0,_g=typeof clearTimeout=="function"?clearTimeout:void 0,qc=typeof Promise=="function"?Promise:void 0,kg=typeof queueMicrotask=="function"?queueMicrotask:typeof qc<"u"?function(e){return qc.resolve(null).then(e).catch(Sg)}:Sl;function Sg(e){setTimeout(function(){throw e})}function Ii(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),_r(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);_r(t)}function bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Ds,br="__reactProps$"+Ds,dn="__reactContainer$"+Ds,El="__reactEvents$"+Ds,Eg="__reactListeners$"+Ds,Cg="__reactHandles$"+Ds;function Hn(e){var t=e[Qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[Qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qc(e);e!==null;){if(n=e[Qt])return n;e=Qc(e)}return t}e=n,n=e.parentNode}return null}function Br(e){return e=e[Qt]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function ai(e){return e[br]||null}var Cl=[],ps=-1;function In(e){return{current:e}}function Se(e){0>ps||(e.current=Cl[ps],Cl[ps]=null,ps--)}function we(e,t){ps++,Cl[ps]=e.current,e.current=t}var Dn={},nt=In(Dn),pt=In(!1),Kn=Dn;function Cs(e,t){var n=e.type.contextTypes;if(!n)return Dn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mt(e){return e=e.childContextTypes,e!=null}function Ba(){Se(pt),Se(nt)}function Gc(e,t,n){if(nt.current!==Dn)throw Error(D(168));we(nt,t),we(pt,n)}function Jd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(D(108,dm(e)||"Unknown",a));return Ae({},n,r)}function za(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dn,Kn=nt.current,we(nt,e),we(pt,pt.current),!0}function Yc(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Jd(e,t,Kn),r.__reactInternalMemoizedMergedChildContext=e,Se(pt),Se(nt),we(nt,e)):Se(pt),we(pt,n)}var rn=null,ii=!1,Bi=!1;function Zd(e){rn===null?rn=[e]:rn.push(e)}function bg(e){ii=!0,Zd(e)}function Bn(){if(!Bi&&rn!==null){Bi=!0;var e=0,t=ye;try{var n=rn;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rn=null,ii=!1}catch(a){throw rn!==null&&(rn=rn.slice(e+1)),kd(fo,Bn),a}finally{ye=t,Bi=!1}}return null}var ms=[],gs=0,$a=null,Ua=0,Et=[],Ct=0,Xn=null,ln=1,on="";function Vn(e,t){ms[gs++]=Ua,ms[gs++]=$a,$a=e,Ua=t}function eh(e,t,n){Et[Ct++]=ln,Et[Ct++]=on,Et[Ct++]=Xn,Xn=e;var r=ln;e=on;var a=32-Bt(r)-1;r&=~(1<<a),n+=1;var i=32-Bt(t)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,ln=1<<32-Bt(t)+a|n<<a|r,on=i+e}else ln=1<<i|n<<a|r,on=e}function wo(e){e.return!==null&&(Vn(e,1),eh(e,1,0))}function _o(e){for(;e===$a;)$a=ms[--gs],ms[gs]=null,Ua=ms[--gs],ms[gs]=null;for(;e===Xn;)Xn=Et[--Ct],Et[Ct]=null,on=Et[--Ct],Et[Ct]=null,ln=Et[--Ct],Et[Ct]=null}var jt=null,xt=null,Ce=!1,It=null;function th(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Kc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,xt=bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xn!==null?{id:ln,overflow:on}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,xt=null,!0):!1;default:return!1}}function bl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tl(e){if(Ce){var t=xt;if(t){var n=t;if(!Kc(e,t)){if(bl(e))throw Error(D(418));t=bn(n.nextSibling);var r=jt;t&&Kc(e,t)?th(r,n):(e.flags=e.flags&-4097|2,Ce=!1,jt=e)}}else{if(bl(e))throw Error(D(418));e.flags=e.flags&-4097|2,Ce=!1,jt=e}}}function Xc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function ra(e){if(e!==jt)return!1;if(!Ce)return Xc(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kl(e.type,e.memoizedProps)),t&&(t=xt)){if(bl(e))throw nh(),Error(D(418));for(;t;)th(e,t),t=bn(t.nextSibling)}if(Xc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=jt?bn(e.stateNode.nextSibling):null;return!0}function nh(){for(var e=xt;e;)e=bn(e.nextSibling)}function bs(){xt=jt=null,Ce=!1}function ko(e){It===null?It=[e]:It.push(e)}var Tg=pn.ReactCurrentBatchConfig;function er(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function aa(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jc(e){var t=e._init;return t(e._payload)}function sh(e){function t(u,f){if(e){var g=u.deletions;g===null?(u.deletions=[f],u.flags|=16):g.push(f)}}function n(u,f){if(!e)return null;for(;f!==null;)t(u,f),f=f.sibling;return null}function r(u,f){for(u=new Map;f!==null;)f.key!==null?u.set(f.key,f):u.set(f.index,f),f=f.sibling;return u}function a(u,f){return u=Rn(u,f),u.index=0,u.sibling=null,u}function i(u,f,g){return u.index=g,e?(g=u.alternate,g!==null?(g=g.index,g<f?(u.flags|=2,f):g):(u.flags|=2,f)):(u.flags|=1048576,f)}function l(u){return e&&u.alternate===null&&(u.flags|=2),u}function o(u,f,g,k){return f===null||f.tag!==6?(f=Hi(g,u.mode,k),f.return=u,f):(f=a(f,g),f.return=u,f)}function c(u,f,g,k){var P=g.type;return P===cs?x(u,f,g.props.children,k,g.key):f!==null&&(f.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===xn&&Jc(P)===f.type)?(k=a(f,g.props),k.ref=er(u,f,g),k.return=u,k):(k=ka(g.type,g.key,g.props,null,u.mode,k),k.ref=er(u,f,g),k.return=u,k)}function h(u,f,g,k){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=qi(g,u.mode,k),f.return=u,f):(f=a(f,g.children||[]),f.return=u,f)}function x(u,f,g,k,P){return f===null||f.tag!==7?(f=Yn(g,u.mode,k,P),f.return=u,f):(f=a(f,g),f.return=u,f)}function p(u,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Hi(""+f,u.mode,g),f.return=u,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Gr:return g=ka(f.type,f.key,f.props,null,u.mode,g),g.ref=er(u,null,f),g.return=u,g;case os:return f=qi(f,u.mode,g),f.return=u,f;case xn:var k=f._init;return p(u,k(f._payload),g)}if(ar(f)||Ys(f))return f=Yn(f,u.mode,g,null),f.return=u,f;aa(u,f)}return null}function y(u,f,g,k){var P=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return P!==null?null:o(u,f,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Gr:return g.key===P?c(u,f,g,k):null;case os:return g.key===P?h(u,f,g,k):null;case xn:return P=g._init,y(u,f,P(g._payload),k)}if(ar(g)||Ys(g))return P!==null?null:x(u,f,g,k,null);aa(u,g)}return null}function L(u,f,g,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return u=u.get(g)||null,o(f,u,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Gr:return u=u.get(k.key===null?g:k.key)||null,c(f,u,k,P);case os:return u=u.get(k.key===null?g:k.key)||null,h(f,u,k,P);case xn:var j=k._init;return L(u,f,g,j(k._payload),P)}if(ar(k)||Ys(k))return u=u.get(g)||null,x(f,u,k,P,null);aa(f,k)}return null}function m(u,f,g,k){for(var P=null,j=null,O=f,C=f=0,I=null;O!==null&&C<g.length;C++){O.index>C?(I=O,O=null):I=O.sibling;var U=y(u,O,g[C],k);if(U===null){O===null&&(O=I);break}e&&O&&U.alternate===null&&t(u,O),f=i(U,f,C),j===null?P=U:j.sibling=U,j=U,O=I}if(C===g.length)return n(u,O),Ce&&Vn(u,C),P;if(O===null){for(;C<g.length;C++)O=p(u,g[C],k),O!==null&&(f=i(O,f,C),j===null?P=O:j.sibling=O,j=O);return Ce&&Vn(u,C),P}for(O=r(u,O);C<g.length;C++)I=L(O,u,C,g[C],k),I!==null&&(e&&I.alternate!==null&&O.delete(I.key===null?C:I.key),f=i(I,f,C),j===null?P=I:j.sibling=I,j=I);return e&&O.forEach(function(Y){return t(u,Y)}),Ce&&Vn(u,C),P}function b(u,f,g,k){var P=Ys(g);if(typeof P!="function")throw Error(D(150));if(g=P.call(g),g==null)throw Error(D(151));for(var j=P=null,O=f,C=f=0,I=null,U=g.next();O!==null&&!U.done;C++,U=g.next()){O.index>C?(I=O,O=null):I=O.sibling;var Y=y(u,O,U.value,k);if(Y===null){O===null&&(O=I);break}e&&O&&Y.alternate===null&&t(u,O),f=i(Y,f,C),j===null?P=Y:j.sibling=Y,j=Y,O=I}if(U.done)return n(u,O),Ce&&Vn(u,C),P;if(O===null){for(;!U.done;C++,U=g.next())U=p(u,U.value,k),U!==null&&(f=i(U,f,C),j===null?P=U:j.sibling=U,j=U);return Ce&&Vn(u,C),P}for(O=r(u,O);!U.done;C++,U=g.next())U=L(O,u,C,U.value,k),U!==null&&(e&&U.alternate!==null&&O.delete(U.key===null?C:U.key),f=i(U,f,C),j===null?P=U:j.sibling=U,j=U);return e&&O.forEach(function(le){return t(u,le)}),Ce&&Vn(u,C),P}function w(u,f,g,k){if(typeof g=="object"&&g!==null&&g.type===cs&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Gr:e:{for(var P=g.key,j=f;j!==null;){if(j.key===P){if(P=g.type,P===cs){if(j.tag===7){n(u,j.sibling),f=a(j,g.props.children),f.return=u,u=f;break e}}else if(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===xn&&Jc(P)===j.type){n(u,j.sibling),f=a(j,g.props),f.ref=er(u,j,g),f.return=u,u=f;break e}n(u,j);break}else t(u,j);j=j.sibling}g.type===cs?(f=Yn(g.props.children,u.mode,k,g.key),f.return=u,u=f):(k=ka(g.type,g.key,g.props,null,u.mode,k),k.ref=er(u,f,g),k.return=u,u=k)}return l(u);case os:e:{for(j=g.key;f!==null;){if(f.key===j)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(u,f.sibling),f=a(f,g.children||[]),f.return=u,u=f;break e}else{n(u,f);break}else t(u,f);f=f.sibling}f=qi(g,u.mode,k),f.return=u,u=f}return l(u);case xn:return j=g._init,w(u,f,j(g._payload),k)}if(ar(g))return m(u,f,g,k);if(Ys(g))return b(u,f,g,k);aa(u,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(u,f.sibling),f=a(f,g),f.return=u,u=f):(n(u,f),f=Hi(g,u.mode,k),f.return=u,u=f),l(u)):n(u,f)}return w}var Ts=sh(!0),rh=sh(!1),Va=In(null),Fa=null,vs=null,So=null;function Eo(){So=vs=Fa=null}function Co(e){var t=Va.current;Se(Va),e._currentValue=t}function Ll(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ks(e,t){Fa=e,So=vs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},vs===null){if(Fa===null)throw Error(D(308));vs=e,Fa.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return t}var qn=null;function bo(e){qn===null?qn=[e]:qn.push(e)}function ah(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,bo(t)):(n.next=a.next,a.next=n),t.interleaved=n,hn(e,r)}function hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function To(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ih(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,hn(e,n)}return a=r.interleaved,a===null?(t.next=t,bo(r)):(t.next=a.next,a.next=t),r.interleaved=t,hn(e,n)}function ya(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,po(e,n)}}function Zc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wa(e,t,n,r){var a=e.updateQueue;jn=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,h=c.next;c.next=null,l===null?i=h:l.next=h,l=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==l&&(o===null?x.firstBaseUpdate=h:o.next=h,x.lastBaseUpdate=c))}if(i!==null){var p=a.baseState;l=0,x=h=c=null,o=i;do{var y=o.lane,L=o.eventTime;if((r&y)===y){x!==null&&(x=x.next={eventTime:L,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,b=o;switch(y=t,L=n,b.tag){case 1:if(m=b.payload,typeof m=="function"){p=m.call(L,p,y);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=b.payload,y=typeof m=="function"?m.call(L,p,y):m,y==null)break e;p=Ae({},p,y);break e;case 2:jn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[o]:y.push(o))}else L={eventTime:L,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(h=x=L,c=p):x=x.next=L,l|=y;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;y=o,o=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(x===null&&(c=p),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Zn|=l,e.lanes=l,e.memoizedState=p}}function eu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(D(191,a));a.call(r)}}}var zr={},Yt=In(zr),Tr=In(zr),Lr=In(zr);function Qn(e){if(e===zr)throw Error(D(174));return e}function Lo(e,t){switch(we(Lr,t),we(Tr,e),we(Yt,zr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ul(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ul(t,e)}Se(Yt),we(Yt,t)}function Ls(){Se(Yt),Se(Tr),Se(Lr)}function lh(e){Qn(Lr.current);var t=Qn(Yt.current),n=ul(t,e.type);t!==n&&(we(Tr,e),we(Yt,n))}function Ao(e){Tr.current===e&&(Se(Yt),Se(Tr))}var Te=In(0);function Ha(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zi=[];function Ro(){for(var e=0;e<zi.length;e++)zi[e]._workInProgressVersionPrimary=null;zi.length=0}var xa=pn.ReactCurrentDispatcher,$i=pn.ReactCurrentBatchConfig,Jn=0,Le=null,ze=null,Qe=null,qa=!1,pr=!1,Ar=0,Lg=0;function Ze(){throw Error(D(321))}function Po(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$t(e[n],t[n]))return!1;return!0}function Oo(e,t,n,r,a,i){if(Jn=i,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xa.current=e===null||e.memoizedState===null?Og:Dg,e=n(r,a),pr){i=0;do{if(pr=!1,Ar=0,25<=i)throw Error(D(301));i+=1,Qe=ze=null,t.updateQueue=null,xa.current=Mg,e=n(r,a)}while(pr)}if(xa.current=Qa,t=ze!==null&&ze.next!==null,Jn=0,Qe=ze=Le=null,qa=!1,t)throw Error(D(300));return e}function Do(){var e=Ar!==0;return Ar=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Le.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Rt(){if(ze===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Qe===null?Le.memoizedState:Qe.next;if(t!==null)Qe=t,ze=e;else{if(e===null)throw Error(D(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Qe===null?Le.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Rr(e,t){return typeof t=="function"?t(e):t}function Ui(e){var t=Rt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=ze,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=l=null,c=null,h=i;do{var x=h.lane;if((Jn&x)===x)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var p={lane:x,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(o=c=p,l=r):c=c.next=p,Le.lanes|=x,Zn|=x}h=h.next}while(h!==null&&h!==i);c===null?l=r:c.next=o,$t(r,t.memoizedState)||(ft=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Le.lanes|=i,Zn|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Vi(e){var t=Rt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);$t(i,t.memoizedState)||(ft=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function oh(){}function ch(e,t){var n=Le,r=Rt(),a=t(),i=!$t(r.memoizedState,a);if(i&&(r.memoizedState=a,ft=!0),r=r.queue,Mo(hh.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Pr(9,dh.bind(null,n,r,a,t),void 0,null),Ge===null)throw Error(D(349));Jn&30||uh(n,t,a)}return a}function uh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dh(e,t,n,r){t.value=n,t.getSnapshot=r,fh(t)&&ph(e)}function hh(e,t,n){return n(function(){fh(t)&&ph(e)})}function fh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$t(e,n)}catch{return!0}}function ph(e){var t=hn(e,1);t!==null&&zt(t,e,1,-1)}function tu(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:e},t.queue=e,e=e.dispatch=Pg.bind(null,Le,e),[t.memoizedState,e]}function Pr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function mh(){return Rt().memoizedState}function ja(e,t,n,r){var a=qt();Le.flags|=e,a.memoizedState=Pr(1|t,n,void 0,r===void 0?null:r)}function li(e,t,n,r){var a=Rt();r=r===void 0?null:r;var i=void 0;if(ze!==null){var l=ze.memoizedState;if(i=l.destroy,r!==null&&Po(r,l.deps)){a.memoizedState=Pr(t,n,i,r);return}}Le.flags|=e,a.memoizedState=Pr(1|t,n,i,r)}function nu(e,t){return ja(8390656,8,e,t)}function Mo(e,t){return li(2048,8,e,t)}function gh(e,t){return li(4,2,e,t)}function vh(e,t){return li(4,4,e,t)}function yh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xh(e,t,n){return n=n!=null?n.concat([e]):null,li(4,4,yh.bind(null,t,e),n)}function Io(){}function jh(e,t){var n=Rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Po(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Nh(e,t){var n=Rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Po(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wh(e,t,n){return Jn&21?($t(n,t)||(n=Cd(),Le.lanes|=n,Zn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n)}function Ag(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=$i.transition;$i.transition={};try{e(!1),t()}finally{ye=n,$i.transition=r}}function _h(){return Rt().memoizedState}function Rg(e,t,n){var r=An(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kh(e))Sh(t,n);else if(n=ah(e,t,n,r),n!==null){var a=it();zt(n,e,r,a),Eh(n,t,r)}}function Pg(e,t,n){var r=An(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kh(e))Sh(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,$t(o,l)){var c=t.interleaved;c===null?(a.next=a,bo(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=ah(e,t,a,r),n!==null&&(a=it(),zt(n,e,r,a),Eh(n,t,r))}}function kh(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function Sh(e,t){pr=qa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Eh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,po(e,n)}}var Qa={readContext:At,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},Og={readContext:At,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:nu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ja(4194308,4,yh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Rg.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:tu,useDebugValue:Io,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=tu(!1),t=e[0];return e=Ag.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,a=qt();if(Ce){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ge===null)throw Error(D(349));Jn&30||uh(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,nu(hh.bind(null,r,i,e),[e]),r.flags|=2048,Pr(9,dh.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=qt(),t=Ge.identifierPrefix;if(Ce){var n=on,r=ln;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ar++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Lg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Dg={readContext:At,useCallback:jh,useContext:At,useEffect:Mo,useImperativeHandle:xh,useInsertionEffect:gh,useLayoutEffect:vh,useMemo:Nh,useReducer:Ui,useRef:mh,useState:function(){return Ui(Rr)},useDebugValue:Io,useDeferredValue:function(e){var t=Rt();return wh(t,ze.memoizedState,e)},useTransition:function(){var e=Ui(Rr)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:oh,useSyncExternalStore:ch,useId:_h,unstable_isNewReconciler:!1},Mg={readContext:At,useCallback:jh,useContext:At,useEffect:Mo,useImperativeHandle:xh,useInsertionEffect:gh,useLayoutEffect:vh,useMemo:Nh,useReducer:Vi,useRef:mh,useState:function(){return Vi(Rr)},useDebugValue:Io,useDeferredValue:function(e){var t=Rt();return ze===null?t.memoizedState=e:wh(t,ze.memoizedState,e)},useTransition:function(){var e=Vi(Rr)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:oh,useSyncExternalStore:ch,useId:_h,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Al(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var oi={isMounted:function(e){return(e=e._reactInternals)?ns(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=it(),a=An(e),i=cn(r,a);i.payload=t,n!=null&&(i.callback=n),t=Tn(e,i,a),t!==null&&(zt(t,e,a,r),ya(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=it(),a=An(e),i=cn(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Tn(e,i,a),t!==null&&(zt(t,e,a,r),ya(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),r=An(e),a=cn(n,r);a.tag=2,t!=null&&(a.callback=t),t=Tn(e,a,r),t!==null&&(zt(t,e,r,n),ya(t,e,r))}};function su(e,t,n,r,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Sr(n,r)||!Sr(a,i):!0}function Ch(e,t,n){var r=!1,a=Dn,i=t.contextType;return typeof i=="object"&&i!==null?i=At(i):(a=mt(t)?Kn:nt.current,r=t.contextTypes,i=(r=r!=null)?Cs(e,a):Dn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function ru(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function Rl(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},To(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=At(i):(i=mt(t)?Kn:nt.current,a.context=Cs(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Al(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&oi.enqueueReplaceState(a,a.state,null),Wa(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function As(e,t){try{var n="",r=t;do n+=um(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Fi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Pl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ig=typeof WeakMap=="function"?WeakMap:Map;function bh(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ya||(Ya=!0,Fl=r),Pl(e,t)},n}function Th(e,t,n){n=cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Pl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Pl(e,t),typeof r!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function au(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ig;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Xg.bind(null,e,t,n),t.then(e,e))}function iu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lu(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,Tn(n,t,1))),n.lanes|=1),e)}var Bg=pn.ReactCurrentOwner,ft=!1;function at(e,t,n,r){t.child=e===null?rh(t,null,n,r):Ts(t,e.child,n,r)}function ou(e,t,n,r,a){n=n.render;var i=t.ref;return ks(t,a),r=Oo(e,t,n,r,i,a),n=Do(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fn(e,t,a)):(Ce&&n&&wo(t),t.flags|=1,at(e,t,r,a),t.child)}function cu(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!Ho(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Lh(e,t,i,r,a)):(e=ka(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Sr,n(l,r)&&e.ref===t.ref)return fn(e,t,a)}return t.flags|=1,e=Rn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Lh(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Sr(i,r)&&e.ref===t.ref)if(ft=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,fn(e,t,a)}return Ol(e,t,n,r,a)}function Ah(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(xs,yt),yt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(xs,yt),yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(xs,yt),yt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,we(xs,yt),yt|=r;return at(e,t,a,n),t.child}function Rh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ol(e,t,n,r,a){var i=mt(n)?Kn:nt.current;return i=Cs(t,i),ks(t,a),n=Oo(e,t,n,r,i,a),r=Do(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fn(e,t,a)):(Ce&&r&&wo(t),t.flags|=1,at(e,t,n,a),t.child)}function uu(e,t,n,r,a){if(mt(n)){var i=!0;za(t)}else i=!1;if(ks(t,a),t.stateNode===null)Na(e,t),Ch(t,n,r),Rl(t,n,r,a),r=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=At(h):(h=mt(n)?Kn:nt.current,h=Cs(t,h));var x=n.getDerivedStateFromProps,p=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==h)&&ru(t,l,r,h),jn=!1;var y=t.memoizedState;l.state=y,Wa(t,r,l,a),c=t.memoizedState,o!==r||y!==c||pt.current||jn?(typeof x=="function"&&(Al(t,n,x,r),c=t.memoizedState),(o=jn||su(t,n,o,r,y,c,h))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=h,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,ih(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Ot(t.type,o),l.props=h,p=t.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=At(c):(c=mt(n)?Kn:nt.current,c=Cs(t,c));var L=n.getDerivedStateFromProps;(x=typeof L=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||y!==c)&&ru(t,l,r,c),jn=!1,y=t.memoizedState,l.state=y,Wa(t,r,l,a);var m=t.memoizedState;o!==p||y!==m||pt.current||jn?(typeof L=="function"&&(Al(t,n,L,r),m=t.memoizedState),(h=jn||su(t,n,h,r,y,m,c)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),l.props=r,l.state=m,l.context=c,r=h):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Dl(e,t,n,r,i,a)}function Dl(e,t,n,r,a,i){Rh(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return a&&Yc(t,n,!1),fn(e,t,i);r=t.stateNode,Bg.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Ts(t,e.child,null,i),t.child=Ts(t,null,o,i)):at(e,t,o,i),t.memoizedState=r.state,a&&Yc(t,n,!0),t.child}function Ph(e){var t=e.stateNode;t.pendingContext?Gc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gc(e,t.context,!1),Lo(e,t.containerInfo)}function du(e,t,n,r,a){return bs(),ko(a),t.flags|=256,at(e,t,n,r),t.child}var Ml={dehydrated:null,treeContext:null,retryLane:0};function Il(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oh(e,t,n){var r=t.pendingProps,a=Te.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),we(Te,a&1),e===null)return Tl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=di(l,r,0,null),e=Yn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Il(n),t.memoizedState=Ml,e):Bo(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return zg(e,t,l,r,o,a,n);if(i){i=r.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rn(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Rn(o,i):(i=Yn(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?Il(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Ml,r}return i=e.child,e=i.sibling,r=Rn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Bo(e,t){return t=di({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ia(e,t,n,r){return r!==null&&ko(r),Ts(t,e.child,null,n),e=Bo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zg(e,t,n,r,a,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Fi(Error(D(422))),ia(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=di({mode:"visible",children:r.children},a,0,null),i=Yn(i,a,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ts(t,e.child,null,l),t.child.memoizedState=Il(l),t.memoizedState=Ml,i);if(!(t.mode&1))return ia(e,t,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(D(419)),r=Fi(i,r,void 0),ia(e,t,l,r)}if(o=(l&e.childLanes)!==0,ft||o){if(r=Ge,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,hn(e,a),zt(r,e,a,-1))}return Wo(),r=Fi(Error(D(421))),ia(e,t,l,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Jg.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,xt=bn(a.nextSibling),jt=t,Ce=!0,It=null,e!==null&&(Et[Ct++]=ln,Et[Ct++]=on,Et[Ct++]=Xn,ln=e.id,on=e.overflow,Xn=t),t=Bo(t,r.children),t.flags|=4096,t)}function hu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ll(e.return,t,n)}function Wi(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Dh(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(at(e,t,r.children,n),r=Te.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hu(e,n,t);else if(e.tag===19)hu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(Te,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ha(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Wi(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ha(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Wi(t,!0,n,null,i);break;case"together":Wi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Na(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=Rn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Rn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $g(e,t,n){switch(t.tag){case 3:Ph(t),bs();break;case 5:lh(t);break;case 1:mt(t.type)&&za(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;we(Va,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(Te,Te.current&1),t.flags|=128,null):n&t.child.childLanes?Oh(e,t,n):(we(Te,Te.current&1),e=fn(e,t,n),e!==null?e.sibling:null);we(Te,Te.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Dh(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),we(Te,Te.current),r)break;return null;case 22:case 23:return t.lanes=0,Ah(e,t,n)}return fn(e,t,n)}var Mh,Bl,Ih,Bh;Mh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bl=function(){};Ih=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qn(Yt.current);var i=null;switch(n){case"input":a=il(e,a),r=il(e,r),i=[];break;case"select":a=Ae({},a,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":a=cl(e,a),r=cl(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ia)}dl(n,r);var l;n=null;for(h in a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var o=a[h];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(yr.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(o=a!=null?a[h]:void 0,r.hasOwnProperty(h)&&c!==o&&(c!=null||o!=null))if(h==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(yr.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ke("scroll",e),i||o===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};Bh=function(e,t,n,r){n!==r&&(t.flags|=4)};function tr(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ug(e,t,n){var r=t.pendingProps;switch(_o(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return mt(t.type)&&Ba(),et(t),null;case 3:return r=t.stateNode,Ls(),Se(pt),Se(nt),Ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,It!==null&&(ql(It),It=null))),Bl(e,t),et(t),null;case 5:Ao(t);var a=Qn(Lr.current);if(n=t.type,e!==null&&t.stateNode!=null)Ih(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return et(t),null}if(e=Qn(Yt.current),ra(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Qt]=t,r[br]=i,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<lr.length;a++)ke(lr[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Nc(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":_c(r,i),ke("invalid",r)}dl(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&sa(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&sa(r.textContent,o,e),a=["children",""+o]):yr.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ke("scroll",r)}switch(n){case"input":Yr(r),wc(r,i,!0);break;case"textarea":Yr(r),kc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ia)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Qt]=t,e[br]=r,Mh(e,t,!1,!1),t.stateNode=e;e:{switch(l=hl(n,r),n){case"dialog":ke("cancel",e),ke("close",e),a=r;break;case"iframe":case"object":case"embed":ke("load",e),a=r;break;case"video":case"audio":for(a=0;a<lr.length;a++)ke(lr[a],e);a=r;break;case"source":ke("error",e),a=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),a=r;break;case"details":ke("toggle",e),a=r;break;case"input":Nc(e,r),a=il(e,r),ke("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ae({},r,{value:void 0}),ke("invalid",e);break;case"textarea":_c(e,r),a=cl(e,r),ke("invalid",e);break;default:a=r}dl(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?md(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fd(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xr(e,c):typeof c=="number"&&xr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",e):c!=null&&lo(e,i,c,l))}switch(n){case"input":Yr(e),wc(e,r,!1);break;case"textarea":Yr(e),kc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+On(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?js(e,!!r.multiple,i,!1):r.defaultValue!=null&&js(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ia)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)Bh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Qn(Lr.current),Qn(Yt.current),ra(t)){if(r=t.stateNode,n=t.memoizedProps,r[Qt]=t,(i=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:sa(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sa(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=t,t.stateNode=r}return et(t),null;case 13:if(Se(Te),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&xt!==null&&t.mode&1&&!(t.flags&128))nh(),bs(),t.flags|=98560,i=!1;else if(i=ra(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Qt]=t}else bs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;et(t),i=!1}else It!==null&&(ql(It),It=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?$e===0&&($e=3):Wo())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return Ls(),Bl(e,t),e===null&&Er(t.stateNode.containerInfo),et(t),null;case 10:return Co(t.type._context),et(t),null;case 17:return mt(t.type)&&Ba(),et(t),null;case 19:if(Se(Te),i=t.memoizedState,i===null)return et(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)tr(i,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ha(e),l!==null){for(t.flags|=128,tr(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Te,Te.current&1|2),t.child}e=e.sibling}i.tail!==null&&Pe()>Rs&&(t.flags|=128,r=!0,tr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ha(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),tr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ce)return et(t),null}else 2*Pe()-i.renderingStartTime>Rs&&n!==1073741824&&(t.flags|=128,r=!0,tr(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Pe(),t.sibling=null,n=Te.current,we(Te,r?n&1|2:n&1),t):(et(t),null);case 22:case 23:return Fo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yt&1073741824&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Vg(e,t){switch(_o(t),t.tag){case 1:return mt(t.type)&&Ba(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ls(),Se(pt),Se(nt),Ro(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ao(t),null;case 13:if(Se(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));bs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(Te),null;case 4:return Ls(),null;case 10:return Co(t.type._context),null;case 22:case 23:return Fo(),null;case 24:return null;default:return null}}var la=!1,tt=!1,Fg=typeof WeakSet=="function"?WeakSet:Set,F=null;function ys(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(e,t,r)}else n.current=null}function zl(e,t,n){try{n()}catch(r){Re(e,t,r)}}var fu=!1;function Wg(e,t){if(wl=Oa,e=Fd(),No(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,h=0,x=0,p=e,y=null;t:for(;;){for(var L;p!==n||a!==0&&p.nodeType!==3||(o=l+a),p!==i||r!==0&&p.nodeType!==3||(c=l+r),p.nodeType===3&&(l+=p.nodeValue.length),(L=p.firstChild)!==null;)y=p,p=L;for(;;){if(p===e)break t;if(y===n&&++h===a&&(o=l),y===i&&++x===r&&(c=l),(L=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=L}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_l={focusedElem:e,selectionRange:n},Oa=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var b=m.memoizedProps,w=m.memoizedState,u=t.stateNode,f=u.getSnapshotBeforeUpdate(t.elementType===t.type?b:Ot(t.type,b),w);u.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(k){Re(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return m=fu,fu=!1,m}function mr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&zl(t,n,i)}a=a.next}while(a!==r)}}function ci(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $l(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zh(e){var t=e.alternate;t!==null&&(e.alternate=null,zh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[br],delete t[El],delete t[Eg],delete t[Cg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $h(e){return e.tag===5||e.tag===3||e.tag===4}function pu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$h(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ia));else if(r!==4&&(e=e.child,e!==null))for(Ul(e,t,n),e=e.sibling;e!==null;)Ul(e,t,n),e=e.sibling}function Vl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Vl(e,t,n),e=e.sibling;e!==null;)Vl(e,t,n),e=e.sibling}var Ye=null,Dt=!1;function yn(e,t,n){for(n=n.child;n!==null;)Uh(e,t,n),n=n.sibling}function Uh(e,t,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ti,n)}catch{}switch(n.tag){case 5:tt||ys(n,t);case 6:var r=Ye,a=Dt;Ye=null,yn(e,t,n),Ye=r,Dt=a,Ye!==null&&(Dt?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Dt?(e=Ye,n=n.stateNode,e.nodeType===8?Ii(e.parentNode,n):e.nodeType===1&&Ii(e,n),_r(e)):Ii(Ye,n.stateNode));break;case 4:r=Ye,a=Dt,Ye=n.stateNode.containerInfo,Dt=!0,yn(e,t,n),Ye=r,Dt=a;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&zl(n,t,l),a=a.next}while(a!==r)}yn(e,t,n);break;case 1:if(!tt&&(ys(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Re(n,t,o)}yn(e,t,n);break;case 21:yn(e,t,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,yn(e,t,n),tt=r):yn(e,t,n);break;default:yn(e,t,n)}}function mu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Fg),t.forEach(function(r){var a=Zg.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Pt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ye=o.stateNode,Dt=!1;break e;case 3:Ye=o.stateNode.containerInfo,Dt=!0;break e;case 4:Ye=o.stateNode.containerInfo,Dt=!0;break e}o=o.return}if(Ye===null)throw Error(D(160));Uh(i,l,a),Ye=null,Dt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(h){Re(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vh(t,e),t=t.sibling}function Vh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pt(t,e),Ht(e),r&4){try{mr(3,e,e.return),ci(3,e)}catch(b){Re(e,e.return,b)}try{mr(5,e,e.return)}catch(b){Re(e,e.return,b)}}break;case 1:Pt(t,e),Ht(e),r&512&&n!==null&&ys(n,n.return);break;case 5:if(Pt(t,e),Ht(e),r&512&&n!==null&&ys(n,n.return),e.flags&32){var a=e.stateNode;try{xr(a,"")}catch(b){Re(e,e.return,b)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&ud(a,i),hl(o,l);var h=hl(o,i);for(l=0;l<c.length;l+=2){var x=c[l],p=c[l+1];x==="style"?md(a,p):x==="dangerouslySetInnerHTML"?fd(a,p):x==="children"?xr(a,p):lo(a,x,p,h)}switch(o){case"input":ll(a,i);break;case"textarea":dd(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var L=i.value;L!=null?js(a,!!i.multiple,L,!1):y!==!!i.multiple&&(i.defaultValue!=null?js(a,!!i.multiple,i.defaultValue,!0):js(a,!!i.multiple,i.multiple?[]:"",!1))}a[br]=i}catch(b){Re(e,e.return,b)}}break;case 6:if(Pt(t,e),Ht(e),r&4){if(e.stateNode===null)throw Error(D(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){Re(e,e.return,b)}}break;case 3:if(Pt(t,e),Ht(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_r(t.containerInfo)}catch(b){Re(e,e.return,b)}break;case 4:Pt(t,e),Ht(e);break;case 13:Pt(t,e),Ht(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Uo=Pe())),r&4&&mu(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(tt=(h=tt)||x,Pt(t,e),tt=h):Pt(t,e),Ht(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!x&&e.mode&1)for(F=e,x=e.child;x!==null;){for(p=F=x;F!==null;){switch(y=F,L=y.child,y.tag){case 0:case 11:case 14:case 15:mr(4,y,y.return);break;case 1:ys(y,y.return);var m=y.stateNode;if(typeof m.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(b){Re(r,n,b)}}break;case 5:ys(y,y.return);break;case 22:if(y.memoizedState!==null){vu(p);continue}}L!==null?(L.return=y,F=L):vu(p)}x=x.sibling}e:for(x=null,p=e;;){if(p.tag===5){if(x===null){x=p;try{a=p.stateNode,h?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=pd("display",l))}catch(b){Re(e,e.return,b)}}}else if(p.tag===6){if(x===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(b){Re(e,e.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Pt(t,e),Ht(e),r&4&&mu(e);break;case 21:break;default:Pt(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($h(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(xr(a,""),r.flags&=-33);var i=pu(e);Vl(e,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,o=pu(e);Ul(e,o,l);break;default:throw Error(D(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hg(e,t,n){F=e,Fh(e)}function Fh(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var a=F,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||la;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||tt;o=la;var h=tt;if(la=l,(tt=c)&&!h)for(F=a;F!==null;)l=F,c=l.child,l.tag===22&&l.memoizedState!==null?yu(a):c!==null?(c.return=l,F=c):yu(a);for(;i!==null;)F=i,Fh(i),i=i.sibling;F=a,la=o,tt=h}gu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,F=i):gu(e)}}function gu(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tt||ci(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!tt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&eu(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}eu(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var x=h.memoizedState;if(x!==null){var p=x.dehydrated;p!==null&&_r(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}tt||t.flags&512&&$l(t)}catch(y){Re(t,t.return,y)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function vu(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function yu(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ci(4,t)}catch(c){Re(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Re(t,a,c)}}var i=t.return;try{$l(t)}catch(c){Re(t,i,c)}break;case 5:var l=t.return;try{$l(t)}catch(c){Re(t,l,c)}}}catch(c){Re(t,t.return,c)}if(t===e){F=null;break}var o=t.sibling;if(o!==null){o.return=t.return,F=o;break}F=t.return}}var qg=Math.ceil,Ga=pn.ReactCurrentDispatcher,zo=pn.ReactCurrentOwner,Lt=pn.ReactCurrentBatchConfig,fe=0,Ge=null,De=null,Ke=0,yt=0,xs=In(0),$e=0,Or=null,Zn=0,ui=0,$o=0,gr=null,ht=null,Uo=0,Rs=1/0,sn=null,Ya=!1,Fl=null,Ln=null,oa=!1,kn=null,Ka=0,vr=0,Wl=null,wa=-1,_a=0;function it(){return fe&6?Pe():wa!==-1?wa:wa=Pe()}function An(e){return e.mode&1?fe&2&&Ke!==0?Ke&-Ke:Tg.transition!==null?(_a===0&&(_a=Cd()),_a):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Od(e.type)),e):1}function zt(e,t,n,r){if(50<vr)throw vr=0,Wl=null,Error(D(185));Mr(e,n,r),(!(fe&2)||e!==Ge)&&(e===Ge&&(!(fe&2)&&(ui|=n),$e===4&&wn(e,Ke)),gt(e,r),n===1&&fe===0&&!(t.mode&1)&&(Rs=Pe()+500,ii&&Bn()))}function gt(e,t){var n=e.callbackNode;Tm(e,t);var r=Pa(e,e===Ge?Ke:0);if(r===0)n!==null&&Cc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Cc(n),t===1)e.tag===0?bg(xu.bind(null,e)):Zd(xu.bind(null,e)),kg(function(){!(fe&6)&&Bn()}),n=null;else{switch(bd(r)){case 1:n=fo;break;case 4:n=Sd;break;case 16:n=Ra;break;case 536870912:n=Ed;break;default:n=Ra}n=Xh(n,Wh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Wh(e,t){if(wa=-1,_a=0,fe&6)throw Error(D(327));var n=e.callbackNode;if(Ss()&&e.callbackNode!==n)return null;var r=Pa(e,e===Ge?Ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xa(e,r);else{t=r;var a=fe;fe|=2;var i=qh();(Ge!==e||Ke!==t)&&(sn=null,Rs=Pe()+500,Gn(e,t));do try{Yg();break}catch(o){Hh(e,o)}while(!0);Eo(),Ga.current=i,fe=a,De!==null?t=0:(Ge=null,Ke=0,t=$e)}if(t!==0){if(t===2&&(a=vl(e),a!==0&&(r=a,t=Hl(e,a))),t===1)throw n=Or,Gn(e,0),wn(e,r),gt(e,Pe()),n;if(t===6)wn(e,r);else{if(a=e.current.alternate,!(r&30)&&!Qg(a)&&(t=Xa(e,r),t===2&&(i=vl(e),i!==0&&(r=i,t=Hl(e,i))),t===1))throw n=Or,Gn(e,0),wn(e,r),gt(e,Pe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Fn(e,ht,sn);break;case 3:if(wn(e,r),(r&130023424)===r&&(t=Uo+500-Pe(),10<t)){if(Pa(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){it(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Sl(Fn.bind(null,e,ht,sn),t);break}Fn(e,ht,sn);break;case 4:if(wn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-Bt(r);i=1<<l,l=t[l],l>a&&(a=l),r&=~i}if(r=a,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qg(r/1960))-r,10<r){e.timeoutHandle=Sl(Fn.bind(null,e,ht,sn),r);break}Fn(e,ht,sn);break;case 5:Fn(e,ht,sn);break;default:throw Error(D(329))}}}return gt(e,Pe()),e.callbackNode===n?Wh.bind(null,e):null}function Hl(e,t){var n=gr;return e.current.memoizedState.isDehydrated&&(Gn(e,t).flags|=256),e=Xa(e,t),e!==2&&(t=ht,ht=n,t!==null&&ql(t)),e}function ql(e){ht===null?ht=e:ht.push.apply(ht,e)}function Qg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!$t(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t){for(t&=~$o,t&=~ui,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),r=1<<n;e[n]=-1,t&=~r}}function xu(e){if(fe&6)throw Error(D(327));Ss();var t=Pa(e,0);if(!(t&1))return gt(e,Pe()),null;var n=Xa(e,t);if(e.tag!==0&&n===2){var r=vl(e);r!==0&&(t=r,n=Hl(e,r))}if(n===1)throw n=Or,Gn(e,0),wn(e,t),gt(e,Pe()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,ht,sn),gt(e,Pe()),null}function Vo(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(Rs=Pe()+500,ii&&Bn())}}function es(e){kn!==null&&kn.tag===0&&!(fe&6)&&Ss();var t=fe;fe|=1;var n=Lt.transition,r=ye;try{if(Lt.transition=null,ye=1,e)return e()}finally{ye=r,Lt.transition=n,fe=t,!(fe&6)&&Bn()}}function Fo(){yt=xs.current,Se(xs)}function Gn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_g(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(_o(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ba();break;case 3:Ls(),Se(pt),Se(nt),Ro();break;case 5:Ao(r);break;case 4:Ls();break;case 13:Se(Te);break;case 19:Se(Te);break;case 10:Co(r.type._context);break;case 22:case 23:Fo()}n=n.return}if(Ge=e,De=e=Rn(e.current,null),Ke=yt=t,$e=0,Or=null,$o=ui=Zn=0,ht=gr=null,qn!==null){for(t=0;t<qn.length;t++)if(n=qn[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}n.pending=r}qn=null}return e}function Hh(e,t){do{var n=De;try{if(Eo(),xa.current=Qa,qa){for(var r=Le.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}qa=!1}if(Jn=0,Qe=ze=Le=null,pr=!1,Ar=0,zo.current=null,n===null||n.return===null){$e=1,Or=t,De=null;break}e:{var i=e,l=n.return,o=n,c=t;if(t=Ke,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,x=o,p=x.tag;if(!(x.mode&1)&&(p===0||p===11||p===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var L=iu(l);if(L!==null){L.flags&=-257,lu(L,l,o,i,t),L.mode&1&&au(i,h,t),t=L,c=h;var m=t.updateQueue;if(m===null){var b=new Set;b.add(c),t.updateQueue=b}else m.add(c);break e}else{if(!(t&1)){au(i,h,t),Wo();break e}c=Error(D(426))}}else if(Ce&&o.mode&1){var w=iu(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),lu(w,l,o,i,t),ko(As(c,o));break e}}i=c=As(c,o),$e!==4&&($e=2),gr===null?gr=[i]:gr.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var u=bh(i,c,t);Zc(i,u);break e;case 1:o=c;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ln===null||!Ln.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=Th(i,o,t);Zc(i,k);break e}}i=i.return}while(i!==null)}Gh(n)}catch(P){t=P,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function qh(){var e=Ga.current;return Ga.current=Qa,e===null?Qa:e}function Wo(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(Zn&268435455)&&!(ui&268435455)||wn(Ge,Ke)}function Xa(e,t){var n=fe;fe|=2;var r=qh();(Ge!==e||Ke!==t)&&(sn=null,Gn(e,t));do try{Gg();break}catch(a){Hh(e,a)}while(!0);if(Eo(),fe=n,Ga.current=r,De!==null)throw Error(D(261));return Ge=null,Ke=0,$e}function Gg(){for(;De!==null;)Qh(De)}function Yg(){for(;De!==null&&!jm();)Qh(De)}function Qh(e){var t=Kh(e.alternate,e,yt);e.memoizedProps=e.pendingProps,t===null?Gh(e):De=t,zo.current=null}function Gh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Vg(n,t),n!==null){n.flags&=32767,De=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,De=null;return}}else if(n=Ug(n,t,yt),n!==null){De=n;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);$e===0&&($e=5)}function Fn(e,t,n){var r=ye,a=Lt.transition;try{Lt.transition=null,ye=1,Kg(e,t,n,r)}finally{Lt.transition=a,ye=r}return null}function Kg(e,t,n,r){do Ss();while(kn!==null);if(fe&6)throw Error(D(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Lm(e,i),e===Ge&&(De=Ge=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oa||(oa=!0,Xh(Ra,function(){return Ss(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Lt.transition,Lt.transition=null;var l=ye;ye=1;var o=fe;fe|=4,zo.current=null,Wg(e,n),Vh(n,e),gg(_l),Oa=!!wl,_l=wl=null,e.current=n,Hg(n),Nm(),fe=o,ye=l,Lt.transition=i}else e.current=n;if(oa&&(oa=!1,kn=e,Ka=a),i=e.pendingLanes,i===0&&(Ln=null),km(n.stateNode),gt(e,Pe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ya)throw Ya=!1,e=Fl,Fl=null,e;return Ka&1&&e.tag!==0&&Ss(),i=e.pendingLanes,i&1?e===Wl?vr++:(vr=0,Wl=e):vr=0,Bn(),null}function Ss(){if(kn!==null){var e=bd(Ka),t=Lt.transition,n=ye;try{if(Lt.transition=null,ye=16>e?16:e,kn===null)var r=!1;else{if(e=kn,kn=null,Ka=0,fe&6)throw Error(D(331));var a=fe;for(fe|=4,F=e.current;F!==null;){var i=F,l=i.child;if(F.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var h=o[c];for(F=h;F!==null;){var x=F;switch(x.tag){case 0:case 11:case 15:mr(8,x,i)}var p=x.child;if(p!==null)p.return=x,F=p;else for(;F!==null;){x=F;var y=x.sibling,L=x.return;if(zh(x),x===h){F=null;break}if(y!==null){y.return=L,F=y;break}F=L}}}var m=i.alternate;if(m!==null){var b=m.child;if(b!==null){m.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}F=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,F=l;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mr(9,i,i.return)}var u=i.sibling;if(u!==null){u.return=i.return,F=u;break e}F=i.return}}var f=e.current;for(F=f;F!==null;){l=F;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,F=g;else e:for(l=f;F!==null;){if(o=F,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ci(9,o)}}catch(P){Re(o,o.return,P)}if(o===l){F=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,F=k;break e}F=o.return}}if(fe=a,Bn(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ti,e)}catch{}r=!0}return r}finally{ye=n,Lt.transition=t}}return!1}function ju(e,t,n){t=As(n,t),t=bh(e,t,1),e=Tn(e,t,1),t=it(),e!==null&&(Mr(e,1,t),gt(e,t))}function Re(e,t,n){if(e.tag===3)ju(e,e,n);else for(;t!==null;){if(t.tag===3){ju(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ln===null||!Ln.has(r))){e=As(n,e),e=Th(t,e,1),t=Tn(t,e,1),e=it(),t!==null&&(Mr(t,1,e),gt(t,e));break}}t=t.return}}function Xg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(Ke&n)===n&&($e===4||$e===3&&(Ke&130023424)===Ke&&500>Pe()-Uo?Gn(e,0):$o|=n),gt(e,t)}function Yh(e,t){t===0&&(e.mode&1?(t=Jr,Jr<<=1,!(Jr&130023424)&&(Jr=4194304)):t=1);var n=it();e=hn(e,t),e!==null&&(Mr(e,t,n),gt(e,n))}function Jg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yh(e,n)}function Zg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Yh(e,n)}var Kh;Kh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ft=!1,$g(e,t,n);ft=!!(e.flags&131072)}else ft=!1,Ce&&t.flags&1048576&&eh(t,Ua,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Na(e,t),e=t.pendingProps;var a=Cs(t,nt.current);ks(t,n),a=Oo(null,t,r,e,a,n);var i=Do();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(i=!0,za(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,To(t),a.updater=oi,t.stateNode=a,a._reactInternals=t,Rl(t,r,e,n),t=Dl(null,t,r,!0,i,n)):(t.tag=0,Ce&&i&&wo(t),at(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Na(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=tv(r),e=Ot(r,e),a){case 0:t=Ol(null,t,r,e,n);break e;case 1:t=uu(null,t,r,e,n);break e;case 11:t=ou(null,t,r,e,n);break e;case 14:t=cu(null,t,r,Ot(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ot(r,a),Ol(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ot(r,a),uu(e,t,r,a,n);case 3:e:{if(Ph(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,a=i.element,ih(e,t),Wa(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=As(Error(D(423)),t),t=du(e,t,r,n,a);break e}else if(r!==a){a=As(Error(D(424)),t),t=du(e,t,r,n,a);break e}else for(xt=bn(t.stateNode.containerInfo.firstChild),jt=t,Ce=!0,It=null,n=rh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bs(),r===a){t=fn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return lh(t),e===null&&Tl(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,kl(r,a)?l=null:i!==null&&kl(r,i)&&(t.flags|=32),Rh(e,t),at(e,t,l,n),t.child;case 6:return e===null&&Tl(t),null;case 13:return Oh(e,t,n);case 4:return Lo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ts(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ot(r,a),ou(e,t,r,a,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,we(Va,r._currentValue),r._currentValue=l,i!==null)if($t(i.value,l)){if(i.children===a.children&&!pt.current){t=fn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=cn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var x=h.pending;x===null?c.next=c:(c.next=x.next,x.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ll(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(D(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Ll(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}at(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ks(t,n),a=At(a),r=r(a),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,a=Ot(r,t.pendingProps),a=Ot(r.type,a),cu(e,t,r,a,n);case 15:return Lh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ot(r,a),Na(e,t),t.tag=1,mt(r)?(e=!0,za(t)):e=!1,ks(t,n),Ch(t,r,a),Rl(t,r,a,n),Dl(null,t,r,!0,e,n);case 19:return Dh(e,t,n);case 22:return Ah(e,t,n)}throw Error(D(156,t.tag))};function Xh(e,t){return kd(e,t)}function ev(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,r){return new ev(e,t,n,r)}function Ho(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tv(e){if(typeof e=="function")return Ho(e)?1:0;if(e!=null){if(e=e.$$typeof,e===co)return 11;if(e===uo)return 14}return 2}function Rn(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ka(e,t,n,r,a,i){var l=2;if(r=e,typeof e=="function")Ho(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case cs:return Yn(n.children,a,i,t);case oo:l=8,a|=8;break;case nl:return e=Tt(12,n,t,a|2),e.elementType=nl,e.lanes=i,e;case sl:return e=Tt(13,n,t,a),e.elementType=sl,e.lanes=i,e;case rl:return e=Tt(19,n,t,a),e.elementType=rl,e.lanes=i,e;case ld:return di(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ad:l=10;break e;case id:l=9;break e;case co:l=11;break e;case uo:l=14;break e;case xn:l=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Tt(l,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Yn(e,t,n,r){return e=Tt(7,e,r,t),e.lanes=n,e}function di(e,t,n,r){return e=Tt(22,e,r,t),e.elementType=ld,e.lanes=n,e.stateNode={isHidden:!1},e}function Hi(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function qi(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nv(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ei(0),this.expirationTimes=Ei(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function qo(e,t,n,r,a,i,l,o,c){return e=new nv(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Tt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},To(i),e}function sv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:os,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Jh(e){if(!e)return Dn;e=e._reactInternals;e:{if(ns(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(mt(n))return Jd(e,n,t)}return t}function Zh(e,t,n,r,a,i,l,o,c){return e=qo(n,r,!0,e,a,i,l,o,c),e.context=Jh(null),n=e.current,r=it(),a=An(n),i=cn(r,a),i.callback=t??null,Tn(n,i,a),e.current.lanes=a,Mr(e,a,r),gt(e,r),e}function hi(e,t,n,r){var a=t.current,i=it(),l=An(a);return n=Jh(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Tn(a,t,l),e!==null&&(zt(e,a,l,i),ya(e,a,l)),l}function Ja(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qo(e,t){Nu(e,t),(e=e.alternate)&&Nu(e,t)}function rv(){return null}var ef=typeof reportError=="function"?reportError:function(e){console.error(e)};function Go(e){this._internalRoot=e}fi.prototype.render=Go.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));hi(e,t,null,null)};fi.prototype.unmount=Go.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;es(function(){hi(null,e,null,null)}),t[dn]=null}};function fi(e){this._internalRoot=e}fi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ad();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nn.length&&t!==0&&t<Nn[n].priority;n++);Nn.splice(n,0,e),n===0&&Pd(e)}};function Yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wu(){}function av(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var h=Ja(l);i.call(h)}}var l=Zh(t,r,e,0,null,!1,!1,"",wu);return e._reactRootContainer=l,e[dn]=l.current,Er(e.nodeType===8?e.parentNode:e),es(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var h=Ja(c);o.call(h)}}var c=qo(e,0,!1,null,null,!1,!1,"",wu);return e._reactRootContainer=c,e[dn]=c.current,Er(e.nodeType===8?e.parentNode:e),es(function(){hi(t,c,n,r)}),c}function mi(e,t,n,r,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Ja(l);o.call(c)}}hi(t,l,e,a)}else l=av(n,t,e,a,r);return Ja(l)}Td=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ir(t.pendingLanes);n!==0&&(po(t,n|1),gt(t,Pe()),!(fe&6)&&(Rs=Pe()+500,Bn()))}break;case 13:es(function(){var r=hn(e,1);if(r!==null){var a=it();zt(r,e,1,a)}}),Qo(e,1)}};mo=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var n=it();zt(t,e,134217728,n)}Qo(e,134217728)}};Ld=function(e){if(e.tag===13){var t=An(e),n=hn(e,t);if(n!==null){var r=it();zt(n,e,t,r)}Qo(e,t)}};Ad=function(){return ye};Rd=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};pl=function(e,t,n){switch(t){case"input":if(ll(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ai(r);if(!a)throw Error(D(90));cd(r),ll(r,a)}}}break;case"textarea":dd(e,n);break;case"select":t=n.value,t!=null&&js(e,!!n.multiple,t,!1)}};yd=Vo;xd=es;var iv={usingClientEntryPoint:!1,Events:[Br,fs,ai,gd,vd,Vo]},nr={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lv={bundleType:nr.bundleType,version:nr.version,rendererPackageName:nr.rendererPackageName,rendererConfig:nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wd(e),e===null?null:e.stateNode},findFiberByHostInstance:nr.findFiberByHostInstance||rv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{ti=ca.inject(lv),Gt=ca}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iv;wt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yo(t))throw Error(D(200));return sv(e,t,null,n)};wt.createRoot=function(e,t){if(!Yo(e))throw Error(D(299));var n=!1,r="",a=ef;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=qo(e,1,!1,null,null,n,!1,r,a),e[dn]=t.current,Er(e.nodeType===8?e.parentNode:e),new Go(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=wd(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return es(e)};wt.hydrate=function(e,t,n){if(!pi(t))throw Error(D(200));return mi(null,e,t,!0,n)};wt.hydrateRoot=function(e,t,n){if(!Yo(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",l=ef;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Zh(t,null,e,1,n??null,a,!1,i,l),e[dn]=t.current,Er(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new fi(t)};wt.render=function(e,t,n){if(!pi(t))throw Error(D(200));return mi(null,e,t,!1,n)};wt.unmountComponentAtNode=function(e){if(!pi(e))throw Error(D(40));return e._reactRootContainer?(es(function(){mi(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};wt.unstable_batchedUpdates=Vo;wt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!pi(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return mi(e,t,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function tf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tf)}catch(e){console.error(e)}}tf(),td.exports=wt;var ov=td.exports,nf,_u=ov;nf=_u.createRoot,_u.hydrateRoot;const cv="http://localhost:3000";let Ql=localStorage.getItem("token");function ls(e){Ql=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async function $r(e,t={}){const n={"Content-Type":"application/json",...t.headers||{}};Ql&&(n.Authorization=`Bearer ${Ql}`);const r=await fetch(`${cv}${e}`,{...t,headers:n});if(!r.ok){const i=(await r.json().catch(()=>({}))).error||"request_failed";throw new Error(i)}return r.json()}function he(e){return $r(e,{method:"GET"})}function be(e,t){return $r(e,{method:"POST",body:JSON.stringify(t||{})})}function Be(e,t){return $r(e,{method:"PATCH",body:JSON.stringify(t||{})})}function ku(e,t){return $r(e,{method:"PUT",body:JSON.stringify(t||{})})}function Wn(e){return $r(e,{method:"DELETE"})}const Xt=Object.create(null);Xt.open="0";Xt.close="1";Xt.ping="2";Xt.pong="3";Xt.message="4";Xt.upgrade="5";Xt.noop="6";const Sa=Object.create(null);Object.keys(Xt).forEach(e=>{Sa[Xt[e]]=e});const Gl={type:"error",data:"parser error"},sf=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",rf=typeof ArrayBuffer=="function",af=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ko=({type:e,data:t},n,r)=>sf&&t instanceof Blob?n?r(t):Su(t,r):rf&&(t instanceof ArrayBuffer||af(t))?n?r(t):Su(new Blob([t]),r):r(Xt[e]+(t||"")),Su=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Eu(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Qi;function uv(e,t){if(sf&&e.data instanceof Blob)return e.data.arrayBuffer().then(Eu).then(t);if(rf&&(e.data instanceof ArrayBuffer||af(e.data)))return t(Eu(e.data));Ko(e,!1,n=>{Qi||(Qi=new TextEncoder),t(Qi.encode(n))})}const Cu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",or=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Cu.length;e++)or[Cu.charCodeAt(e)]=e;const dv=e=>{let t=e.length*.75,n=e.length,r,a=0,i,l,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),x=new Uint8Array(h);for(r=0;r<n;r+=4)i=or[e.charCodeAt(r)],l=or[e.charCodeAt(r+1)],o=or[e.charCodeAt(r+2)],c=or[e.charCodeAt(r+3)],x[a++]=i<<2|l>>4,x[a++]=(l&15)<<4|o>>2,x[a++]=(o&3)<<6|c&63;return h},hv=typeof ArrayBuffer=="function",Xo=(e,t)=>{if(typeof e!="string")return{type:"message",data:lf(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:fv(e.substring(1),t)}:Sa[n]?e.length>1?{type:Sa[n],data:e.substring(1)}:{type:Sa[n]}:Gl},fv=(e,t)=>{if(hv){const n=dv(e);return lf(n,t)}else return{base64:!0,data:e}},lf=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},of="",pv=(e,t)=>{const n=e.length,r=new Array(n);let a=0;e.forEach((i,l)=>{Ko(i,!1,o=>{r[l]=o,++a===n&&t(r.join(of))})})},mv=(e,t)=>{const n=e.split(of),r=[];for(let a=0;a<n.length;a++){const i=Xo(n[a],t);if(r.push(i),i.type==="error")break}return r};function gv(){return new TransformStream({transform(e,t){uv(e,n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let Gi;function ua(e){return e.reduce((t,n)=>t+n.length,0)}function da(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)n[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function vv(e,t){Gi||(Gi=new TextDecoder);const n=[];let r=0,a=-1,i=!1;return new TransformStream({transform(l,o){for(n.push(l);;){if(r===0){if(ua(n)<1)break;const c=da(n,1);i=(c[0]&128)===128,a=c[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(ua(n)<2)break;const c=da(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(ua(n)<8)break;const c=da(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),x=h.getUint32(0);if(x>Math.pow(2,21)-1){o.enqueue(Gl);break}a=x*Math.pow(2,32)+h.getUint32(4),r=3}else{if(ua(n)<a)break;const c=da(n,a);o.enqueue(Xo(i?c:Gi.decode(c),t)),r=0}if(a===0||a>e){o.enqueue(Gl);break}}}})}const cf=4;function Me(e){if(e)return yv(e)}function yv(e){for(var t in Me.prototype)e[t]=Me.prototype[t];return e}Me.prototype.on=Me.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Me.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Me.prototype.off=Me.prototype.removeListener=Me.prototype.removeAllListeners=Me.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,a=0;a<n.length;a++)if(r=n[a],r===t||r.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Me.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,a=n.length;r<a;++r)n[r].apply(this,t)}return this};Me.prototype.emitReserved=Me.prototype.emit;Me.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Me.prototype.hasListeners=function(e){return!!this.listeners(e).length};const gi=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),bt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),xv="arraybuffer";function uf(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const jv=bt.setTimeout,Nv=bt.clearTimeout;function vi(e,t){t.useNativeTimers?(e.setTimeoutFn=jv.bind(bt),e.clearTimeoutFn=Nv.bind(bt)):(e.setTimeoutFn=bt.setTimeout.bind(bt),e.clearTimeoutFn=bt.clearTimeout.bind(bt))}const wv=1.33;function _v(e){return typeof e=="string"?kv(e):Math.ceil((e.byteLength||e.size)*wv)}function kv(e){let t=0,n=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function df(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Sv(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Ev(e){let t={},n=e.split("&");for(let r=0,a=n.length;r<a;r++){let i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class Cv extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Jo extends Me{constructor(t){super(),this.writable=!1,vi(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new Cv(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Xo(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Sv(t);return n.length?"?"+n:""}}class bv extends Jo{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};mv(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,pv(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=df()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let hf=!1;try{hf=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Tv=hf;function Lv(){}class Av extends bv{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Kt extends Me{constructor(t,n,r){super(),this.createRequest=t,vi(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=uf(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Kt.requestsCount++,Kt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Lv,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Kt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Kt.requestsCount=0;Kt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",bu);else if(typeof addEventListener=="function"){const e="onpagehide"in bt?"pagehide":"unload";addEventListener(e,bu,!1)}}function bu(){for(let e in Kt.requests)Kt.requests.hasOwnProperty(e)&&Kt.requests[e].abort()}const Rv=function(){const e=ff({xdomain:!1});return e&&e.responseType!==null}();class Pv extends Av{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Rv&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Kt(ff,this.uri(),t)}}function ff(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Tv))return new XMLHttpRequest}catch{}if(!t)try{return new bt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pf=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ov extends Jo{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=pf?{}:uf(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;Ko(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&gi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=df()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Yi=bt.WebSocket||bt.MozWebSocket;class Dv extends Ov{createSocket(t,n,r){return pf?new Yi(t,n,r):n?new Yi(t,n):new Yi(t)}doWrite(t,n){this.ws.send(n)}}class Mv extends Jo{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=vv(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),a=gv();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;this._writer.write(r).then(()=>{a&&gi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Iv={websocket:Dv,webtransport:Mv,polling:Pv},Bv=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,zv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Yl(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let a=Bv.exec(e||""),i={},l=14;for(;l--;)i[zv[l]]=a[l]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=$v(i,i.path),i.queryKey=Uv(i,i.query),i}function $v(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Uv(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(n[a]=i)}),n}const Kl=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ea=[];Kl&&addEventListener("offline",()=>{Ea.forEach(e=>e())},!1);class Pn extends Me{constructor(t,n){if(super(),this.binaryType=xv,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Yl(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Yl(n.host).host);vi(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ev(this.opts.query)),Kl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ea.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=cf,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Pn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Pn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(n+=_v(a)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,gi(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,a){if(typeof n=="function"&&(a=n,n=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Pn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Kl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Ea.indexOf(this._offlineEventListener);r!==-1&&Ea.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Pn.protocol=cf;class Vv extends Pn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Pn.priorWebsocketSuccess=!1;const a=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Pn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function i(){r||(r=!0,x(),n.close(),n=null)}const l=p=>{const y=new Error("probe error: "+p);y.transport=n.name,i(),this.emitReserved("upgradeError",y)};function o(){l("transport closed")}function c(){l("socket closed")}function h(p){n&&p.name!==n.name&&i()}const x=()=>{n.removeListener("open",a),n.removeListener("error",l),n.removeListener("close",o),this.off("close",c),this.off("upgrading",h)};n.once("open",a),n.once("error",l),n.once("close",o),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let Fv=class extends Vv{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>Iv[a]).filter(a=>!!a)),super(t,r)}};function Wv(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Yl(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Hv=typeof ArrayBuffer=="function",qv=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,mf=Object.prototype.toString,Qv=typeof Blob=="function"||typeof Blob<"u"&&mf.call(Blob)==="[object BlobConstructor]",Gv=typeof File=="function"||typeof File<"u"&&mf.call(File)==="[object FileConstructor]";function Zo(e){return Hv&&(e instanceof ArrayBuffer||qv(e))||Qv&&e instanceof Blob||Gv&&e instanceof File}function Ca(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Ca(e[n]))return!0;return!1}if(Zo(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ca(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ca(e[n]))return!0;return!1}function Yv(e){const t=[],n=e.data,r=e;return r.data=Xl(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Xl(e,t){if(!e)return e;if(Zo(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Xl(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Xl(e[r],t));return n}return e}function Kv(e,t){return e.data=Jl(e.data,t),delete e.attachments,e}function Jl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Jl(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Jl(e[n],t));return e}const gf=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Xv=5;var re;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(re||(re={}));class Jv{constructor(t){this.replacer=t}encode(t){return(t.type===re.EVENT||t.type===re.ACK)&&Ca(t)?this.encodeAsBinary({type:t.type===re.EVENT?re.BINARY_EVENT:re.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===re.BINARY_EVENT||t.type===re.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Yv(t),r=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(r),a}}class ec extends Me{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===re.BINARY_EVENT;r||n.type===re.BINARY_ACK?(n.type=r?re.EVENT:re.ACK,this.reconstructor=new Zv(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Zo(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(re[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===re.BINARY_EVENT||r.type===re.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(i,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(i,n)}else r.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(ec.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case re.CONNECT:return Za(n);case re.DISCONNECT:return n===void 0;case re.CONNECT_ERROR:return typeof n=="string"||Za(n);case re.EVENT:case re.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&gf.indexOf(n[0])===-1);case re.ACK:case re.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Zv{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Kv(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ey(e){return typeof e=="string"}const ty=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function ny(e){return e===void 0||ty(e)}function Za(e){return Object.prototype.toString.call(e)==="[object Object]"}function sy(e,t){switch(e){case re.CONNECT:return t===void 0||Za(t);case re.DISCONNECT:return t===void 0;case re.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&gf.indexOf(t[0])===-1);case re.ACK:return Array.isArray(t);case re.CONNECT_ERROR:return typeof t=="string"||Za(t);default:return!1}}function ry(e){return ey(e.nsp)&&ny(e.id)&&sy(e.type,e.data)}const ay=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ec,Encoder:Jv,get PacketType(){return re},isPacketValid:ry,protocol:Xv},Symbol.toStringTag,{value:"Module"}));function Mt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const iy=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class vf extends Me{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Mt(t,"open",this.onopen.bind(this)),Mt(t,"packet",this.onpacket.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,a,i;if(iy.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:re.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const x=this.ids++,p=n.pop();this._registerAckCallback(x,p),l.id=x}const o=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},a),l=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,o)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((r,a)=>{const i=(l,o)=>l?a(l):r(o);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>(this._queue[0],a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:re.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case re.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case re.EVENT:case re.BINARY_EVENT:this.onevent(t);break;case re.ACK:case re.BINARY_ACK:this.onack(t);break;case re.DISCONNECT:this.ondisconnect();break;case re.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...a){r||(r=!0,n.packet({type:re.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:re.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Ms(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ms.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Ms.prototype.reset=function(){this.attempts=0};Ms.prototype.setMin=function(e){this.ms=e};Ms.prototype.setMax=function(e){this.max=e};Ms.prototype.setJitter=function(e){this.jitter=e};class Zl extends Me{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,vi(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ms({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||ay;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Fv(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=Mt(n,"open",function(){r.onopen(),t&&t()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},l=Mt(n,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Mt(t,"ping",this.onping.bind(this)),Mt(t,"data",this.ondata.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this)),Mt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){gi(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new vf(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const sr={};function ba(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Wv(e,t.path||"/socket.io"),r=n.source,a=n.id,i=n.path,l=sr[a]&&i in sr[a].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return o?c=new Zl(r,t):(sr[a]||(sr[a]=new Zl(r,t)),c=sr[a]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(ba,{Manager:Zl,Socket:vf,io:ba,connect:ba});const ly="http://localhost:3000";function oy(e){return ba(ly,{auth:{token:e}})}const yf=v.createContext(null);function cy({children:e}){const[t,n]=v.useState([]),r=v.useRef(new Map),a=o=>{n(h=>h.filter(x=>x.id!==o));const c=r.current.get(o);c&&(clearTimeout(c),r.current.delete(o))},i=({message:o,type:c="success",actionLabel:h,onAction:x,duration:p=6e3})=>{const y=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if(n(L=>[...L,{id:y,message:o,type:c,actionLabel:h,onAction:x,duration:p}]),p>0){const L=setTimeout(()=>a(y),p);r.current.set(y,L)}return y},l=o=>o==="error"?s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M12 4.5c.5 0 .95.26 1.2.68l6.5 11.25a1.35 1.35 0 0 1-1.2 2.02H5.5a1.35 1.35 0 0 1-1.2-2.02L10.8 5.18c.25-.42.7-.68 1.2-.68Zm0 4.25a.9.9 0 0 0-.9.9v5.5a.9.9 0 1 0 1.8 0v-5.5a.9.9 0 0 0-.9-.9Zm0 8.3a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z",fill:"currentColor"})}):o==="info"?s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M12 3.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17Zm0 3.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Zm-1.2 4.2h2.4v6.1h-2.4v-6.1Z",fill:"currentColor"})}):s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M9.5 16.6 5.6 12.7a1 1 0 1 1 1.4-1.4l2.5 2.5 7.5-7.5a1 1 0 1 1 1.4 1.4l-8.9 8.9a1 1 0 0 1-1.4 0Z",fill:"currentColor"})});return s.jsxs(yf.Provider,{value:{pushToast:i,removeToast:a},children:[e,s.jsx("div",{className:"toast-container",children:t.map(o=>s.jsxs("div",{className:`toast toast-${o.type}`,style:{"--toast-duration":`${o.duration}ms`},children:[s.jsx("div",{className:"toast-icon",children:l(o.type)}),s.jsx("div",{className:"toast-message",children:o.message}),o.actionLabel&&s.jsx("button",{className:"toast-action",type:"button",onClick:()=>{o.onAction&&Promise.resolve(o.onAction()).catch(()=>{}),a(o.id)},children:o.actionLabel}),s.jsx("button",{className:"toast-close",type:"button",onClick:()=>a(o.id),children:"x"}),o.duration>0&&s.jsx("div",{className:`toast-progress toast-progress-${o.type}`})]},o.id))})]})}function tc(){const e=v.useContext(yf);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function uy({user:e,isOpen:t,onToggle:n,onLogout:r,onReturnToSuperadmin:a,showReturnToSuperadmin:i,getInitial:l}){return s.jsxs("div",{className:"rail-profile",children:[s.jsx("button",{className:`profile-button ${t?"active":""}`,type:"button",onClick:n,title:"Perfil","aria-label":"Perfil",children:s.jsx("span",{children:l(e.name)})}),t&&s.jsxs("div",{className:"profile-card",children:[s.jsx("div",{className:"profile-title",children:e.name}),s.jsx("div",{className:"profile-meta",children:e.email||"Sin correo"}),s.jsx("div",{className:"profile-role",children:e.role}),i?s.jsx("button",{className:"ghost",type:"button",onClick:a,children:"Volver a superadmin"}):null,s.jsx("button",{className:"primary",type:"button",onClick:r,children:"Salir"})]})]})}function dy({navItems:e,view:t,onSetView:n,theme:r,onToggleTheme:a,user:i,logoUrl:l,brandName:o,isProfileOpen:c,onToggleProfile:h,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:L,SunIcon:m,MoonIcon:b}){const w=(o||"P").trim().charAt(0)||"P";return s.jsxs("aside",{className:"nav-rail",children:[s.jsx("button",{className:"rail-logo",type:"button",title:"Perzivalh",children:l?s.jsx("img",{src:l,alt:o||"Logo"}):s.jsx("span",{className:"logo-mark",children:w})}),s.jsx("nav",{className:"rail-nav",children:e.map(u=>{const f=u.icon;return s.jsx("button",{className:`rail-button ${t===u.id?"active":""}`,onClick:()=>u.enabled&&n(u.id),title:u.label,"aria-label":u.label,type:"button",disabled:!u.enabled,children:s.jsx(f,{className:"rail-icon"})},u.id)})}),s.jsx("div",{className:"rail-spacer"}),s.jsx("button",{className:"rail-button",type:"button",onClick:a,title:r==="dark"?"Tema claro":"Tema oscuro","aria-label":r==="dark"?"Tema claro":"Tema oscuro",children:r==="dark"?s.jsx(m,{className:"rail-icon"}):s.jsx(b,{className:"rail-icon"})}),s.jsx(uy,{user:i,isOpen:c,onToggle:h,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:L})]})}function hy({activeConversation:e,conversations:t,channels:n,brandName:r,lastReadMap:a,filters:i,showFilters:l,users:o,tags:c,statusOptions:h,statusLabels:x,formatListTime:p,formatCompactDate:y,messageBlocks:L,messageDraft:m,messageMode:b,quickActions:w,tagInput:u,noteInput:f,notesList:g,latestNote:k,loadingConversation:P,isInfoOpen:j,hasUnread:O,activeName:C,activePhone:I,activeStatusLabel:U,canManageStatus:Y,currentUser:le,messageInputRef:pe,chatBodyRef:je,setShowFilters:_e,setFilters:se,loadConversation:Ee,handleBackToList:B,setIsInfoOpen:W,handleChatScroll:S,handleAssignSelf:H,handleStatusChange:G,handleToggleTag:Z,handleAddTag:T,setNoteInput:X,handleAddNote:Q,reassignUserId:V,setReassignUserId:ae,handleReassignConversation:ue,handleOpenTagManager:de,handleCloseTagManager:ge,showTagManager:Ue,tagManagerForm:Ve,setTagManagerForm:Fe,handleCreateTag:ct,handleDeleteTag:Oe,handleQuickAction:Ie,handleSendMessage:We,setMessageMode:Ut,setMessageDraft:_,scrollChatToBottom:M,getInitial:ie,PlusIcon:ve,SearchIcon:He,VideoIcon:Vt,PhoneIcon:zn,InfoIcon:ss,SendIcon:Is}){const $n=new Map((n||[]).map(R=>[R.phone_number_id,R.display_name||(R.phone_number_id?`Linea ${String(R.phone_number_id).slice(-4)}`:"")])),Ft=(e==null?void 0:e.assigned_user_id)&&e.assigned_user_id!==(le==null?void 0:le.id);function rs(R){if(!R)return"Sin mensajes";const Ne=R.last_message_preview||R.last_message_text||R.last_message||"";return Ne||(R.last_message_type?`[${R.last_message_type}]`:"Sin mensajes")}return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:`chat-shell ${e?"has-active":""}`,children:[s.jsxs("aside",{className:"chat-list-panel",children:[s.jsxs("div",{className:"chat-list-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"list-title",children:(r||"Perzivalh").toUpperCase()}),s.jsx("div",{className:"list-subtitle",children:"Chats"})]}),s.jsx("button",{className:"icon-button add-chat",type:"button",title:"Nuevo chat",children:s.jsx(ve,{className:"icon"})})]}),s.jsxs("div",{className:"chat-search",children:[s.jsx(He,{className:"search-icon"}),s.jsx("input",{type:"text",placeholder:"Buscar pacientes o mensajes",value:i.search,onFocus:()=>_e(!0),onClick:()=>_e(!0),onChange:R=>se(Ne=>({...Ne,search:R.target.value}))}),l&&s.jsx("button",{className:"search-close",type:"button",onClick:()=>_e(!1),"aria-label":"Cerrar filtros",children:"x"})]}),l&&s.jsxs("div",{className:"chat-filters",children:[s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Status"}),s.jsxs("select",{value:i.status,onChange:R=>se(Ne=>({...Ne,status:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),h.map(R=>s.jsx("option",{value:R,children:x[R]||R},R))]})]}),s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Asignado"}),s.jsxs("select",{value:i.assigned_user_id,onChange:R=>se(Ne=>({...Ne,assigned_user_id:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"unassigned",children:"Sin asignar"}),o.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Tags"}),s.jsxs("select",{value:i.tag,onChange:R=>se(Ne=>({...Ne,tag:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),c.map(R=>s.jsx("option",{value:R.name,children:R.name},R.id))]})]})]}),s.jsxs("div",{className:"list-header",children:[s.jsxs("select",{className:"line-filter",value:i.phone_number_id,onChange:R=>se(Ne=>({...Ne,phone_number_id:R.target.value})),children:[s.jsx("option",{value:"",children:"Todas las lineas"}),(n||[]).map(R=>s.jsx("option",{value:R.phone_number_id,children:R.display_name||`Linea ${String(R.phone_number_id).slice(-4)}`},R.id))]}),s.jsx("span",{children:t.length})]}),s.jsx("div",{className:"conversation-list",children:t.map((R,Ne)=>{var Zt,te,J;const Bs=(e==null?void 0:e.id)===R.id,Un=R.status==="pending"&&!R.assigned_user_id,Jt=R.display_name||R.phone_e164||R.wa_id||"Sin nombre",N=rs(R),z=Number(R.unread_count||R.unread_messages||R.unread||0),q=((te=(Zt=R.tags)==null?void 0:Zt[0])==null?void 0:te.name)||"",ee=(J=R.assigned_user)!=null&&J.name?`Tomada por ${R.assigned_user.name}`:"",xe=R.phone_number_id?$n.get(R.phone_number_id)||`Linea ${String(R.phone_number_id).slice(-4)}`:"",Wt=(a==null?void 0:a[R.id])||null,qe=R.last_message_at,ut=qe&&(!Wt||new Date(qe).getTime()>new Date(Wt).getTime())&&R.last_message_direction==="in";return s.jsxs("button",{className:`conversation-item ${Bs?"active":""}`,onClick:()=>Ee(R.id),style:{animationDelay:`${Math.min(Ne,6)*60}ms`},children:[s.jsxs("div",{className:"avatar",children:[s.jsx("span",{children:ie(Jt)}),Un&&s.jsx("span",{className:"presence-dot"})]}),s.jsxs("div",{className:"conversation-body",children:[s.jsxs("div",{className:"conversation-row",children:[s.jsx("span",{className:"conversation-name",children:Jt}),s.jsxs("div",{className:"conversation-right",children:[s.jsx("span",{className:"conversation-time",children:p(R.last_message_at)}),z>0&&s.jsx("span",{className:"conversation-unread",children:z})]})]}),s.jsx("div",{className:`conversation-preview ${ut?"unread":""}`,children:N}),s.jsxs("div",{className:"conversation-meta",children:[xe&&s.jsx("span",{className:"status-pill line-pill",children:xe}),ee&&s.jsx("span",{className:"status-pill assignee-pill",children:ee}),q&&s.jsx("span",{className:"status-pill tag-pill",children:q})]})]})]},R.id)})})]}),s.jsxs("div",{className:`chat-view ${j?"info-open":"info-closed"}`,children:[s.jsx("div",{className:"chat-main",children:s.jsxs("div",{className:"chat-card",children:[s.jsxs("header",{className:"chat-topbar",children:[s.jsxs("div",{className:"chat-title",children:[e&&s.jsx("button",{className:"back-button",type:"button",onClick:B,children:"Chats"}),s.jsx("div",{className:"chat-avatar",children:s.jsx("span",{children:ie(C)})}),s.jsxs("div",{children:[s.jsx("div",{className:"chat-name",children:C}),e?s.jsx("div",{className:"chat-status",children:U}):s.jsx("div",{className:"chat-status muted",children:"Elige una conversacion"})]})]}),s.jsxs("div",{className:"chat-actions",children:[s.jsx("button",{className:"icon-button",type:"button",title:"Video",children:s.jsx(Vt,{className:"icon"})}),s.jsx("button",{className:"icon-button",type:"button",title:"Llamar",children:s.jsx(zn,{className:"icon"})}),s.jsx("button",{className:"icon-button",type:"button",title:"Buscar",children:s.jsx(He,{className:"icon"})}),s.jsx("button",{className:`icon-button ${j?"active":""}`,type:"button",title:"Info",onClick:()=>W(R=>!R),children:s.jsx(ss,{className:"icon"})})]})]}),s.jsxs("div",{className:"chat-body",ref:je,onScroll:S,children:[P&&s.jsx("div",{className:"empty",children:"Cargando..."}),!P&&!e&&s.jsx("div",{className:"empty",children:"Selecciona una conversacion"}),!P&&e&&s.jsxs(s.Fragment,{children:[L.length?L:s.jsx("div",{className:"empty-state",children:"Sin mensajes"}),s.jsx("div",{className:"chat-encryption",children:"Los mensajes estan cifrados de extremo a extremo."})]})]}),O&&s.jsx("button",{className:"new-message-banner",type:"button",onClick:M,children:"Nuevos mensajes"}),s.jsxs("form",{className:"chat-composer",onSubmit:We,children:[Ft&&s.jsx("div",{className:"assign-warning",children:"Conversacion tomada por otro operador."}),s.jsx("div",{className:"quick-actions",children:w.map(R=>s.jsx("button",{className:"quick-action",type:"button",onClick:()=>Ie(R),disabled:Ft,children:R},R))}),s.jsxs("div",{className:"composer-row",children:[s.jsxs("select",{className:"message-mode",value:b,onChange:R=>Ut(R.target.value),disabled:Ft,children:[s.jsx("option",{value:"text",children:"WhatsApp"}),s.jsx("option",{value:"note",children:"Nota interna"})]}),s.jsx("input",{ref:pe,type:"text",placeholder:"Escribe un mensaje...",value:m,onChange:R=>_(R.target.value),disabled:Ft}),s.jsx("button",{className:"send-button",type:"submit",disabled:Ft,children:s.jsx(Is,{className:"icon"})})]})]})]})}),s.jsxs("aside",{className:"chat-info",children:[s.jsxs("div",{className:"info-card",children:[s.jsx("div",{className:"info-avatar",children:s.jsx("span",{children:ie(C)})}),s.jsx("div",{className:"info-name",children:C}),s.jsx("div",{className:"info-phone",children:I||"Sin telefono"}),s.jsx("button",{className:"primary",type:"button",children:"Abrir en Odoo"})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Informacion del paciente"}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Ultima visita"}),s.jsx("span",{children:y((e==null?void 0:e.last_visit_at)||(e==null?void 0:e.last_visit))})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Tratamiento actual"}),s.jsx("span",{children:(e==null?void 0:e.current_treatment)||(e==null?void 0:e.treatment)||"-"})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Alergias"}),s.jsx("span",{children:(e==null?void 0:e.allergies)||"Ninguna reportada"})]})]}),s.jsxs("div",{className:"info-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("div",{className:"section-title",children:"Etiquetas"}),s.jsx("button",{className:"link-button",type:"button",onClick:de,children:"Gestionar"})]}),s.jsx("div",{className:"tag-list",children:((e==null?void 0:e.tags)||[]).length?e.tags.map(R=>s.jsxs("span",{className:"tag-chip",children:[s.jsx("span",{className:"tag-chip-label",children:R.name}),s.jsx("button",{className:"tag-remove",type:"button",title:"Quitar etiqueta",onClick:()=>Z(R.name),children:"x"})]},R.name)):s.jsx("div",{className:"empty-state",children:"Sin etiquetas"})}),s.jsxs("form",{className:"tag-form",onSubmit:T,children:[s.jsxs("select",{value:u,onChange:R=>setTagInput(R.target.value),children:[s.jsx("option",{value:"",children:"Selecciona etiqueta..."}),c.filter(R=>!((e==null?void 0:e.tags)||[]).some(Ne=>Ne.name===R.name)).map(R=>s.jsx("option",{value:R.name,children:R.name},R.id))]}),s.jsx("button",{className:"icon-button",type:"submit",title:"Agregar",children:s.jsx(ve,{className:"icon"})})]})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Notas internas"}),g!=null&&g.length?s.jsx("div",{className:"notes-stack",children:g.slice(-5).map(R=>s.jsx("div",{className:"note-card",children:R.text},R.id))}):s.jsx("div",{className:"empty-state",children:"Sin notas internas"}),s.jsxs("form",{className:"note-form",onSubmit:Q,children:[s.jsx("input",{type:"text",placeholder:"Agregar nota interna...",value:f,onChange:R=>X(R.target.value),disabled:!e}),s.jsx("button",{className:"icon-button",type:"submit",title:"Guardar nota",children:s.jsx(ve,{className:"icon"})})]})]}),e&&s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Acciones"}),s.jsxs("div",{className:"action-stack",children:[s.jsx("button",{className:"ghost",type:"button",onClick:H,disabled:Ft,children:"Tomar conversacion"}),Y&&s.jsxs("div",{className:"reassign-row",children:[s.jsxs("select",{value:V,onChange:R=>ae(R.target.value),children:[s.jsx("option",{value:"",children:"Reasignar a..."}),o.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]}),s.jsx("button",{className:"ghost",type:"button",onClick:ue,disabled:!V,children:"Reasignar"})]}),Y&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"ghost",type:"button",onClick:()=>G("open"),children:"Reactivar bot"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>G("pending"),children:"Liberar para otro operador"})]})]})]})]})]})]}),Ue&&s.jsx("div",{className:"modal-overlay",onClick:ge,children:s.jsxs("div",{className:"modal-card",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:"Gestion de etiquetas"}),s.jsx("button",{className:"modal-close",type:"button",onClick:ge,children:"x"})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("form",{className:"tag-manager-form",onSubmit:ct,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:Ve.name,onChange:R=>Fe(Ne=>({...Ne,name:R.target.value})),placeholder:"Nombre de etiqueta"})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Color"}),s.jsx("input",{type:"color",value:Ve.color,onChange:R=>Fe(Ne=>({...Ne,color:R.target.value}))})]}),s.jsx("div",{className:"modal-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Crear etiqueta"})})]}),s.jsx("div",{className:"tag-manager-list",children:(c||[]).map(R=>s.jsxs("div",{className:"tag-manager-row",children:[s.jsx("span",{className:"tag-chip",style:{borderColor:R.color||"#cbd5f5"},children:s.jsx("span",{className:"tag-chip-label",children:R.name})}),s.jsx("div",{className:"tag-manager-actions",children:s.jsx("button",{className:"danger soft",type:"button",onClick:()=>Oe(R.id,R.name),children:"Eliminar"})})]},R.id))})]})]})})]})}const fy=[{day:"2024-01-01",in_count:210,out_count:90},{day:"2024-01-04",in_count:280,out_count:120},{day:"2024-01-07",in_count:240,out_count:110},{day:"2024-01-10",in_count:320,out_count:140},{day:"2024-01-13",in_count:300,out_count:130},{day:"2024-01-17",in_count:310,out_count:135},{day:"2024-01-20",in_count:290,out_count:120},{day:"2024-01-24",in_count:260,out_count:115},{day:"2024-01-27",in_count:330,out_count:150},{day:"2024-01-30",in_count:340,out_count:160}];function py(e){const t=e?new Date(e):null;if(!t||Number.isNaN(t.getTime()))return"--";const n=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${String(t.getDate()).padStart(2,"0")} ${n[t.getMonth()].toUpperCase()}`}function Tu(e){return e.length?e.map((t,n)=>`${n===0?"M":"L"}${t.x} ${t.y}`).join(" "):""}function my({statusCounts:e,metrics:t,onRefresh:n}){var P;const r=(e.open||0)+(e.pending||0),a=t!=null&&t.avg_first_reply_seconds?Number(t.avg_first_reply_seconds)/60:null,i=a?`${a.toFixed(1)}m`:"-",l=(t==null?void 0:t.conversion_rate)??(t==null?void 0:t.conversion_rate_percent)??null,c=`${(l==null?18.4:l>1?l:l*100).toFixed(1)}%`,h=((P=t==null?void 0:t.message_volume)==null?void 0:P.length)>0?t.message_volume.slice(-10):fy,x=Math.max(...h.map(j=>j.in_count+j.out_count),1),p=h.length*42+30,y=220,L=150,m=180,b=h.map((j,O)=>{const I=(j.in_count+j.out_count)/x*L,U=j.in_count/x*L,Y=j.out_count/x*L;return{x:22+O*42,totalHeight:I,inHeight:U,outHeight:Y}}),w=Tu(b.map((j,O)=>({x:j.x+10,y:m-j.inHeight}))),u=Tu(b.map(j=>({x:j.x+10,y:m-j.outHeight}))),f=Array.from(new Set([0,Math.floor(h.length/3),Math.floor(2*h.length/3),h.length-1])),g=Math.round((t==null?void 0:t.team_efficiency)||94),k=((t==null?void 0:t.top_tags)||[]).slice(0,3);return s.jsxs("section",{className:"dashboard-layout",children:[s.jsxs("div",{className:"dashboard-main",children:[s.jsxs("header",{className:"dashboard-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kicker",children:"PODOPIE Enterprise"}),s.jsx("h2",{className:"dashboard-title",children:"Dashboard"}),s.jsx("div",{className:"dashboard-subtitle",children:"Marketing Analytics & WhatsApp CRM Overview"})]}),s.jsxs("div",{className:"dashboard-actions",children:[s.jsxs("button",{className:"dash-filter",type:"button",children:[s.jsx("span",{className:"dash-filter-icon","aria-hidden":"true"}),"Ultimos 30 dias"]}),s.jsx("button",{className:"primary",type:"button",onClick:n,children:"Generar Reporte"})]})]}),s.jsxs("div",{className:"dashboard-kpis",children:[s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Conversaciones activas"}),s.jsx("div",{className:"dash-kpi-value",children:r.toLocaleString()})]}),s.jsx("div",{className:"dash-kpi-icon",children:"C"})]}),s.jsx("div",{className:"dash-kpi-change up",children:"+12.5%"})]}),s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Tiempo de respuesta"}),s.jsx("div",{className:"dash-kpi-value",children:i})]}),s.jsx("div",{className:"dash-kpi-icon",children:"T"})]}),s.jsx("div",{className:"dash-kpi-change down",children:"-0.8m"})]}),s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Tasa de conversion"}),s.jsx("div",{className:"dash-kpi-value",children:c})]}),s.jsx("div",{className:"dash-kpi-icon",children:"%"})]}),s.jsx("div",{className:"dash-kpi-change up",children:"+2.1%"})]})]}),s.jsxs("div",{className:"dash-card dash-chart-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-card-title",children:"Flujo de Mensajes"}),s.jsx("div",{className:"dash-card-subtitle",children:"Volumen diario"})]}),s.jsxs("div",{className:"dash-legend",children:[s.jsxs("span",{className:"dash-legend-item",children:[s.jsx("span",{className:"dash-legend-dot in"})," Entrantes"]}),s.jsxs("span",{className:"dash-legend-item",children:[s.jsx("span",{className:"dash-legend-dot out"})," Salientes"]})]})]}),s.jsx("div",{className:"dash-chart",children:s.jsxs("svg",{className:"dash-chart-svg",viewBox:`0 0 ${p} ${y}`,preserveAspectRatio:"none",children:[s.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"60",x2:p,y2:"60"}),s.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"120",x2:p,y2:"120"}),b.map((j,O)=>s.jsxs("g",{children:[s.jsx("rect",{className:"dash-bar in",x:j.x,y:m-j.inHeight,width:"20",height:j.inHeight,rx:"6"}),s.jsx("rect",{className:"dash-bar out",x:j.x,y:m-j.inHeight-j.outHeight,width:"20",height:j.outHeight,rx:"6"})]},`bar-${O}`)),s.jsx("path",{className:"dash-line in",d:w}),s.jsx("path",{className:"dash-line out",d:u})]})}),s.jsx("div",{className:"dash-chart-labels",children:f.map(j=>{var O;return s.jsx("span",{children:py((O=h[j])==null?void 0:O.day)},`label-${j}`)})})]}),s.jsxs("div",{className:"dashboard-lower",children:[s.jsxs("div",{className:"dash-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsx("div",{className:"dash-card-title",children:"Ultimas etiquetas detectadas"}),s.jsx("button",{className:"link-button",type:"button",children:"Ver todo"})]}),s.jsxs("div",{className:"dash-tag-table",children:[s.jsxs("div",{className:"dash-tag-head",children:[s.jsx("span",{children:"Etiqueta"}),s.jsx("span",{children:"Frecuencia"}),s.jsx("span",{children:"Accion"})]}),k.map(j=>s.jsxs("div",{className:"dash-tag-row",children:[s.jsx("span",{className:"dash-tag-chip",children:j.name}),s.jsx("span",{className:"dash-tag-count",children:j.count}),s.jsx("span",{className:"dash-tag-action",children:">"})]},j.name)),!k.length&&s.jsx("div",{className:"empty-state",children:"Sin etiquetas recientes"})]})]}),s.jsxs("div",{className:"dash-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsx("div",{className:"dash-card-title",children:"Actividad de Campana"}),s.jsx("span",{className:"dash-pill",children:"Monitor"})]}),s.jsxs("div",{className:"dash-campaign",children:[s.jsx("div",{className:"dash-campaign-title",children:'Campana de Verano "Pies Sanos"'}),s.jsxs("div",{className:"dash-campaign-meta",children:[s.jsx("span",{className:"dash-pill solid",children:"84% enviado"}),s.jsx("span",{className:"dash-muted",children:"Hace 2 horas"})]}),s.jsx("div",{className:"dash-progress",children:s.jsx("div",{className:"dash-progress-fill",style:{width:"84%"}})}),s.jsx("div",{className:"dash-muted",children:"1,240 destinatarios"})]})]})]})]}),s.jsxs("aside",{className:"dashboard-side",children:[s.jsxs("div",{className:"dash-card",children:[s.jsx("div",{className:"dash-card-title",children:"Performance de Operadores"}),s.jsx("div",{className:"dash-card-subtitle",children:"Top 5 leaderboard - hoy"}),s.jsx("div",{className:"dash-operator-list",children:[{name:"Lucia Fernandez",role:"Especialista CRM",resolved:84,pending:3},{name:"Ricardo Gomez",role:"Atencion Pacientes",resolved:71,pending:8},{name:"Ana Martinez",role:"Soporte Medico",resolved:65,pending:12}].map(j=>s.jsxs("div",{className:"dash-operator",children:[s.jsx("div",{className:"dash-operator-avatar",children:j.name[0]}),s.jsxs("div",{className:"dash-operator-meta",children:[s.jsx("div",{className:"dash-operator-name",children:j.name}),s.jsx("div",{className:"dash-operator-role",children:j.role}),s.jsxs("div",{className:"dash-operator-stats",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-stat-label",children:"Resueltos"}),s.jsx("div",{className:"dash-stat-value",children:j.resolved})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dash-stat-label",children:"Pendientes"}),s.jsx("div",{className:"dash-stat-value danger",children:j.pending})]})]})]})]},j.name))})]}),s.jsxs("div",{className:"dash-card",children:[s.jsx("div",{className:"dash-card-title",children:"Eficiencia de Equipo"}),s.jsxs("div",{className:"dash-efficiency",children:[s.jsxs("div",{className:"dash-efficiency-value",children:[g,"%"]}),s.jsx("div",{className:"dash-progress",children:s.jsx("div",{className:"dash-progress-fill",style:{width:`${g}%`}})}),s.jsx("div",{className:"dash-muted",children:"Objetivo diario: 500 conversiones"})]})]})]})]})}const gy={draft:"BORRADOR",scheduled:"PROGRAMADA",sending:"ENVIANDO",sent:"FINALIZADA",failed:"ERROR"};function vy({campaignForm:e,setCampaignForm:t,campaignFilter:n,setCampaignFilter:r,templates:a,campaigns:i,selectedCampaignId:l,campaignMessages:o,users:c,tags:h,selectedTemplate:x,statusOptions:p,onCreateCampaign:y,onLoadCampaigns:L,onLoadCampaignMessages:m,onSendCampaign:b,formatDate:w}){const[u,f]=v.useState(""),[g,k]=v.useState(!1),{pushToast:P}=tc(),[j,O]=v.useState(!1),[C,I]=v.useState(!1),[U,Y]=v.useState(!1),[le,pe]=v.useState(!1),[je,_e]=v.useState(null),[se,Ee]=v.useState({name:"",description:"",rules:[]}),[B,W]=v.useState(!1),[S,H]=v.useState([]),[G,Z]=v.useState(!1),[T,X]=v.useState(null),[Q,V]=v.useState([]);v.useEffect(()=>{ae(),ue()},[]);async function ae(){try{const _=await he("/api/audiences");_&&_.segments&&V(_.segments)}catch(_){console.error("Failed to load segments",_)}}async function ue(){try{const _=await he("/api/contacts/stats");X(_||null)}catch(_){console.error("Failed to load Odoo stats",_),X(null)}}async function de(){pe(!0),_e(null);try{const _=await be("/api/contacts/import-odoo",{source:"odoo"});_e(_),ae(),ue(),P({message:"Contactos importados correctamente"})}catch(_){_e({error:_.message||"Error al importar"}),P({type:"error",message:_.message||"Error al importar contactos"})}finally{pe(!1)}}async function ge(_){if(_.preventDefault(),!!se.name.trim()){W(!0);try{await be("/api/audiences",{name:se.name,description:se.description,rules_json:se.rules.length?se.rules:[{field:"all",operator:"eq",value:!0}]}),I(!1),Ee({name:"",description:"",rules:[]}),ae(),P({message:"Segmento creado correctamente"})}catch(M){P({type:"error",message:M.message||"No se pudo crear el segmento"})}finally{W(!1)}}}async function Ue(){Z(!0);try{const _=await he("/api/contacts");H((_==null?void 0:_.contacts)||[])}catch(_){console.error("Failed to load contacts",_)}finally{Z(!1)}}function Ve(){Y(!0),Ue()}const Fe=v.useMemo(()=>{const _={id:"odoo",name:"odoo",subtitle:"Origen: Odoo",count:(T==null?void 0:T.total)||0,type:"odoo"},M=(h||[]).slice(0,6).map((ve,He)=>({id:ve.id||`tag-${ve.name}-${He}`,name:ve.name,subtitle:"Segmento por etiqueta",count:ve.count||ve.total||0,type:"tag"})),ie=Q.map(ve=>({id:ve.id,name:ve.name,subtitle:ve.description||"Segmento personalizado",count:ve.estimated_count||0,type:"custom"}));return[_,...ie,...M]},[h,Q,T]),ct=v.useMemo(()=>{const _=u.trim().toLowerCase();return _?a.filter(M=>{var He,Vt;const ie=((He=M.name)==null?void 0:He.toLowerCase())||"",ve=((Vt=M.category)==null?void 0:Vt.toLowerCase())||"";return ie.includes(_)||ve.includes(_)}):a},[u,a]),Oe=v.useMemo(()=>Fe.find(_=>_.name===n.tag),[Fe,n.tag]),Ie=v.useMemo(()=>n.tag?`tag:${n.tag}`:n.assigned_user_id?`assigned:${n.assigned_user_id}`:n.status?`status:${n.status}`:n.verified_only?"verified":"",[n]);function We(_){r(M=>{const ie={...M,status:"",tag:"",assigned_user_id:"",verified_only:!1};return _.startsWith("tag:")?ie.tag=_.slice(4):_.startsWith("status:")?ie.status=_.slice(7):_.startsWith("assigned:")?ie.assigned_user_id=_.slice(9):_==="verified"&&(ie.verified_only=!0),ie})}function Ut(_){t(M=>({...M,template_id:_}))}return s.jsxs("section",{className:"campaigns-page",children:[s.jsxs("header",{className:"campaigns-header",children:[s.jsxs("div",{className:"campaigns-title",children:[s.jsx("span",{className:"campaigns-mark"}),s.jsxs("div",{children:[s.jsxs("div",{className:"campaigns-title-row",children:[s.jsx("span",{className:"campaigns-brand",children:"PODOPIE"}),s.jsx("span",{className:"campaigns-divider"}),s.jsx("span",{className:"campaigns-heading",children:"Campaigns"})]}),s.jsx("div",{className:"campaigns-subtitle",children:"Gestion de envios masivos y audiencias para CRM WhatsApp"})]})]}),s.jsxs("div",{className:"campaigns-actions",children:[s.jsx("button",{className:"campaigns-ghost",type:"button",onClick:()=>O(!0),children:"Importar Contactos"}),s.jsx("button",{className:"campaigns-danger",type:"button",onClick:()=>I(!0),children:"+ Nuevo Segmento"})]})]}),j&&s.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:s.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Importar Contactos"}),s.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsx("p",{children:"Importar contactos desde Odoo (pacientes y partners)"}),je&&s.jsx("div",{className:`import-result ${je.error?"error":"success"}`,children:je.error?s.jsxs("span",{children:[" ",je.error]}):s.jsxs("span",{children:[" Importados: ",je.imported||0," contactos (",je.new||0," nuevos, ",je.updated||0," actualizados)"]})}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{className:"btn-primary",onClick:de,disabled:le,children:le?"Importando...":" Importar desde Odoo"}),s.jsx("button",{className:"btn-secondary",onClick:Ve,children:" Ver Contactos Existentes"})]})]})]})}),C&&s.jsx("div",{className:"modal-overlay",onClick:()=>I(!1),children:s.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Nuevo Segmento"}),s.jsx("button",{className:"modal-close",onClick:()=>I(!1),children:""})]}),s.jsxs("form",{className:"modal-body",onSubmit:ge,children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Nombre del Segmento"}),s.jsx("input",{type:"text",placeholder:"Ej: Pacientes Onicomicosis",value:se.name,onChange:_=>Ee({...se,name:_.target.value}),required:!0})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Descripcin"}),s.jsx("textarea",{placeholder:"Descripcin opcional...",value:se.description,onChange:_=>Ee({...se,description:_.target.value}),rows:"2"})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("span",{children:"Reglas de Filtro"}),s.jsxs("select",{onChange:_=>{_.target.value&&Ee({...se,rules:[...se.rules,{field:_.target.value,operator:"eq",value:""}]})},children:[s.jsx("option",{value:"",children:"+ Agregar filtro..."}),s.jsx("option",{value:"is_patient",children:"Es paciente"}),s.jsx("option",{value:"has_phone",children:"Tiene telfono"}),s.jsx("option",{value:"tag",children:"Tiene etiqueta"})]}),se.rules.map((_,M)=>s.jsxs("div",{className:"filter-rule",children:[s.jsx("span",{className:"rule-badge",children:_.field}),s.jsx("button",{type:"button",onClick:()=>{Ee({...se,rules:se.rules.filter((ie,ve)=>ve!==M)})},children:""})]},M))]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{type:"button",className:"btn-ghost",onClick:()=>I(!1),children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn-primary",disabled:B,children:B?"Guardando...":"Crear Segmento"})]})]})]})}),U&&s.jsx("div",{className:"modal-overlay",onClick:()=>Y(!1),children:s.jsxs("div",{className:"modal-content modal-large",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsxs("h2",{children:["Contactos (",S.length,")"]}),s.jsx("button",{className:"modal-close",onClick:()=>Y(!1),children:""})]}),s.jsx("div",{className:"modal-body",children:G?s.jsx("div",{className:"loading",children:"Cargando contactos..."}):S.length===0?s.jsx("div",{className:"empty-state",children:"No hay contactos. Importa desde Odoo."}):s.jsxs("div",{className:"contacts-table",children:[s.jsxs("div",{className:"contacts-header",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Telfono"}),s.jsx("span",{children:"Email"}),s.jsx("span",{children:"Tipo"})]}),S.slice(0,50).map(_=>s.jsxs("div",{className:"contacts-row",children:[s.jsx("span",{children:_.name}),s.jsx("span",{children:_.phone_e164||"-"}),s.jsx("span",{children:_.email||"-"}),s.jsx("span",{className:"contact-type",children:_.is_patient?"Paciente":"Contacto"})]},_.id)),S.length>50&&s.jsxs("div",{className:"contacts-more",children:["...y ",S.length-50," ms"]})]})})]})}),s.jsxs("div",{className:"campaigns-layout",children:[s.jsxs("aside",{className:"campaigns-audiences",children:[s.jsx("div",{className:"campaigns-section-title",children:"Mis audiencias"}),s.jsx("div",{className:"audience-list",children:Fe.map(_=>s.jsxs("button",{type:"button",className:`audience-card ${n.tag===_.name?"active":""}`,onClick:()=>{if(_.type==="odoo"){Ve();return}r(M=>({...M,tag:_.name}))},children:[s.jsxs("div",{className:"audience-title",children:[s.jsx("span",{children:_.name}),s.jsx("span",{className:"audience-count",children:_.count})]}),s.jsx("div",{className:"audience-subtitle",children:_.subtitle})]},_.id))})]}),s.jsxs("div",{className:"campaigns-templates",children:[s.jsxs("div",{className:"campaigns-section-header",children:[s.jsx("div",{className:"campaigns-section-title",children:"Plantillas Meta (HSM)"}),s.jsxs("div",{className:"template-search",children:[s.jsx("span",{className:"template-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar plantilla...",value:u,onChange:_=>f(_.target.value)})]})]}),s.jsxs("div",{className:"template-grid",children:[ct.map(_=>{const M=_.is_active?"APROBADA":"PENDIENTE",ie=_.is_active?"approved":"pending",ve=(_.category||"Marketing").toUpperCase(),He=_.id===e.template_id;return s.jsxs("div",{className:`template-card ${He?"selected":""}`,children:[s.jsxs("div",{className:"template-head",children:[s.jsx("div",{className:"template-name",children:_.name}),s.jsx("span",{className:`template-status ${ie}`,children:M})]}),s.jsx("div",{className:"template-category",children:ve}),s.jsx("div",{className:"template-preview",children:_.body_preview||"Sin preview"}),s.jsx("button",{className:"template-action",type:"button",onClick:()=>Ut(_.id),children:"Previsualizar"})]},_.id)}),!ct.length&&s.jsx("div",{className:"empty-state",children:"Sin plantillas disponibles"})]})]}),s.jsxs("aside",{className:"campaigns-create",children:[s.jsx("div",{className:"campaigns-section-title",children:"Nueva campana"}),s.jsxs("form",{className:"campaigns-form",onSubmit:y,children:[s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Nombre de campana"}),s.jsx("input",{type:"text",placeholder:"Ej: Promo Onicomicosis Mar",value:e.name,onChange:_=>t(M=>({...M,name:_.target.value}))})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Seleccionar audiencia"}),s.jsxs("select",{value:Ie,onChange:_=>We(_.target.value),children:[s.jsx("option",{value:"",children:"Selecciona un segmento..."}),Fe.filter(_=>_.type!=="odoo").map(_=>s.jsx("option",{value:`tag:${_.name}`,children:_.name},`seg-${_.id}`)),s.jsx("option",{value:"verified",children:"Solo verificados"}),s.jsx("option",{value:"assigned:unassigned",children:"Sin asignar"}),p.map(_=>s.jsxs("option",{value:`status:${_}`,children:["Status: ",_]},`status-${_}`))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Plantilla Meta"}),s.jsxs("select",{value:e.template_id,onChange:_=>t(M=>({...M,template_id:_.target.value})),children:[s.jsx("option",{value:"",children:"Selecciona plantilla..."}),a.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Programacion"}),s.jsx("input",{type:"datetime-local",value:e.scheduled_for,onChange:_=>t(M=>({...M,scheduled_for:_.target.value}))})]}),s.jsx("button",{className:"campaigns-advanced-toggle",type:"button",onClick:()=>k(_=>!_),children:g?"Ocultar filtros avanzados":"Filtros avanzados"}),g&&s.jsxs("div",{className:"campaigns-advanced",children:[s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Status filtro"}),s.jsxs("select",{value:n.status,onChange:_=>r(M=>({...M,status:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),p.map(_=>s.jsx("option",{value:_,children:_},_))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Asignado"}),s.jsxs("select",{value:n.assigned_user_id,onChange:_=>r(M=>({...M,assigned_user_id:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"unassigned",children:"Sin asignar"}),c.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Tag"}),s.jsxs("select",{value:n.tag,onChange:_=>r(M=>({...M,tag:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),h.map(_=>s.jsx("option",{value:_.name,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.verified_only,onChange:_=>r(M=>({...M,verified_only:_.target.checked}))}),"Solo verificados"]})]}),s.jsx("button",{className:"campaigns-launch",type:"submit",children:"Lanzar Campana"}),s.jsxs("div",{className:"campaigns-hint",children:["Se enviaran aproximadamente"," ",s.jsx("strong",{children:(Oe==null?void 0:Oe.count)||0})," mensajes HSM"]}),s.jsx("div",{className:"campaigns-preview-box",children:(x==null?void 0:x.body_preview)||"Selecciona una plantilla para ver preview"})]})]})]}),s.jsxs("section",{className:"campaigns-history",children:[s.jsxs("div",{className:"campaigns-history-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"campaigns-history-title",children:"Historial de Envios"}),s.jsx("div",{className:"campaigns-history-subtitle",children:"Ultimos 30 dias"})]}),s.jsx("button",{className:"campaigns-link",type:"button",onClick:L,children:"Ver todo el historial"})]}),s.jsxs("div",{className:"history-table",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("span",{children:"Campana / Fecha"}),s.jsx("span",{children:"Alcance"}),s.jsx("span",{children:"Tasa de lectura"}),s.jsx("span",{children:"Respuestas"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Acciones"})]}),i.map(_=>{const M=gy[_.status]||_.status,ie=_.audience_count||_.messages_count||_.total||"--";return s.jsxs("div",{className:"history-row",children:[s.jsxs("div",{className:"history-title",children:[s.jsx("div",{className:"history-name",children:_.name}),s.jsx("div",{className:"history-date",children:w(_.created_at)})]}),s.jsxs("div",{className:"history-metric",children:[s.jsx("div",{className:"history-value",children:ie}),s.jsx("div",{className:"history-label",children:"contactos"})]}),s.jsxs("div",{className:"history-meter",children:[s.jsx("div",{className:"history-value",children:"--"}),s.jsx("div",{className:"history-bar",children:s.jsx("div",{className:"history-bar-fill",style:{width:"0%"}})})]}),s.jsxs("div",{className:"history-metric",children:[s.jsx("div",{className:"history-value",children:"--"}),s.jsx("div",{className:"history-label",children:"mensajes"})]}),s.jsx("div",{className:`history-status ${_.status}`,children:M}),s.jsxs("div",{className:"history-actions",children:[s.jsx("button",{className:"campaigns-ghost small",type:"button",onClick:()=>m(_.id),children:"Ver mensajes"}),s.jsx("button",{className:"campaigns-danger small",type:"button",onClick:()=>b(_.id),disabled:_.status==="sending",children:"Enviar"})]})]},_.id)}),!i.length&&s.jsx("div",{className:"empty-state",children:"Sin campanas registradas"})]}),l&&s.jsxs("div",{className:"campaigns-messages",children:[s.jsx("div",{className:"campaigns-history-title",children:"Mensajes"}),s.jsxs("div",{className:"history-table",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("span",{children:"WA"}),s.jsx("span",{children:"Status"}),s.jsx("span",{children:"Enviado"})]}),o.map(_=>s.jsxs("div",{className:"history-row",children:[s.jsx("span",{children:_.wa_id}),s.jsx("span",{children:_.status}),s.jsx("span",{children:w(_.sent_at)})]},_.id))]})]})]})]})}const yy={admin:{title:"Administrador",subtitle:"Acceso total",tone:"alert"},recepcion:{title:"Operador",subtitle:"Atencion al cliente",tone:"info"},caja:{title:"Supervisor",subtitle:"Auditoria y gestion",tone:"dark"},marketing:{title:"Marketing",subtitle:"Crecimiento y campanas",tone:"info"},doctor:{title:"Doctor",subtitle:"Atencion al cliente",tone:"dark"}},Lu=[{id:"chat",label:"Chat"},{id:"dashboard",label:"Dashboard"},{id:"campaigns",label:"Campanas"}],Au=[{id:"general",label:"General"},{id:"users",label:"Gestion de Usuarios"},{id:"bot",label:"Configuracion de Bot"},{id:"templates",label:"Plantillas de Meta"},{id:"audit",label:"Registros / Auditoria"},{id:"odoo",label:"Integracion Odoo"}];function Ru(e){return yy[e]||{title:e,subtitle:"Acceso personalizado",tone:"info"}}function xy({settingsTab:e,setSettingsTab:t,rolePermissions:n,setRolePermissions:r,isAdmin:a,adminUsers:i,userForm:l,setUserForm:o,roleOptions:c,handleUserSubmit:h,handleUserDelete:x,defaultRolePermissions:p,handleRoleDelete:y}){const[L,m]=v.useState(""),[b,w]=v.useState(!1),[u,f]=v.useState(""),[g,k]=v.useState(null),[P,j]=v.useState(!1),[O,C]=v.useState("create"),[I,U]=v.useState("recepcion"),[Y,le]=v.useState({modules:{},settings:{}}),pe=v.useMemo(()=>{const T=L.trim().toLowerCase(),X=i||[];return T?X.filter(Q=>{var ue,de;const V=((ue=Q.name)==null?void 0:ue.toLowerCase())||"",ae=((de=Q.email)==null?void 0:de.toLowerCase())||"";return V.includes(T)||ae.includes(T)}):X},[i,L]);function je(T){const X=(n==null?void 0:n[T])||(p==null?void 0:p[T])||{modules:{},settings:{}};return{modules:{...X.modules||{}},settings:{...X.settings||{}}}}function _e(T,X="edit"){C(X),U(T),le(je(T)),j(!0)}function se(T,X,Q){le(V=>{const ae={...V},ue={...ae[T]||{}},de={...ue[X]||{}},ge=!de[Q];return de[Q]=ge,Q==="write"&&ge&&(de.read=!0),Q==="read"&&!ge&&(de.write=!1),ue[X]=de,ae[T]=ue,ae})}function Ee(){I&&(r(T=>({...T,[I]:Y})),j(!1))}function B(){I&&y&&y(I),j(!1)}function W(T,X,Q,V){a&&r(ae=>{var Fe,ct;const ue={...ae},de={modules:{...(Fe=ue[T])==null?void 0:Fe.modules},settings:{...(ct=ue[T])==null?void 0:ct.settings}},ge={...de[X]},Ue={...ge[Q]},Ve=!Ue[V];return Ue[V]=Ve,V==="write"&&Ve&&(Ue.read=!0),V==="read"&&!Ve&&(Ue.write=!1),ge[Q]=Ue,de[X]=ge,ue[T]=de,ue})}function S(T){return Ru(T).title.toUpperCase()}function H(T,X){return T!=null&&T.id?`OP-${T.id.slice(-4).toUpperCase()}`:`OP-${String(X+1).padStart(4,"0")}`}function G(T){o({id:T.id,name:T.name,email:T.email,role:T.role,password:"",is_active:T.is_active}),w(!0)}function Z(){o({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),w(!0)}return s.jsxs("div",{className:"users-page",children:[s.jsxs("header",{className:"users-header",children:[s.jsxs("div",{className:"users-title-row",children:[s.jsx("span",{className:"users-kicker"}),s.jsxs("div",{children:[s.jsx("div",{className:"users-title",children:"Gestion de Usuarios"}),s.jsx("div",{className:"users-subtitle",children:"Administra los accesos y roles de los operadores de tu empresa."})]})]}),s.jsxs("div",{className:"users-actions",children:[e==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"users-search",children:[s.jsx("span",{className:"users-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar usuario...",value:L,onChange:T=>m(T.target.value)})]}),s.jsx("button",{className:"settings-primary",type:"button",onClick:Z,children:"Nuevo Usuario"})]}),e==="roles"&&s.jsx("button",{className:"settings-primary",type:"button",onClick:()=>_e("recepcion","create"),children:"+ Nuevo Rol"})]})]}),s.jsxs("div",{className:"users-tabs",children:[s.jsx("button",{className:`users-tab ${e==="list"?"active":""}`,type:"button",onClick:()=>t("list"),children:"Lista de Usuarios"}),s.jsx("button",{className:`users-tab ${e==="roles"?"active":""}`,type:"button",onClick:()=>t("roles"),children:"Roles y Permisos"})]}),e==="list"&&s.jsxs("div",{className:"users-table",children:[s.jsxs("div",{className:"users-table-head",children:[s.jsx("span",{children:"Nombre / Usuario"}),s.jsx("span",{children:"Email"}),s.jsx("span",{children:"Rol"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Acciones"})]}),pe.map((T,X)=>{var Q;return s.jsxs("div",{className:"users-row",children:[s.jsxs("div",{className:"users-cell user-name",children:[s.jsx("div",{className:"user-avatar",children:((Q=T.name)==null?void 0:Q[0])||"?"}),s.jsxs("div",{children:[s.jsx("div",{className:"user-title",children:T.name}),s.jsx("div",{className:"user-id",children:H(T,X)})]})]}),s.jsx("div",{className:"users-cell",children:T.email}),s.jsx("div",{className:"users-cell",children:s.jsx("span",{className:`role-pill ${T.role}`,children:S(T.role)})}),s.jsx("div",{className:"users-cell",children:s.jsx("span",{className:`status-pill ${T.is_active?"active":"inactive"}`,children:T.is_active?"Activo":"Inactivo"})}),s.jsx("div",{className:"users-cell",children:s.jsxs("div",{className:"users-actions-menu",children:[s.jsx("button",{className:"users-action",type:"button",onClick:()=>f(V=>V===T.id?"":T.id),children:"..."}),u===T.id&&s.jsxs("div",{className:"users-menu",children:[s.jsx("button",{type:"button",onClick:()=>{f(""),G(T)},children:"Editar"}),s.jsx("button",{type:"button",onClick:()=>{f(""),k(T)},children:"Eliminar"})]})]})})]},T.id)}),!pe.length&&s.jsx("div",{className:"empty-state",children:"Sin usuarios para mostrar"})]}),e==="roles"&&s.jsx("div",{className:"roles-grid",children:c.map(T=>{const X=Ru(T),Q=n==null?void 0:n[T];return s.jsxs("div",{className:"role-card",children:[s.jsxs("div",{className:"role-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"role-title",children:X.title}),s.jsx("div",{className:`role-subtitle ${X.tone}`,children:X.subtitle})]}),s.jsx("button",{className:"role-edit",type:"button",onClick:()=>_e(T,"edit"),children:"edit"})]}),s.jsxs("div",{className:"role-permissions",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Lu.map(V=>{var ae,ue,de,ge;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:V.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ue=(ae=Q==null?void 0:Q.modules)==null?void 0:ae[V.id])==null?void 0:ue.read)||!1,disabled:!a,onChange:()=>W(T,"modules",V.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ge=(de=Q==null?void 0:Q.modules)==null?void 0:de[V.id])==null?void 0:ge.write)||!1,disabled:!a,onChange:()=>W(T,"modules",V.id,"write")}),s.jsx("span",{})]})]},V.id)})]}),s.jsxs("div",{className:"role-settings",children:[s.jsx("div",{className:"role-settings-title",children:"Configuracion"}),Au.map(V=>{var ae,ue,de,ge;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:V.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ue=(ae=Q==null?void 0:Q.settings)==null?void 0:ae[V.id])==null?void 0:ue.read)||!1,disabled:!a,onChange:()=>W(T,"settings",V.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ge=(de=Q==null?void 0:Q.settings)==null?void 0:de[V.id])==null?void 0:ge.write)||!1,disabled:!a,onChange:()=>W(T,"settings",V.id,"write")}),s.jsx("span",{})]})]},V.id)})]})]},T)})}),b&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:l.id?"Editar usuario":"Crear usuario"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>w(!1),children:"x"})]}),s.jsxs("form",{className:"form-grid",onSubmit:async T=>{await h(T),w(!1)},children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:l.name,onChange:T=>o(X=>({...X,name:T.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:l.email,onChange:T=>o(X=>({...X,email:T.target.value})),disabled:!!l.id})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Rol"}),s.jsx("select",{value:l.role,onChange:T=>o(X=>({...X,role:T.target.value})),children:c.map(T=>s.jsx("option",{value:T,children:T},T))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Password"}),s.jsx("input",{type:"password",value:l.password,onChange:T=>o(X=>({...X,password:T.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_active,onChange:T=>o(X=>({...X,is_active:T.target.checked}))}),"Activo"]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"primary",type:"submit",children:l.id?"Guardar cambios":"Crear"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>w(!1),children:"Cancelar"})]})]})]})}),g&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:"Eliminar usuario"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>k(null),children:"x"})]}),s.jsxs("p",{className:"modal-text",children:["Vas a desactivar a ",s.jsx("strong",{children:g.email}),". Continuar?"]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"danger",type:"button",onClick:()=>{x==null||x(g.id),k(null)},children:"Eliminar"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>k(null),children:"Cancelar"})]})]})}),P&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card modal-lg",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:O==="create"?"Nuevo rol":"Editar rol"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>j(!1),children:"x"})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Rol"}),O==="edit"?s.jsx("select",{value:I,disabled:!0,children:c.map(T=>s.jsx("option",{value:T,children:T},T))}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",list:"role-options",placeholder:"nuevo-rol",value:I,onChange:T=>U(T.target.value)}),s.jsx("datalist",{id:"role-options",children:c.map(T=>s.jsx("option",{value:T},T))})]})]}),s.jsxs("div",{className:"role-permissions",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{children:"Modulos"}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Lu.map(T=>{var X,Q,V,ae;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:T.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((Q=(X=Y==null?void 0:Y.modules)==null?void 0:X[T.id])==null?void 0:Q.read)||!1,onChange:()=>se("modules",T.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ae=(V=Y==null?void 0:Y.modules)==null?void 0:V[T.id])==null?void 0:ae.write)||!1,onChange:()=>se("modules",T.id,"write")}),s.jsx("span",{})]})]},T.id)})]}),s.jsxs("div",{className:"role-settings",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{children:"Configuracion"}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Au.map(T=>{var X,Q,V,ae;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:T.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((Q=(X=Y==null?void 0:Y.settings)==null?void 0:X[T.id])==null?void 0:Q.read)||!1,onChange:()=>se("settings",T.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ae=(V=Y==null?void 0:Y.settings)==null?void 0:V[T.id])==null?void 0:ae.write)||!1,onChange:()=>se("settings",T.id,"write")}),s.jsx("span",{})]})]},T.id)})]})]}),s.jsxs("div",{className:"form-actions",children:[O==="edit"&&s.jsx("button",{className:"danger",type:"button",onClick:B,children:"Eliminar rol"}),s.jsx("button",{className:"primary",type:"button",onClick:Ee,disabled:!I,children:"Guardar"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>j(!1),children:"Cancelar"})]})]})})]})}function jy({branches:e,branchForm:t,setBranchForm:n,handleBranchSubmit:r,handleBranchDisable:a,services:i,serviceForm:l,setServiceForm:o,handleServiceSubmit:c,handleServiceDisable:h,handleServiceBranchToggle:x,tenantChannels:p,channelForm:y,setChannelForm:L,handleChannelSelect:m,handleChannelSubmit:b}){return s.jsxs("div",{className:"page-grid",children:[s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Sucursales"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Codigo"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Accion"})]}),e.map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.name}),s.jsx("span",{children:w.code}),s.jsx("span",{children:w.is_active?"Activa":"Inactiva"}),s.jsxs("div",{className:"row-actions",children:[s.jsx("button",{className:"ghost",onClick:()=>n({id:w.id,code:w.code,name:w.name,address:w.address,lat:w.lat,lng:w.lng,hours_text:w.hours_text,phone:w.phone||"",is_active:w.is_active}),children:"Editar"}),s.jsx("button",{className:"danger",onClick:()=>a(w.id),children:"Desactivar"})]})]},w.id))]}),s.jsx("div",{className:"panel-title",children:t.id?"Editar sucursal":"Crear sucursal"}),s.jsxs("form",{className:"form-grid",onSubmit:r,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Codigo"}),s.jsx("input",{type:"text",value:t.code,onChange:w=>n(u=>({...u,code:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:t.name,onChange:w=>n(u=>({...u,name:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Direccion"}),s.jsx("input",{type:"text",value:t.address,onChange:w=>n(u=>({...u,address:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Lat"}),s.jsx("input",{type:"number",value:t.lat,onChange:w=>n(u=>({...u,lat:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Lng"}),s.jsx("input",{type:"number",value:t.lng,onChange:w=>n(u=>({...u,lng:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Telefono"}),s.jsx("input",{type:"text",value:t.phone,onChange:w=>n(u=>({...u,phone:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Horarios"}),s.jsx("textarea",{rows:"3",value:t.hours_text,onChange:w=>n(u=>({...u,hours_text:w.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:t.is_active,onChange:w=>n(u=>({...u,is_active:w.target.checked}))}),"Activa"]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Servicios"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Servicio"}),s.jsx("span",{children:"Precio"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Accion"})]}),i.map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.name}),s.jsxs("span",{children:["Bs ",w.price_bob]}),s.jsx("span",{children:w.is_active?"Activo":"Inactivo"}),s.jsxs("div",{className:"row-actions",children:[s.jsx("button",{className:"ghost",onClick:()=>o({id:w.id,code:w.code,name:w.name,subtitle:w.subtitle||"",description:w.description,price_bob:w.price_bob,duration_min:w.duration_min||"",image_url:w.image_url||"",is_featured:w.is_featured,is_active:w.is_active}),children:"Editar"}),s.jsx("button",{className:"danger",onClick:()=>h(w.id),children:"Desactivar"})]})]},w.id))]}),s.jsx("div",{className:"panel-title",children:l.id?"Editar servicio":"Crear servicio"}),s.jsxs("form",{className:"form-grid",onSubmit:c,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Codigo"}),s.jsx("input",{type:"text",value:l.code,onChange:w=>o(u=>({...u,code:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:l.name,onChange:w=>o(u=>({...u,name:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Subtitulo"}),s.jsx("input",{type:"text",value:l.subtitle,onChange:w=>o(u=>({...u,subtitle:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Descripcion"}),s.jsx("textarea",{rows:"3",value:l.description,onChange:w=>o(u=>({...u,description:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Precio (Bs)"}),s.jsx("input",{type:"number",value:l.price_bob,onChange:w=>o(u=>({...u,price_bob:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Duracion (min)"}),s.jsx("input",{type:"number",value:l.duration_min,onChange:w=>o(u=>({...u,duration_min:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Imagen URL"}),s.jsx("input",{type:"text",value:l.image_url,onChange:w=>o(u=>({...u,image_url:w.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_featured,onChange:w=>o(u=>({...u,is_featured:w.target.checked}))}),"Destacado"]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_active,onChange:w=>o(u=>({...u,is_active:w.target.checked}))}),"Activo"]}),l.id&&s.jsxs("div",{className:"field",children:[s.jsx("span",{children:"Disponibilidad por sucursal"}),s.jsx("div",{className:"chip-grid",children:e.map(w=>{var g,k;const u=(k=(g=i.find(P=>P.id===l.id))==null?void 0:g.branches)==null?void 0:k.find(P=>{var O;return(((O=P.branch)==null?void 0:O.id)||P.branch_id)===w.id}),f=(u==null?void 0:u.is_available)||!1;return s.jsxs("label",{className:"chip",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:P=>x(i.find(j=>j.id===l.id),w.id,P.target.checked)}),w.name]},w.id)})})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Lineas de WhatsApp"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Phone ID"}),s.jsx("span",{children:"Accion"})]}),(p||[]).map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.display_name||"Linea sin nombre"}),s.jsx("span",{children:w.phone_number_id}),s.jsx("button",{className:"ghost",onClick:()=>m(w),children:"Renombrar"})]},w.id)),!(p!=null&&p.length)&&s.jsx("div",{className:"empty-state",children:"Sin lineas registradas"})]}),s.jsx("div",{className:"panel-title",children:y.id?"Editar linea":"Selecciona una linea"}),s.jsxs("form",{className:"form-grid",onSubmit:b,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre visible"}),s.jsx("input",{type:"text",value:y.display_name,onChange:w=>L(u=>({...u,display_name:w.target.value})),disabled:!y.id})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:!y.id,children:"Guardar"})})]})]})]})}function Ny(){var m,b,w,u,f,g,k,P,j,O;const[e,t]=v.useState([]),[n,r]=v.useState(null),[a,i]=v.useState(!0),[l,o]=v.useState("");v.useEffect(()=>{c()},[]);async function c(){i(!0);try{const[C,I]=await Promise.all([he("/api/admin/bots"),he("/api/admin/bots/metrics")]);t(C.bots||[]),r(I.metrics),o("")}catch(C){console.error(C),o(C.message||"Error al cargar datos")}finally{i(!1)}}async function h(C,I){try{await Be(`/api/admin/bots/${C}`,{is_active:I}),t(U=>U.map(Y=>Y.id===C?{...Y,is_active:I}:Y))}catch(U){o(U.message||"Error al cambiar estado")}}const x=C=>{if(!C)return"Sin actividad reciente";const I=new Date(C),Y=new Date-I,le=Math.floor(Y/6e4);if(le<1)return"Hace un momento";if(le<60)return`ltima actividad: hace ${le} min`;const pe=Math.floor(le/60);return pe<24?`ltima actividad: hace ${pe}h`:`ltima actividad: ${I.toLocaleDateString()}`},p=e.filter(C=>C.is_active).length,y=p>0?"ACTIVO":"INACTIVO",L=p>0?"active":"inactive";return s.jsxs("div",{className:"bot-section",children:[s.jsxs("div",{className:"bot-section-header",children:[s.jsxs("div",{className:"bot-section-title-area",children:[s.jsx("div",{className:"bot-section-icon",children:""}),s.jsxs("div",{children:[s.jsx("h2",{className:"bot-section-title",children:"Gestin de Bots"}),s.jsx("p",{className:"bot-section-subtitle",children:"Administra los flujos automatizados y el rendimiento tcnico."})]})]}),s.jsxs("div",{className:"bot-section-global-toggle",children:[s.jsx("span",{className:"bot-toggle-label",children:"ESTADO DEL BOT:"}),s.jsxs("div",{className:`bot-toggle-pill ${L}`,children:[s.jsx("span",{className:"bot-toggle-dot"}),s.jsx("span",{children:y})]})]})]}),l&&s.jsx("div",{className:"bot-error",children:l}),s.jsxs("div",{className:"bot-section-content",children:[s.jsxs("div",{className:"bot-flows-panel",children:[s.jsx("div",{className:"bot-panel-header",children:s.jsx("span",{className:"bot-panel-title",children:"MONITOREO DE FLUJOS"})}),a?s.jsx("div",{className:"bot-loading",children:"Cargando bots..."}):e.length===0?s.jsxs("div",{className:"bot-empty",children:[s.jsx("p",{children:"No hay bots asignados a tu cuenta."}),s.jsx("p",{className:"bot-empty-hint",children:"Contacta con soporte si necesitas activar un bot."})]}):s.jsx("div",{className:"bot-flows-list",children:e.map(C=>s.jsxs("div",{className:"bot-flow-card",children:[s.jsxs("div",{className:"bot-flow-info",children:[s.jsx("span",{className:"bot-flow-icon",children:C.flow_icon||""}),s.jsxs("div",{children:[s.jsx("div",{className:"bot-flow-name",children:C.flow_name}),s.jsxs("div",{className:`bot-flow-status ${C.is_active?"active":"inactive"}`,children:[" ",C.is_active?"ACTIVO":"INACTIVO"]})]})]}),s.jsx("div",{className:"bot-flow-actions",children:s.jsxs("label",{className:"bot-toggle-switch",children:[s.jsx("input",{type:"checkbox",checked:C.is_active,onChange:()=>h(C.id,!C.is_active)}),s.jsx("span",{className:"bot-toggle-slider"})]})}),s.jsx("div",{className:"bot-flow-meta",children:x(C.updated_at)}),C.flow_description&&s.jsx("div",{className:"bot-flow-desc",children:C.flow_description})]},C.id))})]}),s.jsxs("div",{className:"bot-metrics-panel",children:[s.jsx("div",{className:"bot-panel-header",children:s.jsx("span",{className:"bot-panel-title",children:"MTRICAS DE EFICACIA DETALLADAS"})}),s.jsxs("div",{className:"bot-metrics-grid",children:[s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:`bot-metric-badge ${((m=n==null?void 0:n.interactions)==null?void 0:m.change)>=0?"positive":"neutral"}`,children:[((b=n==null?void 0:n.interactions)==null?void 0:b.change)>0?"+":"",(w=n==null?void 0:n.interactions)==null?void 0:w.change,"% ",(u=n==null?void 0:n.interactions)==null?void 0:u.label]}),s.jsx("div",{className:"bot-metric-label",children:"INTERACCIONES"}),s.jsx("div",{className:"bot-metric-value",children:n?n.interactions.value:"--"}),s.jsx("div",{className:"bot-metric-sub",children:"Total de sesiones iniciadas hoy"})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:"bot-metric-badge neutral",children:["Objetivo: ",(f=n==null?void 0:n.resolution)==null?void 0:f.target,"%"]}),s.jsx("div",{className:"bot-metric-label",children:"RESOLUCIN FINAL"}),s.jsxs("div",{className:"bot-metric-value",children:[n?n.resolution.value:"--","%"]}),s.jsx("div",{className:"bot-metric-progress",children:s.jsx("div",{className:"bot-metric-progress-fill",style:{width:`${n?n.resolution.value:0}%`}})})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:"bot-metric-badge sla",children:[" ",(g=n==null?void 0:n.uptime)==null?void 0:g.status]}),s.jsx("div",{className:"bot-metric-label",children:"VIDA DEL PROCESO"}),s.jsx("div",{className:"bot-metric-value",children:n?n.uptime.value:"--"}),s.jsx("div",{className:"bot-metric-sub",children:"UPTIME SISTEMA"})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:`bot-metric-icon ${((k=n==null?void 0:n.errors)==null?void 0:k.value)>0?"error":""}`,children:""}),s.jsx("div",{className:`bot-metric-badge ${((P=n==null?void 0:n.errors)==null?void 0:P.value)===0?"stable":"neutral"}`,children:(j=n==null?void 0:n.errors)==null?void 0:j.status}),s.jsx("div",{className:"bot-metric-label",children:"ERRORES"}),s.jsx("div",{className:"bot-metric-value",children:n?n.errors.value:"--"}),s.jsxs("div",{className:`bot-metric-sub ${((O=n==null?void 0:n.errors)==null?void 0:O.critical)>0?"error-sub":""}`,children:["CRTICOS: ",n?n.errors.critical:0]})]})]})]})]})]})}const Pu={DRAFT:{bg:"#e3e8ef",text:"#475569",label:"BORRADOR"},PENDING:{bg:"#fef3c7",text:"#d97706",label:"PENDIENTE"},APPROVED:{bg:"#d1fae5",text:"#059669",label:"APROBADA"},REJECTED:{bg:"#fee2e2",text:"#dc2626",label:"RECHAZADA"},PAUSED:{bg:"#fef3c7",text:"#d97706",label:"PAUSADA"},DISABLED:{bg:"#e5e7eb",text:"#6b7280",label:"DESHABILITADA"}},wy=[{value:"UTILITY",label:"Utility"},{value:"MARKETING",label:"Marketing"},{value:"AUTHENTICATION",label:"Authentication"}],_y=[{value:"es",label:"Espaol (ES)"},{value:"en",label:"English (EN)"}];function ky({templates:e=[],templateForm:t,setTemplateForm:n,handleTemplateSubmit:r,handleTemplateSubmitToMeta:a,handleTemplateDelete:i,handleSyncTemplates:l,onLoadTemplates:o}){const[c,h]=v.useState("list"),[x,p]=v.useState(null),[y,L]=v.useState(""),[m,b]=v.useState(!1),[w,u]=v.useState(""),[f,g]=v.useState(!1),[k,P]=v.useState(null),[j,O]=v.useState({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),[C,I]=v.useState([]);v.useEffect(()=>{o&&o()},[]),v.useEffect(()=>{if(!k)return;const S=H=>{H.target.closest(".template-card-menu")||P(null)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[k]);const U=async()=>{b(!0);try{await l()}finally{b(!1)}},Y=()=>{p(null),O({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),I([]),h("editor")},le=S=>{p(S),O({name:S.name||"",category:S.category||"UTILITY",language:S.language||"es",body_text:S.body_text||S.body_preview||"",header_type:S.header_type||"",header_content:S.header_content||"",footer_text:S.footer_text||"",buttons:S.buttons_json||[]}),I(S.variable_mappings||[]),h("editor")},pe=async S=>{!(S!=null&&S.id)||!i||!window.confirm(`Eliminar la plantilla "${S.name}"? Esta accin la ocultar localmente y la eliminar de Meta si aplica.`)||(await i(S.id),P(null))},je=async S=>{S.preventDefault();const H={...j,id:x==null?void 0:x.id,variable_mappings:C};if(n&&n(H),r){const G=await r(null,H);G&&p(G)}},_e=async()=>{if(a){g(!0);try{let S=x==null?void 0:x.id;if(!S){const H={...j,variable_mappings:C},G=await r(null,H);S=G==null?void 0:G.id,G&&p(G)}S&&(await a(S),h("list"),p(null))}finally{g(!1)}}},se=()=>{h("list"),p(null)},B=(S=>{const H=S.match(/\{\{(\d+)\}\}/g)||[];return[...new Set(H)].map(G=>parseInt(G.replace(/[{}]/g,"")))})(j.body_text),W=e.filter(S=>{var Z;const H=!y||((Z=S.name)==null?void 0:Z.toLowerCase().includes(y.toLowerCase()))||(S.body_text||S.body_preview||"").toLowerCase().includes(y.toLowerCase()),G=!w||S.status===w;return H&&G});return c==="list"?s.jsxs("div",{className:"templates-section",children:[s.jsxs("div",{className:"templates-header",children:[s.jsxs("div",{className:"templates-title-row",children:[s.jsx("h1",{children:"Plantillas de Meta"}),s.jsxs("span",{className:"meta-connected-badge",children:[s.jsx("span",{className:"status-dot"}),"CONECTADO A META API"]})]}),s.jsxs("div",{className:"templates-actions",children:[s.jsx("div",{className:"search-input-wrap",children:s.jsx("input",{type:"text",placeholder:"Buscar plantillas...",value:y,onChange:S=>L(S.target.value)})}),s.jsxs("select",{value:w,onChange:S=>u(S.target.value),className:"status-filter-select",children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"APPROVED",children:"Aprobadas"}),s.jsx("option",{value:"PENDING",children:"Pendientes"}),s.jsx("option",{value:"REJECTED",children:"Rechazadas"}),s.jsx("option",{value:"DRAFT",children:"Borradores"})]}),s.jsx("button",{className:"btn-sync",onClick:U,disabled:m,children:m?" Sincronizando...":" Sincronizar"}),s.jsxs("button",{className:"btn-create-template",onClick:Y,children:[s.jsx("span",{children:"+"})," Crear Nueva Plantilla"]})]})]}),s.jsxs("div",{className:"templates-grid",children:[W.map(S=>{var G;const H=Pu[S.status]||Pu.DRAFT;return s.jsxs("div",{className:"template-card",onClick:()=>le(S),children:[s.jsxs("div",{className:"template-card-head",children:[s.jsx("div",{className:"template-category-icon",children:S.category==="MARKETING"?"":S.category==="UTILITY"?"":""}),s.jsx("span",{className:"template-status-badge",style:{backgroundColor:H.bg,color:H.text},children:H.label})]}),s.jsx("h3",{className:"template-card-name",children:S.name}),s.jsxs("div",{className:"template-card-meta",children:[s.jsx("span",{className:"tag-category",children:S.category}),s.jsx("span",{className:"tag-language",children:S.language==="es"?"ESPAOL (ES)":(G=S.language)==null?void 0:G.toUpperCase()})]}),(S.body_text||S.body_preview)&&s.jsxs("p",{className:"template-card-preview",children:[(S.body_text||S.body_preview).slice(0,80),"..."]}),s.jsxs("div",{className:"template-card-actions",children:[s.jsx("button",{className:"btn-preview",onClick:Z=>{Z.stopPropagation(),le(S)},children:" Previsualizar"}),s.jsxs("div",{className:"template-card-menu",onClick:Z=>Z.stopPropagation(),children:[s.jsx("button",{className:"btn-more",type:"button",onClick:()=>P(Z=>Z===S.id?null:S.id),children:""}),k===S.id&&s.jsxs("div",{className:"template-menu-dropdown",children:[s.jsx("button",{type:"button",className:"menu-item",onClick:()=>le(S),children:"Editar"}),s.jsx("button",{type:"button",className:"menu-item danger",onClick:()=>pe(S),children:"Eliminar"})]})]})]})]},S.id)}),s.jsxs("div",{className:"template-card template-card-create",onClick:Y,children:[s.jsx("div",{className:"create-icon",children:"+"}),s.jsx("h3",{children:"Crear nueva plantilla"}),s.jsx("p",{children:"Empieza a disear tu flujo de WhatsApp"})]})]}),W.length===0&&!y&&s.jsx("div",{className:"templates-empty",children:s.jsx("p",{children:"No hay plantillas. Crea una nueva o sincroniza desde Meta."})})]}):s.jsxs("div",{className:"template-editor",children:[s.jsxs("div",{className:"editor-header",children:[s.jsxs("div",{className:"editor-breadcrumb",children:[s.jsx("button",{className:"btn-back",onClick:se,children:" Volver"}),s.jsx("span",{className:"breadcrumb-sep",children:"/"}),s.jsx("span",{children:x?"Editar Plantilla":"Nueva Plantilla"})]}),s.jsxs("div",{className:"editor-actions",children:[s.jsx("button",{className:"btn-save-draft",onClick:je,children:" Guardar Borrador"}),((x==null?void 0:x.status)==="DRAFT"||(x==null?void 0:x.status)==="REJECTED"||!x)&&s.jsx("button",{className:"btn-primary",onClick:_e,disabled:f||!j.name||!j.body_text,children:f?"Enviando...":"Enviar a Meta"}),s.jsx("button",{className:"btn-discard",onClick:se,children:" Descartar"})]})]}),s.jsxs("div",{className:"editor-layout",children:[s.jsxs("div",{className:"editor-form-panel",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:" General Settings"}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Template Name"}),s.jsx("input",{type:"text",placeholder:"patient_appointment_reminder",value:j.name,onChange:S=>O({...j,name:S.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")})})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Category"}),s.jsx("select",{value:j.category,onChange:S=>O({...j,category:S.target.value}),children:wy.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Language"}),s.jsx("select",{value:j.language,onChange:S=>O({...j,language:S.target.value}),children:_y.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{children:" Message Body"}),s.jsx("button",{className:"btn-insert-var",type:"button",onClick:()=>{const S=B.length+1;O({...j,body_text:j.body_text+`{{${S}}}`})},children:"+ Insert Variable"})]}),s.jsx("textarea",{rows:"6",placeholder:"Hola {{1}}, te recordamos tu cita en PODOPIE para el da {{2}} a las {{3}}. Por favor, confirma tu asistencia.",value:j.body_text,onChange:S=>O({...j,body_text:S.target.value})}),s.jsxs("div",{className:"char-count",children:[j.body_text.length," / 1024"]})]})]}),s.jsxs("div",{className:"editor-preview-panel",children:[s.jsxs("div",{className:"phone-frame",children:[s.jsxs("div",{className:"phone-header",children:[s.jsx("span",{className:"phone-back",children:""}),s.jsxs("div",{className:"phone-contact",children:[s.jsx("div",{className:"phone-avatar",children:""}),s.jsx("div",{className:"phone-name",children:"PODOPIE Clinic"})]}),s.jsx("div",{className:"phone-icons",children:" "})]}),s.jsxs("div",{className:"phone-body",children:[s.jsx("div",{className:"phone-date-label",children:"TODAY"}),s.jsxs("div",{className:"phone-message",children:[s.jsx("div",{className:"message-bubble",children:j.body_text||"Tu mensaje aparecer aqu..."}),s.jsx("div",{className:"message-time",children:"10:42 AM"})]}),j.buttons&&j.buttons.length>0&&s.jsx("div",{className:"phone-buttons",children:j.buttons.map((S,H)=>s.jsx("button",{className:"phone-action-btn",children:S.text||`Button ${H+1}`},H))})]})]}),s.jsx("div",{className:"preview-label",children:" High-fidelity dynamic preview"})]}),s.jsxs("div",{className:"editor-mapping-panel",children:[s.jsxs("div",{className:"mapping-tabs",children:[s.jsx("button",{className:"tab active",children:"VARIABLES"}),s.jsx("button",{className:"tab",children:"BUTTONS"})]}),s.jsxs("div",{className:"mapping-section",children:[s.jsx("h4",{children:"ODOO FIELD MAPPING"}),B.length===0?s.jsxs("p",{className:"mapping-empty",children:["Agrega variables ","{{1}}",", ","{{2}}","... en tu mensaje"]}):B.map(S=>{const H=C.find(G=>G.var_index===S)||{};return s.jsxs("div",{className:"mapping-item",children:[s.jsxs("div",{className:"mapping-var-badge",children:[`{{${S}}}`," Variable"]}),s.jsxs("select",{value:H.source_path||"",onChange:G=>{const Z=C.filter(T=>T.var_index!==S);Z.push({var_index:S,source_type:"odoo",source_path:G.target.value}),I(Z)},children:[s.jsx("option",{value:"",children:"Select Odoo Field..."}),s.jsx("option",{value:"partner_id.name",children:"patient_id.name"}),s.jsx("option",{value:"start_date",children:"start_date (Formatted)"}),s.jsx("option",{value:"start_time",children:"start_time"}),s.jsx("option",{value:"partner_id.phone",children:"patient_phone"})]}),s.jsx("span",{className:`mapping-status ${H.source_path?"linked":"needs"}`,children:H.source_path?" Linked":" Needs mapping"})]},S)})]}),s.jsxs("div",{className:"mapping-section",children:[s.jsxs("div",{className:"mapping-section-header",children:[s.jsx("h4",{children:"ACTION BUTTONS"}),s.jsx("button",{className:"btn-add-button",onClick:()=>{O({...j,buttons:[...j.buttons||[],{type:"QUICK_REPLY",text:""}]})},children:"+ Add Button"})]}),(j.buttons||[]).map((S,H)=>s.jsxs("div",{className:"button-item",children:[s.jsx("span",{className:"button-icon",children:""}),s.jsx("input",{type:"text",placeholder:"Button text",value:S.text||"",onChange:G=>{const Z=[...j.buttons];Z[H]={...Z[H],text:G.target.value},O({...j,buttons:Z})}}),s.jsx("button",{className:"btn-remove",onClick:()=>{const G=j.buttons.filter((Z,T)=>T!==H);O({...j,buttons:G})},children:""})]},H))]}),s.jsxs("div",{className:"mapping-tip",children:[s.jsx("span",{className:"tip-icon",children:""}),s.jsx("span",{children:"Tip: Asegrate de que tus variables estn correctamente mapeadas a campos de Odoo antes de enviar."})]})]})]})]})}const Ou={campaigns:"",users:"",bot:"",chat:"",templates:"",audience:"",system:""},Sy={"user.created":"USUARIO CREADO","user.updated":"USUARIO EDITADO","user.disabled":"USUARIO ELIMINADO",template_draft_created:"PLANTILLA CREADA",template_draft_updated:"PLANTILLA EDITADA",template_submitted:"PLANTILLA ENVIADA",template_deleted:"PLANTILLA ELIMINADA",template_restored:"PLANTILLA RESTAURADA",audience_created:"SEGMENTO CREADO",audience_updated:"SEGMENTO EDITADO",audience_deleted:"SEGMENTO ELIMINADO","campaign.created":"CAMPAA CREADA","campaign.queued":"CAMPAA EN COLA","campaign.sending":"CAMPAA LANZADA","settings.updated":"CONFIG ACTUALIZADA","role_permissions.updated":"PERMISOS CAMBIADOS","role_permissions.deleted":"ROL ELIMINADO","conversation.status_changed":"CHAT ACTUALIZADO","conversation.tag_added":"TAG AGREGADO","conversation.tag_removed":"TAG ELIMINADO"};function xf(e){var r;const t=((r=e==null?void 0:e.data_json)==null?void 0:r.entity)||"";if(t==="template")return"templates";if(t==="audience")return"audience";if(t==="campaign")return"campaigns";if(t==="conversation")return"chat";const n=(e==null?void 0:e.action)||"";return n.includes("user")?"users":n.includes("campaign")?"campaigns":n.includes("template")?"templates":n.includes("audience")?"audience":n.includes("bot")?"bot":n.includes("conversation")?"chat":"system"}function Ki(e){if(!e)return{date:"--",time:"--"};const t=new Date(e);return Number.isNaN(t.getTime())?{date:"--",time:"--"}:{date:t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),time:t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}function Ey(e,t="csv"){const r=[["timestamp","usuario","email","accion","modulo","data"].join(",")];e.forEach(h=>{var m,b;const x=((m=h.user)==null?void 0:m.name)||"Sistema",p=((b=h.user)==null?void 0:b.email)||"",y=xf(h),L=[new Date(h.created_at).toISOString(),x,p,h.action,y,JSON.stringify(h.data_json||{})];r.push(L.map(w=>`"${String(w).replace(/"/g,'""')}"`).join(","))});const a=r.join(`
`),i=t==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"text/csv;charset=utf-8;",l=t==="excel"?"audit_logs.xlsx":"audit_logs.csv",o=new Blob([a],{type:i}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download=l,document.body.appendChild(c),c.click(),document.body.removeChild(c)}function Cy(){var j,O;const[e,t]=v.useState(""),[n,r]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState(1),[c]=v.useState(6),[h,x]=v.useState(0),[p,y]=v.useState([]),[L,m]=v.useState(!1),[b,w]=v.useState(null),u=Math.max(1,Math.ceil(h/c)),f=async({pageOverride:C}={})=>{m(!0);try{const I=new URLSearchParams;I.set("page",String(C||l)),I.set("page_size",String(c)),e.trim()&&I.set("q",e.trim()),n&&I.set("from",n),a&&I.set("to",a);const U=await he(`/api/admin/audit?${I.toString()}`);y(U.logs||[]),x(U.total||0)}finally{m(!1)}};v.useEffect(()=>{f()},[l]);const g=()=>{o(1),f({pageOverride:1})},k=async(C="csv")=>{const I=new URLSearchParams;I.set("page","1"),I.set("page_size","1000"),e.trim()&&I.set("q",e.trim()),n&&I.set("from",n),a&&I.set("to",a);const U=await he(`/api/admin/audit?${I.toString()}`);Ey(U.logs||[],C)},P=v.useMemo(()=>{const C=[],I=Math.max(1,l-1),U=Math.min(u,I+2);for(let Y=I;Y<=U;Y+=1)C.push(Y);return C},[l,u]);return s.jsxs("div",{className:"audit-module",children:[s.jsxs("div",{className:"audit-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audit-title",children:"Registros / Auditoria"}),s.jsx("div",{className:"audit-subtitle",children:"Monitorea acciones de usuarios y eventos del sistema"})]}),s.jsxs("div",{className:"audit-export-group",children:[s.jsx("button",{className:"audit-export",type:"button",onClick:()=>k("excel"),children:" Exportar Excel"}),s.jsx("button",{className:"audit-export outline",type:"button",onClick:()=>k("csv"),children:" Exportar CSV"})]})]}),s.jsxs("div",{className:"audit-filters",children:[s.jsxs("div",{className:"audit-search",children:[s.jsx("span",{className:"audit-search-icon"}),s.jsx("input",{type:"text",placeholder:"Filtrar por usuario o accion..",value:e,onChange:C=>t(C.target.value)})]}),s.jsxs("div",{className:"audit-date",children:[s.jsx("span",{children:"Desde"}),s.jsx("input",{type:"date",value:n,onChange:C=>r(C.target.value)})]}),s.jsxs("div",{className:"audit-date",children:[s.jsx("span",{children:"Hasta"}),s.jsx("input",{type:"date",value:a,onChange:C=>i(C.target.value)})]}),s.jsx("button",{className:"audit-filter-btn",type:"button",onClick:g,children:"Filtrar"})]}),s.jsxs("div",{className:"audit-card",children:[s.jsxs("div",{className:"audit-table-head",children:[s.jsx("span",{children:"Timestamp"}),s.jsx("span",{children:"Usuario"}),s.jsx("span",{children:"Accion"}),s.jsx("span",{children:"Modulo"})]}),L&&s.jsx("div",{className:"audit-empty",children:"Cargando registros..."}),!L&&!p.length&&s.jsx("div",{className:"audit-empty",children:"Sin registros para mostrar"}),!L&&p.map(C=>{var je,_e;const I=Ki(C.created_at),U=xf(C),Y=Sy[C.action]||C.action,le=((je=C.user)==null?void 0:je.name)||"System Bot",pe=((_e=C.user)==null?void 0:_e.email)||"automated@service";return s.jsxs("button",{type:"button",className:"audit-row",onClick:()=>w(C),children:[s.jsxs("div",{className:"audit-cell time",children:[s.jsx("div",{children:I.date}),s.jsx("div",{className:"audit-time",children:I.time})]}),s.jsxs("div",{className:"audit-cell user",children:[s.jsx("div",{className:"audit-avatar",children:(le==null?void 0:le[0])||"S"}),s.jsxs("div",{children:[s.jsx("div",{className:"audit-user-name",children:le}),s.jsx("div",{className:"audit-user-email",children:pe})]})]}),s.jsx("div",{className:"audit-cell action",children:s.jsx("span",{className:"audit-action-pill",children:Y})}),s.jsxs("div",{className:"audit-cell module",children:[s.jsx("span",{className:"audit-module-icon",children:Ou[U]||Ou.system}),U.charAt(0).toUpperCase()+U.slice(1)]})]},C.id)})]}),s.jsxs("div",{className:"audit-footer",children:[s.jsxs("div",{children:["Mostrando ",p.length," de ",h," registros"]}),s.jsxs("div",{className:"audit-pagination",children:[s.jsx("button",{type:"button",disabled:l<=1,onClick:()=>o(C=>Math.max(1,C-1)),children:""}),P.map(C=>s.jsx("button",{type:"button",className:C===l?"active":"",onClick:()=>o(C),children:C},C)),s.jsx("button",{type:"button",disabled:l>=u,onClick:()=>o(C=>Math.min(u,C+1)),children:""})]})]}),b&&s.jsx("div",{className:"audit-modal",children:s.jsxs("div",{className:"audit-modal-card",children:[s.jsxs("div",{className:"audit-modal-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audit-modal-title",children:"Detalle del registro"}),s.jsx("div",{className:"audit-modal-subtitle",children:b.action})]}),s.jsx("button",{type:"button",onClick:()=>w(null),children:""})]}),s.jsxs("div",{className:"audit-modal-body",children:[s.jsxs("div",{className:"audit-detail",children:[s.jsx("span",{children:"Usuario"}),s.jsx("strong",{children:((j=b.user)==null?void 0:j.name)||"System Bot"}),s.jsx("small",{children:((O=b.user)==null?void 0:O.email)||"automated@service"})]}),s.jsxs("div",{className:"audit-detail",children:[s.jsx("span",{children:"Timestamp"}),s.jsx("strong",{children:Ki(b.created_at).date}),s.jsx("small",{children:Ki(b.created_at).time})]}),s.jsxs("div",{className:"audit-detail full",children:[s.jsx("span",{children:"Data"}),s.jsx("pre",{children:JSON.stringify(b.data_json||{},null,2)})]})]})]})})]})}function by(){return s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Integracion Odoo"}),s.jsx("div",{className:"empty-state",children:"Seccion en construccion"})]})}function Ty(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"6",r:"2",strokeWidth:"2"}),s.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeWidth:"2"}),s.jsx("circle",{cx:"15",cy:"12",r:"2",strokeWidth:"2"}),s.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18",strokeWidth:"2"}),s.jsx("circle",{cx:"11",cy:"18",r:"2",strokeWidth:"2"})]})}function Ly(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"9",cy:"8",r:"3",strokeWidth:"2"}),s.jsx("path",{d:"M4 20c0-3 2.7-5.5 6-5.5s6 2.5 6 5.5",strokeWidth:"2"}),s.jsx("circle",{cx:"17",cy:"9",r:"2",strokeWidth:"2"}),s.jsx("path",{d:"M14 20c0-1.8 1.4-3.4 3.2-4",strokeWidth:"2"})]})}function Ay(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"2"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"2"}),s.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"2"})]})}function Ry(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"2",strokeWidth:"2"}),s.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"9",strokeWidth:"2"}),s.jsx("line",{x1:"9",y1:"13",x2:"15",y2:"13",strokeWidth:"2"})]})}function Py(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"6",y:"5",width:"12",height:"15",rx:"2",strokeWidth:"2"}),s.jsx("path",{d:"M9 5h6",strokeWidth:"2"}),s.jsx("path",{d:"M9 10h6",strokeWidth:"2"}),s.jsx("path",{d:"M9 14h6",strokeWidth:"2"})]})}function Oy(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M8 4h4a2 2 0 1 1 0 4h-1v2h2a2 2 0 1 1 0 4h-2v2H8a2 2 0 1 1-4 0V8a2 2 0 1 1 4 0z",strokeWidth:"2"})})}function Dy({settingsSection:e,setSettingsSection:t,settingsTab:n,setSettingsTab:r,rolePermissions:a,setRolePermissions:i,currentRole:l,isAdmin:o,adminUsers:c,userForm:h,setUserForm:x,roleOptions:p,handleUserSubmit:y,settings:L,setSettings:m,handleSaveSettings:b,branches:w,services:u,branchForm:f,setBranchForm:g,handleBranchSubmit:k,handleBranchDisable:P,serviceForm:j,setServiceForm:O,handleServiceSubmit:C,handleServiceDisable:I,handleServiceBranchToggle:U,templates:Y,templateForm:le,setTemplateForm:pe,handleTemplateSubmit:je,handleTemplateSubmitToMeta:_e,handleTemplateDelete:se,handleSyncTemplates:Ee,auditLogs:B,formatDate:W,planName:S,tenantChannels:H,channelForm:G,setChannelForm:Z,handleChannelSelect:T,handleChannelSubmit:X,handleUserDelete:Q,defaultRolePermissions:V,handleRoleDelete:ae,useShellLayout:ue=!1,pageError:de}){const ge=a==null?void 0:a[l],Ue=[{title:"Principal",items:[{id:"general",label:"General",icon:Ty},{id:"users",label:"Gestion de Usuarios",icon:Ly},{id:"bot",label:"Configuracion de Bot",icon:Ay}]},{title:"Canales e Integraciones",items:[{id:"templates",label:"Plantillas de Meta",icon:Ry},{id:"audit",label:"Registros / Auditoria",icon:Py},{id:"odoo",label:"Integracion Odoo",icon:Oy}]}];function Ve(Oe){var Ie,We;return!!((We=(Ie=ge==null?void 0:ge.settings)==null?void 0:Ie[Oe])!=null&&We.read)}function Fe(Oe){Ve(Oe)&&t(Oe)}const ct=s.jsxs(s.Fragment,{children:[s.jsxs("aside",{className:"settings-sidebar",children:[s.jsxs("div",{className:"settings-header",children:[s.jsx("div",{className:"settings-title",children:"CONFIGURACION"}),s.jsx("div",{className:"settings-version",children:"PODOPIE OS V2.0"})]}),Ue.map(Oe=>s.jsxs("div",{className:"settings-group",children:[s.jsx("div",{className:"settings-group-title",children:Oe.title}),s.jsx("div",{className:"settings-group-list",children:Oe.items.map(Ie=>{const We=!Ve(Ie.id),Ut=Ie.icon;return s.jsxs("button",{className:`settings-item ${e===Ie.id?"active":""}`,type:"button",onClick:()=>Fe(Ie.id),disabled:We,children:[s.jsx("span",{className:"settings-icon","aria-hidden":"true",children:s.jsx(Ut,{className:"settings-icon-svg"})}),Ie.label]},Ie.id)})})]},Oe.title)),s.jsxs("div",{className:"settings-plan",children:[s.jsx("div",{className:"settings-plan-label",children:"Plan actual"}),s.jsx("div",{className:"settings-plan-name",children:S||"Sin plan"})]})]}),s.jsxs("div",{className:"settings-content",children:[e==="users"&&s.jsx(xy,{settingsTab:n,setSettingsTab:r,rolePermissions:a,setRolePermissions:i,isAdmin:o,adminUsers:c,userForm:h,setUserForm:x,roleOptions:p,handleUserSubmit:y,handleUserDelete:Q,defaultRolePermissions:V,handleRoleDelete:ae}),e==="general"&&s.jsx(jy,{branches:w,branchForm:f,setBranchForm:g,handleBranchSubmit:k,handleBranchDisable:P,services:u,serviceForm:j,setServiceForm:O,handleServiceSubmit:C,handleServiceDisable:I,handleServiceBranchToggle:U,tenantChannels:H,channelForm:G,setChannelForm:Z,handleChannelSelect:T,handleChannelSubmit:X}),e==="bot"&&s.jsx(Ny,{settings:L,setSettings:m,handleSaveSettings:b}),e==="templates"&&s.jsx(ky,{templates:Y,templateForm:le,setTemplateForm:pe,handleTemplateSubmit:je,handleTemplateSubmitToMeta:_e,handleTemplateDelete:se,handleSyncTemplates:Ee}),e==="audit"&&s.jsx(Cy,{auditLogs:B,formatDate:W}),e==="odoo"&&s.jsx(by,{}),de&&s.jsx("div",{className:"error-banner",children:de})]})]});return ue?ct:s.jsx("section",{className:"settings-layout",children:ct})}function My(){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"1.8"}),s.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"1.8"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"1.8"}),s.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"1.8"})]})}function Iy({tenantId:e,tenantBots:t,availableFlows:n,loading:r,onAddBot:a,onRemoveBot:i}){const[l,o]=v.useState(""),c=new Set(t.map(p=>p.flow_id)),h=n.filter(p=>!c.has(p.id));function x(){l&&(a(l),o(""))}return s.jsxs("section",{className:"sa-bot-card","data-tenant":e||"",children:[s.jsxs("header",{className:"sa-bot-header",children:[s.jsx("div",{className:"sa-bot-icon-large","aria-hidden":"true",children:s.jsx(My,{})}),s.jsxs("div",{className:"sa-bot-title-group",children:[s.jsx("h3",{children:"Asignacion de Bots"}),s.jsx("p",{children:"Selecciona que flujos estaran disponibles para este cliente. Los flujos asignados apareceran inmediatamente en el panel del usuario."})]})]}),s.jsx("div",{className:"sa-bot-body",children:r?s.jsx("div",{className:"sa-bot-loading",children:"Cargando asignaciones..."}):t.length===0?s.jsxs("div",{className:"sa-bot-empty",children:[s.jsx("div",{className:"sa-bot-empty-icon",children:"+"}),s.jsx("div",{className:"sa-bot-empty-title",children:"Sin bots asignados"}),s.jsx("div",{className:"sa-bot-empty-sub",children:"Agrega un flujo desde el selector para activarlo en este tenant."})]}):s.jsx("div",{className:"sa-bot-grid",children:t.map(p=>s.jsxs("div",{className:"sa-assigned-bot",children:[s.jsx("div",{className:"sa-bot-item-icon",children:p.flow_icon||">"}),s.jsxs("div",{className:"sa-bot-item-info",children:[s.jsx("span",{className:"sa-bot-item-name",children:p.flow_name||p.flow_id}),s.jsx("span",{className:"sa-bot-item-desc",children:p.flow_description||"Sin descripcion"})]}),s.jsx("button",{type:"button",className:"sa-btn-remove",title:"Quitar bot del cliente",onClick:()=>i(p.id),children:"Quitar"})]},p.id))})}),s.jsxs("div",{className:"sa-bot-controls",children:[s.jsxs("div",{className:"sa-select-container",children:[s.jsx("label",{className:"sa-select-label",children:"Asignar bot"}),s.jsxs("select",{className:"sa-select-styled",value:l,onChange:p=>o(p.target.value),disabled:h.length===0,children:[s.jsx("option",{value:"",children:h.length===0?"No hay mas bots disponibles":"Selecciona un bot para asignar"}),h.map(p=>s.jsx("option",{value:p.id,children:p.name},p.id))]})]}),s.jsx("button",{type:"button",className:"sa-btn-assign",onClick:x,disabled:!l,children:"Asignar Bot"})]})]})}const St={name:"",slug:"",plan:"",db_url:"",phone_number_id:"",line_name:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",brand_name:"",logo_url:"",brand_primary:"#22d3ee",brand_accent:"#38bdf8",brand_bg:"#0b0f16",timezone:"",odoo_base_url:"",odoo_db_name:"",odoo_username:"",odoo_password:""},By=[{value:"starter",label:"Starter"},{value:"growth",label:"Growth"},{value:"scale",label:"Scale"},{value:"enterprise",label:"Enterprise"}];function zy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"})]})}function eo(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function $y(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"3.5",strokeWidth:"1.6"}),s.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1.2l2-1.5-2-3.5-2.4.7a7.2 7.2 0 0 0-2-1.2L12 2 9.5 4.3a7.2 7.2 0 0 0-2 1.2l-2.4-.7-2 3.5 2 1.5A7 7 0 0 0 5 12c0 .4 0 .8.1 1.2l-2 1.5 2 3.5 2.4-.7a7.2 7.2 0 0 0 2 1.2L12 22l2.5-2.3a7.2 7.2 0 0 0 2-1.2l2.4.7 2-3.5-2-1.5c.1-.4.1-.8.1-1.2Z",strokeWidth:"1.2",strokeLinejoin:"round"})]})}function Uy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.6"}),s.jsx("path",{d:"M16.5 16.5 20 20",strokeWidth:"1.6",strokeLinecap:"round"})]})}function Vy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M6 12h12",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"m13 6 6 6-6 6",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Fy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M18 6 6 18",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"m6 6 12 12",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Wy(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56",strokeWidth:"1.8",strokeLinecap:"round"})})}function Du(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Mu(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"m2 2 20 20",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Hy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 18h.01",strokeWidth:"1.8",strokeLinecap:"round"})]})}function qy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"m15 5 4 4",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Qy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M3 6h18",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",strokeWidth:"1.8",strokeLinecap:"round"})]})}const Iu={display_name:"",phone_number_id:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",is_active:!0,is_default:!1};function Gy({isOpen:e,onClose:t,initialData:n,onSave:r,tenantId:a}){const[i,l]=v.useState(Iu),[o,c]=v.useState(!1),[h,x]=v.useState(!1),[p,y]=v.useState(!1),[L,m]=v.useState(null);if(v.useEffect(()=>{e&&(l(n||{...Iu}),m(null))},[e,n]),!e)return null;const b=async w=>{if(w.preventDefault(),y(!0),m(null),!i.phone_number_id||!i.verify_token||!n&&!i.wa_token){m("Los campos ID de Telfono, Verify Token y Access Token son obligatorios."),y(!1);return}try{await r({...i,tenant_id:a}),t()}catch(u){console.error("Error saving channel:",u),m(u.message||"Error al guardar la lnea.")}finally{y(!1)}};return s.jsx("div",{className:"sa-modal-overlay",onClick:t,children:s.jsxs("div",{className:"sa-modal-content",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"sa-modal-header",children:[s.jsx("div",{className:"sa-modal-title",children:n?"Editar Lnea WhatsApp":"Nueva Lnea WhatsApp"}),s.jsx("button",{className:"sa-modal-close",onClick:t,children:s.jsx(Fy,{width:24,height:24})})]}),s.jsxs("div",{className:"sa-modal-body",children:[L&&s.jsx("div",{className:"sa-alert",style:{marginBottom:"1rem"},children:L}),s.jsxs("div",{className:"sa-form-grid",children:[s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Nombre para mostrar (Opcional)"}),s.jsx("input",{value:i.display_name||"",onChange:w=>l({...i,display_name:w.target.value}),placeholder:"Ej: Ventas Principal"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Phone Number ID *"}),s.jsx("input",{value:i.phone_number_id||"",onChange:w=>l({...i,phone_number_id:w.target.value}),placeholder:"Identificador del nmero de telfono"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"WABA ID (WhatsApp Business Account ID)"}),s.jsx("input",{value:i.waba_id||"",onChange:w=>l({...i,waba_id:w.target.value}),placeholder:"Identificador de la cuenta de WhatsApp Business"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Verify Token (Webhook) *"}),s.jsx("input",{value:i.verify_token||"",onChange:w=>l({...i,verify_token:w.target.value}),placeholder:"Token de verificacin webhook"})]}),s.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[s.jsx("label",{children:"Permanent Access Token *"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:o?"text":"password",value:i.wa_token||"",onChange:w=>l({...i,wa_token:w.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"Token de acceso permanente",style:{width:"100%",paddingRight:"40px"}}),s.jsx("button",{type:"button",onClick:()=>c(!o),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:o?s.jsx(Mu,{width:18,height:18}):s.jsx(Du,{width:18,height:18})})]})]}),s.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[s.jsx("label",{children:"App Secret (Opcional)"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:h?"text":"password",value:i.app_secret||"",onChange:w=>l({...i,app_secret:w.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"App Secret de Meta",style:{width:"100%",paddingRight:"40px"}}),s.jsx("button",{type:"button",onClick:()=>x(!h),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:h?s.jsx(Mu,{width:18,height:18}):s.jsx(Du,{width:18,height:18})})]})]})]}),s.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"2rem"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[s.jsx("input",{type:"checkbox",checked:!!i.is_active,onChange:w=>l({...i,is_active:w.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Activa"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[s.jsx("input",{type:"checkbox",checked:!!i.is_default,onChange:w=>l({...i,is_default:w.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Principal (Por Defecto)"]})]})]}),s.jsxs("div",{className:"sa-modal-footer",children:[s.jsx("button",{className:"sa-btn ghost",onClick:t,disabled:p,children:"Cancelar"}),s.jsx("button",{className:"sa-btn primary",onClick:b,disabled:p,children:p?s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(Wy,{width:16,height:16,className:"animate-spin"})," Guardando..."]}):"Guardar Lnea"})]})]})})}function Yy({channels:e=[],tenantId:t,onRefresh:n}){const[r,a]=v.useState(!1),[i,l]=v.useState(null),o=()=>{l(null),a(!0)},c=p=>{l(p),a(!0)},h=async p=>{const y=i?`/api/superadmin/channels/${i.id}`:"/api/superadmin/channels",m=await fetch(y,{method:i?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(p)});if(!m.ok){const b=await m.json();throw new Error(b.error||"Error al guardar")}await n()},x=async p=>{if(confirm("Ests seguro de que deseas eliminar esta lnea? Esta accin no se puede deshacer."))try{if(!(await fetch(`/api/superadmin/channels/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar");await n()}catch(y){console.error("Error deleting channel:",y),alert("No se pudo eliminar la lnea.")}};return s.jsxs("section",{className:"sa-lines-card",children:[s.jsxs("header",{className:"sa-lines-header",children:[s.jsxs("div",{className:"sa-lines-title",children:[s.jsx("div",{className:"sa-lines-icon",children:s.jsx(Hy,{width:24,height:24})}),s.jsxs("div",{children:[s.jsx("h3",{children:"Lneas de WhatsApp Cloud"}),s.jsx("p",{children:"Gestiona las conexiones activas de WhatsApp para este tenant."})]})]}),s.jsxs("button",{className:"sa-btn primary",onClick:o,children:[s.jsx(eo,{width:16,height:16,style:{marginRight:"0.5rem"}}),"Agregar Nueva Lnea"]})]}),s.jsx("div",{className:"sa-lines-body",children:s.jsxs("div",{className:"sa-lines-grid",children:[e.map(p=>s.jsxs("div",{className:`sa-line-card ${p.is_active?"":"opacity-75"}`,children:[s.jsxs("div",{className:"sa-line-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"sa-line-name",children:p.display_name||"Sin nombre"}),s.jsxs("div",{className:"sa-line-meta",children:["ID: ",p.phone_number_id]})]}),s.jsx("div",{className:`sa-line-status ${p.is_active?"active":""}`,title:p.is_active?"Activo":"Inactivo"})]}),s.jsxs("div",{className:"sa-line-badges",children:[p.is_default&&s.jsx("span",{className:"sa-line-badge default",children:"DEFAULT"}),!p.is_active&&s.jsx("span",{className:"sa-status warn",children:"INACTIVO"})]}),s.jsxs("div",{className:"sa-line-details",children:[s.jsxs("div",{className:"sa-line-detail",children:[s.jsx("span",{className:"sa-detail-label",children:"WABA ID"}),s.jsx("span",{className:"sa-detail-value",children:p.waba_id||"-"})]}),s.jsxs("div",{className:"sa-line-detail",children:[s.jsx("span",{className:"sa-detail-label",children:"Verify Token"}),s.jsx("span",{className:"sa-detail-value",children:p.verify_token?`${p.verify_token.substring(0,16)}...`:"-"})]})]}),s.jsxs("div",{className:"sa-line-actions",children:[s.jsx("button",{className:"sa-btn ghost",onClick:()=>c(p),title:"Editar",children:s.jsx(qy,{width:16,height:16})}),s.jsx("button",{className:"sa-btn ghost",onClick:()=>x(p.id),title:"Eliminar",style:{color:"#f87171"},children:s.jsx(Qy,{width:16,height:16})})]})]},p.id)),s.jsxs("button",{type:"button",className:"sa-line-add-card",onClick:o,children:[s.jsx("div",{className:"sa-add-icon-circle",children:s.jsx(eo,{width:24,height:24})}),s.jsx("span",{children:"Nueva Conexin"})]})]})}),s.jsx(Gy,{isOpen:r,onClose:()=>a(!1),initialData:i,onSave:h,tenantId:t})]})}function Bu({route:e="/superadmin",onNavigate:t,onImpersonateTenant:n,onLogout:r=()=>{}}){const[a,i]=v.useState([]),[l,o]=v.useState([]),[c,h]=v.useState(""),[x,p]=v.useState(""),[y,L]=v.useState("Verificacion de red: sistema ok"),[m,b]=v.useState(St),[w,u]=v.useState(!1),[f,g]=v.useState(!1),[k,P]=v.useState(""),[j,O]=v.useState(""),[C,I]=v.useState(!0),[U,Y]=v.useState(St),[le,pe]=v.useState(!0),[je,_e]=v.useState(!1),se=v.useRef(""),[Ee,B]=v.useState([]),[W,S]=v.useState([]),[H,G]=v.useState(!1),{pushToast:Z}=tc(),T=v.useMemo(()=>{if(!e)return"";const N=e.match(/^\/superadmin\/tenants\/([^/]+)\/?$/)||e.match(/^\/superadmin\/tenant\/([^/]+)\/?$/)||e.match(/^\/superadmin\/edit\/([^/]+)\/?$/);return N?N[1]:""},[e]),X=e.startsWith("/superadmin/new"),Q=!!T,V=X||Q,ae=v.useCallback(N=>{if(t){t(N,{replace:!1});return}typeof window>"u"||window.history.pushState({},"",N)},[t]);async function ue(){try{const N=await he("/api/superadmin/tenants");i(N.tenants||[]);const z=await he("/api/superadmin/channels");o(z.channels||[]),p("")}catch(N){p(N.message||"No se pudo cargar datos.")}}v.useEffect(()=>{ue(),ve()},[]),v.useMemo(()=>{const N=new Map;return l.forEach(z=>{const q=N.get(z.tenant_id)||0;N.set(z.tenant_id,q+1)}),N},[l]);const de=v.useMemo(()=>{const N=c.trim().toLowerCase();return N?a.filter(z=>{const q=String(z.name||"").toLowerCase(),ee=String(z.slug||"").toLowerCase(),xe=String(z.id||"").toLowerCase();return q.includes(N)||ee.includes(N)||xe.includes(N)}):a.slice()},[a,c]),ge=a.length,Ue=a.filter(N=>N.is_active).length;a.filter(N=>N.has_database).length;const Ve=a.filter(N=>N.has_odoo).length,Fe=ge?Math.round(Ve/ge*100):0;function ct(N){if(!N)return"--";const z=new Date(N);return Number.isNaN(z.getTime())?"--":z.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"2-digit"})}function Oe(N){return 10+Math.abs(Array.from(N).reduce((ee,xe)=>ee+xe.charCodeAt(0),0))%70}function Ie(){b(St),Y(St),O(""),I(!0),pe(!0),S([]),L("Verificacion de red: sistema ok"),se.current=""}function We(){Ie(),p(""),ae("/superadmin/new")}function Ut(){se.current="",ae("/superadmin")}async function _(N){if(n)try{p(""),P(N),await n(N)}catch(z){p(z.message||"No se pudo entrar al tenant.")}finally{P("")}}function M(N){const z={};return Object.keys(St).forEach(q=>{const ee=N[q];z[q]=typeof ee=="string"?ee.trim():ee||""}),{...St,...z}}async function ie(N){if(N){se.current=N,O(N),b(St),Y(St),I(!0),pe(!0),S([]),_e(!0),p("");try{const z=await he(`/api/superadmin/tenants/${N}/details`);if(se.current!==N)return;const q=z.tenant||{},ee=z.branding||null,xe=z.odoo||null,Wt=z.database||null,qe=z.channel||null,ut=(ee==null?void 0:ee.colors)||{},Zt=M({...St,name:q.name||"",slug:q.slug||"",plan:q.plan||"",db_url:(Wt==null?void 0:Wt.db_url)||"",brand_name:(ee==null?void 0:ee.brand_name)||"",logo_url:(ee==null?void 0:ee.logo_url)||"",brand_primary:(ut==null?void 0:ut.primary)||St.brand_primary,brand_accent:(ut==null?void 0:ut.accent)||St.brand_accent,brand_bg:(ut==null?void 0:ut.bg)||St.brand_bg,odoo_base_url:(xe==null?void 0:xe.base_url)||"",odoo_db_name:(xe==null?void 0:xe.db_name)||"",odoo_username:(xe==null?void 0:xe.username)||"",odoo_password:(xe==null?void 0:xe.password)||""});b(Zt),Y(Zt),O(q.id||N),I(!!q.is_active),pe(!!q.is_active),L("Modo edicion: cambios pendientes"),await He(N)}catch(z){p(z.message||"No se pudo cargar tenant.")}finally{_e(!1)}}}async function ve(){try{const N=await he("/api/superadmin/flows");B(N.flows||[])}catch(N){console.error("Error loading flows",N)}}async function He(N){if(N){G(!0);try{const z=await he(`/api/superadmin/tenant-bots?tenant_id=${N}`);S(z.tenant_bots||[])}catch(z){console.error("Error loading tenant bots",z)}finally{G(!1)}}}async function Vt(N,z){try{await Be(`/api/superadmin/tenant-bots/${N}`,{is_active:z}),S(q=>q.map(ee=>ee.id===N?{...ee,is_active:z}:ee))}catch(q){p(q.message||"Error al cambiar estado del bot.")}}async function zn(N){if(j)try{const z=await be("/api/superadmin/tenant-bots",{tenant_id:j,flow_id:N});z.tenant_bot&&(S(q=>[z.tenant_bot,...q]),Z({message:"Bot agregado correctamente"}))}catch(z){p(z.message||"Error al agregar bot."),Z({type:"error",message:z.message||"Error al agregar bot"})}}async function ss(N){const z=W.find(q=>q.id===N);try{await Wn(`/api/superadmin/tenant-bots/${N}`),S(q=>q.filter(ee=>ee.id!==N)),Z({message:"Bot eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{if(!z)return;const q=await be("/api/superadmin/tenant-bots",{tenant_id:z.tenant_id,flow_id:z.flow_id});q!=null&&q.tenant_bot&&z.is_active===!1&&await Be(`/api/superadmin/tenant-bots/${q.tenant_bot.id}`,{is_active:!1}),await He(j),Z({message:"Bot restaurado"})}catch(q){Z({type:"error",message:(q==null?void 0:q.message)||"No se pudo restaurar el bot"})}}})}catch(q){p(q.message||"Error al eliminar bot."),Z({type:"error",message:q.message||"Error al eliminar bot"})}}async function Is(N){p(""),ae(`/superadmin/tenants/${N.id}`)}function $n(){const N=m.name.trim(),z=m.slug.trim(),q=m.db_url.trim();return!N||!z?{ok:!1,message:"Nombre y subdominio son requeridos."}:!j&&!q?{ok:!1,message:"Tenant DB URL es requerido."}:(m.brand_name.trim()||m.logo_url.trim()||m.brand_primary||m.brand_accent||m.brand_bg)&&!m.brand_name.trim()?{ok:!1,message:"Brand name es requerido."}:(m.odoo_base_url||m.odoo_db_name||m.odoo_username||m.odoo_password)&&(!m.odoo_base_url||!m.odoo_db_name||!m.odoo_username||!j&&!m.odoo_password)?{ok:!1,message:"Odoo incompleto: base_url, db_name, username, password."}:{ok:!0}}function Ft(N){if(!N)return"Verificacion completada";const z=[];if(N.database){const q=N.database.ok?"DB ok":"DB error",ee=typeof N.database.latency_ms=="number"?` (${N.database.latency_ms}ms)`:"";z.push(`${q}${ee}`)}if(N.odoo){const q=N.odoo.ok?"Odoo ok":"Odoo error",ee=typeof N.odoo.latency_ms=="number"?` (${N.odoo.latency_ms}ms)`:"";z.push(`${q}${ee}`)}return z.length?`Verificacion completada: ${z.join(" | ")}`:"Verificacion completada"}function rs(N){if(N!=null&&N.database&&!N.database.ok){const z=N.database.details||N.database.error;return R(z||"Error en DB")}if(N!=null&&N.odoo&&!N.odoo.ok){const z=N.odoo.details||N.odoo.error;return R(z||"Error en Odoo")}return"No se pudo validar conexion"}function R(N){const z=(N||"").toString(),q=z.toLowerCase();return q.includes("missing")?"Completa los campos de Odoo":q.includes("db_connection_failed")?"No se pudo conectar a la base de datos":q.includes("odoo")&&q.includes("failed")?"No se pudo autenticar en Odoo":z||"No se pudo validar conexion"}async function Ne(){const N=$n();if(!N.ok){L(N.message);return}u(!0),L("Verificando conexion...");try{const z=await be("/api/superadmin/tenants/validate",{db_url:m.db_url.trim(),odoo_base_url:m.odoo_base_url.trim(),odoo_db_name:m.odoo_db_name.trim(),odoo_username:m.odoo_username.trim(),odoo_password:m.odoo_password.trim()}),q=Ft(z.checks);L(q),z.ok?Z({message:q}):Z({type:"error",message:rs(z.checks)})}catch(z){L("Error validando conexion"),Z({type:"error",message:z.message||"No se pudo validar conexion"})}finally{u(!1)}}async function Bs(N){var q;if(N.preventDefault(),Q&&!Jt)return;const z=$n();if(!z.ok){p(z.message);return}try{g(!0),p("");let ee=j;if(ee?await Be(`/api/superadmin/tenants/${ee}`,{name:m.name.trim(),slug:m.slug.trim(),plan:m.plan.trim(),is_active:C}):ee=(q=(await be("/api/superadmin/tenants",{name:m.name.trim(),slug:m.slug.trim(),plan:m.plan.trim()})).tenant)==null?void 0:q.id,!ee)throw new Error("tenant_not_ready");if(m.db_url.trim()&&await be(`/api/superadmin/tenants/${ee}/database`,{db_url:m.db_url.trim()}),m.brand_name.trim()||m.logo_url.trim()||m.brand_primary||m.brand_accent||m.brand_bg){const qe={};m.brand_primary&&(qe.primary=m.brand_primary),m.brand_accent&&(qe.accent=m.brand_accent),m.brand_bg&&(qe.bg=m.brand_bg),await Be("/api/superadmin/branding",{tenant_id:ee,brand_name:m.brand_name.trim(),logo_url:m.logo_url.trim()||null,colors:Object.keys(qe).length?qe:null})}if(m.odoo_base_url||m.odoo_db_name||m.odoo_username||m.odoo_password){const qe={tenant_id:ee,base_url:m.odoo_base_url.trim(),db_name:m.odoo_db_name.trim(),username:m.odoo_username.trim()};m.odoo_password.trim()&&(qe.password=m.odoo_password.trim()),await Be("/api/superadmin/odoo",qe)}if(await ue(),j){const qe=M(m);b(qe),Y(qe),pe(C),L("Cambios guardados"),Z({message:"Tenant actualizado correctamente"})}else Ie(),Z({message:"Tenant creado correctamente"})}catch(ee){p(ee.message||"No se pudo guardar tenant."),Z({type:"error",message:ee.message||"No se pudo guardar tenant"})}finally{g(!1)}}async function Un(){if(!j)return;const N=!C;try{g(!0),p(""),await Be(`/api/superadmin/tenants/${j}`,{is_active:N}),I(N),pe(N),L(N?"Tenant reactivado":"Tenant bloqueado"),await ue()}catch(z){p(z.message||"No se pudo cambiar estado del tenant.")}finally{g(!1)}}const Jt=v.useMemo(()=>!j&&!Q||C!==le?!0:Object.keys(U).some(N=>{const z=String(m[N]??""),q=String(U[N]??"");return z!==q}),[le,U,C,j,Q,m]);return v.useEffect(()=>{if(Q&&T&&T!==j){ie(T);return}X&&(j||je)&&Ie()},[je,j,X,Q,T]),s.jsxs("div",{className:"sa-shell",children:[s.jsxs("aside",{className:"sa-rail",children:[s.jsx("div",{className:"sa-rail-logo",children:"PRZV"}),s.jsxs("button",{type:"button",className:`sa-rail-btn ${V?"":"active"}`,onClick:Ut,children:[s.jsx(zy,{className:"sa-rail-icon"}),s.jsx("span",{children:"Dashboard"})]}),s.jsxs("button",{type:"button",className:`sa-rail-btn ${X?"active":""}`,onClick:We,children:[s.jsx(eo,{className:"sa-rail-icon"}),s.jsx("span",{children:"Nuevo"})]}),s.jsxs("button",{type:"button",className:"sa-rail-btn",children:[s.jsx($y,{className:"sa-rail-icon"}),s.jsx("span",{children:"Ajustes"})]}),s.jsxs("div",{className:"sa-rail-footer",children:[s.jsx("div",{className:"sa-avatar",children:"SA"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-role",children:"Superadmin"}),s.jsx("div",{className:"sa-meta",children:"Control plane"})]})]})]}),s.jsxs("main",{className:"sa-main",children:[!V&&s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sa-topbar",children:[s.jsxs("div",{children:[s.jsx("div",{className:"sa-kicker",children:"Panel de control Perzivalh"}),s.jsxs("div",{className:"sa-title",children:["Sistema operativo ",s.jsx("span",{className:"sa-dot"})]}),s.jsx("div",{className:"sa-subtitle",children:"Estado general del entorno"})]}),s.jsxs("div",{className:"sa-top-actions",children:[s.jsx("span",{className:"sa-version",children:"v0.4 stable"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:ue,children:"Recargar"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:r,children:"Cerrar sesion"}),s.jsx("button",{className:"sa-btn primary",type:"button",onClick:We,children:"Nuevo tenant"})]})]}),s.jsxs("section",{className:"sa-kpi-grid",children:[s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Total de empresas (tenants)"}),s.jsx("div",{className:"sa-kpi-value",children:ge}),s.jsxs("div",{className:"sa-kpi-meta",children:["+",Ue," activas"]})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Usuarios activos totales"}),s.jsx("div",{className:"sa-kpi-value",children:"--"}),s.jsx("div",{className:"sa-kpi-meta",children:"En tiempo real"})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Mensajes hoy"}),s.jsx("div",{className:"sa-kpi-value",children:"--"}),s.jsx("div",{className:"sa-kpi-meta",children:"Canal API"})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Conexiones Odoo activas"}),s.jsxs("div",{className:"sa-kpi-value",children:[Fe,"%"]}),s.jsxs("div",{className:"sa-kpi-meta",children:[Ve," sincronizadas"]})]})]}),s.jsxs("section",{className:"sa-table-card",children:[s.jsxs("div",{className:"sa-table-header",children:[s.jsxs("div",{className:"sa-search",children:[s.jsx(Uy,{className:"sa-search-icon"}),s.jsx("input",{value:c,onChange:N=>h(N.target.value),placeholder:"Filtrar empresas..."})]}),s.jsxs("div",{className:"sa-table-actions",children:[s.jsx("button",{className:"sa-btn ghost",type:"button",children:"Ordenar por salud"}),s.jsx("button",{className:"sa-btn ghost",type:"button",children:"Exportar CSV"})]})]}),s.jsxs("div",{className:"sa-table",children:[s.jsxs("div",{className:"sa-table-head",children:[s.jsx("div",{children:"ID referencia"}),s.jsx("div",{children:"Nombre de la empresa"}),s.jsx("div",{children:"Estado"}),s.jsx("div",{children:"Uso de recursos"}),s.jsx("div",{children:"Tiempo de actividad"}),s.jsx("div",{children:"Acciones"})]}),de.length?de.map(N=>{var xe;const z=Oe(N.id||"tenant"),q=N.has_database?"db":"no-db",ee=N.has_database;return s.jsxs("div",{className:"sa-table-row",children:[s.jsx("div",{className:"sa-ref",children:((xe=N.slug)==null?void 0:xe.toUpperCase())||"TENANT"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-tenant-name",children:N.name}),s.jsx("div",{className:"sa-tenant-meta",children:N.id.slice(0,8)})]}),s.jsx("div",{className:`sa-status ${N.is_active?"ok":"warn"}`,children:N.is_active?"activo":"inactivo"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-progress",children:s.jsx("span",{className:`sa-progress-fill ${q}`,style:{width:`${z}%`}})}),s.jsxs("div",{className:"sa-tenant-meta",children:[z,"% carga"]})]}),s.jsx("div",{className:"sa-tenant-meta",children:ct(N.created_at)}),s.jsx("div",{children:s.jsxs("div",{className:"sa-action-group",children:[s.jsx("button",{className:"sa-action",type:"button",onClick:()=>_(N.id),disabled:!ee||k===N.id,children:ee?k===N.id?"Entrando...":"Entrar":"Sin DB"}),s.jsx("button",{className:"sa-link",type:"button",onClick:()=>Is(N),children:s.jsx(Vy,{className:"sa-link-icon"})})]})})]},N.id)}):s.jsx("div",{className:"sa-empty",children:"Sin tenants para mostrar."})]}),s.jsxs("div",{className:"sa-footer-note",children:["Mostrando ",de.length||0," empresas en produccion"]})]})]}),V&&s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sa-create-header",children:[s.jsx("button",{className:"sa-back",type:"button",onClick:Ut,children:"Volver al dashboard"}),s.jsx("div",{className:"sa-create-title",children:Q?"Editar tenant":"Registrar nuevo tenant"}),s.jsxs("div",{className:"sa-create-actions",children:[s.jsx("div",{className:"sa-create-meta",children:"Modo: superadmin"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:r,children:"Cerrar sesion"})]})]}),x?s.jsx("div",{className:"sa-alert",children:x}):null,s.jsxs("form",{className:"sa-form",onSubmit:Bs,children:[s.jsxs("div",{className:"sa-form-grid sa-form-grid-2",children:[s.jsxs("div",{className:"sa-form-section",children:[s.jsx("div",{className:"sa-section-title",children:"Identidad del tenant"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Nombre de la empresa"}),s.jsx("input",{value:m.name,onChange:N=>b({...m,name:N.target.value}),placeholder:"Ej. Empresa Alfa"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Subdominio reservado"}),s.jsx("input",{value:m.slug,onChange:N=>b({...m,slug:N.target.value}),placeholder:"alfa-salud"})]}),s.jsxs("div",{className:"sa-field sa-field-row",children:[s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Plan"}),s.jsxs("select",{value:m.plan,onChange:N=>b({...m,plan:N.target.value}),children:[s.jsx("option",{value:"",children:"Seleccionar"}),By.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))]})]}),Q&&s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Estado del tenant"}),s.jsxs("select",{value:C?"active":"inactive",onChange:N=>I(N.target.value==="active"),children:[s.jsx("option",{value:"active",children:"Activo"}),s.jsx("option",{value:"inactive",children:"Bloqueado"})]})]})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Brand name"}),s.jsx("input",{value:m.brand_name,onChange:N=>b({...m,brand_name:N.target.value}),placeholder:"Perzivalh"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Logo URL"}),s.jsx("input",{value:m.logo_url,onChange:N=>b({...m,logo_url:N.target.value}),placeholder:"https://"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Paleta de colores"}),s.jsxs("div",{className:"sa-color-grid",children:[s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Primario"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_primary,onChange:N=>b({...m,brand_primary:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_primary,onChange:N=>b({...m,brand_primary:N.target.value})})]})]}),s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Accent"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_accent,onChange:N=>b({...m,brand_accent:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_accent,onChange:N=>b({...m,brand_accent:N.target.value})})]})]}),s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Fondo"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_bg,onChange:N=>b({...m,brand_bg:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_bg,onChange:N=>b({...m,brand_bg:N.target.value})})]})]})]})]}),!Q&&s.jsx("div",{className:"sa-note",children:"Nota: al registrar un tenant se inicia el aprovisionamiento en el entorno de produccion."})]}),s.jsxs("div",{className:"sa-form-section",children:[s.jsx("div",{className:"sa-section-title",children:"Variables de entorno (envs)"}),s.jsxs("div",{className:"sa-subsection",children:[s.jsx("div",{className:"sa-subsection-title",children:"Base de datos"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Tenant DB URL"}),s.jsx("input",{value:m.db_url,onChange:N=>b({...m,db_url:N.target.value}),placeholder:"postgresql://..."})]})]}),s.jsxs("div",{className:"sa-subsection",children:[s.jsx("div",{className:"sa-subsection-title",children:"Odoo (opcional)"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo Base URL"}),s.jsx("input",{value:m.odoo_base_url,onChange:N=>b({...m,odoo_base_url:N.target.value}),placeholder:"https://odoo-instancia"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo DB Name"}),s.jsx("input",{value:m.odoo_db_name,onChange:N=>b({...m,odoo_db_name:N.target.value}),placeholder:"db_tenant_prod"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo User"}),s.jsx("input",{value:m.odoo_username,onChange:N=>b({...m,odoo_username:N.target.value}),placeholder:"usuario@empresa.com"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo Password (opcional)"}),s.jsx("input",{type:"password",value:m.odoo_password,onChange:N=>b({...m,odoo_password:N.target.value}),placeholder:"********"})]})]})]})]}),s.jsxs("div",{className:"sa-form-actions",children:[s.jsx("div",{className:"sa-status-note",children:Q?je?"Cargando datos...":Jt?"Cambios pendientes":"Sin cambios":y}),s.jsx("div",{className:"sa-form-buttons",children:Q?s.jsxs(s.Fragment,{children:[Jt&&s.jsx("button",{className:"sa-btn primary",type:"submit",disabled:f,children:f?"Guardando...":"Guardar cambios"}),s.jsx("button",{className:"sa-btn danger",type:"button",onClick:Un,disabled:f||!j,children:C?"Bloquear tenant":"Reactivar tenant"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:Ne,disabled:w||f,children:w?"Validando...":"Validar conexion"}),s.jsx("button",{className:"sa-btn primary",type:"submit",disabled:f,children:f?"Guardando...":"Desplegar instancia"})]})})]})]}),j?s.jsx(Yy,{channels:l.filter(N=>N.tenant_id===j),tenantId:j,onRefresh:ue}):s.jsx("div",{style:{marginTop:"2rem",padding:"1rem",border:"1px dashed rgba(255,255,255,0.2)",borderRadius:"12px",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textAlign:"center"},children:"Crea el tenant primero para configurar las lneas de WhatsApp."}),j&&s.jsx(Iy,{tenantId:j,tenantBots:W,availableFlows:Ee,loading:H,onToggleBot:Vt,onAddBot:zn,onRemoveBot:ss})]})]})]})}const zu=["open","pending","assigned"],$u=["admin","recepcion","caja","marketing","doctor"],an={admin:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!0},campaigns:{read:!0,write:!0},settings:{read:!0,write:!0}},settings:{general:{read:!0,write:!0},users:{read:!0,write:!0},bot:{read:!0,write:!0},templates:{read:!0,write:!0},audit:{read:!0,write:!0},odoo:{read:!0,write:!0}}},recepcion:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},caja:{modules:{chat:{read:!0,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},marketing:{modules:{chat:{read:!1,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!0,write:!0},settings:{read:!0,write:!1}},settings:{general:{read:!0,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!0,write:!0},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},doctor:{modules:{chat:{read:!0,write:!1},dashboard:{read:!1,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}}};function Xi(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleString()}function Ky(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString()}function Xy(e){if(!e)return"-";const t=new Date(e);if(Number.isNaN(t.getTime()))return"-";const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=Math.round((r-a)/864e5);return i===0?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i===1?"Ayer":["Dom","Lun","Mar","Mie","Jue","Vie","Sab"][t.getDay()]}function Jy(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=Math.round((r-a)/864e5);if(i===0)return"Hoy";if(i===1)return"Ayer";const l=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],o=`${t.getDate()} ${l[t.getMonth()]}`;return t.getFullYear()!==n.getFullYear()?`${o} ${t.getFullYear()}`:o}function K(e){return e?typeof e=="string"?e:e.message||"Error inesperado":"Error inesperado"}function Zy(e,t){return e?t.includes(e.role):!1}function Ji(e){if(!e||typeof e!="object")return{...an};const t={...an};return Object.entries(e).forEach(([n,r])=>{var a,i;!r||typeof r!="object"||(t[n]={modules:{...(a=an[n])==null?void 0:a.modules,...r.modules},settings:{...(i=an[n])==null?void 0:i.settings,...r.settings}})}),t}function rt(e,t,n,r="read"){var i;const a=(i=e==null?void 0:e[t])==null?void 0:i[n];return a?!!a[r]:!1}function Zi(e){const t=n=>n.status==="pending"&&!n.assigned_user_id?0:n.status==="pending"&&n.assigned_user_id?1:n.status==="assigned"?2:3;return[...e].sort((n,r)=>{const a=t(n),i=t(r);if(a!==i)return a-i;const l=new Date(n.last_message_at||n.created_at||0).getTime();return new Date(r.last_message_at||r.created_at||0).getTime()-l})}function ex(e){const t=new URLSearchParams;Object.entries(e||{}).forEach(([r,a])=>{a==null||a===""||t.append(r,a)});const n=t.toString();return n?`?${n}`:""}function Uu(e){if(!e)return"?";const t=e.trim();return t?t[0].toUpperCase():"?"}function Vu(e){const t=String(e||"").replace("#","").trim();if(t.length!==6)return null;const n=Number.parseInt(t,16);return Number.isNaN(n)?null:{r:n>>16&255,g:n>>8&255,b:n&255}}function el(e,t=0,n=255){return Math.min(n,Math.max(t,e))}function ha(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t})`}function tx(e,t=.18){return{r:el(Math.round(e.r*(1-t))),g:el(Math.round(e.g*(1-t))),b:el(Math.round(e.b*(1-t)))}}function Fu(e){var o,c,h;if(typeof document>"u")return;const t=document.documentElement.style;if(!(e!=null&&e.colors)){t.removeProperty("--accent"),t.removeProperty("--accent-strong"),t.removeProperty("--accent-soft"),t.removeProperty("--accent-soft-2"),t.removeProperty("--scroll-thumb"),t.removeProperty("--scroll-thumb-hover");return}const n=((o=e.colors)==null?void 0:o.primary)||((c=e.colors)==null?void 0:c.accent),r=((h=e.colors)==null?void 0:h.accent)||n,a=Vu(n),i=Vu(r);if(!a||!i)return;const l=tx(i,.22);t.setProperty("--accent",`#${n.replace("#","")}`),t.setProperty("--accent-strong",`#${r.replace("#","")}`),t.setProperty("--accent-soft",ha(i,.18)),t.setProperty("--accent-soft-2",ha(i,.12)),t.setProperty("--scroll-thumb",ha(l,.45)),t.setProperty("--scroll-thumb-hover",ha(l,.65))}function nx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M4.5 5.5h15v10H8l-3.5 3.5V5.5Z",strokeWidth:"1.8",strokeLinejoin:"round"}),s.jsx("path",{d:"M8 9h8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M8 12.5h5",strokeWidth:"1.8",strokeLinecap:"round"})]})}function sx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"})]})}function rx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M6 9a6 6 0 1 1 12 0c0 4.2 2 5.5 2 5.5H4S6 13.2 6 9Z",strokeWidth:"1.8",strokeLinejoin:"round"}),s.jsx("path",{d:"M9.5 19a2.5 2.5 0 0 0 5 0",strokeWidth:"1.8"})]})}function ax(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"2",strokeLinecap:"round"})]})}function ix(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"4",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 3v2.5",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M12 18.5V21",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M3 12h2.5",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M18.5 12H21",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5.2 5.2l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M17 17l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5.2 18.8 7 17",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M17 7l1.8-1.8",strokeWidth:"1.8",strokeLinecap:"round"})]})}function lx(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M20 14.2A8.5 8.5 0 1 1 9.8 4 6.5 6.5 0 0 0 20 14.2Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function ox(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.8"}),s.jsx("path",{d:"M16.5 16.5 21 21",strokeWidth:"1.8",strokeLinecap:"round"})]})}function cx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function ux(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"3.5",y:"6",width:"11",height:"12",rx:"2",strokeWidth:"1.8"}),s.jsx("path",{d:"m14.5 10 6-3v10l-6-3",strokeWidth:"1.8"})]})}function dx(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M6.5 4.5 9 3l2.5 4-2.5 1.5c1.2 2.3 3.2 4.3 5.5 5.5L16 11l4 2.5-1.5 2.5c-.7 1.2-2.2 1.7-3.6 1.3a15.9 15.9 0 0 1-7.7-7.7c-.4-1.4.1-2.9 1.3-3.6Z",strokeWidth:"1.6",strokeLinejoin:"round"})})}function hx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 10v6",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"7.5",r:"1",fill:"currentColor"})]})}function fx(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"m4 12 15-7-6 14-2.5-5.2L4 12Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function px(){const[e,t]=v.useState(localStorage.getItem("token")||""),[n,r]=v.useState(()=>typeof window<"u"&&localStorage.getItem("superadmin_token")||""),[a,i]=v.useState(null),[l,o]=v.useState(null),[c,h]=v.useState(null),[x,p]=v.useState([]),[y,L]=v.useState({id:"",display_name:""}),[m,b]=v.useState(()=>{if(typeof window>"u")return{};try{return JSON.parse(localStorage.getItem("last_read_map")||"{}")}catch{return{}}}),[w,u]=v.useState({email:"",password:""}),[f,g]=v.useState(""),[k,P]=v.useState("chats"),[j,O]=v.useState(()=>typeof window<"u"?window.location.pathname:"/"),[C,I]=v.useState(()=>localStorage.getItem("theme")||"light"),[U,Y]=v.useState(!1),[le,pe]=v.useState(!1),[je,_e]=v.useState(!1),[se,Ee]=v.useState(!0),[B,W]=v.useState(!1),S=v.useRef(null),H=v.useRef(null),G=v.useRef(0),[Z,T]=v.useState("users"),[X,Q]=v.useState("list"),[V,ae]=v.useState(()=>Ji(null)),[ue,de]=v.useState(!1),[ge,Ue]=v.useState(!1),[Ve,Fe]=v.useState(!1),ct=v.useMemo(()=>{const d=Object.keys(V||{}).filter(E=>!$u.includes(E));return[...$u,...d]},[V]),[Oe,Ie]=v.useState({status:"",assigned_user_id:"",tag:"",search:"",phone_number_id:""}),We=j.startsWith("/superadmin"),[Ut,_]=v.useState([]),[M,ie]=v.useState(null),[ve,He]=v.useState([]),[Vt,zn]=v.useState(""),[ss,Is]=v.useState("text"),[$n,Ft]=v.useState([]),[rs,R]=v.useState([]),[Ne,Bs]=v.useState(""),[Un,Jt]=v.useState(""),[N,z]=v.useState(""),[q,ee]=v.useState(!1),[xe,Wt]=v.useState({name:"",color:"#6b7280"}),[qe,ut]=v.useState(!1),[Zt,te]=v.useState(""),{pushToast:J}=tc(),zs=v.useRef(new Map),$s=v.useRef(new Map),Us=v.useRef(new Map),Vs=v.useRef(new Map),nc=v.useRef(new Map),[Ur,jf]=v.useState(null),[Fs,Ws]=v.useState([]),[Nf,wf]=v.useState([]),[_f,kf]=v.useState([]),[Sf,Ef]=v.useState(""),[gx,vx]=v.useState(null),[yx,xx]=v.useState([]),[jx,Nx]=v.useState(null),[mn,sc]=v.useState({name:"",template_id:"",scheduled_for:""}),[gn,rc]=v.useState({status:"",tag:"",assigned_user_id:"",verified_only:!1}),[ac,Hs]=v.useState([]),[vt,ic]=v.useState({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),[Vr,yi]=v.useState(null),[Cf,bf]=v.useState([]),[Tf,Lf]=v.useState([]),[st,lc]=v.useState({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),[Je,oc]=v.useState({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),[cc,Af]=v.useState({id:"",name:"",language:"es",category:"",body_preview:"",is_active:!0}),[Rf,Pf]=v.useState([]),en=v.useCallback((d,E={})=>{if(typeof window>"u")return;const A=d||"/";if(window.location.pathname===A){O(A);return}E.replace?window.history.replaceState({},"",A):window.history.pushState({},"",A),O(A)},[]),Of=v.useMemo(()=>Fs.find(d=>d.id===mn.template_id),[Fs,mn.template_id]),Df=v.useMemo(()=>{const d=[...ve].reverse().find(E=>E.type==="note");return(d==null?void 0:d.text)||""},[ve]),Mf=v.useMemo(()=>ve.filter(d=>d.type==="note"),[ve]);v.useEffect(()=>{if(typeof window>"u")return;const d=()=>{O(window.location.pathname||"/")};return window.addEventListener("popstate",d),()=>window.removeEventListener("popstate",d)},[]),v.useEffect(()=>{ls(e||null)},[e]),v.useEffect(()=>{document.body.dataset.theme=C,localStorage.setItem("theme",C)},[C]),v.useEffect(()=>{W(!1),Ee(!0),requestAnimationFrame(()=>{Hr()}),M&&xi(M)},[M==null?void 0:M.id]),v.useEffect(()=>{k==="chats"&&(W(!1),Ee(!0),requestAnimationFrame(()=>{Hr()}))},[k,M==null?void 0:M.id]),v.useEffect(()=>{M&&(se?Hr():W(!0))},[ve,M==null?void 0:M.id,se]),v.useEffect(()=>{k!=="chats"&&Ee(!1)},[k]),v.useEffect(()=>{if(!e)return;let d=!0;return he("/api/me").then(E=>{d&&i(E.user)}).catch(()=>{d&&(t(""),i(null))}),()=>{d=!1}},[e]),v.useEffect(()=>{if(!a||a.role==="superadmin"){o(null),p([]),Fu(null);return}let d=!0;return he("/api/branding").then(E=>{d&&o(E.branding||null)}).catch(()=>{d&&o(null)}),he("/api/tenant").then(E=>{d&&h(E.tenant||null)}).catch(()=>{d&&h(null)}),he("/api/channels").then(E=>{d&&p(E.channels||[])}).catch(()=>{d&&p([])}),()=>{d=!1}},[a]),v.useEffect(()=>{Fu(l)},[l]),v.useEffect(()=>{if(a){if(a.role==="superadmin"){We||en("/superadmin",{replace:!0});return}We&&en("/",{replace:!0})}},[a,We,en]),v.useEffect(()=>{a&&a.role!=="superadmin"&&(If(),Fr())},[a]),v.useEffect(()=>{a&&a.role!=="superadmin"&&Bf()},[a]),v.useEffect(()=>{!a||k!=="chats"||a.role!=="superadmin"&&zf()},[a,k,Oe]),v.useEffect(()=>{a&&a.role!=="superadmin"&&(k==="dashboard"&&dc(),k==="campaigns"&&(as(),qr()))},[a,k]),v.useEffect(()=>{if(!a||k!=="admin")return;const d=(V==null?void 0:V[a.role])||an[a.role],E=rt(d,"settings","users"),A=rt(d,"settings","bot"),$=rt(d,"settings","general"),me=rt(d,"settings","templates"),tn=rt(d,"settings","audit");Z==="users"&&E&&qs(),Z==="bot"&&A&&cp(),Z==="general"&&$&&vn(),Z==="templates"&&me&&as(),Z==="audit"&&tn&&_p()},[a,k,Z,V]),v.useEffect(()=>{if(!a||k!=="admin")return;const d=(V==null?void 0:V[a.role])||an[a.role],A=["general","users","bot","templates","audit","odoo"].filter($=>rt(d,"settings",$));if(!A.length){P(result.user.role==="superadmin"?"superadmin":"chats");return}A.includes(Z)||T(A[0])},[a,k,Z,V]),v.useEffect(()=>{if(!e||(a==null?void 0:a.role)==="superadmin")return;const d=oy(e),E={current:null},A=["/sounds/new-notification-09-352705.wav","/sounds/new-notification-09-352705.mp3"],$=()=>{if(E.current)return E.current;const ne=new Audio(A[0]);ne.volume=1;let ce=0;return ne.addEventListener("error",()=>{ce+=1,ce<A.length&&(ne.src=A[ce],ne.load())}),E.current=ne,ne},me=()=>{const ne=$();ne.play().then(()=>{ne.pause(),ne.currentTime=0}).catch(()=>{})};window.addEventListener("click",me,{once:!0}),window.addEventListener("touchstart",me,{once:!0});const tn=()=>{if(!(typeof window>"u"))try{const ne=$();ne.currentTime=0,ne.play().catch(()=>{})}catch{}};return d.on("conversation:update",({conversation:ne})=>{const ce=nc.current.get(ne.id);nc.current.set(ne.id,ne.status),ne.status==="pending"&&!ne.assigned_user_id&&ce!=="pending"&&(tn(),J({message:"Nueva conversacin pendiente"})),_(kt=>{const dt=kt.map(nn=>nn.id===ne.id?{...nn,...ne}:nn);return dt.find(nn=>nn.id===ne.id)||dt.push(ne),Zi(dt)}),ie(kt=>(kt==null?void 0:kt.id)===ne.id?{...kt,...ne}:kt)}),d.on("message:new",({conversation:ne,message:ce})=>{ne.status==="pending"&&!ne.assigned_user_id&&tn();const kt={...ne,last_message_text:(ce==null?void 0:ce.text)||null,last_message_type:(ce==null?void 0:ce.type)||null,last_message_direction:(ce==null?void 0:ce.direction)||null,last_message_at:(ce==null?void 0:ce.created_at)||ne.last_message_at};_(dt=>{const nn=dt.map(Gs=>Gs.id===ne.id?{...Gs,...kt}:Gs);return nn.find(Gs=>Gs.id===ne.id)||nn.push(kt),Zi(nn)}),ie(dt=>(dt==null?void 0:dt.id)===ne.id?{...dt,...kt}:dt),He(dt=>!M||M.id!==ne.id?dt:(xi(kt),[...dt,ce]))}),()=>{d.disconnect()}},[e,M]),v.useEffect(()=>{if(!a)return;if(a.role==="superadmin"){k!=="superadmin"&&P("superadmin");return}const d=(V==null?void 0:V[a.role])||an[a.role],E=rt(d,"modules","chat"),A=rt(d,"modules","dashboard"),$=rt(d,"modules","campaigns"),me=rt(d,"modules","settings");k==="chats"&&!E&&P(A?"dashboard":$?"campaigns":"admin"),k==="dashboard"&&!A&&P(E?"chats":$?"campaigns":"admin"),k==="campaigns"&&!$&&P(E?"chats":A?"dashboard":"admin"),k==="admin"&&!me&&P(E?"chats":A?"dashboard":"campaigns")},[a,k,V]),v.useEffect(()=>{if(!a||a.role!=="admin"||!ue||!ge||Ve)return;const d=setTimeout(()=>{const E=G.current;Fe(!0),Be("/api/admin/role-permissions",{permissions:V}).then(()=>{G.current===E&&Ue(!1)}).catch(A=>{te(K(A))}).finally(()=>{Fe(!1)})},350);return()=>clearTimeout(d)},[a,V,ge,ue,Ve]);async function If(){try{const d=await he("/api/users");R(d.users||[])}catch(d){te(K(d))}}async function Bf(){try{const d=await he("/api/role-permissions"),E=Ji(d.permissions||null);G.current=0,ae(E),Ue(!1),de(!0)}catch(d){te(K(d)),de(!0)}}async function Fr(){try{const d=await he("/api/tags");Ft(d.tags||[])}catch(d){te(K(d))}}async function zf(){try{const d=ex(Oe),E=await he(`/api/conversations${d}`);_(Zi(E.conversations||[]))}catch(d){te(K(d))}}async function $f(d){ut(!0);try{const E=await he(`/api/conversations/${d}`);let A=E.conversation;const $=E.messages||[];if((A==null?void 0:A.status)==="pending"&&!A.assigned_user_id&&(a!=null&&a.id))try{A=(await Be(`/api/conversations/${d}/assign`,{})).conversation}catch(me){String(K(me)).includes("already_assigned")&&J({type:"error",message:"Conversacin tomada por otro operador"})}ie(A),He($),xi(A)}catch(E){te(K(E))}finally{ut(!1)}}async function Uf(d){d.preventDefault(),g("");try{const E=await be("/api/auth/login",{email:w.email,password:w.password});t(E.token),ls(E.token),i(E.user),r(""),localStorage.removeItem("superadmin_token");const A=E.user.role==="superadmin";P(A?"superadmin":"chats"),A?en("/superadmin",{replace:!0}):We&&en("/",{replace:!0})}catch{g("Credenciales invalidas")}}function Wr(){t(""),ls(null),i(null),_([]),ie(null),He([]),P("chats"),_e(!1),ae(Ji(null)),de(!1),Ue(!1),Fe(!1),G.current=0,r(""),localStorage.removeItem("superadmin_token"),en("/",{replace:!0})}async function uc(d){const E=await be(`/api/superadmin/tenants/${d}/impersonate`);!n&&e&&(localStorage.setItem("superadmin_token",e),r(e)),t(E.token),ls(E.token),i(E.user),P("chats"),en("/",{replace:!0})}function Vf(){const d=n||(typeof window<"u"?localStorage.getItem("superadmin_token"):"");if(!d){Wr();return}localStorage.removeItem("superadmin_token"),r(""),t(d),ls(d),i(null),P("chats"),en("/superadmin",{replace:!0})}function Ff(d){ae(E=>typeof d=="function"?d(E):d),G.current+=1,Ue(!0)}function Wf(){I(d=>d==="light"?"dark":"light")}function Hr(){const d=H.current;d&&(d.scrollTop=d.scrollHeight,Ee(!0),W(!1))}function xi(d){!(d!=null&&d.id)||!(d!=null&&d.last_message_at)||b(E=>{const A={...E,[d.id]:d.last_message_at};return localStorage.setItem("last_read_map",JSON.stringify(A)),A})}function Hf(){const d=H.current;if(!d)return;const A=d.scrollHeight-d.scrollTop-d.clientHeight<24;Ee(A),A&&W(!1)}function qf(){ie(null),He([])}function Qf(d){var E;zn(d),(E=S.current)==null||E.focus()}async function Gf(d){if(d.preventDefault(),!M||!Vt.trim())return;const E=Vt.trim();zn("");try{await be(`/api/conversations/${M.id}/messages`,{text:E,type:ss})}catch(A){te(K(A))}}async function Yf(d){if(d.preventDefault(),!M||!Un.trim())return;const E=Un.trim();Jt("");try{const A=await be(`/api/conversations/${M.id}/messages`,{text:E,type:"note"});A!=null&&A.message&&He($=>[...$,A.message]),A!=null&&A.conversation&&ie(A.conversation)}catch(A){te(K(A))}}async function Kf(){if(M)try{const d=await Be(`/api/conversations/${M.id}/assign`);ie(d.conversation)}catch(d){const E=K(d)||"No se pudo tomar la conversacion";J({type:"error",message:E})}}async function Xf(){if(!(!M||!N))try{const d=await Be(`/api/conversations/${M.id}/assign`,{user_id:N});ie(d.conversation),z(""),J({message:"Conversacin reasignada"})}catch(d){const E=K(d)||"No se pudo reasignar";J({type:"error",message:E})}}async function Jf(d){if(M)try{const E=await Be(`/api/conversations/${M.id}/status`,{status:d});ie(E.conversation)}catch(E){te(K(E))}}async function Zf(d){var A;if(!M)return;const E=((A=M.tags)==null?void 0:A.some($=>$.name===d))||!1;if(E){const $=`${M.id}:${d}`;if(Vs.current.has($))return;const me=M,tn={...M,tags:(M.tags||[]).filter(ce=>ce.name!==d)};ie(tn);const ne=setTimeout(async()=>{try{const ce=await be(`/api/conversations/${me.id}/tags`,{add:[],remove:[d]});(M==null?void 0:M.id)===me.id&&ie(ce.conversation)}catch(ce){(M==null?void 0:M.id)===me.id&&ie(me),J({type:"error",message:K(ce)||"No se pudo eliminar el tag"})}finally{Vs.current.delete($)}},8e3);Vs.current.set($,{timer:ne,snapshot:me}),J({message:"Tag eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const ce=Vs.current.get($);ce!=null&&ce.timer&&clearTimeout(ce.timer),ce!=null&&ce.snapshot?ie(ce.snapshot):ie(me),Vs.current.delete($),J({message:"Eliminacin cancelada"})}});return}try{const $=await be(`/api/conversations/${M.id}/tags`,{add:E?[]:[d],remove:E?[d]:[]});ie($.conversation)}catch($){te(K($))}}async function ep(d){if(d.preventDefault(),!Ne.trim()||!M)return;const E=Ne.trim();Bs("");try{const A=await be(`/api/conversations/${M.id}/tags`,{add:[E]});ie(A.conversation),await Fr()}catch(A){te(K(A))}}async function tp(d){d.preventDefault();const E=xe.name.trim();if(!E){te("Completa el nombre de la etiqueta");return}try{await be("/api/tags",{name:E,color:xe.color||null}),Wt({name:"",color:"#6b7280"}),await Fr(),J({message:"Etiqueta creada"})}catch(A){te(K(A))}}async function np(d,E){if(d)try{await Wn(`/api/tags/${d}`),ie(A=>A&&{...A,tags:(A.tags||[]).filter($=>$.name!==E)}),await Fr(),J({message:"Etiqueta eliminada"})}catch(A){te(K(A))}}async function dc(){try{const d=await he("/api/dashboard/metrics");jf(d)}catch(d){te(K(d))}}async function as(){try{const d=await he("/api/templates").catch(()=>he("/api/admin/templates"));Ws(d.templates||[])}catch(d){te(K(d))}}async function qr(){try{const d=await he("/api/admin/campaigns");wf(d.campaigns||[])}catch(d){te(K(d))}}async function sp(d){Ef(d);try{const E=await he(`/api/admin/campaigns/${d}/messages`);kf(E.messages||[])}catch(E){te(K(E))}}async function rp(d){if(d.preventDefault(),!mn.name.trim()||!mn.template_id){te("Completa el nombre y plantilla");return}const E={};gn.status&&(E.status=gn.status),gn.tag&&(E.tag=gn.tag.trim()),gn.assigned_user_id&&(E.assigned_user_id=gn.assigned_user_id),gn.verified_only&&(E.verified_only=!0);try{await be("/api/admin/campaigns",{name:mn.name.trim(),template_id:mn.template_id,audience_filter:E,scheduled_for:mn.scheduled_for||null}),sc({name:"",template_id:"",scheduled_for:""}),rc({status:"",tag:"",assigned_user_id:"",verified_only:!1}),await qr(),J({message:"Campaa creada correctamente"})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al crear campaa"})}}async function ap(d){try{await be(`/api/admin/campaigns/${d}/send`,{}),await qr()}catch(E){te(K(E))}}async function ip(){try{await he("/api/templates/sync"),await as()}catch(d){te(K(d))}}async function qs(){try{const d=await he("/api/admin/users");Hs(d.users||[])}catch(d){te(K(d))}}async function lp(d){if(d.preventDefault(),!vt.name.trim()||!vt.role){te("Completa los campos requeridos");return}try{vt.id?(await Be(`/api/admin/users/${vt.id}`,{name:vt.name.trim(),role:vt.role,is_active:vt.is_active,password:vt.password||void 0}),J({message:"Usuario actualizado correctamente"})):(await be("/api/admin/users",{name:vt.name.trim(),email:vt.email.trim().toLowerCase(),role:vt.role,password:vt.password}),J({message:"Usuario creado correctamente"})),ic({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),await qs()}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al guardar usuario"})}}async function op(d){if(!d||zs.current.has(d))return;let E=null;try{E=ac.slice(),Hs($=>$.filter(me=>me.id!==d));const A=setTimeout(async()=>{try{await Wn(`/api/admin/users/${d}`),await qs(),J({message:"Usuario eliminado definitivamente"})}catch($){E?Hs(E):await qs(),J({type:"error",message:K($)||"No se pudo eliminar el usuario"})}finally{zs.current.delete(d)}},8e3);zs.current.set(d,{timer:A,snapshot:E}),J({message:"Usuario eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const $=zs.current.get(d);$!=null&&$.timer&&clearTimeout($.timer),$!=null&&$.snapshot?Hs($.snapshot):E?Hs(E):await qs(),zs.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al eliminar usuario"})}}async function cp(){try{const d=await he("/api/admin/settings");yi(d.settings)}catch(d){te(K(d))}}async function up(){if(Vr)try{const d=await Be("/api/admin/settings",{bot_enabled:Vr.bot_enabled,auto_reply_enabled:Vr.auto_reply_enabled});yi(d.settings)}catch(d){te(K(d))}}async function vn(){try{const[d,E]=await Promise.all([he("/api/admin/branches"),he("/api/admin/services")]);bf(d.branches||[]),Lf(E.services||[])}catch(d){te(K(d))}}async function dp(){try{const d=await he("/api/channels");p(d.channels||[])}catch{p([])}}function hp(d){L({id:d.id,display_name:d.display_name||""})}async function fp(d){if(d.preventDefault(),!!y.id)try{await Be(`/api/channels/${y.id}`,{display_name:y.display_name.trim()}),L({id:"",display_name:""}),await dp(),J({message:"Canal actualizado correctamente"})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al guardar canal"})}}async function pp(d){const E=V==null?void 0:V[d];if(!(!d||$s.current.has(d)))try{ae($=>{const me={...$};return delete me[d],me});const A=setTimeout(async()=>{try{await Wn(`/api/admin/role-permissions/${d}`),J({message:"Rol eliminado definitivamente"})}catch($){E&&ae(me=>({...me,[d]:E})),J({type:"error",message:K($)||"No se pudo eliminar el rol"})}finally{$s.current.delete(d)}},8e3);$s.current.set(d,{timer:A,currentPermissions:E}),J({message:"Rol eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const $=$s.current.get(d);$!=null&&$.timer&&clearTimeout($.timer),$!=null&&$.currentPermissions&&ae(me=>({...me,[d]:$.currentPermissions})),$s.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al eliminar rol"})}}async function mp(d){if(d.preventDefault(),!st.code.trim()||!st.name.trim()){te("Completa codigo y nombre");return}const E={code:st.code.trim(),name:st.name.trim(),address:st.address.trim(),lat:st.lat!==""?Number(st.lat):0,lng:st.lng!==""?Number(st.lng):0,hours_text:st.hours_text.trim(),phone:st.phone.trim()||null,is_active:st.is_active};try{st.id?(await Be(`/api/admin/branches/${st.id}`,E),J({message:"Sucursal actualizada correctamente"})):(await be("/api/admin/branches",E),J({message:"Sucursal creada correctamente"})),lc({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),await vn()}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al guardar sucursal"})}}async function gp(d){try{await Wn(`/api/admin/branches/${d}`),await vn(),J({message:"Sucursal eliminada correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await Be(`/api/admin/branches/${d}`,{is_active:!0}),await vn(),J({message:"Sucursal restaurada"})}catch(E){J({type:"error",message:K(E)||"No se pudo restaurar la sucursal"})}}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar sucursal"})}}async function vp(d){if(d.preventDefault(),!Je.code.trim()||!Je.name.trim()){te("Completa codigo y nombre");return}const E={code:Je.code.trim(),name:Je.name.trim(),subtitle:Je.subtitle.trim()||null,description:Je.description.trim(),price_bob:Je.price_bob?Number(Je.price_bob):0,duration_min:Je.duration_min?Number(Je.duration_min):null,image_url:Je.image_url.trim()||null,is_featured:Je.is_featured,is_active:Je.is_active};try{Je.id?(await Be(`/api/admin/services/${Je.id}`,E),J({message:"Servicio actualizado correctamente"})):(await be("/api/admin/services",E),J({message:"Servicio creado correctamente"})),oc({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),await vn()}catch(A){te(K(A)),J({type:"error",message:K(A)||"Error al guardar servicio"})}}async function yp(d){try{await Wn(`/api/admin/services/${d}`),await vn(),J({message:"Servicio eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await Be(`/api/admin/services/${d}`,{is_active:!0}),await vn(),J({message:"Servicio restaurado"})}catch(E){J({type:"error",message:K(E)||"No se pudo restaurar el servicio"})}}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar servicio"})}}async function xp(d,E,A){if(d)try{await be(`/api/admin/services/${d.id}/branches`,{branch_id:E,is_available:A}),await vn()}catch($){te(K($))}}async function jp(d,E){d!=null&&d.preventDefault&&d.preventDefault();const A=E||cc||{},$=typeof A.name=="string"?A.name.trim():"";if(!$)return te("Completa el nombre"),null;const me={name:$,category:A.category||"UTILITY",language:A.language||"es",body_text:A.body_text||A.body_preview||"",header_type:A.header_type||null,header_content:A.header_content||null,footer_text:A.footer_text||null,buttons:A.buttons||A.buttons_json||[]},tn=A.variable_mappings||A.variableMappings||[];try{let ne=null;return A.id?(ne=await ku(`/api/templates/${A.id}`,me),await ku(`/api/templates/${A.id}/mappings`,{mappings:tn}),J({message:"Borrador actualizado correctamente"})):(ne=await be("/api/templates/draft",{...me,variable_mappings:tn}),J({message:"Borrador creado correctamente"})),await as(),(ne==null?void 0:ne.template)||null}catch(ne){return te(K(ne)),J({type:"error",message:K(ne)||"Error al guardar plantilla"}),null}}async function Np(d){if(d)try{await be(`/api/templates/${d}/submit`,{}),await as(),J({message:"Plantilla enviada a revisin de Meta"})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al enviar a Meta"})}}async function wp(d){if(d&&!Us.current.has(d))try{const E=Fs.slice();Ws($=>$.filter(me=>me.id!==d));const A=setTimeout(async()=>{try{await Wn(`/api/templates/${d}`),await as(),J({message:"Plantilla eliminada definitivamente"})}catch($){Ws(E),J({type:"error",message:K($)||"No se pudo eliminar la plantilla"})}finally{Us.current.delete(d)}},8e3);Us.current.set(d,{timer:A,snapshot:E}),J({message:"Plantilla eliminada. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const $=Us.current.get(d);$!=null&&$.timer&&clearTimeout($.timer),$!=null&&$.snapshot?Ws($.snapshot):Ws(E),Us.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(E){te(K(E)),J({type:"error",message:K(E)||"Error al eliminar plantilla"})}}async function _p(){try{const d=await he("/api/admin/audit?limit=200");Pf(d.logs||[])}catch(d){te(K(d))}}const hc={open:0,pending:0,closed:0};((Ur==null?void 0:Ur.status_counts)||[]).forEach(d=>{hc[d.status]=d._count.status});const kp=We?"Acceso al control plane":"Acceso a bandeja multiusuario";if(!e||!a)return s.jsx("div",{className:"login-shell",children:s.jsxs("div",{className:"login-card",children:[s.jsx("div",{className:"login-title",children:"Perzivalh"}),s.jsx("div",{className:"login-subtitle",children:kp}),s.jsxs("form",{className:"login-form",onSubmit:Uf,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:w.email,onChange:d=>u(E=>({...E,email:d.target.value})),required:!0})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Password"}),s.jsx("input",{type:"password",value:w.password,onChange:d=>u(E=>({...E,password:d.target.value})),required:!0})]}),f?s.jsx("div",{className:"error",children:f}):null,s.jsx("button",{className:"primary",type:"submit",children:"Entrar"})]})]})});if((a==null?void 0:a.role)==="superadmin"&&We)return s.jsx("main",{className:"superadmin-page",children:s.jsx(Bu,{route:j,onNavigate:en,onImpersonateTenant:uc,onLogout:Wr})});const Qs=(V==null?void 0:V[a.role])||an[a.role],Sp=rt(Qs,"modules","chat"),Ep=rt(Qs,"modules","dashboard"),Cp=rt(Qs,"modules","campaigns"),bp=rt(Qs,"modules","settings"),Tp=Zy(a,["admin"]),Lp=rt(Qs,"modules","chat","write"),Ap=["Confirmar Cita","Solicitar Resultados","Urgencia"],fc={open:"Bot activo",pending:"Pendiente",assigned:"Tomada"},Rp=M?M.display_name||M.phone_e164||M.wa_id:"Selecciona un chat",Pp=(M==null?void 0:M.phone_e164)||(M==null?void 0:M.wa_id)||"",Op=M?fc[M.status]||"Sin estado":"",Dp=[{id:"chats",label:"Chats",icon:nx,enabled:Sp},{id:"dashboard",label:"Dashboard",icon:sx,enabled:Ep},{id:"campaigns",label:"Campanas",icon:rx,enabled:Cp},{id:"admin",label:"Configuraciones",icon:ax,enabled:bp}],ji=[];let pc="";ve.forEach(d=>{const E=d.created_at,A=E?new Date(E):null,$=A&&!Number.isNaN(A.getTime())?`${A.getFullYear()}-${A.getMonth()}-${A.getDate()}`:"";$&&$!==pc&&(ji.push(s.jsx("div",{className:"day-pill",children:Jy(E)},`day-${$}`)),pc=$),ji.push(s.jsxs("div",{className:`message ${d.direction} ${d.type==="note"?"note":""}`,children:[s.jsx("div",{className:"message-text",children:d.text||`[${d.type}]`}),s.jsx("div",{className:"message-meta",children:Xi(d.created_at)})]},d.id))});const Mp=!!n&&a.role!=="superadmin";return s.jsxs("div",{className:`app-shell ${k==="admin"?"admin-shell":""}`,children:[s.jsx(dy,{navItems:Dp,view:k,onSetView:P,theme:C,onToggleTheme:Wf,user:a,logoUrl:(l==null?void 0:l.logo_url)||"",brandName:(l==null?void 0:l.brand_name)||"",isProfileOpen:je,onToggleProfile:()=>_e(d=>!d),onLogout:Wr,onReturnToSuperadmin:Vf,showReturnToSuperadmin:Mp,getInitial:Uu,SunIcon:ix,MoonIcon:lx}),k==="admin"?s.jsx(Dy,{settingsSection:Z,setSettingsSection:T,settingsTab:X,setSettingsTab:Q,rolePermissions:V,setRolePermissions:Ff,defaultRolePermissions:an,currentRole:a.role,isAdmin:Tp,adminUsers:ac,userForm:vt,setUserForm:ic,roleOptions:ct,handleUserSubmit:lp,handleUserDelete:op,settings:Vr,setSettings:yi,handleSaveSettings:up,planName:(c==null?void 0:c.plan)||"",branches:Cf,services:Tf,branchForm:st,setBranchForm:lc,handleBranchSubmit:mp,handleBranchDisable:gp,serviceForm:Je,setServiceForm:oc,handleServiceSubmit:vp,handleServiceDisable:yp,handleServiceBranchToggle:xp,tenantChannels:x,channelForm:y,setChannelForm:L,handleChannelSelect:hp,handleChannelSubmit:fp,handleRoleDelete:pp,templates:Fs,templateForm:cc,setTemplateForm:Af,handleTemplateSubmit:jp,handleTemplateSubmitToMeta:Np,handleTemplateDelete:wp,handleSyncTemplates:ip,auditLogs:Rf,formatDate:Xi,useShellLayout:!0,pageError:Zt}):k==="superadmin"?s.jsx("main",{className:"content content-page",children:s.jsx(Bu,{onImpersonateTenant:uc,onLogout:Wr})}):s.jsxs("main",{className:`content ${k==="chats"?"content-chats":"content-page"}`,children:[k==="chats"&&s.jsx(hy,{activeConversation:M,conversations:Ut,channels:x,brandName:(l==null?void 0:l.brand_name)||"",lastReadMap:m,filters:Oe,showFilters:U,users:rs,tags:$n,statusOptions:zu,statusLabels:fc,formatListTime:Xy,formatCompactDate:Ky,messageBlocks:ji,messageDraft:Vt,messageMode:ss,quickActions:Ap,tagInput:Ne,noteInput:Un,notesList:Mf,latestNote:Df,loadingConversation:qe,isInfoOpen:le,hasUnread:B,activeName:Rp,activePhone:Pp,activeStatusLabel:Op,canManageStatus:Lp,currentUser:a,messageInputRef:S,chatBodyRef:H,setShowFilters:Y,setFilters:Ie,loadConversation:$f,handleBackToList:qf,setIsInfoOpen:pe,handleChatScroll:Hf,handleAssignSelf:Kf,handleStatusChange:Jf,handleToggleTag:Zf,handleAddTag:ep,setNoteInput:Jt,handleAddNote:Yf,reassignUserId:N,setReassignUserId:z,handleReassignConversation:Xf,handleOpenTagManager:()=>ee(!0),handleCloseTagManager:()=>ee(!1),showTagManager:q,tagManagerForm:xe,setTagManagerForm:Wt,handleCreateTag:tp,handleDeleteTag:np,handleQuickAction:Qf,handleSendMessage:Gf,setMessageMode:Is,setMessageDraft:zn,scrollChatToBottom:Hr,getInitial:Uu,PlusIcon:cx,SearchIcon:ox,VideoIcon:ux,PhoneIcon:dx,InfoIcon:hx,SendIcon:fx}),k==="dashboard"&&s.jsx(my,{statusCounts:hc,metrics:Ur,onRefresh:dc}),k==="campaigns"&&s.jsx(vy,{campaignForm:mn,setCampaignForm:sc,campaignFilter:gn,setCampaignFilter:rc,templates:Fs,campaigns:Nf,selectedCampaignId:Sf,campaignMessages:_f,users:rs,tags:$n,selectedTemplate:Of,statusOptions:zu,onCreateCampaign:rp,onLoadCampaigns:qr,onLoadCampaignMessages:sp,onSendCampaign:ap,formatDate:Xi}),Zt&&s.jsx("div",{className:"error-banner",children:Zt})]})]})}const mx=nf(document.getElementById("root"));mx.render(s.jsx(cy,{children:s.jsx(px,{})}));
