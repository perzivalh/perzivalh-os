(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Hh={exports:{}},Fl={},qh={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ai=Symbol.for("react.element"),bm=Symbol.for("react.portal"),Cm=Symbol.for("react.fragment"),Em=Symbol.for("react.strict_mode"),Am=Symbol.for("react.profiler"),Tm=Symbol.for("react.provider"),Lm=Symbol.for("react.context"),Rm=Symbol.for("react.forward_ref"),Om=Symbol.for("react.suspense"),Pm=Symbol.for("react.memo"),Mm=Symbol.for("react.lazy"),pd=Symbol.iterator;function Im(e){return e===null||typeof e!="object"?null:(e=pd&&e[pd]||e["@@iterator"],typeof e=="function"?e:null)}var Gh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qh=Object.assign,Kh={};function ta(e,t,n){this.props=e,this.context=t,this.refs=Kh,this.updater=n||Gh}ta.prototype.isReactComponent={};ta.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ta.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yh(){}Yh.prototype=ta.prototype;function hu(e,t,n){this.props=e,this.context=t,this.refs=Kh,this.updater=n||Gh}var fu=hu.prototype=new Yh;fu.constructor=hu;Qh(fu,ta.prototype);fu.isPureReactComponent=!0;var md=Array.isArray,Xh=Object.prototype.hasOwnProperty,pu={current:null},Jh={key:!0,ref:!0,__self:!0,__source:!0};function Zh(e,t,n){var r,a={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Xh.call(t,r)&&!Jh.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var u=Array(c),m=0;m<c;m++)u[m]=arguments[m+2];a.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)a[r]===void 0&&(a[r]=c[r]);return{$$typeof:ai,type:e,key:i,ref:l,props:a,_owner:pu.current}}function Dm(e,t){return{$$typeof:ai,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ai}function Bm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var gd=/\/+/g;function Po(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bm(""+e.key):t.toString(36)}function tl(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ai:case bm:l=!0}}if(l)return l=e,a=a(l),e=r===""?"."+Po(l,0):r,md(a)?(n="",e!=null&&(n=e.replace(gd,"$&/")+"/"),tl(a,t,n,"",function(m){return m})):a!=null&&(mu(a)&&(a=Dm(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(gd,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=r===""?".":r+":",md(e))for(var c=0;c<e.length;c++){i=e[c];var u=r+Po(i,c);l+=tl(i,t,n,u,a)}else if(u=Im(e),typeof u=="function")for(e=u.call(e),c=0;!(i=e.next()).done;)i=i.value,u=r+Po(i,c++),l+=tl(i,t,n,u,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Pi(e,t,n){if(e==null)return e;var r=[],a=0;return tl(e,r,"","",function(i){return t.call(n,i,a++)}),r}function zm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pt={current:null},nl={transition:null},$m={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:nl,ReactCurrentOwner:pu};function ef(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Pi,forEach:function(e,t,n){Pi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Pi(e,function(){t++}),t},toArray:function(e){return Pi(e,function(t){return t})||[]},only:function(e){if(!mu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=ta;je.Fragment=Cm;je.Profiler=Am;je.PureComponent=hu;je.StrictMode=Em;je.Suspense=Om;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$m;je.act=ef;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qh({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=pu.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)Xh.call(t,u)&&!Jh.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var m=0;m<u;m++)c[m]=arguments[m+2];r.children=c}return{$$typeof:ai,type:e.type,key:a,ref:i,props:r,_owner:l}};je.createContext=function(e){return e={$$typeof:Lm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Tm,_context:e},e.Consumer=e};je.createElement=Zh;je.createFactory=function(e){var t=Zh.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:Rm,render:e}};je.isValidElement=mu;je.lazy=function(e){return{$$typeof:Mm,_payload:{_status:-1,_result:e},_init:zm}};je.memo=function(e,t){return{$$typeof:Pm,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=nl.transition;nl.transition={};try{e()}finally{nl.transition=t}};je.unstable_act=ef;je.useCallback=function(e,t){return Pt.current.useCallback(e,t)};je.useContext=function(e){return Pt.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return Pt.current.useDeferredValue(e)};je.useEffect=function(e,t){return Pt.current.useEffect(e,t)};je.useId=function(){return Pt.current.useId()};je.useImperativeHandle=function(e,t,n){return Pt.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return Pt.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return Pt.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return Pt.current.useMemo(e,t)};je.useReducer=function(e,t,n){return Pt.current.useReducer(e,t,n)};je.useRef=function(e){return Pt.current.useRef(e)};je.useState=function(e){return Pt.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return Pt.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return Pt.current.useTransition()};je.version="18.3.1";qh.exports=je;var h=qh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=h,Vm=Symbol.for("react.element"),Fm=Symbol.for("react.fragment"),Wm=Object.prototype.hasOwnProperty,Hm=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qm={key:!0,ref:!0,__self:!0,__source:!0};function tf(e,t,n){var r,a={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Wm.call(t,r)&&!qm.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Vm,type:e,key:i,ref:l,props:a,_owner:Hm.current}}Fl.Fragment=Fm;Fl.jsx=tf;Fl.jsxs=tf;Hh.exports=Fl;var s=Hh.exports,nf={exports:{}},Xt={},sf={exports:{}},rf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,te){var Z=W.length;W.push(te);e:for(;0<Z;){var de=Z-1>>>1,ce=W[de];if(0<a(ce,te))W[de]=te,W[Z]=ce,Z=de;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var te=W[0],Z=W.pop();if(Z!==te){W[0]=Z;e:for(var de=0,ce=W.length,Le=ce>>>1;de<Le;){var T=2*(de+1)-1,q=W[T],b=T+1,U=W[b];if(0>a(q,Z))b<ce&&0>a(U,q)?(W[de]=U,W[b]=Z,de=b):(W[de]=q,W[T]=Z,de=T);else if(b<ce&&0>a(U,Z))W[de]=U,W[b]=Z,de=b;else break e}}return te}function a(W,te){var Z=W.sortIndex-te.sortIndex;return Z!==0?Z:W.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var u=[],m=[],S=1,v=null,y=3,E=!1,R=!1,I=!1,g=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var te=n(m);te!==null;){if(te.callback===null)r(m);else if(te.startTime<=W)r(m),te.sortIndex=te.expirationTime,t(u,te);else break;te=n(m)}}function k(W){if(I=!1,x(W),!R)if(n(u)!==null)R=!0,Re(M);else{var te=n(m);te!==null&&Ue(k,te.startTime-W)}}function M(W,te){R=!1,I&&(I=!1,f(w),w=-1),E=!0;var Z=y;try{for(x(te),v=n(u);v!==null&&(!(v.expirationTime>te)||W&&!K());){var de=v.callback;if(typeof de=="function"){v.callback=null,y=v.priorityLevel;var ce=de(v.expirationTime<=te);te=e.unstable_now(),typeof ce=="function"?v.callback=ce:v===n(u)&&r(u),x(te)}else r(u);v=n(u)}if(v!==null)var Le=!0;else{var T=n(m);T!==null&&Ue(k,T.startTime-te),Le=!1}return Le}finally{v=null,y=Z,E=!1}}var $=!1,A=null,w=-1,P=5,O=-1;function K(){return!(e.unstable_now()-O<P)}function oe(){if(A!==null){var W=e.unstable_now();O=W;var te=!0;try{te=A(!0,W)}finally{te?ue():($=!1,A=null)}}else $=!1}var ue;if(typeof p=="function")ue=function(){p(oe)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Ce=_e.port2;_e.port1.onmessage=oe,ue=function(){Ce.postMessage(null)}}else ue=function(){g(oe,0)};function Re(W){A=W,$||($=!0,ue())}function Ue(W,te){w=g(function(){W(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){R||E||(R=!0,Re(M))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(W){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var Z=y;y=te;try{return W()}finally{y=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,te){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Z=y;y=W;try{return te()}finally{y=Z}},e.unstable_scheduleCallback=function(W,te,Z){var de=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?de+Z:de):Z=de,W){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Z+ce,W={id:S++,callback:te,priorityLevel:W,startTime:Z,expirationTime:ce,sortIndex:-1},Z>de?(W.sortIndex=Z,t(m,W),n(u)===null&&W===n(m)&&(I?(f(w),w=-1):I=!0,Ue(k,Z-de))):(W.sortIndex=ce,t(u,W),R||E||(R=!0,Re(M))),W},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(W){var te=y;return function(){var Z=y;y=te;try{return W.apply(this,arguments)}finally{y=Z}}}})(rf);sf.exports=rf;var Gm=sf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm=h,Yt=Gm;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var af=new Set,Va={};function yr(e,t){Qr(e,t),Qr(e+"Capture",t)}function Qr(e,t){for(Va[e]=t,e=0;e<t.length;e++)af.add(t[e])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=Object.prototype.hasOwnProperty,Km=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vd={},xd={};function Ym(e){return hc.call(xd,e)?!0:hc.call(vd,e)?!1:Km.test(e)?xd[e]=!0:(vd[e]=!0,!1)}function Xm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jm(e,t,n,r){if(t===null||typeof t>"u"||Xm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mt(e,t,n,r,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var gu=/[\-:]([a-z])/g;function vu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gu,vu);vt[t]=new Mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gu,vu);vt[t]=new Mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gu,vu);vt[t]=new Mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function xu(e,t,n,r){var a=vt.hasOwnProperty(t)?vt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jm(t,n,a,r)&&(n=null),r||a===null?Ym(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ds=Qm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mi=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Lr=Symbol.for("react.fragment"),yu=Symbol.for("react.strict_mode"),fc=Symbol.for("react.profiler"),lf=Symbol.for("react.provider"),of=Symbol.for("react.context"),ju=Symbol.for("react.forward_ref"),pc=Symbol.for("react.suspense"),mc=Symbol.for("react.suspense_list"),Nu=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),cf=Symbol.for("react.offscreen"),yd=Symbol.iterator;function xa(e){return e===null||typeof e!="object"?null:(e=yd&&e[yd]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,Mo;function Ca(e){if(Mo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mo=t&&t[1]||""}return`
`+Mo+e}var Io=!1;function Do(e,t){if(!e||Io)return"";Io=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var r=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){r=m}e.call(t.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,c=i.length-1;1<=l&&0<=c&&a[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(a[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||a[l]!==i[c]){var u=`
`+a[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=c);break}}}finally{Io=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ca(e):""}function Zm(e){switch(e.tag){case 5:return Ca(e.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 2:case 15:return e=Do(e.type,!1),e;case 11:return e=Do(e.type.render,!1),e;case 1:return e=Do(e.type,!0),e;default:return""}}function gc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lr:return"Fragment";case Tr:return"Portal";case fc:return"Profiler";case yu:return"StrictMode";case pc:return"Suspense";case mc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case of:return(e.displayName||"Context")+".Consumer";case lf:return(e._context.displayName||"Context")+".Provider";case ju:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nu:return t=e.displayName||null,t!==null?t:gc(e.type)||"Memo";case bs:t=e._payload,e=e._init;try{return gc(e(t))}catch{}}return null}function eg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gc(t);case 8:return t===yu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tg(e){var t=uf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ii(e){e._valueTracker||(e._valueTracker=tg(e))}function df(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=uf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vc(e,t){var n=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Us(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hf(e,t){t=t.checked,t!=null&&xu(e,"checked",t,!1)}function xc(e,t){hf(e,t);var n=Us(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yc(e,t.type,n):t.hasOwnProperty("defaultValue")&&yc(e,t.type,Us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yc(e,t,n){(t!=="number"||vl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ea=Array.isArray;function Vr(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Us(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function jc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Ea(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Us(n)}}function ff(e,t){var n=Us(t.value),r=Us(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _d(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Di,mf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Di=Di||document.createElement("div"),Di.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Di.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ng=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(e){ng.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ra[t]=Ra[e]})});function gf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ra.hasOwnProperty(e)&&Ra[e]?(""+t).trim():t+"px"}function vf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=gf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var sg=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wc(e,t){if(t){if(sg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function _c(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sc=null;function wu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kc=null,Fr=null,Wr=null;function Sd(e){if(e=oi(e)){if(typeof kc!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Ql(t),kc(e.stateNode,e.type,t))}}function xf(e){Fr?Wr?Wr.push(e):Wr=[e]:Fr=e}function yf(){if(Fr){var e=Fr,t=Wr;if(Wr=Fr=null,Sd(e),t)for(e=0;e<t.length;e++)Sd(t[e])}}function jf(e,t){return e(t)}function Nf(){}var Bo=!1;function wf(e,t,n){if(Bo)return e(t,n);Bo=!0;try{return jf(e,t,n)}finally{Bo=!1,(Fr!==null||Wr!==null)&&(Nf(),yf())}}function Wa(e,t){var n=e.stateNode;if(n===null)return null;var r=Ql(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var bc=!1;if(ls)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){bc=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{bc=!1}function rg(e,t,n,r,a,i,l,c,u){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(S){this.onError(S)}}var Oa=!1,xl=null,yl=!1,Cc=null,ag={onError:function(e){Oa=!0,xl=e}};function ig(e,t,n,r,a,i,l,c,u){Oa=!1,xl=null,rg.apply(ag,arguments)}function lg(e,t,n,r,a,i,l,c,u){if(ig.apply(this,arguments),Oa){if(Oa){var m=xl;Oa=!1,xl=null}else throw Error(z(198));yl||(yl=!0,Cc=m)}}function jr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kd(e){if(jr(e)!==e)throw Error(z(188))}function og(e){var t=e.alternate;if(!t){if(t=jr(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return kd(a),e;if(i===r)return kd(a),t;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,c=a.child;c;){if(c===n){l=!0,n=a,r=i;break}if(c===r){l=!0,r=a,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,r=a;break}if(c===r){l=!0,r=i,n=a;break}c=c.sibling}if(!l)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function Sf(e){return e=og(e),e!==null?kf(e):null}function kf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kf(e);if(t!==null)return t;e=e.sibling}return null}var bf=Yt.unstable_scheduleCallback,bd=Yt.unstable_cancelCallback,cg=Yt.unstable_shouldYield,ug=Yt.unstable_requestPaint,Ge=Yt.unstable_now,dg=Yt.unstable_getCurrentPriorityLevel,_u=Yt.unstable_ImmediatePriority,Cf=Yt.unstable_UserBlockingPriority,jl=Yt.unstable_NormalPriority,hg=Yt.unstable_LowPriority,Ef=Yt.unstable_IdlePriority,Wl=null,$n=null;function fg(e){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Wl,e,void 0,(e.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:gg,pg=Math.log,mg=Math.LN2;function gg(e){return e>>>=0,e===0?32:31-(pg(e)/mg|0)|0}var Bi=64,zi=4194304;function Aa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~a;c!==0?r=Aa(c):(i&=l,i!==0&&(r=Aa(i)))}else l=n&~a,l!==0?r=Aa(l):i!==0&&(r=Aa(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nn(t),a=1<<n,r|=e[n],t&=~a;return r}function vg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Nn(i),c=1<<l,u=a[l];u===-1?(!(c&n)||c&r)&&(a[l]=vg(c,t)):u<=t&&(e.expiredLanes|=c),i&=~c}}function Ec(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Af(){var e=Bi;return Bi<<=1,!(Bi&4194240)&&(Bi=64),e}function zo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ii(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nn(t),e[t]=n}function yg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Nn(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function Su(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Ae=0;function Tf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lf,ku,Rf,Of,Pf,Ac=!1,$i=[],Rs=null,Os=null,Ps=null,Ha=new Map,qa=new Map,Es=[],jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cd(e,t){switch(e){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Ha.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qa.delete(t.pointerId)}}function ja(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=oi(t),t!==null&&ku(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Ng(e,t,n,r,a){switch(t){case"focusin":return Rs=ja(Rs,e,t,n,r,a),!0;case"dragenter":return Os=ja(Os,e,t,n,r,a),!0;case"mouseover":return Ps=ja(Ps,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Ha.set(i,ja(Ha.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,qa.set(i,ja(qa.get(i)||null,e,t,n,r,a)),!0}return!1}function Mf(e){var t=cr(e.target);if(t!==null){var n=jr(t);if(n!==null){if(t=n.tag,t===13){if(t=_f(n),t!==null){e.blockedOn=t,Pf(e.priority,function(){Rf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Sc=r,n.target.dispatchEvent(r),Sc=null}else return t=oi(n),t!==null&&ku(t),e.blockedOn=n,!1;t.shift()}return!0}function Ed(e,t,n){sl(e)&&n.delete(t)}function wg(){Ac=!1,Rs!==null&&sl(Rs)&&(Rs=null),Os!==null&&sl(Os)&&(Os=null),Ps!==null&&sl(Ps)&&(Ps=null),Ha.forEach(Ed),qa.forEach(Ed)}function Na(e,t){e.blockedOn===t&&(e.blockedOn=null,Ac||(Ac=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,wg)))}function Ga(e){function t(a){return Na(a,e)}if(0<$i.length){Na($i[0],e);for(var n=1;n<$i.length;n++){var r=$i[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Rs!==null&&Na(Rs,e),Os!==null&&Na(Os,e),Ps!==null&&Na(Ps,e),Ha.forEach(t),qa.forEach(t),n=0;n<Es.length;n++)r=Es[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Es.length&&(n=Es[0],n.blockedOn===null);)Mf(n),n.blockedOn===null&&Es.shift()}var Hr=ds.ReactCurrentBatchConfig,wl=!0;function _g(e,t,n,r){var a=Ae,i=Hr.transition;Hr.transition=null;try{Ae=1,bu(e,t,n,r)}finally{Ae=a,Hr.transition=i}}function Sg(e,t,n,r){var a=Ae,i=Hr.transition;Hr.transition=null;try{Ae=4,bu(e,t,n,r)}finally{Ae=a,Hr.transition=i}}function bu(e,t,n,r){if(wl){var a=Tc(e,t,n,r);if(a===null)Ko(e,t,r,_l,n),Cd(e,r);else if(Ng(a,e,t,n,r))r.stopPropagation();else if(Cd(e,r),t&4&&-1<jg.indexOf(e)){for(;a!==null;){var i=oi(a);if(i!==null&&Lf(i),i=Tc(e,t,n,r),i===null&&Ko(e,t,r,_l,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Ko(e,t,r,null,n)}}var _l=null;function Tc(e,t,n,r){if(_l=null,e=wu(r),e=cr(e),e!==null)if(t=jr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_f(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _l=e,null}function If(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dg()){case _u:return 1;case Cf:return 4;case jl:case hg:return 16;case Ef:return 536870912;default:return 16}default:return 16}}var Ts=null,Cu=null,rl=null;function Df(){if(rl)return rl;var e,t=Cu,n=t.length,r,a="value"in Ts?Ts.value:Ts.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===a[i-r];r++);return rl=a.slice(e,1<r?1-r:void 0)}function al(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ui(){return!0}function Ad(){return!1}function Jt(e){function t(n,r,a,i,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ui:Ad,this.isPropagationStopped=Ad,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),t}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eu=Jt(na),li=We({},na,{view:0,detail:0}),kg=Jt(li),$o,Uo,wa,Hl=We({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Au,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wa&&(wa&&e.type==="mousemove"?($o=e.screenX-wa.screenX,Uo=e.screenY-wa.screenY):Uo=$o=0,wa=e),$o)},movementY:function(e){return"movementY"in e?e.movementY:Uo}}),Td=Jt(Hl),bg=We({},Hl,{dataTransfer:0}),Cg=Jt(bg),Eg=We({},li,{relatedTarget:0}),Vo=Jt(Eg),Ag=We({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),Tg=Jt(Ag),Lg=We({},na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rg=Jt(Lg),Og=We({},na,{data:0}),Ld=Jt(Og),Pg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ig[e])?!!t[e]:!1}function Au(){return Dg}var Bg=We({},li,{key:function(e){if(e.key){var t=Pg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=al(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Au,charCode:function(e){return e.type==="keypress"?al(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?al(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zg=Jt(Bg),$g=We({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rd=Jt($g),Ug=We({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Au}),Vg=Jt(Ug),Fg=We({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wg=Jt(Fg),Hg=We({},Hl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qg=Jt(Hg),Gg=[9,13,27,32],Tu=ls&&"CompositionEvent"in window,Pa=null;ls&&"documentMode"in document&&(Pa=document.documentMode);var Qg=ls&&"TextEvent"in window&&!Pa,Bf=ls&&(!Tu||Pa&&8<Pa&&11>=Pa),Od=" ",Pd=!1;function zf(e,t){switch(e){case"keyup":return Gg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $f(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rr=!1;function Kg(e,t){switch(e){case"compositionend":return $f(t);case"keypress":return t.which!==32?null:(Pd=!0,Od);case"textInput":return e=t.data,e===Od&&Pd?null:e;default:return null}}function Yg(e,t){if(Rr)return e==="compositionend"||!Tu&&zf(e,t)?(e=Df(),rl=Cu=Ts=null,Rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bf&&t.locale!=="ko"?null:t.data;default:return null}}var Xg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xg[e.type]:t==="textarea"}function Uf(e,t,n,r){xf(r),t=Sl(t,"onChange"),0<t.length&&(n=new Eu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ma=null,Qa=null;function Jg(e){Jf(e,0)}function ql(e){var t=Mr(e);if(df(t))return e}function Zg(e,t){if(e==="change")return t}var Vf=!1;if(ls){var Fo;if(ls){var Wo="oninput"in document;if(!Wo){var Id=document.createElement("div");Id.setAttribute("oninput","return;"),Wo=typeof Id.oninput=="function"}Fo=Wo}else Fo=!1;Vf=Fo&&(!document.documentMode||9<document.documentMode)}function Dd(){Ma&&(Ma.detachEvent("onpropertychange",Ff),Qa=Ma=null)}function Ff(e){if(e.propertyName==="value"&&ql(Qa)){var t=[];Uf(t,Qa,e,wu(e)),wf(Jg,t)}}function ev(e,t,n){e==="focusin"?(Dd(),Ma=t,Qa=n,Ma.attachEvent("onpropertychange",Ff)):e==="focusout"&&Dd()}function tv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ql(Qa)}function nv(e,t){if(e==="click")return ql(t)}function sv(e,t){if(e==="input"||e==="change")return ql(t)}function rv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _n=typeof Object.is=="function"?Object.is:rv;function Ka(e,t){if(_n(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!hc.call(t,a)||!_n(e[a],t[a]))return!1}return!0}function Bd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zd(e,t){var n=Bd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bd(n)}}function Wf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hf(){for(var e=window,t=vl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vl(e.document)}return t}function Lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function av(e){var t=Hf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Wf(n.ownerDocument.documentElement,n)){if(r!==null&&Lu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=zd(n,i);var l=zd(n,r);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iv=ls&&"documentMode"in document&&11>=document.documentMode,Or=null,Lc=null,Ia=null,Rc=!1;function $d(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rc||Or==null||Or!==vl(r)||(r=Or,"selectionStart"in r&&Lu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ia&&Ka(Ia,r)||(Ia=r,r=Sl(Lc,"onSelect"),0<r.length&&(t=new Eu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Or)))}function Vi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionend:Vi("Transition","TransitionEnd")},Ho={},qf={};ls&&(qf=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Gl(e){if(Ho[e])return Ho[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qf)return Ho[e]=t[n];return e}var Gf=Gl("animationend"),Qf=Gl("animationiteration"),Kf=Gl("animationstart"),Yf=Gl("transitionend"),Xf=new Map,Ud="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(e,t){Xf.set(e,t),yr(t,[e])}for(var qo=0;qo<Ud.length;qo++){var Go=Ud[qo],lv=Go.toLowerCase(),ov=Go[0].toUpperCase()+Go.slice(1);Fs(lv,"on"+ov)}Fs(Gf,"onAnimationEnd");Fs(Qf,"onAnimationIteration");Fs(Kf,"onAnimationStart");Fs("dblclick","onDoubleClick");Fs("focusin","onFocus");Fs("focusout","onBlur");Fs(Yf,"onTransitionEnd");Qr("onMouseEnter",["mouseout","mouseover"]);Qr("onMouseLeave",["mouseout","mouseover"]);Qr("onPointerEnter",["pointerout","pointerover"]);Qr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Vd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,lg(r,t,void 0,e),e.currentTarget=null}function Jf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],u=c.instance,m=c.currentTarget;if(c=c.listener,u!==i&&a.isPropagationStopped())break e;Vd(a,c,m),i=u}else for(l=0;l<r.length;l++){if(c=r[l],u=c.instance,m=c.currentTarget,c=c.listener,u!==i&&a.isPropagationStopped())break e;Vd(a,c,m),i=u}}}if(yl)throw e=Cc,yl=!1,Cc=null,e}function De(e,t){var n=t[Dc];n===void 0&&(n=t[Dc]=new Set);var r=e+"__bubble";n.has(r)||(Zf(t,e,2,!1),n.add(r))}function Qo(e,t,n){var r=0;t&&(r|=4),Zf(n,e,r,t)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function Ya(e){if(!e[Fi]){e[Fi]=!0,af.forEach(function(n){n!=="selectionchange"&&(cv.has(n)||Qo(n,!1,e),Qo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fi]||(t[Fi]=!0,Qo("selectionchange",!1,t))}}function Zf(e,t,n,r){switch(If(t)){case 1:var a=_g;break;case 4:a=Sg;break;default:a=bu}n=a.bind(null,t,n,e),a=void 0,!bc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ko(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;l=l.return}for(;c!==null;){if(l=cr(c),l===null)return;if(u=l.tag,u===5||u===6){r=i=l;continue e}c=c.parentNode}}r=r.return}wf(function(){var m=i,S=wu(n),v=[];e:{var y=Xf.get(e);if(y!==void 0){var E=Eu,R=e;switch(e){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":E=zg;break;case"focusin":R="focus",E=Vo;break;case"focusout":R="blur",E=Vo;break;case"beforeblur":case"afterblur":E=Vo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=Vg;break;case Gf:case Qf:case Kf:E=Tg;break;case Yf:E=Wg;break;case"scroll":E=kg;break;case"wheel":E=qg;break;case"copy":case"cut":case"paste":E=Rg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Rd}var I=(t&4)!==0,g=!I&&e==="scroll",f=I?y!==null?y+"Capture":null:y;I=[];for(var p=m,x;p!==null;){x=p;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,f!==null&&(k=Wa(p,f),k!=null&&I.push(Xa(p,k,x)))),g)break;p=p.return}0<I.length&&(y=new E(y,R,null,n,S),v.push({event:y,listeners:I}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",y&&n!==Sc&&(R=n.relatedTarget||n.fromElement)&&(cr(R)||R[os]))break e;if((E||y)&&(y=S.window===S?S:(y=S.ownerDocument)?y.defaultView||y.parentWindow:window,E?(R=n.relatedTarget||n.toElement,E=m,R=R?cr(R):null,R!==null&&(g=jr(R),R!==g||R.tag!==5&&R.tag!==6)&&(R=null)):(E=null,R=m),E!==R)){if(I=Td,k="onMouseLeave",f="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(I=Rd,k="onPointerLeave",f="onPointerEnter",p="pointer"),g=E==null?y:Mr(E),x=R==null?y:Mr(R),y=new I(k,p+"leave",E,n,S),y.target=g,y.relatedTarget=x,k=null,cr(S)===m&&(I=new I(f,p+"enter",R,n,S),I.target=x,I.relatedTarget=g,k=I),g=k,E&&R)t:{for(I=E,f=R,p=0,x=I;x;x=Cr(x))p++;for(x=0,k=f;k;k=Cr(k))x++;for(;0<p-x;)I=Cr(I),p--;for(;0<x-p;)f=Cr(f),x--;for(;p--;){if(I===f||f!==null&&I===f.alternate)break t;I=Cr(I),f=Cr(f)}I=null}else I=null;E!==null&&Fd(v,y,E,I,!1),R!==null&&g!==null&&Fd(v,g,R,I,!0)}}e:{if(y=m?Mr(m):window,E=y.nodeName&&y.nodeName.toLowerCase(),E==="select"||E==="input"&&y.type==="file")var M=Zg;else if(Md(y))if(Vf)M=sv;else{M=tv;var $=ev}else(E=y.nodeName)&&E.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(M=nv);if(M&&(M=M(e,m))){Uf(v,M,n,S);break e}$&&$(e,y,m),e==="focusout"&&($=y._wrapperState)&&$.controlled&&y.type==="number"&&yc(y,"number",y.value)}switch($=m?Mr(m):window,e){case"focusin":(Md($)||$.contentEditable==="true")&&(Or=$,Lc=m,Ia=null);break;case"focusout":Ia=Lc=Or=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,$d(v,n,S);break;case"selectionchange":if(iv)break;case"keydown":case"keyup":$d(v,n,S)}var A;if(Tu)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rr?zf(e,n)&&(w="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Bf&&n.locale!=="ko"&&(Rr||w!=="onCompositionStart"?w==="onCompositionEnd"&&Rr&&(A=Df()):(Ts=S,Cu="value"in Ts?Ts.value:Ts.textContent,Rr=!0)),$=Sl(m,w),0<$.length&&(w=new Ld(w,e,null,n,S),v.push({event:w,listeners:$}),A?w.data=A:(A=$f(n),A!==null&&(w.data=A)))),(A=Qg?Kg(e,n):Yg(e,n))&&(m=Sl(m,"onBeforeInput"),0<m.length&&(S=new Ld("onBeforeInput","beforeinput",null,n,S),v.push({event:S,listeners:m}),S.data=A))}Jf(v,t)})}function Xa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sl(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Wa(e,n),i!=null&&r.unshift(Xa(e,i,a)),i=Wa(e,t),i!=null&&r.push(Xa(e,i,a))),e=e.return}return r}function Cr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fd(e,t,n,r,a){for(var i=t._reactName,l=[];n!==null&&n!==r;){var c=n,u=c.alternate,m=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&m!==null&&(c=m,a?(u=Wa(n,i),u!=null&&l.unshift(Xa(n,u,c))):a||(u=Wa(n,i),u!=null&&l.push(Xa(n,u,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var uv=/\r\n?/g,dv=/\u0000|\uFFFD/g;function Wd(e){return(typeof e=="string"?e:""+e).replace(uv,`
`).replace(dv,"")}function Wi(e,t,n){if(t=Wd(t),Wd(e)!==t&&n)throw Error(z(425))}function kl(){}var Oc=null,Pc=null;function Mc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ic=typeof setTimeout=="function"?setTimeout:void 0,hv=typeof clearTimeout=="function"?clearTimeout:void 0,Hd=typeof Promise=="function"?Promise:void 0,fv=typeof queueMicrotask=="function"?queueMicrotask:typeof Hd<"u"?function(e){return Hd.resolve(null).then(e).catch(pv)}:Ic;function pv(e){setTimeout(function(){throw e})}function Yo(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ga(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ga(t)}function Ms(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var sa=Math.random().toString(36).slice(2),zn="__reactFiber$"+sa,Ja="__reactProps$"+sa,os="__reactContainer$"+sa,Dc="__reactEvents$"+sa,mv="__reactListeners$"+sa,gv="__reactHandles$"+sa;function cr(e){var t=e[zn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[os]||n[zn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qd(e);e!==null;){if(n=e[zn])return n;e=qd(e)}return t}e=n,n=e.parentNode}return null}function oi(e){return e=e[zn]||e[os],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Ql(e){return e[Ja]||null}var Bc=[],Ir=-1;function Ws(e){return{current:e}}function Be(e){0>Ir||(e.current=Bc[Ir],Bc[Ir]=null,Ir--)}function Me(e,t){Ir++,Bc[Ir]=e.current,e.current=t}var Vs={},kt=Ws(Vs),zt=Ws(!1),pr=Vs;function Kr(e,t){var n=e.type.contextTypes;if(!n)return Vs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function $t(e){return e=e.childContextTypes,e!=null}function bl(){Be(zt),Be(kt)}function Gd(e,t,n){if(kt.current!==Vs)throw Error(z(168));Me(kt,t),Me(zt,n)}function ep(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(z(108,eg(e)||"Unknown",a));return We({},n,r)}function Cl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vs,pr=kt.current,Me(kt,e),Me(zt,zt.current),!0}function Qd(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=ep(e,t,pr),r.__reactInternalMemoizedMergedChildContext=e,Be(zt),Be(kt),Me(kt,e)):Be(zt),Me(zt,n)}var ns=null,Kl=!1,Xo=!1;function tp(e){ns===null?ns=[e]:ns.push(e)}function vv(e){Kl=!0,tp(e)}function Hs(){if(!Xo&&ns!==null){Xo=!0;var e=0,t=Ae;try{var n=ns;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ns=null,Kl=!1}catch(a){throw ns!==null&&(ns=ns.slice(e+1)),bf(_u,Hs),a}finally{Ae=t,Xo=!1}}return null}var Dr=[],Br=0,El=null,Al=0,rn=[],an=0,mr=null,rs=1,as="";function lr(e,t){Dr[Br++]=Al,Dr[Br++]=El,El=e,Al=t}function np(e,t,n){rn[an++]=rs,rn[an++]=as,rn[an++]=mr,mr=e;var r=rs;e=as;var a=32-Nn(r)-1;r&=~(1<<a),n+=1;var i=32-Nn(t)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,rs=1<<32-Nn(t)+a|n<<a|r,as=i+e}else rs=1<<i|n<<a|r,as=e}function Ru(e){e.return!==null&&(lr(e,1),np(e,1,0))}function Ou(e){for(;e===El;)El=Dr[--Br],Dr[Br]=null,Al=Dr[--Br],Dr[Br]=null;for(;e===mr;)mr=rn[--an],rn[an]=null,as=rn[--an],rn[an]=null,rs=rn[--an],rn[an]=null}var Kt=null,Qt=null,$e=!1,jn=null;function sp(e,t){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Kd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Kt=e,Qt=Ms(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Kt=e,Qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=mr!==null?{id:rs,overflow:as}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Kt=e,Qt=null,!0):!1;default:return!1}}function zc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $c(e){if($e){var t=Qt;if(t){var n=t;if(!Kd(e,t)){if(zc(e))throw Error(z(418));t=Ms(n.nextSibling);var r=Kt;t&&Kd(e,t)?sp(r,n):(e.flags=e.flags&-4097|2,$e=!1,Kt=e)}}else{if(zc(e))throw Error(z(418));e.flags=e.flags&-4097|2,$e=!1,Kt=e}}}function Yd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kt=e}function Hi(e){if(e!==Kt)return!1;if(!$e)return Yd(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mc(e.type,e.memoizedProps)),t&&(t=Qt)){if(zc(e))throw rp(),Error(z(418));for(;t;)sp(e,t),t=Ms(t.nextSibling)}if(Yd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qt=Ms(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qt=null}}else Qt=Kt?Ms(e.stateNode.nextSibling):null;return!0}function rp(){for(var e=Qt;e;)e=Ms(e.nextSibling)}function Yr(){Qt=Kt=null,$e=!1}function Pu(e){jn===null?jn=[e]:jn.push(e)}var xv=ds.ReactCurrentBatchConfig;function _a(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var c=a.refs;l===null?delete c[i]:c[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function qi(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xd(e){var t=e._init;return t(e._payload)}function ap(e){function t(f,p){if(e){var x=f.deletions;x===null?(f.deletions=[p],f.flags|=16):x.push(p)}}function n(f,p){if(!e)return null;for(;p!==null;)t(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function a(f,p){return f=zs(f,p),f.index=0,f.sibling=null,f}function i(f,p,x){return f.index=x,e?(x=f.alternate,x!==null?(x=x.index,x<p?(f.flags|=2,p):x):(f.flags|=2,p)):(f.flags|=1048576,p)}function l(f){return e&&f.alternate===null&&(f.flags|=2),f}function c(f,p,x,k){return p===null||p.tag!==6?(p=rc(x,f.mode,k),p.return=f,p):(p=a(p,x),p.return=f,p)}function u(f,p,x,k){var M=x.type;return M===Lr?S(f,p,x.props.children,k,x.key):p!==null&&(p.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===bs&&Xd(M)===p.type)?(k=a(p,x.props),k.ref=_a(f,p,x),k.return=f,k):(k=hl(x.type,x.key,x.props,null,f.mode,k),k.ref=_a(f,p,x),k.return=f,k)}function m(f,p,x,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=ac(x,f.mode,k),p.return=f,p):(p=a(p,x.children||[]),p.return=f,p)}function S(f,p,x,k,M){return p===null||p.tag!==7?(p=fr(x,f.mode,k,M),p.return=f,p):(p=a(p,x),p.return=f,p)}function v(f,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=rc(""+p,f.mode,x),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Mi:return x=hl(p.type,p.key,p.props,null,f.mode,x),x.ref=_a(f,null,p),x.return=f,x;case Tr:return p=ac(p,f.mode,x),p.return=f,p;case bs:var k=p._init;return v(f,k(p._payload),x)}if(Ea(p)||xa(p))return p=fr(p,f.mode,x,null),p.return=f,p;qi(f,p)}return null}function y(f,p,x,k){var M=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:c(f,p,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mi:return x.key===M?u(f,p,x,k):null;case Tr:return x.key===M?m(f,p,x,k):null;case bs:return M=x._init,y(f,p,M(x._payload),k)}if(Ea(x)||xa(x))return M!==null?null:S(f,p,x,k,null);qi(f,x)}return null}function E(f,p,x,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(x)||null,c(p,f,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Mi:return f=f.get(k.key===null?x:k.key)||null,u(p,f,k,M);case Tr:return f=f.get(k.key===null?x:k.key)||null,m(p,f,k,M);case bs:var $=k._init;return E(f,p,x,$(k._payload),M)}if(Ea(k)||xa(k))return f=f.get(x)||null,S(p,f,k,M,null);qi(p,k)}return null}function R(f,p,x,k){for(var M=null,$=null,A=p,w=p=0,P=null;A!==null&&w<x.length;w++){A.index>w?(P=A,A=null):P=A.sibling;var O=y(f,A,x[w],k);if(O===null){A===null&&(A=P);break}e&&A&&O.alternate===null&&t(f,A),p=i(O,p,w),$===null?M=O:$.sibling=O,$=O,A=P}if(w===x.length)return n(f,A),$e&&lr(f,w),M;if(A===null){for(;w<x.length;w++)A=v(f,x[w],k),A!==null&&(p=i(A,p,w),$===null?M=A:$.sibling=A,$=A);return $e&&lr(f,w),M}for(A=r(f,A);w<x.length;w++)P=E(A,f,w,x[w],k),P!==null&&(e&&P.alternate!==null&&A.delete(P.key===null?w:P.key),p=i(P,p,w),$===null?M=P:$.sibling=P,$=P);return e&&A.forEach(function(K){return t(f,K)}),$e&&lr(f,w),M}function I(f,p,x,k){var M=xa(x);if(typeof M!="function")throw Error(z(150));if(x=M.call(x),x==null)throw Error(z(151));for(var $=M=null,A=p,w=p=0,P=null,O=x.next();A!==null&&!O.done;w++,O=x.next()){A.index>w?(P=A,A=null):P=A.sibling;var K=y(f,A,O.value,k);if(K===null){A===null&&(A=P);break}e&&A&&K.alternate===null&&t(f,A),p=i(K,p,w),$===null?M=K:$.sibling=K,$=K,A=P}if(O.done)return n(f,A),$e&&lr(f,w),M;if(A===null){for(;!O.done;w++,O=x.next())O=v(f,O.value,k),O!==null&&(p=i(O,p,w),$===null?M=O:$.sibling=O,$=O);return $e&&lr(f,w),M}for(A=r(f,A);!O.done;w++,O=x.next())O=E(A,f,w,O.value,k),O!==null&&(e&&O.alternate!==null&&A.delete(O.key===null?w:O.key),p=i(O,p,w),$===null?M=O:$.sibling=O,$=O);return e&&A.forEach(function(oe){return t(f,oe)}),$e&&lr(f,w),M}function g(f,p,x,k){if(typeof x=="object"&&x!==null&&x.type===Lr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Mi:e:{for(var M=x.key,$=p;$!==null;){if($.key===M){if(M=x.type,M===Lr){if($.tag===7){n(f,$.sibling),p=a($,x.props.children),p.return=f,f=p;break e}}else if($.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===bs&&Xd(M)===$.type){n(f,$.sibling),p=a($,x.props),p.ref=_a(f,$,x),p.return=f,f=p;break e}n(f,$);break}else t(f,$);$=$.sibling}x.type===Lr?(p=fr(x.props.children,f.mode,k,x.key),p.return=f,f=p):(k=hl(x.type,x.key,x.props,null,f.mode,k),k.ref=_a(f,p,x),k.return=f,f=k)}return l(f);case Tr:e:{for($=x.key;p!==null;){if(p.key===$)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){n(f,p.sibling),p=a(p,x.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else t(f,p);p=p.sibling}p=ac(x,f.mode,k),p.return=f,f=p}return l(f);case bs:return $=x._init,g(f,p,$(x._payload),k)}if(Ea(x))return R(f,p,x,k);if(xa(x))return I(f,p,x,k);qi(f,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(n(f,p.sibling),p=a(p,x),p.return=f,f=p):(n(f,p),p=rc(x,f.mode,k),p.return=f,f=p),l(f)):n(f,p)}return g}var Xr=ap(!0),ip=ap(!1),Tl=Ws(null),Ll=null,zr=null,Mu=null;function Iu(){Mu=zr=Ll=null}function Du(e){var t=Tl.current;Be(Tl),e._currentValue=t}function Uc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function qr(e,t){Ll=e,Mu=zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Bt=!0),e.firstContext=null)}function un(e){var t=e._currentValue;if(Mu!==e)if(e={context:e,memoizedValue:t,next:null},zr===null){if(Ll===null)throw Error(z(308));zr=e,Ll.dependencies={lanes:0,firstContext:e}}else zr=zr.next=e;return t}var ur=null;function Bu(e){ur===null?ur=[e]:ur.push(e)}function lp(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Bu(t)):(n.next=a.next,a.next=n),t.interleaved=n,cs(e,r)}function cs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cs=!1;function zu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function op(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function is(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Is(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,cs(e,n)}return a=r.interleaved,a===null?(t.next=t,Bu(r)):(t.next=a.next,a.next=t),r.interleaved=t,cs(e,n)}function il(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Su(e,n)}}function Jd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Rl(e,t,n,r){var a=e.updateQueue;Cs=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var u=c,m=u.next;u.next=null,l===null?i=m:l.next=m,l=u;var S=e.alternate;S!==null&&(S=S.updateQueue,c=S.lastBaseUpdate,c!==l&&(c===null?S.firstBaseUpdate=m:c.next=m,S.lastBaseUpdate=u))}if(i!==null){var v=a.baseState;l=0,S=m=u=null,c=i;do{var y=c.lane,E=c.eventTime;if((r&y)===y){S!==null&&(S=S.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var R=e,I=c;switch(y=t,E=n,I.tag){case 1:if(R=I.payload,typeof R=="function"){v=R.call(E,v,y);break e}v=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=I.payload,y=typeof R=="function"?R.call(E,v,y):R,y==null)break e;v=We({},v,y);break e;case 2:Cs=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[c]:y.push(c))}else E={eventTime:E,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},S===null?(m=S=E,u=v):S=S.next=E,l|=y;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;y=c,c=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(S===null&&(u=v),a.baseState=u,a.firstBaseUpdate=m,a.lastBaseUpdate=S,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);vr|=l,e.lanes=l,e.memoizedState=v}}function Zd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(z(191,a));a.call(r)}}}var ci={},Un=Ws(ci),Za=Ws(ci),ei=Ws(ci);function dr(e){if(e===ci)throw Error(z(174));return e}function $u(e,t){switch(Me(ei,t),Me(Za,e),Me(Un,ci),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Nc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Nc(t,e)}Be(Un),Me(Un,t)}function Jr(){Be(Un),Be(Za),Be(ei)}function cp(e){dr(ei.current);var t=dr(Un.current),n=Nc(t,e.type);t!==n&&(Me(Za,e),Me(Un,n))}function Uu(e){Za.current===e&&(Be(Un),Be(Za))}var Ve=Ws(0);function Ol(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jo=[];function Vu(){for(var e=0;e<Jo.length;e++)Jo[e]._workInProgressVersionPrimary=null;Jo.length=0}var ll=ds.ReactCurrentDispatcher,Zo=ds.ReactCurrentBatchConfig,gr=0,Fe=null,rt=null,ct=null,Pl=!1,Da=!1,ti=0,yv=0;function wt(){throw Error(z(321))}function Fu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_n(e[n],t[n]))return!1;return!0}function Wu(e,t,n,r,a,i){if(gr=i,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ll.current=e===null||e.memoizedState===null?_v:Sv,e=n(r,a),Da){i=0;do{if(Da=!1,ti=0,25<=i)throw Error(z(301));i+=1,ct=rt=null,t.updateQueue=null,ll.current=kv,e=n(r,a)}while(Da)}if(ll.current=Ml,t=rt!==null&&rt.next!==null,gr=0,ct=rt=Fe=null,Pl=!1,t)throw Error(z(300));return e}function Hu(){var e=ti!==0;return ti=0,e}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Fe.memoizedState=ct=e:ct=ct.next=e,ct}function dn(){if(rt===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=ct===null?Fe.memoizedState:ct.next;if(t!==null)ct=t,rt=e;else{if(e===null)throw Error(z(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ct===null?Fe.memoizedState=ct=e:ct=ct.next=e}return ct}function ni(e,t){return typeof t=="function"?t(e):t}function ec(e){var t=dn(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=rt,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var c=l=null,u=null,m=i;do{var S=m.lane;if((gr&S)===S)u!==null&&(u=u.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var v={lane:S,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};u===null?(c=u=v,l=r):u=u.next=v,Fe.lanes|=S,vr|=S}m=m.next}while(m!==null&&m!==i);u===null?l=r:u.next=c,_n(r,t.memoizedState)||(Bt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Fe.lanes|=i,vr|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function tc(e){var t=dn(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);_n(i,t.memoizedState)||(Bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function up(){}function dp(e,t){var n=Fe,r=dn(),a=t(),i=!_n(r.memoizedState,a);if(i&&(r.memoizedState=a,Bt=!0),r=r.queue,qu(pp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,si(9,fp.bind(null,n,r,a,t),void 0,null),ut===null)throw Error(z(349));gr&30||hp(n,t,a)}return a}function hp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function fp(e,t,n,r){t.value=n,t.getSnapshot=r,mp(t)&&gp(e)}function pp(e,t,n){return n(function(){mp(t)&&gp(e)})}function mp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_n(e,n)}catch{return!0}}function gp(e){var t=cs(e,1);t!==null&&wn(t,e,1,-1)}function eh(e){var t=Dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:e},t.queue=e,e=e.dispatch=wv.bind(null,Fe,e),[t.memoizedState,e]}function si(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vp(){return dn().memoizedState}function ol(e,t,n,r){var a=Dn();Fe.flags|=e,a.memoizedState=si(1|t,n,void 0,r===void 0?null:r)}function Yl(e,t,n,r){var a=dn();r=r===void 0?null:r;var i=void 0;if(rt!==null){var l=rt.memoizedState;if(i=l.destroy,r!==null&&Fu(r,l.deps)){a.memoizedState=si(t,n,i,r);return}}Fe.flags|=e,a.memoizedState=si(1|t,n,i,r)}function th(e,t){return ol(8390656,8,e,t)}function qu(e,t){return Yl(2048,8,e,t)}function xp(e,t){return Yl(4,2,e,t)}function yp(e,t){return Yl(4,4,e,t)}function jp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Np(e,t,n){return n=n!=null?n.concat([e]):null,Yl(4,4,jp.bind(null,t,e),n)}function Gu(){}function wp(e,t){var n=dn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _p(e,t){var n=dn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Sp(e,t,n){return gr&21?(_n(n,t)||(n=Af(),Fe.lanes|=n,vr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=n)}function jv(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=Zo.transition;Zo.transition={};try{e(!1),t()}finally{Ae=n,Zo.transition=r}}function kp(){return dn().memoizedState}function Nv(e,t,n){var r=Bs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bp(e))Cp(t,n);else if(n=lp(e,t,n,r),n!==null){var a=Ot();wn(n,e,r,a),Ep(n,t,r)}}function wv(e,t,n){var r=Bs(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bp(e))Cp(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,c=i(l,n);if(a.hasEagerState=!0,a.eagerState=c,_n(c,l)){var u=t.interleaved;u===null?(a.next=a,Bu(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}n=lp(e,t,a,r),n!==null&&(a=Ot(),wn(n,e,r,a),Ep(n,t,r))}}function bp(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Cp(e,t){Da=Pl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ep(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Su(e,n)}}var Ml={readContext:un,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},_v={readContext:un,useCallback:function(e,t){return Dn().memoizedState=[e,t===void 0?null:t],e},useContext:un,useEffect:th,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ol(4194308,4,jp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ol(4194308,4,e,t)},useInsertionEffect:function(e,t){return ol(4,2,e,t)},useMemo:function(e,t){var n=Dn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Nv.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=Dn();return e={current:e},t.memoizedState=e},useState:eh,useDebugValue:Gu,useDeferredValue:function(e){return Dn().memoizedState=e},useTransition:function(){var e=eh(!1),t=e[0];return e=jv.bind(null,e[1]),Dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,a=Dn();if($e){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),ut===null)throw Error(z(349));gr&30||hp(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,th(pp.bind(null,r,i,e),[e]),r.flags|=2048,si(9,fp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Dn(),t=ut.identifierPrefix;if($e){var n=as,r=rs;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ti++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sv={readContext:un,useCallback:wp,useContext:un,useEffect:qu,useImperativeHandle:Np,useInsertionEffect:xp,useLayoutEffect:yp,useMemo:_p,useReducer:ec,useRef:vp,useState:function(){return ec(ni)},useDebugValue:Gu,useDeferredValue:function(e){var t=dn();return Sp(t,rt.memoizedState,e)},useTransition:function(){var e=ec(ni)[0],t=dn().memoizedState;return[e,t]},useMutableSource:up,useSyncExternalStore:dp,useId:kp,unstable_isNewReconciler:!1},kv={readContext:un,useCallback:wp,useContext:un,useEffect:qu,useImperativeHandle:Np,useInsertionEffect:xp,useLayoutEffect:yp,useMemo:_p,useReducer:tc,useRef:vp,useState:function(){return tc(ni)},useDebugValue:Gu,useDeferredValue:function(e){var t=dn();return rt===null?t.memoizedState=e:Sp(t,rt.memoizedState,e)},useTransition:function(){var e=tc(ni)[0],t=dn().memoizedState;return[e,t]},useMutableSource:up,useSyncExternalStore:dp,useId:kp,unstable_isNewReconciler:!1};function vn(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Vc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Xl={isMounted:function(e){return(e=e._reactInternals)?jr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ot(),a=Bs(e),i=is(r,a);i.payload=t,n!=null&&(i.callback=n),t=Is(e,i,a),t!==null&&(wn(t,e,a,r),il(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ot(),a=Bs(e),i=is(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Is(e,i,a),t!==null&&(wn(t,e,a,r),il(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ot(),r=Bs(e),a=is(n,r);a.tag=2,t!=null&&(a.callback=t),t=Is(e,a,r),t!==null&&(wn(t,e,r,n),il(t,e,r))}};function nh(e,t,n,r,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Ka(n,r)||!Ka(a,i):!0}function Ap(e,t,n){var r=!1,a=Vs,i=t.contextType;return typeof i=="object"&&i!==null?i=un(i):(a=$t(t)?pr:kt.current,r=t.contextTypes,i=(r=r!=null)?Kr(e,a):Vs),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function sh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Xl.enqueueReplaceState(t,t.state,null)}function Fc(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},zu(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=un(i):(i=$t(t)?pr:kt.current,a.context=Kr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Vc(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Xl.enqueueReplaceState(a,a.state,null),Rl(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Zr(e,t){try{var n="",r=t;do n+=Zm(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function nc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Wc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bv=typeof WeakMap=="function"?WeakMap:Map;function Tp(e,t,n){n=is(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dl||(Dl=!0,eu=r),Wc(e,t)},n}function Lp(e,t,n){n=is(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Wc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wc(e,t),typeof r!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function rh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bv;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=$v.bind(null,e,t,n),t.then(e,e))}function ah(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ih(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=is(-1,1),t.tag=2,Is(n,t,1))),n.lanes|=1),e)}var Cv=ds.ReactCurrentOwner,Bt=!1;function Rt(e,t,n,r){t.child=e===null?ip(t,null,n,r):Xr(t,e.child,n,r)}function lh(e,t,n,r,a){n=n.render;var i=t.ref;return qr(t,a),r=Wu(e,t,n,r,i,a),n=Hu(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,us(e,t,a)):($e&&n&&Ru(t),t.flags|=1,Rt(e,t,r,a),t.child)}function oh(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!td(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Rp(e,t,i,r,a)):(e=hl(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ka,n(l,r)&&e.ref===t.ref)return us(e,t,a)}return t.flags|=1,e=zs(i,r),e.ref=t.ref,e.return=t,t.child=e}function Rp(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Ka(i,r)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Bt=!0);else return t.lanes=e.lanes,us(e,t,a)}return Hc(e,t,n,r,a)}function Op(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Ur,Gt),Gt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(Ur,Gt),Gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Me(Ur,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Me(Ur,Gt),Gt|=r;return Rt(e,t,a,n),t.child}function Pp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hc(e,t,n,r,a){var i=$t(n)?pr:kt.current;return i=Kr(t,i),qr(t,a),n=Wu(e,t,n,r,i,a),r=Hu(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,us(e,t,a)):($e&&r&&Ru(t),t.flags|=1,Rt(e,t,n,a),t.child)}function ch(e,t,n,r,a){if($t(n)){var i=!0;Cl(t)}else i=!1;if(qr(t,a),t.stateNode===null)cl(e,t),Ap(t,n,r),Fc(t,n,r,a),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var u=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=un(m):(m=$t(n)?pr:kt.current,m=Kr(t,m));var S=n.getDerivedStateFromProps,v=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||u!==m)&&sh(t,l,r,m),Cs=!1;var y=t.memoizedState;l.state=y,Rl(t,r,l,a),u=t.memoizedState,c!==r||y!==u||zt.current||Cs?(typeof S=="function"&&(Vc(t,n,S,r),u=t.memoizedState),(c=Cs||nh(t,n,c,r,y,u,m))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=m,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,op(e,t),c=t.memoizedProps,m=t.type===t.elementType?c:vn(t.type,c),l.props=m,v=t.pendingProps,y=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=un(u):(u=$t(n)?pr:kt.current,u=Kr(t,u));var E=n.getDerivedStateFromProps;(S=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==v||y!==u)&&sh(t,l,r,u),Cs=!1,y=t.memoizedState,l.state=y,Rl(t,r,l,a);var R=t.memoizedState;c!==v||y!==R||zt.current||Cs?(typeof E=="function"&&(Vc(t,n,E,r),R=t.memoizedState),(m=Cs||nh(t,n,m,r,y,R,u)||!1)?(S||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,R,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,R,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=R),l.props=r,l.state=R,l.context=u,r=m):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return qc(e,t,n,r,i,a)}function qc(e,t,n,r,a,i){Pp(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return a&&Qd(t,n,!1),us(e,t,i);r=t.stateNode,Cv.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Xr(t,e.child,null,i),t.child=Xr(t,null,c,i)):Rt(e,t,c,i),t.memoizedState=r.state,a&&Qd(t,n,!0),t.child}function Mp(e){var t=e.stateNode;t.pendingContext?Gd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gd(e,t.context,!1),$u(e,t.containerInfo)}function uh(e,t,n,r,a){return Yr(),Pu(a),t.flags|=256,Rt(e,t,n,r),t.child}var Gc={dehydrated:null,treeContext:null,retryLane:0};function Qc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ip(e,t,n){var r=t.pendingProps,a=Ve.current,i=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Me(Ve,a&1),e===null)return $c(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=eo(l,r,0,null),e=fr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Qc(n),t.memoizedState=Gc,e):Qu(t,l));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return Ev(e,t,l,r,c,a,n);if(i){i=r.fallback,l=t.mode,a=e.child,c=a.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=zs(a,u),r.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=zs(c,i):(i=fr(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?Qc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Gc,r}return i=e.child,e=i.sibling,r=zs(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Qu(e,t){return t=eo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gi(e,t,n,r){return r!==null&&Pu(r),Xr(t,e.child,null,n),e=Qu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ev(e,t,n,r,a,i,l){if(n)return t.flags&256?(t.flags&=-257,r=nc(Error(z(422))),Gi(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=eo({mode:"visible",children:r.children},a,0,null),i=fr(i,a,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Xr(t,e.child,null,l),t.child.memoizedState=Qc(l),t.memoizedState=Gc,i);if(!(t.mode&1))return Gi(e,t,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=nc(i,r,void 0),Gi(e,t,l,r)}if(c=(l&e.childLanes)!==0,Bt||c){if(r=ut,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,cs(e,a),wn(r,e,a,-1))}return ed(),r=nc(Error(z(421))),Gi(e,t,l,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Uv.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Qt=Ms(a.nextSibling),Kt=t,$e=!0,jn=null,e!==null&&(rn[an++]=rs,rn[an++]=as,rn[an++]=mr,rs=e.id,as=e.overflow,mr=t),t=Qu(t,r.children),t.flags|=4096,t)}function dh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Uc(e.return,t,n)}function sc(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Dp(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Rt(e,t,r.children,n),r=Ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dh(e,n,t);else if(e.tag===19)dh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Me(Ve,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ol(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),sc(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ol(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}sc(t,!0,n,null,i);break;case"together":sc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function us(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=zs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Av(e,t,n){switch(t.tag){case 3:Mp(t),Yr();break;case 5:cp(t);break;case 1:$t(t.type)&&Cl(t);break;case 4:$u(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Me(Tl,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ve,Ve.current&1),t.flags|=128,null):n&t.child.childLanes?Ip(e,t,n):(Me(Ve,Ve.current&1),e=us(e,t,n),e!==null?e.sibling:null);Me(Ve,Ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Dp(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Me(Ve,Ve.current),r)break;return null;case 22:case 23:return t.lanes=0,Op(e,t,n)}return us(e,t,n)}var Bp,Kc,zp,$p;Bp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kc=function(){};zp=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,dr(Un.current);var i=null;switch(n){case"input":a=vc(e,a),r=vc(e,r),i=[];break;case"select":a=We({},a,{value:void 0}),r=We({},r,{value:void 0}),i=[];break;case"textarea":a=jc(e,a),r=jc(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=kl)}wc(n,r);var l;n=null;for(m in a)if(!r.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var c=a[m];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Va.hasOwnProperty(m)?i||(i=[]):(i=i||[]).push(m,null));for(m in r){var u=r[m];if(c=a!=null?a[m]:void 0,r.hasOwnProperty(m)&&u!==c&&(u!=null||c!=null))if(m==="style")if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(i||(i=[]),i.push(m,n)),n=u;else m==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(m,u)):m==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(m,""+u):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Va.hasOwnProperty(m)?(u!=null&&m==="onScroll"&&De("scroll",e),i||c===u||(i=[])):(i=i||[]).push(m,u))}n&&(i=i||[]).push("style",n);var m=i;(t.updateQueue=m)&&(t.flags|=4)}};$p=function(e,t,n,r){n!==r&&(t.flags|=4)};function Sa(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function _t(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Tv(e,t,n){var r=t.pendingProps;switch(Ou(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(t),null;case 1:return $t(t.type)&&bl(),_t(t),null;case 3:return r=t.stateNode,Jr(),Be(zt),Be(kt),Vu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jn!==null&&(su(jn),jn=null))),Kc(e,t),_t(t),null;case 5:Uu(t);var a=dr(ei.current);if(n=t.type,e!==null&&t.stateNode!=null)zp(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return _t(t),null}if(e=dr(Un.current),Hi(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[zn]=t,r[Ja]=i,e=(t.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(a=0;a<Ta.length;a++)De(Ta[a],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":jd(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":wd(r,i),De("invalid",r)}wc(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Wi(r.textContent,c,e),a=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Wi(r.textContent,c,e),a=["children",""+c]):Va.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&De("scroll",r)}switch(n){case"input":Ii(r),Nd(r,i,!0);break;case"textarea":Ii(r),_d(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=kl)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[zn]=t,e[Ja]=r,Bp(e,t,!1,!1),t.stateNode=e;e:{switch(l=_c(n,r),n){case"dialog":De("cancel",e),De("close",e),a=r;break;case"iframe":case"object":case"embed":De("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ta.length;a++)De(Ta[a],e);a=r;break;case"source":De("error",e),a=r;break;case"img":case"image":case"link":De("error",e),De("load",e),a=r;break;case"details":De("toggle",e),a=r;break;case"input":jd(e,r),a=vc(e,r),De("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=We({},r,{value:void 0}),De("invalid",e);break;case"textarea":wd(e,r),a=jc(e,r),De("invalid",e);break;default:a=r}wc(n,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?vf(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mf(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fa(e,u):typeof u=="number"&&Fa(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Va.hasOwnProperty(i)?u!=null&&i==="onScroll"&&De("scroll",e):u!=null&&xu(e,i,u,l))}switch(n){case"input":Ii(e),Nd(e,r,!1);break;case"textarea":Ii(e),_d(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Us(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Vr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Vr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=kl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _t(t),null;case 6:if(e&&t.stateNode!=null)$p(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=dr(ei.current),dr(Un.current),Hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[zn]=t,(i=r.nodeValue!==n)&&(e=Kt,e!==null))switch(e.tag){case 3:Wi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zn]=t,t.stateNode=r}return _t(t),null;case 13:if(Be(Ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Qt!==null&&t.mode&1&&!(t.flags&128))rp(),Yr(),t.flags|=98560,i=!1;else if(i=Hi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(z(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[zn]=t}else Yr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_t(t),i=!1}else jn!==null&&(su(jn),jn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ve.current&1?at===0&&(at=3):ed())),t.updateQueue!==null&&(t.flags|=4),_t(t),null);case 4:return Jr(),Kc(e,t),e===null&&Ya(t.stateNode.containerInfo),_t(t),null;case 10:return Du(t.type._context),_t(t),null;case 17:return $t(t.type)&&bl(),_t(t),null;case 19:if(Be(Ve),i=t.memoizedState,i===null)return _t(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)Sa(i,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ol(e),l!==null){for(t.flags|=128,Sa(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Me(Ve,Ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ge()>ea&&(t.flags|=128,r=!0,Sa(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ol(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Sa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!$e)return _t(t),null}else 2*Ge()-i.renderingStartTime>ea&&n!==1073741824&&(t.flags|=128,r=!0,Sa(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ge(),t.sibling=null,n=Ve.current,Me(Ve,r?n&1|2:n&1),t):(_t(t),null);case 22:case 23:return Zu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Gt&1073741824&&(_t(t),t.subtreeFlags&6&&(t.flags|=8192)):_t(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function Lv(e,t){switch(Ou(t),t.tag){case 1:return $t(t.type)&&bl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jr(),Be(zt),Be(kt),Vu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uu(t),null;case 13:if(Be(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Yr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ve),null;case 4:return Jr(),null;case 10:return Du(t.type._context),null;case 22:case 23:return Zu(),null;case 24:return null;default:return null}}var Qi=!1,St=!1,Rv=typeof WeakSet=="function"?WeakSet:Set,Y=null;function $r(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(e,t,r)}else n.current=null}function Yc(e,t,n){try{n()}catch(r){He(e,t,r)}}var hh=!1;function Ov(e,t){if(Oc=wl,e=Hf(),Lu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,c=-1,u=-1,m=0,S=0,v=e,y=null;t:for(;;){for(var E;v!==n||a!==0&&v.nodeType!==3||(c=l+a),v!==i||r!==0&&v.nodeType!==3||(u=l+r),v.nodeType===3&&(l+=v.nodeValue.length),(E=v.firstChild)!==null;)y=v,v=E;for(;;){if(v===e)break t;if(y===n&&++m===a&&(c=l),y===i&&++S===r&&(u=l),(E=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=E}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pc={focusedElem:e,selectionRange:n},wl=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var R=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var I=R.memoizedProps,g=R.memoizedState,f=t.stateNode,p=f.getSnapshotBeforeUpdate(t.elementType===t.type?I:vn(t.type,I),g);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(k){He(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return R=hh,hh=!1,R}function Ba(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Yc(t,n,i)}a=a.next}while(a!==r)}}function Jl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Xc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Up(e){var t=e.alternate;t!==null&&(e.alternate=null,Up(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zn],delete t[Ja],delete t[Dc],delete t[mv],delete t[gv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vp(e){return e.tag===5||e.tag===3||e.tag===4}function fh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kl));else if(r!==4&&(e=e.child,e!==null))for(Jc(e,t,n),e=e.sibling;e!==null;)Jc(e,t,n),e=e.sibling}function Zc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}var mt=null,xn=!1;function ks(e,t,n){for(n=n.child;n!==null;)Fp(e,t,n),n=n.sibling}function Fp(e,t,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Wl,n)}catch{}switch(n.tag){case 5:St||$r(n,t);case 6:var r=mt,a=xn;mt=null,ks(e,t,n),mt=r,xn=a,mt!==null&&(xn?(e=mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(xn?(e=mt,n=n.stateNode,e.nodeType===8?Yo(e.parentNode,n):e.nodeType===1&&Yo(e,n),Ga(e)):Yo(mt,n.stateNode));break;case 4:r=mt,a=xn,mt=n.stateNode.containerInfo,xn=!0,ks(e,t,n),mt=r,xn=a;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Yc(n,t,l),a=a.next}while(a!==r)}ks(e,t,n);break;case 1:if(!St&&($r(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){He(n,t,c)}ks(e,t,n);break;case 21:ks(e,t,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,ks(e,t,n),St=r):ks(e,t,n);break;default:ks(e,t,n)}}function ph(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Rv),t.forEach(function(r){var a=Vv.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function gn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:mt=c.stateNode,xn=!1;break e;case 3:mt=c.stateNode.containerInfo,xn=!0;break e;case 4:mt=c.stateNode.containerInfo,xn=!0;break e}c=c.return}if(mt===null)throw Error(z(160));Fp(i,l,a),mt=null,xn=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(m){He(a,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wp(t,e),t=t.sibling}function Wp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gn(t,e),In(e),r&4){try{Ba(3,e,e.return),Jl(3,e)}catch(I){He(e,e.return,I)}try{Ba(5,e,e.return)}catch(I){He(e,e.return,I)}}break;case 1:gn(t,e),In(e),r&512&&n!==null&&$r(n,n.return);break;case 5:if(gn(t,e),In(e),r&512&&n!==null&&$r(n,n.return),e.flags&32){var a=e.stateNode;try{Fa(a,"")}catch(I){He(e,e.return,I)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&hf(a,i),_c(c,l);var m=_c(c,i);for(l=0;l<u.length;l+=2){var S=u[l],v=u[l+1];S==="style"?vf(a,v):S==="dangerouslySetInnerHTML"?mf(a,v):S==="children"?Fa(a,v):xu(a,S,v,m)}switch(c){case"input":xc(a,i);break;case"textarea":ff(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Vr(a,!!i.multiple,E,!1):y!==!!i.multiple&&(i.defaultValue!=null?Vr(a,!!i.multiple,i.defaultValue,!0):Vr(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ja]=i}catch(I){He(e,e.return,I)}}break;case 6:if(gn(t,e),In(e),r&4){if(e.stateNode===null)throw Error(z(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(I){He(e,e.return,I)}}break;case 3:if(gn(t,e),In(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ga(t.containerInfo)}catch(I){He(e,e.return,I)}break;case 4:gn(t,e),In(e);break;case 13:gn(t,e),In(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Xu=Ge())),r&4&&ph(e);break;case 22:if(S=n!==null&&n.memoizedState!==null,e.mode&1?(St=(m=St)||S,gn(t,e),St=m):gn(t,e),In(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!S&&e.mode&1)for(Y=e,S=e.child;S!==null;){for(v=Y=S;Y!==null;){switch(y=Y,E=y.child,y.tag){case 0:case 11:case 14:case 15:Ba(4,y,y.return);break;case 1:$r(y,y.return);var R=y.stateNode;if(typeof R.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,R.props=t.memoizedProps,R.state=t.memoizedState,R.componentWillUnmount()}catch(I){He(r,n,I)}}break;case 5:$r(y,y.return);break;case 22:if(y.memoizedState!==null){gh(v);continue}}E!==null?(E.return=y,Y=E):gh(v)}S=S.sibling}e:for(S=null,v=e;;){if(v.tag===5){if(S===null){S=v;try{a=v.stateNode,m?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=v.stateNode,u=v.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=gf("display",l))}catch(I){He(e,e.return,I)}}}else if(v.tag===6){if(S===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(I){He(e,e.return,I)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;S===v&&(S=null),v=v.return}S===v&&(S=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:gn(t,e),In(e),r&4&&ph(e);break;case 21:break;default:gn(t,e),In(e)}}function In(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Vp(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Fa(a,""),r.flags&=-33);var i=fh(e);Zc(e,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,c=fh(e);Jc(e,c,l);break;default:throw Error(z(161))}}catch(u){He(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pv(e,t,n){Y=e,Hp(e)}function Hp(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var a=Y,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||Qi;if(!l){var c=a.alternate,u=c!==null&&c.memoizedState!==null||St;c=Qi;var m=St;if(Qi=l,(St=u)&&!m)for(Y=a;Y!==null;)l=Y,u=l.child,l.tag===22&&l.memoizedState!==null?vh(a):u!==null?(u.return=l,Y=u):vh(a);for(;i!==null;)Y=i,Hp(i),i=i.sibling;Y=a,Qi=c,St=m}mh(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Y=i):mh(e)}}function mh(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:St||Jl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!St)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vn(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Zd(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zd(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var S=m.memoizedState;if(S!==null){var v=S.dehydrated;v!==null&&Ga(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}St||t.flags&512&&Xc(t)}catch(y){He(t,t.return,y)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function gh(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function vh(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Jl(4,t)}catch(u){He(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(u){He(t,a,u)}}var i=t.return;try{Xc(t)}catch(u){He(t,i,u)}break;case 5:var l=t.return;try{Xc(t)}catch(u){He(t,l,u)}}}catch(u){He(t,t.return,u)}if(t===e){Y=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Y=c;break}Y=t.return}}var Mv=Math.ceil,Il=ds.ReactCurrentDispatcher,Ku=ds.ReactCurrentOwner,cn=ds.ReactCurrentBatchConfig,we=0,ut=null,Xe=null,gt=0,Gt=0,Ur=Ws(0),at=0,ri=null,vr=0,Zl=0,Yu=0,za=null,Dt=null,Xu=0,ea=1/0,ts=null,Dl=!1,eu=null,Ds=null,Ki=!1,Ls=null,Bl=0,$a=0,tu=null,ul=-1,dl=0;function Ot(){return we&6?Ge():ul!==-1?ul:ul=Ge()}function Bs(e){return e.mode&1?we&2&&gt!==0?gt&-gt:xv.transition!==null?(dl===0&&(dl=Af()),dl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:If(e.type)),e):1}function wn(e,t,n,r){if(50<$a)throw $a=0,tu=null,Error(z(185));ii(e,n,r),(!(we&2)||e!==ut)&&(e===ut&&(!(we&2)&&(Zl|=n),at===4&&As(e,gt)),Ut(e,r),n===1&&we===0&&!(t.mode&1)&&(ea=Ge()+500,Kl&&Hs()))}function Ut(e,t){var n=e.callbackNode;xg(e,t);var r=Nl(e,e===ut?gt:0);if(r===0)n!==null&&bd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&bd(n),t===1)e.tag===0?vv(xh.bind(null,e)):tp(xh.bind(null,e)),fv(function(){!(we&6)&&Hs()}),n=null;else{switch(Tf(r)){case 1:n=_u;break;case 4:n=Cf;break;case 16:n=jl;break;case 536870912:n=Ef;break;default:n=jl}n=Zp(n,qp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qp(e,t){if(ul=-1,dl=0,we&6)throw Error(z(327));var n=e.callbackNode;if(Gr()&&e.callbackNode!==n)return null;var r=Nl(e,e===ut?gt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=zl(e,r);else{t=r;var a=we;we|=2;var i=Qp();(ut!==e||gt!==t)&&(ts=null,ea=Ge()+500,hr(e,t));do try{Bv();break}catch(c){Gp(e,c)}while(!0);Iu(),Il.current=i,we=a,Xe!==null?t=0:(ut=null,gt=0,t=at)}if(t!==0){if(t===2&&(a=Ec(e),a!==0&&(r=a,t=nu(e,a))),t===1)throw n=ri,hr(e,0),As(e,r),Ut(e,Ge()),n;if(t===6)As(e,r);else{if(a=e.current.alternate,!(r&30)&&!Iv(a)&&(t=zl(e,r),t===2&&(i=Ec(e),i!==0&&(r=i,t=nu(e,i))),t===1))throw n=ri,hr(e,0),As(e,r),Ut(e,Ge()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:or(e,Dt,ts);break;case 3:if(As(e,r),(r&130023424)===r&&(t=Xu+500-Ge(),10<t)){if(Nl(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Ot(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ic(or.bind(null,e,Dt,ts),t);break}or(e,Dt,ts);break;case 4:if(As(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-Nn(r);i=1<<l,l=t[l],l>a&&(a=l),r&=~i}if(r=a,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mv(r/1960))-r,10<r){e.timeoutHandle=Ic(or.bind(null,e,Dt,ts),r);break}or(e,Dt,ts);break;case 5:or(e,Dt,ts);break;default:throw Error(z(329))}}}return Ut(e,Ge()),e.callbackNode===n?qp.bind(null,e):null}function nu(e,t){var n=za;return e.current.memoizedState.isDehydrated&&(hr(e,t).flags|=256),e=zl(e,t),e!==2&&(t=Dt,Dt=n,t!==null&&su(t)),e}function su(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function Iv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!_n(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function As(e,t){for(t&=~Yu,t&=~Zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nn(t),r=1<<n;e[n]=-1,t&=~r}}function xh(e){if(we&6)throw Error(z(327));Gr();var t=Nl(e,0);if(!(t&1))return Ut(e,Ge()),null;var n=zl(e,t);if(e.tag!==0&&n===2){var r=Ec(e);r!==0&&(t=r,n=nu(e,r))}if(n===1)throw n=ri,hr(e,0),As(e,t),Ut(e,Ge()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,or(e,Dt,ts),Ut(e,Ge()),null}function Ju(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(ea=Ge()+500,Kl&&Hs())}}function xr(e){Ls!==null&&Ls.tag===0&&!(we&6)&&Gr();var t=we;we|=1;var n=cn.transition,r=Ae;try{if(cn.transition=null,Ae=1,e)return e()}finally{Ae=r,cn.transition=n,we=t,!(we&6)&&Hs()}}function Zu(){Gt=Ur.current,Be(Ur)}function hr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hv(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(Ou(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bl();break;case 3:Jr(),Be(zt),Be(kt),Vu();break;case 5:Uu(r);break;case 4:Jr();break;case 13:Be(Ve);break;case 19:Be(Ve);break;case 10:Du(r.type._context);break;case 22:case 23:Zu()}n=n.return}if(ut=e,Xe=e=zs(e.current,null),gt=Gt=t,at=0,ri=null,Yu=Zl=vr=0,Dt=za=null,ur!==null){for(t=0;t<ur.length;t++)if(n=ur[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}n.pending=r}ur=null}return e}function Gp(e,t){do{var n=Xe;try{if(Iu(),ll.current=Ml,Pl){for(var r=Fe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Pl=!1}if(gr=0,ct=rt=Fe=null,Da=!1,ti=0,Ku.current=null,n===null||n.return===null){at=1,ri=t,Xe=null;break}e:{var i=e,l=n.return,c=n,u=t;if(t=gt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=u,S=c,v=S.tag;if(!(S.mode&1)&&(v===0||v===11||v===15)){var y=S.alternate;y?(S.updateQueue=y.updateQueue,S.memoizedState=y.memoizedState,S.lanes=y.lanes):(S.updateQueue=null,S.memoizedState=null)}var E=ah(l);if(E!==null){E.flags&=-257,ih(E,l,c,i,t),E.mode&1&&rh(i,m,t),t=E,u=m;var R=t.updateQueue;if(R===null){var I=new Set;I.add(u),t.updateQueue=I}else R.add(u);break e}else{if(!(t&1)){rh(i,m,t),ed();break e}u=Error(z(426))}}else if($e&&c.mode&1){var g=ah(l);if(g!==null){!(g.flags&65536)&&(g.flags|=256),ih(g,l,c,i,t),Pu(Zr(u,c));break e}}i=u=Zr(u,c),at!==4&&(at=2),za===null?za=[i]:za.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=Tp(i,u,t);Jd(i,f);break e;case 1:c=u;var p=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ds===null||!Ds.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=Lp(i,c,t);Jd(i,k);break e}}i=i.return}while(i!==null)}Yp(n)}catch(M){t=M,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function Qp(){var e=Il.current;return Il.current=Ml,e===null?Ml:e}function ed(){(at===0||at===3||at===2)&&(at=4),ut===null||!(vr&268435455)&&!(Zl&268435455)||As(ut,gt)}function zl(e,t){var n=we;we|=2;var r=Qp();(ut!==e||gt!==t)&&(ts=null,hr(e,t));do try{Dv();break}catch(a){Gp(e,a)}while(!0);if(Iu(),we=n,Il.current=r,Xe!==null)throw Error(z(261));return ut=null,gt=0,at}function Dv(){for(;Xe!==null;)Kp(Xe)}function Bv(){for(;Xe!==null&&!cg();)Kp(Xe)}function Kp(e){var t=Jp(e.alternate,e,Gt);e.memoizedProps=e.pendingProps,t===null?Yp(e):Xe=t,Ku.current=null}function Yp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Lv(n,t),n!==null){n.flags&=32767,Xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,Xe=null;return}}else if(n=Tv(n,t,Gt),n!==null){Xe=n;return}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);at===0&&(at=5)}function or(e,t,n){var r=Ae,a=cn.transition;try{cn.transition=null,Ae=1,zv(e,t,n,r)}finally{cn.transition=a,Ae=r}return null}function zv(e,t,n,r){do Gr();while(Ls!==null);if(we&6)throw Error(z(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(yg(e,i),e===ut&&(Xe=ut=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ki||(Ki=!0,Zp(jl,function(){return Gr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=cn.transition,cn.transition=null;var l=Ae;Ae=1;var c=we;we|=4,Ku.current=null,Ov(e,n),Wp(n,e),av(Pc),wl=!!Oc,Pc=Oc=null,e.current=n,Pv(n),ug(),we=c,Ae=l,cn.transition=i}else e.current=n;if(Ki&&(Ki=!1,Ls=e,Bl=a),i=e.pendingLanes,i===0&&(Ds=null),fg(n.stateNode),Ut(e,Ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Dl)throw Dl=!1,e=eu,eu=null,e;return Bl&1&&e.tag!==0&&Gr(),i=e.pendingLanes,i&1?e===tu?$a++:($a=0,tu=e):$a=0,Hs(),null}function Gr(){if(Ls!==null){var e=Tf(Bl),t=cn.transition,n=Ae;try{if(cn.transition=null,Ae=16>e?16:e,Ls===null)var r=!1;else{if(e=Ls,Ls=null,Bl=0,we&6)throw Error(z(331));var a=we;for(we|=4,Y=e.current;Y!==null;){var i=Y,l=i.child;if(Y.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var m=c[u];for(Y=m;Y!==null;){var S=Y;switch(S.tag){case 0:case 11:case 15:Ba(8,S,i)}var v=S.child;if(v!==null)v.return=S,Y=v;else for(;Y!==null;){S=Y;var y=S.sibling,E=S.return;if(Up(S),S===m){Y=null;break}if(y!==null){y.return=E,Y=y;break}Y=E}}}var R=i.alternate;if(R!==null){var I=R.child;if(I!==null){R.child=null;do{var g=I.sibling;I.sibling=null,I=g}while(I!==null)}}Y=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Y=l;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ba(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,Y=f;break e}Y=i.return}}var p=e.current;for(Y=p;Y!==null;){l=Y;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,Y=x;else e:for(l=p;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Jl(9,c)}}catch(M){He(c,c.return,M)}if(c===l){Y=null;break e}var k=c.sibling;if(k!==null){k.return=c.return,Y=k;break e}Y=c.return}}if(we=a,Hs(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Wl,e)}catch{}r=!0}return r}finally{Ae=n,cn.transition=t}}return!1}function yh(e,t,n){t=Zr(n,t),t=Tp(e,t,1),e=Is(e,t,1),t=Ot(),e!==null&&(ii(e,1,t),Ut(e,t))}function He(e,t,n){if(e.tag===3)yh(e,e,n);else for(;t!==null;){if(t.tag===3){yh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ds===null||!Ds.has(r))){e=Zr(n,e),e=Lp(t,e,1),t=Is(t,e,1),e=Ot(),t!==null&&(ii(t,1,e),Ut(t,e));break}}t=t.return}}function $v(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(gt&n)===n&&(at===4||at===3&&(gt&130023424)===gt&&500>Ge()-Xu?hr(e,0):Yu|=n),Ut(e,t)}function Xp(e,t){t===0&&(e.mode&1?(t=zi,zi<<=1,!(zi&130023424)&&(zi=4194304)):t=1);var n=Ot();e=cs(e,t),e!==null&&(ii(e,t,n),Ut(e,n))}function Uv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xp(e,n)}function Vv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),Xp(e,n)}var Jp;Jp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zt.current)Bt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Bt=!1,Av(e,t,n);Bt=!!(e.flags&131072)}else Bt=!1,$e&&t.flags&1048576&&np(t,Al,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;cl(e,t),e=t.pendingProps;var a=Kr(t,kt.current);qr(t,n),a=Wu(null,t,r,e,a,n);var i=Hu();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$t(r)?(i=!0,Cl(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,zu(t),a.updater=Xl,t.stateNode=a,a._reactInternals=t,Fc(t,r,e,n),t=qc(null,t,r,!0,i,n)):(t.tag=0,$e&&i&&Ru(t),Rt(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(cl(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Wv(r),e=vn(r,e),a){case 0:t=Hc(null,t,r,e,n);break e;case 1:t=ch(null,t,r,e,n);break e;case 11:t=lh(null,t,r,e,n);break e;case 14:t=oh(null,t,r,vn(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vn(r,a),Hc(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vn(r,a),ch(e,t,r,a,n);case 3:e:{if(Mp(t),e===null)throw Error(z(387));r=t.pendingProps,i=t.memoizedState,a=i.element,op(e,t),Rl(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Zr(Error(z(423)),t),t=uh(e,t,r,n,a);break e}else if(r!==a){a=Zr(Error(z(424)),t),t=uh(e,t,r,n,a);break e}else for(Qt=Ms(t.stateNode.containerInfo.firstChild),Kt=t,$e=!0,jn=null,n=ip(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yr(),r===a){t=us(e,t,n);break e}Rt(e,t,r,n)}t=t.child}return t;case 5:return cp(t),e===null&&$c(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Mc(r,a)?l=null:i!==null&&Mc(r,i)&&(t.flags|=32),Pp(e,t),Rt(e,t,l,n),t.child;case 6:return e===null&&$c(t),null;case 13:return Ip(e,t,n);case 4:return $u(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xr(t,null,r,n):Rt(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vn(r,a),lh(e,t,r,a,n);case 7:return Rt(e,t,t.pendingProps,n),t.child;case 8:return Rt(e,t,t.pendingProps.children,n),t.child;case 12:return Rt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Me(Tl,r._currentValue),r._currentValue=l,i!==null)if(_n(i.value,l)){if(i.children===a.children&&!zt.current){t=us(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=is(-1,n&-n),u.tag=2;var m=i.updateQueue;if(m!==null){m=m.shared;var S=m.pending;S===null?u.next=u:(u.next=S.next,S.next=u),m.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Uc(i.return,n,t),c.lanes|=n;break}u=u.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(z(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Uc(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Rt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,qr(t,n),a=un(a),r=r(a),t.flags|=1,Rt(e,t,r,n),t.child;case 14:return r=t.type,a=vn(r,t.pendingProps),a=vn(r.type,a),oh(e,t,r,a,n);case 15:return Rp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vn(r,a),cl(e,t),t.tag=1,$t(r)?(e=!0,Cl(t)):e=!1,qr(t,n),Ap(t,r,a),Fc(t,r,a,n),qc(null,t,r,!0,e,n);case 19:return Dp(e,t,n);case 22:return Op(e,t,n)}throw Error(z(156,t.tag))};function Zp(e,t){return bf(e,t)}function Fv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(e,t,n,r){return new Fv(e,t,n,r)}function td(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wv(e){if(typeof e=="function")return td(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ju)return 11;if(e===Nu)return 14}return 2}function zs(e,t){var n=e.alternate;return n===null?(n=on(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function hl(e,t,n,r,a,i){var l=2;if(r=e,typeof e=="function")td(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Lr:return fr(n.children,a,i,t);case yu:l=8,a|=8;break;case fc:return e=on(12,n,t,a|2),e.elementType=fc,e.lanes=i,e;case pc:return e=on(13,n,t,a),e.elementType=pc,e.lanes=i,e;case mc:return e=on(19,n,t,a),e.elementType=mc,e.lanes=i,e;case cf:return eo(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lf:l=10;break e;case of:l=9;break e;case ju:l=11;break e;case Nu:l=14;break e;case bs:l=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=on(l,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function fr(e,t,n,r){return e=on(7,e,r,t),e.lanes=n,e}function eo(e,t,n,r){return e=on(22,e,r,t),e.elementType=cf,e.lanes=n,e.stateNode={isHidden:!1},e}function rc(e,t,n){return e=on(6,e,null,t),e.lanes=n,e}function ac(e,t,n){return t=on(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hv(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zo(0),this.expirationTimes=zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zo(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function nd(e,t,n,r,a,i,l,c,u){return e=new Hv(e,t,n,c,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=on(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zu(i),e}function qv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function em(e){if(!e)return Vs;e=e._reactInternals;e:{if(jr(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if($t(n))return ep(e,n,t)}return t}function tm(e,t,n,r,a,i,l,c,u){return e=nd(n,r,!0,e,a,i,l,c,u),e.context=em(null),n=e.current,r=Ot(),a=Bs(n),i=is(r,a),i.callback=t??null,Is(n,i,a),e.current.lanes=a,ii(e,a,r),Ut(e,r),e}function to(e,t,n,r){var a=t.current,i=Ot(),l=Bs(a);return n=em(n),t.context===null?t.context=n:t.pendingContext=n,t=is(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Is(a,t,l),e!==null&&(wn(e,a,l,i),il(e,a,l)),l}function $l(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sd(e,t){jh(e,t),(e=e.alternate)&&jh(e,t)}function Gv(){return null}var nm=typeof reportError=="function"?reportError:function(e){console.error(e)};function rd(e){this._internalRoot=e}no.prototype.render=rd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));to(e,t,null,null)};no.prototype.unmount=rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xr(function(){to(null,e,null,null)}),t[os]=null}};function no(e){this._internalRoot=e}no.prototype.unstable_scheduleHydration=function(e){if(e){var t=Of();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Es.length&&t!==0&&t<Es[n].priority;n++);Es.splice(n,0,e),n===0&&Mf(e)}};function ad(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function so(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nh(){}function Qv(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var m=$l(l);i.call(m)}}var l=tm(t,r,e,0,null,!1,!1,"",Nh);return e._reactRootContainer=l,e[os]=l.current,Ya(e.nodeType===8?e.parentNode:e),xr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var c=r;r=function(){var m=$l(u);c.call(m)}}var u=nd(e,0,!1,null,null,!1,!1,"",Nh);return e._reactRootContainer=u,e[os]=u.current,Ya(e.nodeType===8?e.parentNode:e),xr(function(){to(t,u,n,r)}),u}function ro(e,t,n,r,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var c=a;a=function(){var u=$l(l);c.call(u)}}to(t,l,e,a)}else l=Qv(n,t,e,a,r);return $l(l)}Lf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Aa(t.pendingLanes);n!==0&&(Su(t,n|1),Ut(t,Ge()),!(we&6)&&(ea=Ge()+500,Hs()))}break;case 13:xr(function(){var r=cs(e,1);if(r!==null){var a=Ot();wn(r,e,1,a)}}),sd(e,1)}};ku=function(e){if(e.tag===13){var t=cs(e,134217728);if(t!==null){var n=Ot();wn(t,e,134217728,n)}sd(e,134217728)}};Rf=function(e){if(e.tag===13){var t=Bs(e),n=cs(e,t);if(n!==null){var r=Ot();wn(n,e,t,r)}sd(e,t)}};Of=function(){return Ae};Pf=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};kc=function(e,t,n){switch(t){case"input":if(xc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Ql(r);if(!a)throw Error(z(90));df(r),xc(r,a)}}}break;case"textarea":ff(e,n);break;case"select":t=n.value,t!=null&&Vr(e,!!n.multiple,t,!1)}};jf=Ju;Nf=xr;var Kv={usingClientEntryPoint:!1,Events:[oi,Mr,Ql,xf,yf,Ju]},ka={findFiberByHostInstance:cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yv={bundleType:ka.bundleType,version:ka.version,rendererPackageName:ka.rendererPackageName,rendererConfig:ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sf(e),e===null?null:e.stateNode},findFiberByHostInstance:ka.findFiberByHostInstance||Gv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yi.isDisabled&&Yi.supportsFiber)try{Wl=Yi.inject(Yv),$n=Yi}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kv;Xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ad(t))throw Error(z(200));return qv(e,t,null,n)};Xt.createRoot=function(e,t){if(!ad(e))throw Error(z(299));var n=!1,r="",a=nm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=nd(e,1,!1,null,null,n,!1,r,a),e[os]=t.current,Ya(e.nodeType===8?e.parentNode:e),new rd(t)};Xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=Sf(t),e=e===null?null:e.stateNode,e};Xt.flushSync=function(e){return xr(e)};Xt.hydrate=function(e,t,n){if(!so(t))throw Error(z(200));return ro(null,e,t,!0,n)};Xt.hydrateRoot=function(e,t,n){if(!ad(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",l=nm;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=tm(t,null,e,1,n??null,a,!1,i,l),e[os]=t.current,Ya(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new no(t)};Xt.render=function(e,t,n){if(!so(t))throw Error(z(200));return ro(null,e,t,!1,n)};Xt.unmountComponentAtNode=function(e){if(!so(e))throw Error(z(40));return e._reactRootContainer?(xr(function(){ro(null,null,e,!1,function(){e._reactRootContainer=null,e[os]=null})}),!0):!1};Xt.unstable_batchedUpdates=Ju;Xt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!so(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return ro(e,t,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function sm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sm)}catch(e){console.error(e)}}sm(),nf.exports=Xt;var Xv=nf.exports,rm,wh=Xv;rm=wh.createRoot,wh.hydrateRoot;const Jv="http://localhost:3000";let ru=localStorage.getItem("token");function Er(e){ru=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async function ui(e,t={}){const n={"Content-Type":"application/json",...t.headers||{}};if(ru&&(n.Authorization=`Bearer ${ru}`),typeof window<"u"&&navigator&&navigator.onLine===!1)throw new Error("offline");let r;try{r=await fetch(`${Jv}${e}`,{...t,headers:n})}catch(a){throw typeof window<"u"&&navigator&&navigator.onLine===!1?new Error("offline"):a instanceof TypeError?new Error("network_error"):a}if(!r.ok){const i=(await r.json().catch(()=>({}))).error||"request_failed";throw new Error(i)}return r.json()}function me(e){return ui(e,{method:"GET"})}function Se(e,t){return ui(e,{method:"POST",body:JSON.stringify(t||{})})}function qe(e,t){return ui(e,{method:"PATCH",body:JSON.stringify(t||{})})}function Ul(e,t){return ui(e,{method:"PUT",body:JSON.stringify(t||{})})}function Bn(e){return ui(e,{method:"DELETE"})}const Fn=Object.create(null);Fn.open="0";Fn.close="1";Fn.ping="2";Fn.pong="3";Fn.message="4";Fn.upgrade="5";Fn.noop="6";const fl=Object.create(null);Object.keys(Fn).forEach(e=>{fl[Fn[e]]=e});const au={type:"error",data:"parser error"},am=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",im=typeof ArrayBuffer=="function",lm=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,id=({type:e,data:t},n,r)=>am&&t instanceof Blob?n?r(t):_h(t,r):im&&(t instanceof ArrayBuffer||lm(t))?n?r(t):_h(new Blob([t]),r):r(Fn[e]+(t||"")),_h=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Sh(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ic;function Zv(e,t){if(am&&e.data instanceof Blob)return e.data.arrayBuffer().then(Sh).then(t);if(im&&(e.data instanceof ArrayBuffer||lm(e.data)))return t(Sh(e.data));id(e,!1,n=>{ic||(ic=new TextEncoder),t(ic.encode(n))})}const kh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",La=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<kh.length;e++)La[kh.charCodeAt(e)]=e;const ex=e=>{let t=e.length*.75,n=e.length,r,a=0,i,l,c,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const m=new ArrayBuffer(t),S=new Uint8Array(m);for(r=0;r<n;r+=4)i=La[e.charCodeAt(r)],l=La[e.charCodeAt(r+1)],c=La[e.charCodeAt(r+2)],u=La[e.charCodeAt(r+3)],S[a++]=i<<2|l>>4,S[a++]=(l&15)<<4|c>>2,S[a++]=(c&3)<<6|u&63;return m},tx=typeof ArrayBuffer=="function",ld=(e,t)=>{if(typeof e!="string")return{type:"message",data:om(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:nx(e.substring(1),t)}:fl[n]?e.length>1?{type:fl[n],data:e.substring(1)}:{type:fl[n]}:au},nx=(e,t)=>{if(tx){const n=ex(e);return om(n,t)}else return{base64:!0,data:e}},om=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},cm="",sx=(e,t)=>{const n=e.length,r=new Array(n);let a=0;e.forEach((i,l)=>{id(i,!1,c=>{r[l]=c,++a===n&&t(r.join(cm))})})},rx=(e,t)=>{const n=e.split(cm),r=[];for(let a=0;a<n.length;a++){const i=ld(n[a],t);if(r.push(i),i.type==="error")break}return r};function ax(){return new TransformStream({transform(e,t){Zv(e,n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let lc;function Xi(e){return e.reduce((t,n)=>t+n.length,0)}function Ji(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)n[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function ix(e,t){lc||(lc=new TextDecoder);const n=[];let r=0,a=-1,i=!1;return new TransformStream({transform(l,c){for(n.push(l);;){if(r===0){if(Xi(n)<1)break;const u=Ji(n,1);i=(u[0]&128)===128,a=u[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(Xi(n)<2)break;const u=Ji(n,2);a=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(Xi(n)<8)break;const u=Ji(n,8),m=new DataView(u.buffer,u.byteOffset,u.length),S=m.getUint32(0);if(S>Math.pow(2,21)-1){c.enqueue(au);break}a=S*Math.pow(2,32)+m.getUint32(4),r=3}else{if(Xi(n)<a)break;const u=Ji(n,a);c.enqueue(ld(i?u:lc.decode(u),t)),r=0}if(a===0||a>e){c.enqueue(au);break}}}})}const um=4;function Je(e){if(e)return lx(e)}function lx(e){for(var t in Je.prototype)e[t]=Je.prototype[t];return e}Je.prototype.on=Je.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Je.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Je.prototype.off=Je.prototype.removeListener=Je.prototype.removeAllListeners=Je.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,a=0;a<n.length;a++)if(r=n[a],r===t||r.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Je.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,a=n.length;r<a;++r)n[r].apply(this,t)}return this};Je.prototype.emitReserved=Je.prototype.emit;Je.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Je.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ao=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),ln=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ox="arraybuffer";function dm(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const cx=ln.setTimeout,ux=ln.clearTimeout;function io(e,t){t.useNativeTimers?(e.setTimeoutFn=cx.bind(ln),e.clearTimeoutFn=ux.bind(ln)):(e.setTimeoutFn=ln.setTimeout.bind(ln),e.clearTimeoutFn=ln.clearTimeout.bind(ln))}const dx=1.33;function hx(e){return typeof e=="string"?fx(e):Math.ceil((e.byteLength||e.size)*dx)}function fx(e){let t=0,n=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function hm(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function px(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function mx(e){let t={},n=e.split("&");for(let r=0,a=n.length;r<a;r++){let i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class gx extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class od extends Je{constructor(t){super(),this.writable=!1,io(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new gx(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=ld(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=px(t);return n.length?"?"+n:""}}class vx extends od{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};rx(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,sx(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=hm()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let fm=!1;try{fm=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const xx=fm;function yx(){}class jx extends vx{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Vn extends Je{constructor(t,n,r){super(),this.createRequest=t,io(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=dm(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Vn.requestsCount++,Vn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=yx,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Vn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Vn.requestsCount=0;Vn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",bh);else if(typeof addEventListener=="function"){const e="onpagehide"in ln?"pagehide":"unload";addEventListener(e,bh,!1)}}function bh(){for(let e in Vn.requests)Vn.requests.hasOwnProperty(e)&&Vn.requests[e].abort()}const Nx=function(){const e=pm({xdomain:!1});return e&&e.responseType!==null}();class wx extends jx{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Nx&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Vn(pm,this.uri(),t)}}function pm(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||xx))return new XMLHttpRequest}catch{}if(!t)try{return new ln[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const mm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _x extends od{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=mm?{}:dm(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;id(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&ao(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=hm()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const oc=ln.WebSocket||ln.MozWebSocket;class Sx extends _x{createSocket(t,n,r){return mm?new oc(t,n,r):n?new oc(t,n):new oc(t)}doWrite(t,n){this.ws.send(n)}}class kx extends od{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=ix(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),a=ax();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:c,value:u})=>{c||(this.onPacket(u),i())}).catch(c=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;this._writer.write(r).then(()=>{a&&ao(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const bx={websocket:Sx,webtransport:kx,polling:wx},Cx=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ex=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function iu(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let a=Cx.exec(e||""),i={},l=14;for(;l--;)i[Ex[l]]=a[l]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Ax(i,i.path),i.queryKey=Tx(i,i.query),i}function Ax(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Tx(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(n[a]=i)}),n}const lu=typeof addEventListener=="function"&&typeof removeEventListener=="function",pl=[];lu&&addEventListener("offline",()=>{pl.forEach(e=>e())},!1);class $s extends Je{constructor(t,n){if(super(),this.binaryType=ox,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=iu(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=iu(n.host).host);io(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=mx(this.opts.query)),lu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},pl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=um,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&$s.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",$s.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(n+=hx(a)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ao(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,a){if(typeof n=="function"&&(a=n,n=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if($s.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),lu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=pl.indexOf(this._offlineEventListener);r!==-1&&pl.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}$s.protocol=um;class Lx extends $s{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;$s.priorWebsocketSuccess=!1;const a=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",v=>{if(!r)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;$s.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(S(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function i(){r||(r=!0,S(),n.close(),n=null)}const l=v=>{const y=new Error("probe error: "+v);y.transport=n.name,i(),this.emitReserved("upgradeError",y)};function c(){l("transport closed")}function u(){l("socket closed")}function m(v){n&&v.name!==n.name&&i()}const S=()=>{n.removeListener("open",a),n.removeListener("error",l),n.removeListener("close",c),this.off("close",u),this.off("upgrading",m)};n.once("open",a),n.once("error",l),n.once("close",c),this.once("close",u),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let Rx=class extends Lx{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>bx[a]).filter(a=>!!a)),super(t,r)}};function Ox(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=iu(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Px=typeof ArrayBuffer=="function",Mx=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,gm=Object.prototype.toString,Ix=typeof Blob=="function"||typeof Blob<"u"&&gm.call(Blob)==="[object BlobConstructor]",Dx=typeof File=="function"||typeof File<"u"&&gm.call(File)==="[object FileConstructor]";function cd(e){return Px&&(e instanceof ArrayBuffer||Mx(e))||Ix&&e instanceof Blob||Dx&&e instanceof File}function ml(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(ml(e[n]))return!0;return!1}if(cd(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ml(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ml(e[n]))return!0;return!1}function Bx(e){const t=[],n=e.data,r=e;return r.data=ou(n,t),r.attachments=t.length,{packet:r,buffers:t}}function ou(e,t){if(!e)return e;if(cd(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=ou(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=ou(e[r],t));return n}return e}function zx(e,t){return e.data=cu(e.data,t),delete e.attachments,e}function cu(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=cu(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=cu(e[n],t));return e}const vm=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$x=5;var fe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(fe||(fe={}));class Ux{constructor(t){this.replacer=t}encode(t){return(t.type===fe.EVENT||t.type===fe.ACK)&&ml(t)?this.encodeAsBinary({type:t.type===fe.EVENT?fe.BINARY_EVENT:fe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===fe.BINARY_EVENT||t.type===fe.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Bx(t),r=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(r),a}}class ud extends Je{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===fe.BINARY_EVENT;r||n.type===fe.BINARY_ACK?(n.type=r?fe.EVENT:fe.ACK,this.reconstructor=new Vx(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(cd(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(fe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===fe.BINARY_EVENT||r.type===fe.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(i,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(i,n)}else r.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(ud.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case fe.CONNECT:return Vl(n);case fe.DISCONNECT:return n===void 0;case fe.CONNECT_ERROR:return typeof n=="string"||Vl(n);case fe.EVENT:case fe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&vm.indexOf(n[0])===-1);case fe.ACK:case fe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Vx{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=zx(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Fx(e){return typeof e=="string"}const Wx=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function Hx(e){return e===void 0||Wx(e)}function Vl(e){return Object.prototype.toString.call(e)==="[object Object]"}function qx(e,t){switch(e){case fe.CONNECT:return t===void 0||Vl(t);case fe.DISCONNECT:return t===void 0;case fe.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&vm.indexOf(t[0])===-1);case fe.ACK:return Array.isArray(t);case fe.CONNECT_ERROR:return typeof t=="string"||Vl(t);default:return!1}}function Gx(e){return Fx(e.nsp)&&Hx(e.id)&&qx(e.type,e.data)}const Qx=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ud,Encoder:Ux,get PacketType(){return fe},isPacketValid:Gx,protocol:$x},Symbol.toStringTag,{value:"Module"}));function yn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Kx=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xm extends Je{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[yn(t,"open",this.onopen.bind(this)),yn(t,"packet",this.onpacket.bind(this)),yn(t,"error",this.onerror.bind(this)),yn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,a,i;if(Kx.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:fe.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const S=this.ids++,v=n.pop();this._registerAckCallback(S,v),l.id=S}const c=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,u=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(u?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},a),l=(...c)=>{this.io.clearTimeoutFn(i),n.apply(this,c)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((r,a)=>{const i=(l,c)=>l?a(l):r(c);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>(this._queue[0],a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case fe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case fe.EVENT:case fe.BINARY_EVENT:this.onevent(t);break;case fe.ACK:case fe.BINARY_ACK:this.onack(t);break;case fe.DISCONNECT:this.ondisconnect();break;case fe.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...a){r||(r=!0,n.packet({type:fe.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function ra(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ra.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};ra.prototype.reset=function(){this.attempts=0};ra.prototype.setMin=function(e){this.ms=e};ra.prototype.setMax=function(e){this.max=e};ra.prototype.setJitter=function(e){this.jitter=e};class uu extends Je{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,io(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ra({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||Qx;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Rx(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=yn(n,"open",function(){r.onopen(),t&&t()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},l=yn(n,"error",i);if(this._timeout!==!1){const c=this._timeout,u=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(a),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(yn(t,"ping",this.onping.bind(this)),yn(t,"data",this.ondata.bind(this)),yn(t,"error",this.onerror.bind(this)),yn(t,"close",this.onclose.bind(this)),yn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){ao(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new xm(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ba={};function gl(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Ox(e,t.path||"/socket.io"),r=n.source,a=n.id,i=n.path,l=ba[a]&&i in ba[a].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let u;return c?u=new uu(r,t):(ba[a]||(ba[a]=new uu(r,t)),u=ba[a]),n.query&&!t.query&&(t.query=n.queryKey),u.socket(n.path,t)}Object.assign(gl,{Manager:uu,Socket:xm,io:gl,connect:gl});const Yx="http://localhost:3000";function Xx(e){return gl(Yx,{auth:{token:e}})}const ym=h.createContext(null);function Jx({children:e}){const[t,n]=h.useState([]),r=h.useRef(new Map),a=c=>{n(m=>m.filter(S=>S.id!==c));const u=r.current.get(c);u&&(clearTimeout(u),r.current.delete(c))},i=({message:c,type:u="success",actionLabel:m,onAction:S,duration:v=6e3})=>{const y=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if(n(E=>[...E,{id:y,message:c,type:u,actionLabel:m,onAction:S,duration:v}]),v>0){const E=setTimeout(()=>a(y),v);r.current.set(y,E)}return y},l=c=>c==="error"?s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M12 4.5c.5 0 .95.26 1.2.68l6.5 11.25a1.35 1.35 0 0 1-1.2 2.02H5.5a1.35 1.35 0 0 1-1.2-2.02L10.8 5.18c.25-.42.7-.68 1.2-.68Zm0 4.25a.9.9 0 0 0-.9.9v5.5a.9.9 0 1 0 1.8 0v-5.5a.9.9 0 0 0-.9-.9Zm0 8.3a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z",fill:"currentColor"})}):c==="info"?s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M12 3.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17Zm0 3.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Zm-1.2 4.2h2.4v6.1h-2.4v-6.1Z",fill:"currentColor"})}):s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M9.5 16.6 5.6 12.7a1 1 0 1 1 1.4-1.4l2.5 2.5 7.5-7.5a1 1 0 1 1 1.4 1.4l-8.9 8.9a1 1 0 0 1-1.4 0Z",fill:"currentColor"})});return s.jsxs(ym.Provider,{value:{pushToast:i,removeToast:a},children:[e,s.jsx("div",{className:"toast-container",children:t.map(c=>s.jsxs("div",{className:`toast toast-${c.type}`,style:{"--toast-duration":`${c.duration}ms`},children:[s.jsx("div",{className:"toast-icon",children:l(c.type)}),s.jsx("div",{className:"toast-message",children:c.message}),c.actionLabel&&s.jsx("button",{className:"toast-action",type:"button",onClick:()=>{c.onAction&&Promise.resolve(c.onAction()).catch(()=>{}),a(c.id)},children:c.actionLabel}),s.jsx("button",{className:"toast-close",type:"button",onClick:()=>a(c.id),children:"x"}),c.duration>0&&s.jsx("div",{className:`toast-progress toast-progress-${c.type}`})]},c.id))})]})}function dd(){const e=h.useContext(ym);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function Zx({user:e,isOpen:t,onToggle:n,onLogout:r,onReturnToSuperadmin:a,showReturnToSuperadmin:i,getInitial:l}){return s.jsxs("div",{className:"rail-profile",children:[s.jsx("button",{className:`profile-button ${t?"active":""}`,type:"button",onClick:n,title:"Perfil","aria-label":"Perfil",children:s.jsx("span",{children:l(e.name)})}),t&&s.jsxs("div",{className:"profile-card",children:[s.jsx("div",{className:"profile-title",children:e.name}),s.jsx("div",{className:"profile-meta",children:e.email||"Sin correo"}),s.jsx("div",{className:"profile-role",children:e.role}),i?s.jsx("button",{className:"ghost",type:"button",onClick:a,children:"Volver a superadmin"}):null,s.jsx("button",{className:"primary",type:"button",onClick:r,children:"Salir"})]})]})}function ey({navItems:e,view:t,onSetView:n,theme:r,onToggleTheme:a,user:i,logoUrl:l,brandName:c,isProfileOpen:u,onToggleProfile:m,onLogout:S,onReturnToSuperadmin:v,showReturnToSuperadmin:y,getInitial:E,SunIcon:R,MoonIcon:I}){const g=(c||"P").trim().charAt(0)||"P";return s.jsxs("aside",{className:"nav-rail",children:[s.jsx("button",{className:"rail-logo",type:"button",title:c||"Logo",children:l?s.jsx("img",{src:l,alt:c||"Logo"}):s.jsx("span",{className:"logo-mark",children:g})}),s.jsx("nav",{className:"rail-nav",children:e.map(f=>{const p=f.icon;return s.jsx("button",{className:`rail-button ${t===f.id?"active":""}`,onClick:()=>f.enabled&&n(f.id),title:f.label,"aria-label":f.label,type:"button",disabled:!f.enabled,children:s.jsx(p,{className:"rail-icon"})},f.id)})}),s.jsx("div",{className:"rail-spacer"}),s.jsx("button",{className:"rail-button",type:"button",onClick:a,title:r==="dark"?"Tema claro":"Tema oscuro","aria-label":r==="dark"?"Tema claro":"Tema oscuro",children:r==="dark"?s.jsx(R,{className:"rail-icon"}):s.jsx(I,{className:"rail-icon"})}),s.jsx(Zx,{user:i,isOpen:u,onToggle:m,onLogout:S,onReturnToSuperadmin:v,showReturnToSuperadmin:y,getInitial:E})]})}function ty({activeConversation:e,conversations:t,channels:n,brandName:r,lastReadMap:a,filters:i,showFilters:l,users:c,tags:u,statusOptions:m,statusLabels:S,formatListTime:v,messageBlocks:y,messageDraft:E,messageMode:R,quickActions:I,tagInput:g,setTagInput:f,noteInput:p,notesList:x,latestNote:k,loadingConversation:M,isInfoOpen:$,hasUnread:A,scrollDayLabel:w,activeName:P,activePhone:O,activeStatusLabel:K,canManageStatus:oe,currentUser:ue,messageInputRef:_e,chatBodyRef:Ce,setShowFilters:Re,setFilters:Ue,loadConversation:W,handleBackToList:te,setIsInfoOpen:Z,handleChatScroll:de,handleAssignSelf:ce,handleStatusChange:Le,handleToggleTag:T,handleAddTag:q,setNoteInput:b,handleAddNote:U,reassignUserId:Q,setReassignUserId:ie,handleReassignConversation:pe,handleOpenTagManager:ge,handleCloseTagManager:Ze,showTagManager:xt,tagManagerForm:bt,setTagManagerForm:ve,handleCreateTag:Ct,handleDeleteTag:It,handleQuickAction:Vt,handleSendMessage:Qe,setMessageMode:be,setMessageDraft:it,scrollChatToBottom:Ft,getInitial:Zt,PlusIcon:lt,SearchIcon:hn,VideoIcon:et,PhoneIcon:xe,InfoIcon:Et,SendIcon:F}){const Oe=new Map((n||[]).map(L=>[L.phone_number_id,L.display_name||(L.phone_number_id?`Linea ${String(L.phone_number_id).slice(-4)}`:"")])),ye=new Map((c||[]).map(L=>[L.id,L])),Ke=(e==null?void 0:e.assigned_user_id)&&e.assigned_user_id!==(ue==null?void 0:ue.id);function Sn(L){if(!L)return"Sin mensajes";const Ee=L.last_message_preview||L.last_message_text||L.last_message||"";return Ee||(L.last_message_type?`[${L.last_message_type}]`:"Sin mensajes")}return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:`chat-shell ${e?"has-active":""}`,children:[s.jsxs("aside",{className:"chat-list-panel",children:[s.jsxs("div",{className:"chat-list-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"list-title",children:(r||"Perzivalh").toUpperCase()}),s.jsx("div",{className:"list-subtitle",children:"Chats"})]}),s.jsx("button",{className:"icon-button add-chat",type:"button",title:"Nuevo chat",children:s.jsx(lt,{className:"icon"})})]}),s.jsxs("div",{className:"chat-search ui-search",children:[s.jsx(hn,{className:"search-icon ui-search-icon"}),s.jsx("input",{type:"text",placeholder:"Buscar pacientes o mensajes",value:i.search,onFocus:()=>Re(!0),onClick:()=>Re(!0),onChange:L=>Ue(Ee=>({...Ee,search:L.target.value}))}),l&&s.jsx("button",{className:"search-close",type:"button",onClick:()=>Re(!1),"aria-label":"Cerrar filtros",children:"x"})]}),l&&s.jsxs("div",{className:"chat-filters",children:[s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Status"}),s.jsxs("select",{value:i.status,onChange:L=>Ue(Ee=>({...Ee,status:L.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),m.map(L=>s.jsx("option",{value:L,children:S[L]||L},L))]})]}),s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Asignado"}),s.jsxs("select",{value:i.assigned_user_id,onChange:L=>Ue(Ee=>({...Ee,assigned_user_id:L.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"unassigned",children:"Sin asignar"}),c.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]})]}),s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Tags"}),s.jsxs("select",{value:i.tag,onChange:L=>Ue(Ee=>({...Ee,tag:L.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),u.map(L=>s.jsx("option",{value:L.name,children:L.name},L.id))]})]})]}),s.jsxs("div",{className:"list-header",children:[s.jsxs("select",{className:"line-filter",value:i.phone_number_id,onChange:L=>Ue(Ee=>({...Ee,phone_number_id:L.target.value})),children:[s.jsx("option",{value:"",children:"Todas las lineas"}),(n||[]).map(L=>s.jsx("option",{value:L.phone_number_id,children:L.display_name||`Linea ${String(L.phone_number_id).slice(-4)}`},L.id))]}),s.jsx("span",{children:t.length})]}),s.jsx("div",{className:"conversation-list",children:t.map((L,Ee)=>{var dt,tt,nt,fs;const qs=(e==null?void 0:e.id)===L.id,kn=L.status==="pending"&&!L.assigned_user_id,Wn=L.display_name||L.phone_e164||L.wa_id||"Sin nombre",hs=Sn(L),bn=Number(L.unread_count||L.unread_messages||L.unread||0),Wt=((tt=(dt=L.tags)==null?void 0:dt[0])==null?void 0:tt.name)||"",_=((nt=L.assigned_user)==null?void 0:nt.name)||((fs=ye.get(L.assigned_user_id||""))==null?void 0:fs.name)||"",V=_?`Tomada por ${_}`:"",H=L.phone_number_id?Oe.get(L.phone_number_id)||`Linea ${String(L.phone_number_id).slice(-4)}`:"",re=(a==null?void 0:a[L.id])||null,Ne=L.last_message_at,fn=Ne&&(!re||new Date(Ne).getTime()>new Date(re).getTime())&&L.last_message_direction==="in";return s.jsxs("button",{className:`conversation-item ${qs?"active":""}`,onClick:()=>W(L.id),style:{animationDelay:`${Math.min(Ee,6)*60}ms`},children:[s.jsxs("div",{className:"avatar",children:[s.jsx("span",{children:Zt(Wn)}),kn&&s.jsx("span",{className:"presence-dot"})]}),s.jsxs("div",{className:"conversation-body",children:[s.jsxs("div",{className:"conversation-row",children:[s.jsx("span",{className:"conversation-name",children:Wn}),s.jsxs("div",{className:"conversation-right",children:[s.jsx("span",{className:"conversation-time",children:v(L.last_message_at)}),bn>0&&s.jsx("span",{className:"conversation-unread",children:bn})]})]}),s.jsx("div",{className:`conversation-preview ${fn?"unread":""}`,children:hs}),s.jsxs("div",{className:"conversation-meta",children:[H&&s.jsx("span",{className:"status-pill line-pill",children:H}),V&&s.jsx("span",{className:"status-pill assignee-pill",children:V}),Wt&&s.jsx("span",{className:"status-pill tag-pill",children:Wt})]})]})]},L.id)})})]}),s.jsxs("div",{className:`chat-view ${$?"info-open":"info-closed"}`,children:[s.jsx("div",{className:"chat-main",children:s.jsxs("div",{className:"chat-card",children:[s.jsxs("header",{className:"chat-topbar",children:[s.jsxs("div",{className:"chat-title",children:[e&&s.jsx("button",{className:"back-button",type:"button",onClick:te,children:"Chats"}),s.jsx("div",{className:"chat-avatar",children:s.jsx("span",{children:Zt(P)})}),s.jsxs("div",{children:[s.jsx("div",{className:"chat-name",children:P}),e?s.jsx("div",{className:"chat-status",children:K}):s.jsx("div",{className:"chat-status muted",children:"Elige una conversacion"})]})]}),s.jsxs("div",{className:"chat-actions",children:[s.jsx("button",{className:"icon-button",type:"button",title:"Video",children:s.jsx(et,{className:"icon"})}),s.jsx("button",{className:"icon-button",type:"button",title:"Llamar",children:s.jsx(xe,{className:"icon"})}),s.jsx("button",{className:"icon-button",type:"button",title:"Buscar",children:s.jsx(hn,{className:"icon"})}),s.jsx("button",{className:`icon-button ${$?"active":""}`,type:"button",title:"Info",onClick:()=>Z(L=>!L),children:s.jsx(Et,{className:"icon"})})]})]}),s.jsxs("div",{className:"chat-body",ref:Ce,onScroll:de,children:[w&&s.jsx("div",{className:"chat-day-sticky","aria-hidden":"true",children:w}),M&&s.jsx("div",{className:"empty",children:"Cargando..."}),!M&&!e&&s.jsx("div",{className:"empty",children:"Selecciona una conversacion"}),!M&&e&&s.jsx(s.Fragment,{children:y.length?y:s.jsx("div",{className:"empty-state",children:"Sin mensajes"})})]}),A&&s.jsx("button",{className:"new-message-banner",type:"button",onClick:Ft,children:"Nuevos mensajes"}),s.jsxs("form",{className:"chat-composer",onSubmit:Qe,children:[Ke&&s.jsx("div",{className:"assign-warning",children:"Conversacion tomada por otro operador."}),I.length>0&&s.jsx("div",{className:"quick-actions",children:I.map(L=>s.jsx("button",{className:"quick-action",type:"button",onClick:()=>Vt(L),disabled:Ke,children:L},L))}),s.jsxs("div",{className:"composer-row",children:[s.jsxs("select",{className:"message-mode",value:R,onChange:L=>be(L.target.value),disabled:Ke,children:[s.jsx("option",{value:"text",children:"WhatsApp"}),s.jsx("option",{value:"note",children:"Nota interna"})]}),s.jsx("input",{ref:_e,type:"text",placeholder:"Escribe un mensaje...",value:E,onChange:L=>it(L.target.value),disabled:Ke}),s.jsx("button",{className:"send-button",type:"submit",disabled:Ke,children:s.jsx(F,{className:"icon"})})]})]})]})}),s.jsxs("aside",{className:"chat-info",children:[s.jsxs("div",{className:"info-card",children:[s.jsx("div",{className:"info-avatar",children:s.jsx("span",{children:Zt(P)})}),s.jsx("div",{className:"info-name",children:P}),s.jsx("div",{className:"info-phone",children:O||"Sin telefono"})]}),s.jsxs("div",{className:"info-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("div",{className:"section-title",children:"Etiquetas"}),s.jsx("button",{className:"link-button",type:"button",onClick:ge,children:"Gestionar"})]}),s.jsx("div",{className:"tag-list",children:((e==null?void 0:e.tags)||[]).length?e.tags.map(L=>s.jsxs("span",{className:"tag-chip",children:[s.jsx("span",{className:"tag-chip-label",children:L.name}),s.jsx("button",{className:"tag-remove",type:"button",title:"Quitar etiqueta",onClick:()=>T(L.name),children:"x"})]},L.name)):s.jsx("div",{className:"empty-state",children:"Sin etiquetas"})}),s.jsxs("form",{className:"tag-form",onSubmit:q,children:[s.jsxs("select",{value:g,onChange:L=>f(L.target.value),children:[s.jsx("option",{value:"",children:"Selecciona etiqueta..."}),u.filter(L=>!((e==null?void 0:e.tags)||[]).some(Ee=>Ee.name===L.name)).map(L=>s.jsx("option",{value:L.name,children:L.name},L.id))]}),s.jsx("button",{className:"icon-button",type:"submit",title:"Agregar",children:s.jsx(lt,{className:"icon"})})]})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Notas internas"}),x!=null&&x.length?s.jsx("div",{className:"notes-stack",children:x.slice(-5).map(L=>s.jsx("div",{className:"note-card",children:L.text},L.id))}):s.jsx("div",{className:"empty-state",children:"Sin notas internas"}),s.jsxs("form",{className:"note-form",onSubmit:U,children:[s.jsx("input",{type:"text",placeholder:"Agregar nota interna...",value:p,onChange:L=>b(L.target.value),disabled:!e}),s.jsx("button",{className:"icon-button",type:"submit",title:"Guardar nota",children:s.jsx(lt,{className:"icon"})})]})]}),e&&s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Acciones"}),s.jsxs("div",{className:"action-stack",children:[s.jsx("button",{className:"ghost action-btn",type:"button",onClick:ce,disabled:Ke,children:"Tomar conversacion"}),oe&&s.jsxs("div",{className:"reassign-card",children:[s.jsxs("select",{value:Q,onChange:L=>ie(L.target.value),children:[s.jsx("option",{value:"",children:"Reasignar a..."}),c.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]}),s.jsx("button",{className:"ghost action-btn",type:"button",onClick:pe,disabled:!Q,children:"Reasignar"})]}),oe&&s.jsxs("div",{className:"action-row",children:[s.jsx("button",{className:"ghost action-btn",type:"button",onClick:()=>Le("open"),children:"Reactivar bot"}),s.jsx("button",{className:"ghost action-btn",type:"button",onClick:()=>Le("pending"),children:"Liberar para otro operador"})]})]})]})]})]})]}),xt&&s.jsx("div",{className:"modal-overlay",onClick:Ze,children:s.jsxs("div",{className:"modal-card",onClick:L=>L.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:"Gestion de etiquetas"}),s.jsx("button",{className:"modal-close",type:"button",onClick:Ze,children:"x"})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("form",{className:"tag-manager-form",onSubmit:Ct,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:bt.name,onChange:L=>ve(Ee=>({...Ee,name:L.target.value})),placeholder:"Nombre de etiqueta"})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Color"}),s.jsx("input",{type:"color",value:bt.color,onChange:L=>ve(Ee=>({...Ee,color:L.target.value}))})]}),s.jsx("div",{className:"modal-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Crear etiqueta"})})]}),s.jsx("div",{className:"tag-manager-list",children:(u||[]).map(L=>s.jsxs("div",{className:"tag-manager-row",children:[s.jsx("span",{className:"tag-chip",style:{borderColor:L.color||"#cbd5f5"},children:s.jsx("span",{className:"tag-chip-label",children:L.name})}),s.jsx("div",{className:"tag-manager-actions",children:s.jsx("button",{className:"danger soft",type:"button",onClick:()=>It(L.id,L.name),children:"Eliminar"})})]},L.id))})]})]})})]})}const ny=[{day:"2024-01-01",in_count:210,out_count:90},{day:"2024-01-04",in_count:280,out_count:120},{day:"2024-01-07",in_count:240,out_count:110},{day:"2024-01-10",in_count:320,out_count:140},{day:"2024-01-13",in_count:300,out_count:130},{day:"2024-01-17",in_count:310,out_count:135},{day:"2024-01-20",in_count:290,out_count:120},{day:"2024-01-24",in_count:260,out_count:115},{day:"2024-01-27",in_count:330,out_count:150},{day:"2024-01-30",in_count:340,out_count:160}];function sy(e){const t=e?new Date(e):null;if(!t||Number.isNaN(t.getTime()))return"--";const n=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${String(t.getDate()).padStart(2,"0")} ${n[t.getMonth()].toUpperCase()}`}function Ch(e){return e.length?e.map((t,n)=>`${n===0?"M":"L"}${t.x} ${t.y}`).join(" "):""}function ry({statusCounts:e,metrics:t,onRefresh:n,brandName:r}){var w;const a=(r||"Empresa").trim(),i=a?`${a} Enterprise`:"Enterprise",l=(e.open||0)+(e.pending||0),c=t!=null&&t.avg_first_reply_seconds?Number(t.avg_first_reply_seconds)/60:null,u=c?`${c.toFixed(1)}m`:"-",m=(t==null?void 0:t.conversion_rate)??(t==null?void 0:t.conversion_rate_percent)??null,v=`${(m==null?18.4:m>1?m:m*100).toFixed(1)}%`,y=((w=t==null?void 0:t.message_volume)==null?void 0:w.length)>0?t.message_volume.slice(-10):ny,E=Math.max(...y.map(P=>P.in_count+P.out_count),1),R=y.length*42+30,I=220,g=150,f=180,p=y.map((P,O)=>{const oe=(P.in_count+P.out_count)/E*g,ue=P.in_count/E*g,_e=P.out_count/E*g;return{x:22+O*42,totalHeight:oe,inHeight:ue,outHeight:_e}}),x=Ch(p.map((P,O)=>({x:P.x+10,y:f-P.inHeight}))),k=Ch(p.map(P=>({x:P.x+10,y:f-P.outHeight}))),M=Array.from(new Set([0,Math.floor(y.length/3),Math.floor(2*y.length/3),y.length-1])),$=Math.round((t==null?void 0:t.team_efficiency)||94),A=((t==null?void 0:t.top_tags)||[]).slice(0,3);return s.jsxs("section",{className:"dashboard-layout",children:[s.jsxs("div",{className:"dashboard-main",children:[s.jsxs("header",{className:"dashboard-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kicker",children:i}),s.jsx("h2",{className:"dashboard-title",children:"Dashboard"}),s.jsx("div",{className:"dashboard-subtitle",children:"Marketing Analytics & WhatsApp CRM Overview"})]}),s.jsxs("div",{className:"dashboard-actions",children:[s.jsxs("button",{className:"dash-filter",type:"button",children:[s.jsx("span",{className:"dash-filter-icon","aria-hidden":"true"}),"Ultimos 30 dias"]}),s.jsx("button",{className:"primary",type:"button",onClick:n,children:"Generar Reporte"})]})]}),s.jsxs("div",{className:"dashboard-kpis",children:[s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Conversaciones activas"}),s.jsx("div",{className:"dash-kpi-value",children:l.toLocaleString()})]}),s.jsx("div",{className:"dash-kpi-icon",children:"C"})]}),s.jsx("div",{className:"dash-kpi-change up",children:"+12.5%"})]}),s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Tiempo de respuesta"}),s.jsx("div",{className:"dash-kpi-value",children:u})]}),s.jsx("div",{className:"dash-kpi-icon",children:"T"})]}),s.jsx("div",{className:"dash-kpi-change down",children:"-0.8m"})]}),s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Tasa de conversion"}),s.jsx("div",{className:"dash-kpi-value",children:v})]}),s.jsx("div",{className:"dash-kpi-icon",children:"%"})]}),s.jsx("div",{className:"dash-kpi-change up",children:"+2.1%"})]})]}),s.jsxs("div",{className:"dash-card dash-chart-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-card-title",children:"Flujo de Mensajes"}),s.jsx("div",{className:"dash-card-subtitle",children:"Volumen diario"})]}),s.jsxs("div",{className:"dash-legend",children:[s.jsxs("span",{className:"dash-legend-item",children:[s.jsx("span",{className:"dash-legend-dot in"})," Entrantes"]}),s.jsxs("span",{className:"dash-legend-item",children:[s.jsx("span",{className:"dash-legend-dot out"})," Salientes"]})]})]}),s.jsx("div",{className:"dash-chart",children:s.jsxs("svg",{className:"dash-chart-svg",viewBox:`0 0 ${R} ${I}`,preserveAspectRatio:"none",children:[s.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"60",x2:R,y2:"60"}),s.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"120",x2:R,y2:"120"}),p.map((P,O)=>s.jsxs("g",{children:[s.jsx("rect",{className:"dash-bar in",x:P.x,y:f-P.inHeight,width:"20",height:P.inHeight,rx:"6"}),s.jsx("rect",{className:"dash-bar out",x:P.x,y:f-P.inHeight-P.outHeight,width:"20",height:P.outHeight,rx:"6"})]},`bar-${O}`)),s.jsx("path",{className:"dash-line in",d:x}),s.jsx("path",{className:"dash-line out",d:k})]})}),s.jsx("div",{className:"dash-chart-labels",children:M.map(P=>{var O;return s.jsx("span",{children:sy((O=y[P])==null?void 0:O.day)},`label-${P}`)})})]}),s.jsxs("div",{className:"dashboard-lower",children:[s.jsxs("div",{className:"dash-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsx("div",{className:"dash-card-title",children:"Ultimas etiquetas detectadas"}),s.jsx("button",{className:"link-button",type:"button",children:"Ver todo"})]}),s.jsxs("div",{className:"dash-tag-table",children:[s.jsxs("div",{className:"dash-tag-head",children:[s.jsx("span",{children:"Etiqueta"}),s.jsx("span",{children:"Frecuencia"}),s.jsx("span",{children:"Accion"})]}),A.map(P=>s.jsxs("div",{className:"dash-tag-row",children:[s.jsx("span",{className:"dash-tag-chip",children:P.name}),s.jsx("span",{className:"dash-tag-count",children:P.count}),s.jsx("span",{className:"dash-tag-action",children:">"})]},P.name)),!A.length&&s.jsx("div",{className:"empty-state",children:"Sin etiquetas recientes"})]})]}),s.jsxs("div",{className:"dash-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsx("div",{className:"dash-card-title",children:"Actividad de Campana"}),s.jsx("span",{className:"dash-pill",children:"Monitor"})]}),s.jsxs("div",{className:"dash-campaign",children:[s.jsx("div",{className:"dash-campaign-title",children:'Campana de Verano "Pies Sanos"'}),s.jsxs("div",{className:"dash-campaign-meta",children:[s.jsx("span",{className:"dash-pill solid",children:"84% enviado"}),s.jsx("span",{className:"dash-muted",children:"Hace 2 horas"})]}),s.jsx("div",{className:"dash-progress",children:s.jsx("div",{className:"dash-progress-fill",style:{width:"84%"}})}),s.jsx("div",{className:"dash-muted",children:"1,240 destinatarios"})]})]})]})]}),s.jsxs("aside",{className:"dashboard-side",children:[s.jsxs("div",{className:"dash-card",children:[s.jsx("div",{className:"dash-card-title",children:"Performance de Operadores"}),s.jsx("div",{className:"dash-card-subtitle",children:"Top 5 leaderboard - hoy"}),s.jsx("div",{className:"dash-operator-list",children:[{name:"Lucia Fernandez",role:"Especialista CRM",resolved:84,pending:3},{name:"Ricardo Gomez",role:"Atencion Pacientes",resolved:71,pending:8},{name:"Ana Martinez",role:"Soporte Medico",resolved:65,pending:12}].map(P=>s.jsxs("div",{className:"dash-operator",children:[s.jsx("div",{className:"dash-operator-avatar",children:P.name[0]}),s.jsxs("div",{className:"dash-operator-meta",children:[s.jsx("div",{className:"dash-operator-name",children:P.name}),s.jsx("div",{className:"dash-operator-role",children:P.role}),s.jsxs("div",{className:"dash-operator-stats",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-stat-label",children:"Resueltos"}),s.jsx("div",{className:"dash-stat-value",children:P.resolved})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dash-stat-label",children:"Pendientes"}),s.jsx("div",{className:"dash-stat-value danger",children:P.pending})]})]})]})]},P.name))})]}),s.jsxs("div",{className:"dash-card",children:[s.jsx("div",{className:"dash-card-title",children:"Eficiencia de Equipo"}),s.jsxs("div",{className:"dash-efficiency",children:[s.jsxs("div",{className:"dash-efficiency-value",children:[$,"%"]}),s.jsx("div",{className:"dash-progress",children:s.jsx("div",{className:"dash-progress-fill",style:{width:`${$}%`}})}),s.jsx("div",{className:"dash-muted",children:"Objetivo diario: 500 conversiones"})]})]})]})]})}const Eh={draft:"BORRADOR",scheduled:"PROGRAMADA",running:"ENVIANDO",sending:"ENVIANDO",completed:"FINALIZADA",sent:"FINALIZADA",paused:"PAUSADA",failed:"ERROR"},Zi={APPROVED:{label:"APROBADA",className:"approved"},PENDING:{label:"PENDIENTE",className:"pending"},REJECTED:{label:"RECHAZADA",className:"rejected"},DRAFT:{label:"BORRADOR",className:"draft"},PAUSED:{label:"PAUSADA",className:"pending"},DISABLED:{label:"DESHABILITADA",className:"draft"}},Ah={MARKETING:"MARKETING",UTILITY:"UTILIDAD",AUTHENTICATION:"AUTENTICACION"},el=[{id:"audiences",label:"Audiencias",title:"Audiencias",subtitle:"MDULO DE GESTIN Y CAMPAAS"},{id:"templates",label:"Biblioteca de Plantillas",title:"Biblioteca de Plantillas",subtitle:"Consulta y gestiona las plantillas de mensajes autorizadas por WhatsApp."},{id:"new",label:"Campaas",title:"Campaas",subtitle:"Historial de envos y difusin WhatsApp"}],ay={audiencias:"audiences",audiences:"audiences",templates:"templates",plantillas:"templates",biblioteca:"templates",nueva:"new",campaign:"new",campaigns:"new",nueva_campana:"new",history:"new",historial:"new"},Th=[{id:"dynamic",label:"Audiencias Dinmicas",title:"Automatizacin de Audiencias y Tags",subtitle:"Unificacin de flujos de datos Perzivalh CRM",actionLabel:"Guardar Configuracin"},{id:"excel",label:"Importar Excel",title:"Importacin de Contactos Excel",subtitle:"Gestin de base de datos externa Perzivalh CRM",actionLabel:"Iniciar Importacin"},{id:"odoo",label:"Importar de Odoo",title:"Sincronizacin Inteligente Odoo",subtitle:"Automatizacin de audiencias Perzivalh OS",actionLabel:"Actualizar Lista Odoo"}],iy=[{value:"phone",label:"Telfono"},{value:"name",label:"Nombre Completo"},{value:"city",label:"Ciudad"},{value:"tags",label:"Etiquetas"},{value:"ignore",label:"Sin Mapear"}];function ly({campaignForm:e,setCampaignForm:t,campaignFilter:n,setCampaignFilter:r,templates:a,campaigns:i,selectedCampaignId:l,campaignMessages:c,users:u,tags:m,channels:S,selectedTemplate:v,statusOptions:y,onCreateCampaign:E,onLoadCampaigns:R,onLoadCampaignMessages:I,onSendCampaign:g,onUpdateCampaign:f,onDeleteCampaign:p,onResendCampaign:x,campaignsTotal:k,formatDate:M,brandName:$}){var Li,Ri,Oi;const A=($||"Perzivalh").trim(),[w,P]=h.useState(""),[O,K]=h.useState("all"),[oe,ue]=h.useState(!1),[_e,Ce]=h.useState(null),[Re,Ue]=h.useState(""),[W,te]=h.useState(!1),[Z,de]=h.useState(""),[ce,Le]=h.useState("all"),[T,q]=h.useState(!1),[b,U]=h.useState(null),[Q,ie]=h.useState(""),[pe,ge]=h.useState(null),[Ze,xt]=h.useState("down"),[bt,ve]=h.useState(null),[Ct,It]=h.useState(!1),[Vt,Qe]=h.useState(!1),[be,it]=h.useState({id:"",name:"",phone:"",email:"",vat:""}),[Ft,Zt]=h.useState(e.send_now===!1||e.scheduled_for?"schedule":"now"),[lt,hn]=h.useState(1),[et]=h.useState(6),{pushToast:xe}=dd(),Et=h.useRef(null),[F,Oe]=h.useState(!1),[ye,Ke]=h.useState("dynamic"),Sn=h.useMemo(()=>Th.map(o=>({...o,subtitle:o.subtitle.replace(/Perzivalh/g,A)})),[A]),[L,Ee]=h.useState({enabled:!1,phone_number_id:null}),[qs,kn]=h.useState(!1),[Wn,hs]=h.useState([]),[bn,Wt]=h.useState(!1),[_,V]=h.useState(!1),[H,re]=h.useState(""),[Ne,fn]=h.useState(null),[dt,tt]=h.useState(""),[nt,fs]=h.useState(null),[aa,ps]=h.useState([]),[ee,se]=h.useState({targetMode:"new",listName:"",targetSegmentId:"",prefix:"",ignoreDuplicates:!0}),[pn,Hn]=h.useState(null),[Gs,ms]=h.useState(!1),[ia,Qs]=h.useState({connected:!1}),[di,gs]=h.useState(!1),[qn,hi]=h.useState(!1),[vs,lo]=h.useState(null),[ze,fi]=h.useState(()=>{if(typeof window>"u")return"templates";const j=new URLSearchParams(window.location.search).get("tab");return j?ay[j]||j:"templates"}),[Nr,pi]=h.useState(null),[Cn,mi]=h.useState(null),[Ks,Ys]=h.useState([]),[gi,la]=h.useState(0),[vi,Ht]=h.useState(!1),[En,ht]=h.useState(""),[Gn,Qn]=h.useState(new Set),[xs,ot]=h.useState(""),[Xs,Js]=h.useState(!1),[yt,Zs]=h.useState(1),[ys]=h.useState(10),[en,oo]=h.useState({tag:"Todas",date:"Cualquier fecha",status:"Activos"}),[ft,wr]=h.useState(null),Ye=h.useRef(null),qt=h.useMemo(()=>(S||[]).filter(o=>o==null?void 0:o.phone_number_id),[S]),[js,xi]=h.useState(""),ke=h.useMemo(()=>qt.find(o=>o.phone_number_id===js)||qt[0]||null,[qt,js]),er=(ke==null?void 0:ke.display_name)||(ke==null?void 0:ke.phone_number_id)||"";h.useEffect(()=>{const o=e.send_now===!1||e.scheduled_for?"schedule":"now";Zt(o)},[e.send_now,e.scheduled_for]);const[Kn,_r]=h.useState([]);h.useEffect(()=>{jt(),oa()},[]),h.useEffect(()=>{!js&&qt.length&&xi(qt[0].phone_number_id)},[qt,js]),h.useEffect(()=>{F&&(ca(),Ns(),Sr())},[F,js]),h.useEffect(()=>{if(ze!=="new"||T)return;const o=setTimeout(()=>{hn(1),R(1,et,Z.trim())},350);return()=>clearTimeout(o)},[Z,et,T,ze,R]),h.useEffect(()=>{!F||ye!=="odoo"||Sr()},[ye,F]),h.useEffect(()=>{el.find(o=>o.id===ze)||fi("templates")},[ze]),h.useEffect(()=>{if(typeof window>"u")return;const o=new URLSearchParams(window.location.search);o.set("tab",ze);const j=`${window.location.pathname}?${o.toString()}`;window.history.replaceState({},"",j)},[ze]);async function jt(){try{const o=await me("/api/audiences?with_counts=true");o&&o.segments&&_r(o.segments)}catch(o){console.error("Failed to load segments",o)}}async function oa(){try{const o=await me("/api/contacts/stats");pi(o||null)}catch(o){console.error("Failed to load Odoo stats",o),pi(null)}}async function ca(){kn(!0);try{const o=ke!=null&&ke.phone_number_id?`?phone_number_id=${encodeURIComponent(ke.phone_number_id)}`:"",j=await me(`/api/audiences/automation-settings${o}`);Ee((j==null?void 0:j.settings)||{enabled:!1,phone_number_id:null})}catch(o){console.error("Failed to load automation settings",o)}finally{kn(!1)}}async function Ns(){Wt(!0);try{const o=new URLSearchParams;ke!=null&&ke.phone_number_id&&o.set("phone_number_id",ke.phone_number_id),er&&o.set("line_name",er);const j=o.toString(),D=await me(`/api/audiences/dynamic-tags${j?`?${j}`:""}`);hs((D==null?void 0:D.items)||[])}catch(o){console.error("Failed to load dynamic audiences",o)}finally{Wt(!1)}}async function ws(o=L.enabled){try{const j=await Se("/api/audiences/automation-settings",{enabled:o,phone_number_id:(ke==null?void 0:ke.phone_number_id)||null,line_name:er||null});Ee((j==null?void 0:j.settings)||{...L,enabled:o}),xe({message:"Configuracin guardada"})}catch(j){xe({type:"error",message:j.message||"No se pudo guardar"})}}async function co(o){Ee(j=>({...j,enabled:o})),await ws(o)}async function uo(){V(!0);try{await Se("/api/audiences/sync-historical",{phone_number_id:(ke==null?void 0:ke.phone_number_id)||null,line_name:er||null}),await Ns(),await jt(),xe({message:"Sincronizacin completa"})}catch(o){xe({type:"error",message:o.message||"Error al sincronizar"})}finally{V(!1)}}async function yi(){const o=H.trim();if(o)try{await Se("/api/audiences/dynamic-tags",{name:o,phone_number_id:(ke==null?void 0:ke.phone_number_id)||null,line_name:er||null}),re(""),await Ns(),await jt(),xe({message:"Etiqueta creada correctamente"})}catch(j){xe({type:"error",message:j.message||"No se pudo crear etiqueta"})}}async function Sr(){gs(!0);try{const o=await me("/api/contacts/odoo-status");Qs(o||{connected:!1})}catch(o){console.error("Failed to load Odoo status",o),Qs({connected:!1})}finally{gs(!1)}}async function ua(){hi(!0),lo(null);try{const o=await Se("/api/contacts/refresh-odoo",{});lo(o||null),await oa(),xe({message:"Lista Odoo actualizada"})}catch(o){xe({type:"error",message:o.message||"Error al actualizar Odoo"})}finally{hi(!1)}}async function ho(o){return new Promise((j,D)=>{const G=new FileReader;G.onload=()=>{const he=(G.result||"").toString().split(",")[1]||"";j(he)},G.onerror=()=>D(G.error),G.readAsDataURL(o)})}async function ji(o){var D;const j=(D=o.target.files)==null?void 0:D[0];if(j){fn(j),Hn(null);try{const G=await ho(j);tt(G);const X=await Se("/api/audiences/import-preview",{file_base64:G,filename:j.name});fs(X),ps((X==null?void 0:X.mapping)||[])}catch(G){fs(null),ps([]),xe({type:"error",message:G.message||"No se pudo leer el archivo"})}}}function da(){fn(null),tt(""),fs(null),ps([]),Hn(null)}async function fo(){if(!Ne||!dt){xe({type:"error",message:"Selecciona un archivo vlido"});return}ms(!0);try{const o={file_base64:dt,filename:Ne.name,mapping:aa,options:{baseTagName:ee.listName,targetSegmentId:ee.targetMode==="existing"?ee.targetSegmentId:"",prefix:ee.prefix,ignoreDuplicates:ee.ignoreDuplicates,phoneNumberId:(ke==null?void 0:ke.phone_number_id)||null}},j=await Se("/api/audiences/import-excel",o);Hn(j),await jt(),await Ns(),xe({message:"Importacin completada"})}catch(o){xe({type:"error",message:o.message||"Error al importar"})}finally{ms(!1)}}async function tr(o,j={}){if(!o){Ys([]),la(0);return}const D=j.page||1,G=j.search||"";Ht(!0);try{if(o.type==="odoo"){const es=(D-1)*ys,Pn=await me(`/api/contacts?search=${encodeURIComponent(G)}&offset=${es}&limit=${ys}`);let Mn=(Pn==null?void 0:Pn.contacts)||[];en.tag!=="Todas"&&(Mn=Mn.filter(_s=>{const nn=_s.tags_json||[];return en.tag==="Con etiquetas"?Array.isArray(nn)&&nn.length>0:en.tag==="Sin etiquetas"?!Array.isArray(nn)||nn.length===0:!0})),en.status!=="Activos"&&(Mn=Mn.filter(_s=>{const nn=(_s.status||"ACTIVO").toUpperCase();return en.status==="Activos"?nn==="ACTIVO":nn!=="ACTIVO"})),Ys(Mn),la((Pn==null?void 0:Pn.total)||Mn.length);return}const X=G?1e3:200,he=await me(`/api/audiences/${o.id}/preview?limit=${X}`),st=(he==null?void 0:he.recipients)||[],Tt=G.trim().toLowerCase();let tn=Tt?st.filter(es=>{var _s,nn;const Pn=((_s=es.name)==null?void 0:_s.toLowerCase())||"",Mn=((nn=es.phone_e164)==null?void 0:nn.toLowerCase())||"";return Pn.includes(Tt)||Mn.includes(Tt)}):st;en.tag==="Sin etiquetas"&&(tn=tn.filter(es=>!es.tags||es.tags.length===0));const Zn=Tt?tn.length:(he==null?void 0:he.total)||tn.length,br=(D-1)*ys,Ro=tn.slice(br,br+ys);Ys(Ro),la(Zn)}catch(X){console.error("Failed to load audience contacts",X),Ys([]),la(0)}finally{Ht(!1)}}function Ni(o){mi((o==null?void 0:o.id)||null),Zs(1),Qn(new Set),ot("")}async function mn(){try{await Se("/api/audiences/refresh-counts",{}),await jt(),At&&await tr(At,{page:yt,search:En}),xe({message:"Conteos actualizados"})}catch(o){xe({type:"error",message:o.message||"No se pudo actualizar"})}}async function po(o){if(!(!o||o.type==="odoo"||o.isDefault||!window.confirm(`Eliminar la audiencia "${o.name}"? Esta accin la desactiva y no borra contactos.`)))try{await Bn(`/api/audiences/${o.id}`),await jt(),Cn===o.id&&mi(null),wr(null),xe({message:"Audiencia eliminada"})}catch(D){xe({type:"error",message:D.message||"No se pudo eliminar"})}}async function mo(o){if(!o||o.type==="odoo"||o.isDefault)return;const j=window.prompt("Nuevo nombre de la audiencia:",o.name);if(!(!j||!j.trim()))try{await Ul(`/api/audiences/${o.id}`,{name:j.trim()}),await jt(),wr(null),xe({message:"Audiencia renombrada"})}catch(D){xe({type:"error",message:D.message||"No se pudo renombrar"})}}function ha(o,j){oo(D=>{const G=D[o],X=j.indexOf(G),he=j[(X+1)%j.length];return{...D,[o]:he}})}function go(){if(ye==="dynamic"){ws();return}if(ye==="excel"){fo();return}ye==="odoo"&&ua()}const pt=h.useMemo(()=>{const o={id:"odoo",name:"odoo",subtitle:"Origen: Odoo",count:(Nr==null?void 0:Nr.total)||0,type:"odoo"},j=Kn.map(D=>{var G;return{id:D.id,name:D.name,subtitle:D.description||"Segmento personalizado",count:D.estimated_count||0,type:"segment",isDefault:(D.name||"").toUpperCase().startsWith("DEFAULT"),rules:D.rules_json,tagName:Array.isArray(D.rules_json)&&((G=D.rules_json.find(X=>(X.type||X.field)==="tag"&&X.value))==null?void 0:G.value)||""}});return[o,...j]},[Kn,Nr]),nr=h.useMemo(()=>{const o=Re.trim().toLowerCase();return o?pt.filter(j=>{var X,he;const D=((X=j.name)==null?void 0:X.toLowerCase())||"",G=((he=j.subtitle)==null?void 0:he.toLowerCase())||"";return D.includes(o)||G.includes(o)}):pt},[pt,Re]),At=h.useMemo(()=>pt.find(o=>o.id===Cn),[pt,Cn]),wi=o=>{const j=(o==null?void 0:o.buttons_json)??(o==null?void 0:o.buttons)??[];if(Array.isArray(j))return j;if(typeof j=="string")try{const D=JSON.parse(j);return Array.isArray(D)?D:[]}catch{return[]}return[]},_i=h.useMemo(()=>wi(v),[v]),Si=h.useMemo(()=>wi(_e),[_e]),An=h.useMemo(()=>Math.max(1,Math.ceil(gi/ys)),[gi,ys]),ki=h.useMemo(()=>{const o=[],j=Math.max(1,yt-1),D=Math.min(An,j+2);for(let G=j;G<=D;G+=1)o.push(G);return o},[yt,An]),fa=o=>o==="sent"?"completed":o==="sending"?"running":o||"",sr=h.useMemo(()=>{const o={all:i.length,completed:0,scheduled:0,draft:0,failed:0,running:0};return i.forEach(j=>{const D=fa(j.status);D==="completed"&&(o.completed+=1),D==="scheduled"&&(o.scheduled+=1),D==="draft"&&(o.draft+=1),D==="failed"&&(o.failed+=1),D==="running"&&(o.running+=1)}),o},[i]),pa=h.useMemo(()=>{const o=Z.trim().toLowerCase();return i.filter(j=>{const D=!o||(j.name||"").toLowerCase().includes(o),G=fa(j.status);return D&&(ce==="all"||G===ce)})},[i,Z,ce]),Tn=h.useMemo(()=>{const o=[],j=k||i.length,D=Math.max(1,Math.ceil(j/et)),G=Math.max(1,lt-1),X=Math.min(D,G+2);for(let he=G;he<=X;he+=1)o.push(he);return{pages:o,totalPages:D}},[k,i.length,lt,et]);h.useEffect(()=>{ze==="audiences"&&!Cn&&pt.length&&mi(pt[0].id)},[pt,ze,Cn]),h.useEffect(()=>{ze!=="new"&&T&&(q(!1),U(null),Rn())},[ze,T]),h.useEffect(()=>{if(ze!=="audiences")return;const o=setTimeout(()=>{tr(At,{page:yt,search:En})},300);return()=>clearTimeout(o)},[Cn,yt,En,ze,At,en]),h.useEffect(()=>{Qn(new Set),ot("")},[Cn]);const Yn=h.useMemo(()=>Ks.filter(o=>o.conversation_id||o.conversationId),[Ks]),Xn=h.useMemo(()=>{const o=new Map(Ks.map(j=>[j.conversation_id||j.conversationId||"",j]));return Array.from(Gn).map(j=>o.get(j)).filter(Boolean)},[Ks,Gn]),Jn=(At==null?void 0:At.tagName)||"",rr=h.useMemo(()=>pt.filter(o=>o.tagName),[pt]),ma=rr.find(o=>o.id===xs),Ln=(ma==null?void 0:ma.tagName)||"";h.useEffect(()=>{if(!Ye.current)return;const o=Yn.length,j=Gn.size;Ye.current.indeterminate=j>0&&j<o},[Yn.length,Gn]);function vo(o){if(!o){Qn(new Set);return}const j=new Set(Yn.map(D=>D.conversation_id||D.conversationId||""));Qn(j)}function xo(o){const j=o.conversation_id||o.conversationId||"";j&&Qn(D=>{const G=new Set(D);return G.has(j)?G.delete(j):G.add(j),G})}async function ga(o){if(!Xn.length||Xs)return;if((o==="add"||o==="move")&&!Ln){xe({type:"error",message:"Selecciona una audiencia destino vlida."});return}if((o==="remove"||o==="move")&&!Jn){xe({type:"error",message:"La audiencia actual no permite quitar contactos."});return}if(Ln&&Ln===Jn&&o!=="remove"){xe({type:"error",message:"La audiencia destino debe ser diferente a la actual."});return}const D=Xn.map(X=>({contact:X,conversationId:X.conversation_id||X.conversationId||""})).filter(X=>X.conversationId),G=Xn.length-D.length;if(!D.length){xe({type:"error",message:"No hay contactos compatibles para esta accin."});return}Js(!0);try{await Promise.all(D.map(({conversationId:X})=>Se(`/api/conversations/${X}/tags`,{add:o==="add"||o==="move"?[Ln]:[],remove:o==="remove"||o==="move"?[Jn]:[]}))),G&&xe({type:"error",message:`${G} contacto(s) no se pudieron actualizar.`}),Qn(new Set),ot(""),await jt(),await tr(At,{page:yt,search:En}),xe({message:"Cambios aplicados correctamente."})}catch(X){xe({type:"error",message:X.message||"No se pudo actualizar."})}finally{Js(!1)}}const yo=h.useMemo(()=>{const o=new Set;return(a||[]).forEach(j=>{j.category&&o.add(j.category)}),Array.from(o)},[a]),bi=h.useMemo(()=>{const o=w.trim().toLowerCase(),j=O==="all"?"":O.toLowerCase();return(a||[]).filter(D=>{var Tt,tn;const G=((Tt=D.name)==null?void 0:Tt.toLowerCase())||"",X=((tn=D.category)==null?void 0:tn.toLowerCase())||"";return(!o||G.includes(o)||X.includes(o))&&(!j||X===j)})},[w,O,a]),Ci=h.useMemo(()=>{const o=Q.trim().toLowerCase();return(a||[]).filter(j=>{var G;const D=((G=j.name)==null?void 0:G.toLowerCase())||"";return!o||D.includes(o)})},[Q,a]),va=h.useMemo(()=>n.segment_id?pt.find(o=>o.id===n.segment_id)||null:n.tag&&pt.find(o=>o.name===n.tag)||null,[pt,n.segment_id,n.tag]),jo=h.useMemo(()=>n.segment_id?`segment:${n.segment_id}`:n.tag?`tag:${n.tag}`:n.assigned_user_id?`assigned:${n.assigned_user_id}`:n.status?`status:${n.status}`:n.verified_only?"verified":"",[n.segment_id,n.tag,n.assigned_user_id,n.status,n.verified_only]);function No(o){r(j=>{const D={...j,status:"",tag:"",assigned_user_id:"",verified_only:!1,segment_id:"",segment_name:""};if(o.startsWith("segment:")){const G=o.slice(8),X=pt.find(he=>he.id===G);D.segment_id=G,D.segment_name=(X==null?void 0:X.name)||""}else o.startsWith("tag:")?D.tag=o.slice(4):o.startsWith("status:")?D.status=o.slice(7):o.startsWith("assigned:")?D.assigned_user_id=o.slice(9):o==="verified"&&(D.verified_only=!0);return D})}function wo(o){if(!o)return"";const j=new Date(o);if(Number.isNaN(j.getTime()))return"";const D=G=>String(G).padStart(2,"0");return`${j.getFullYear()}-${D(j.getMonth()+1)}-${D(j.getDate())}T${D(j.getHours())}:${D(j.getMinutes())}`}function Ei(o){t(j=>({...j,template_id:o}))}function Rn(){t({name:"",template_id:"",scheduled_for:"",send_now:!0}),r({status:"",tag:"",assigned_user_id:"",verified_only:!1,segment_id:"",segment_name:""}),ie("")}function kr(o){var X;if(!o)return;U(o),q(!0),ie(""),t(he=>{var st;return{...he,name:o.name||"",template_id:o.template_id||((st=o.template)==null?void 0:st.id)||"",scheduled_for:wo(o.scheduled_for||o.scheduled_at),send_now:!(o.scheduled_for||o.scheduled_at)}});const j=o.audience_filter||{},D=j.segment_id||o.segment_id||"",G=j.segment_name||((X=o.segment)==null?void 0:X.name)||"";r(he=>({...he,status:j.status||"",tag:j.tag||"",assigned_user_id:j.assigned_user_id||"",verified_only:!!j.verified_only,segment_id:D,segment_name:G}))}function _o(o){!(o!=null&&o.id)||!p||!window.confirm(`Eliminar la campaa "${o.name}"?`)||p(o.id)}function So(o){!(o!=null&&o.id)||!x||!window.confirm(`Reenviar la campaa "${o.name}"?`)||x(o.id)}function ko(o,j){if(ge(D=>D===o?null:o),j!=null&&j.currentTarget&&typeof window<"u"){const D=j.currentTarget.getBoundingClientRect(),G=window.innerHeight-D.bottom,X=D.top,he=G<180&&X>G;xt(he?"up":"down")}}function bo(o){ve(j=>j===o?null:o)}function ar(o){o!=null&&o.id&&(it({id:o.id,name:o.name||"",phone:o.phone_e164||o.phone||"",email:o.email||"",vat:o.vat||""}),It(!0),ve(null))}async function Co(o){if(o.preventDefault(),!!be.id){Qe(!0);try{const j=await Ul(`/api/contacts/${be.id}`,{name:be.name,phone:be.phone,email:be.email,vat:be.vat});j!=null&&j.contact&&Ys(D=>D.map(G=>G.id===j.contact.id?j.contact:G)),It(!1),xe({message:"Contacto actualizado"}),await tr(At,{page:yt,search:En})}catch(j){xe({type:"error",message:j.message||"No se pudo actualizar"})}finally{Qe(!1)}}}async function Eo(o){if(!(!(o!=null&&o.id)||!window.confirm(`Eliminar el contacto "${o.name||o.phone_e164||"Sin nombre"}"?`)))try{await Bn(`/api/contacts/${o.id}`),Ys(D=>D.filter(G=>G.id!==o.id)),ve(null),xe({message:"Contacto eliminado"}),await tr(At,{page:yt,search:En})}catch(D){xe({type:"error",message:D.message||"No se pudo eliminar"})}}function Ao(o){if(o.preventDefault(),!e.name.trim()||!e.template_id)return;const j={};if(n.status&&(j.status=n.status),n.tag&&(j.tag=n.tag.trim()),n.assigned_user_id&&(j.assigned_user_id=n.assigned_user_id),n.verified_only&&(j.verified_only=!0),n.segment_id&&(j.segment_id=n.segment_id,n.segment_name&&(j.segment_name=n.segment_name)),b&&f){f(b.id,{name:e.name.trim(),template_id:e.template_id,segment_id:n.segment_id||null,audience_filter:j,scheduled_for:e.scheduled_for||null}),q(!1),U(null),Rn();return}E(o)}function To(o){Ce(o),ue(!0)}const On=el.find(o=>o.id===ze)||el[1],Lo={title:"Campaas",subtitle:"CONFIGURACIN DE NUEVO ENVO MASIVO"},Ai=Sn.find(o=>o.id===ye)||Sn[0],Ti=F?Ai:ze==="new"&&T?Lo:On;return s.jsxs("section",{className:"campaigns-page",children:[s.jsxs("div",{className:"campaigns-shell",children:[s.jsxs("header",{className:"campaigns-header",children:[s.jsxs("div",{className:"campaigns-title-block",children:[s.jsxs("div",{className:"campaigns-title-row",children:[F&&s.jsx("button",{className:"campaigns-back",type:"button",onClick:()=>Oe(!1),"aria-label":"Volver",children:"<"}),s.jsx("span",{className:"campaigns-heading",children:Ti.title})]}),s.jsx("div",{className:`campaigns-subtitle ${F?"campaigns-subtitle--upper":""}`,children:Ti.subtitle})]}),s.jsxs("div",{className:"campaigns-actions",children:[F&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"campaigns-ghost",type:"button",onClick:()=>Oe(!1),children:ye==="excel"?"Cancelar":"Descartar"}),s.jsx("button",{className:"campaigns-primary",type:"button",onClick:go,disabled:ye==="excel"&&(Gs||!dt||ee.targetMode==="new"&&!ee.listName.trim()||ee.targetMode==="existing"&&!ee.targetSegmentId)||ye==="odoo"&&qn,children:Ai.actionLabel})]}),!F&&ze==="audiences"&&s.jsxs("button",{className:"campaigns-primary campaigns-primary--dropdown",type:"button",onClick:()=>{Oe(!0),Ke("dynamic")},children:[s.jsx("span",{className:"campaigns-primary-icon",children:"+"}),"Nueva Audiencia"]}),!F&&ze==="new"&&s.jsx(s.Fragment,{children:T?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"campaigns-ghost",type:"button",onClick:()=>{q(!1),U(null),Rn()},children:"Cancelar"}),s.jsx("button",{className:"campaigns-primary",type:"button",onClick:()=>{var o,j;return(j=(o=Et.current)==null?void 0:o.requestSubmit)==null?void 0:j.call(o)},children:b?"Guardar cambios":"Lanzar Campaa"})]}):s.jsx("button",{className:"campaigns-primary",type:"button",onClick:()=>q(!0),children:"+ Lanzar Campaa"})})]})]}),!F&&s.jsx("nav",{className:"campaigns-tabs",role:"tablist","aria-label":"Secciones de Campaas",children:el.map(o=>s.jsx("button",{type:"button",role:"tab","aria-selected":ze===o.id,className:`campaigns-tab ${ze===o.id?"active":""}`,onClick:()=>fi(o.id),children:o.label},o.id))}),s.jsx("div",{className:"campaigns-tab-panel",children:F?s.jsxs("section",{className:"audience-flow",children:[s.jsx("nav",{className:"audience-flow-tabs",role:"tablist","aria-label":"Flujo de nueva audiencia",children:Th.map(o=>s.jsx("button",{type:"button",role:"tab","aria-selected":ye===o.id,className:`audience-flow-tab ${ye===o.id?"active":""}`,onClick:()=>Ke(o.id),children:o.label},o.id))}),s.jsxs("div",{className:"audience-flow-panel",children:[ye==="dynamic"&&s.jsxs("div",{className:"audience-flow-content",children:[s.jsxs("div",{className:"audience-hero",children:[s.jsxs("div",{className:"audience-hero-main",children:[s.jsx("div",{className:"audience-hero-title",children:"Sincronizacin Automtica Total"}),s.jsx("div",{className:"audience-hero-subtitle",children:"Vincula tus etiquetas directamente con Audiencias Dinmicas. La lgica del sistema es 1 Tag = 1 Audiencia."}),s.jsxs("div",{className:"audience-line-picker",children:[s.jsx("span",{children:"Lnea activa"}),s.jsxs("select",{value:(ke==null?void 0:ke.phone_number_id)||"",onChange:o=>xi(o.target.value),disabled:!qt.length,children:[!qt.length&&s.jsx("option",{value:"",children:"Sin lneas registradas"}),qt.map(o=>s.jsx("option",{value:o.phone_number_id,children:o.display_name||o.phone_number_id},o.id))]})]})]}),s.jsxs("label",{className:"audience-switch",children:[s.jsx("span",{children:"Estado"}),s.jsx("input",{type:"checkbox",checked:L.enabled,onChange:o=>co(o.target.checked),disabled:qs||!qt.length}),s.jsx("span",{children:L.enabled?"ACTIVO":"INACTIVO"})]})]}),s.jsxs("div",{className:"audience-rule-card",children:[s.jsx("div",{className:"audience-rule-title",children:"Regla de Automatizacin unificada"}),s.jsx("p",{children:"Cuando un operador o bot etiqueta a un contacto en el CRM, este se aade instantneamente a la lista de audiencia correspondiente. No requiere intervencin manual adicional."})]}),s.jsxs("div",{className:"audience-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audience-section-title",children:"Gestin de Etiquetas dinmicas"}),s.jsx("div",{className:"audience-section-subtitle",children:"Administra las etiquetas vinculadas que alimentan tus listas de envo en tiempo real."})]}),s.jsxs("div",{className:"audience-section-actions",children:[s.jsx("button",{className:"campaigns-ghost",type:"button",onClick:uo,disabled:_,children:_?"Sincronizando...":"Sincronizar Datos Histricos"}),s.jsx("button",{className:"campaigns-primary",type:"button",onClick:yi,disabled:!H.trim(),children:"Nueva Etiqueta / Audiencia"})]})]}),s.jsxs("div",{className:"audience-tags-grid",children:[bn&&s.jsx("div",{className:"empty-state",children:"Cargando etiquetas..."}),!bn&&Wn.length===0&&s.jsx("div",{className:"empty-state",children:"No hay etiquetas dinmicas an."}),!bn&&Wn.map(o=>{var j,D,G,X,he;return s.jsxs("div",{className:`audience-tag-card ${o.is_default?"default":""}`,children:[s.jsxs("div",{className:"audience-tag-head",children:[s.jsx("div",{className:"audience-tag-name",children:o.is_default?((j=o.segment)==null?void 0:j.name)||"DEFAULT":((D=o.tag)==null?void 0:D.name)||((G=o.segment)==null?void 0:G.name)}),s.jsx("div",{className:"audience-tag-count",children:((X=o.segment)==null?void 0:X.estimated_count)||0})]}),s.jsxs("div",{className:"audience-tag-meta",children:["Audiencia: ",((he=o.segment)==null?void 0:he.estimated_count)||0," contactos"]}),s.jsxs("div",{className:"audience-tag-status",children:[s.jsx("span",{className:"dot"}),"Sincronizado",s.jsx("span",{className:"audience-tag-time",children:o.last_synced_at?`  ${M(o.last_synced_at)}`:""})]})]},o.id)}),s.jsx("div",{className:"audience-tag-card add",children:s.jsxs("div",{className:"audience-tag-add",children:[s.jsx("div",{className:"audience-tag-add-icon",children:"+"}),s.jsx("input",{type:"text",placeholder:"Crear nueva etiqueta",value:H,onChange:o=>re(o.target.value)}),s.jsx("button",{type:"button",className:"campaigns-primary",onClick:yi,disabled:!H.trim(),children:"Crear"})]})})]})]}),ye==="excel"&&s.jsxs("div",{className:"audience-flow-content",children:[Ne?s.jsxs("div",{className:"excel-file-panel",children:[s.jsxs("div",{children:[s.jsx("div",{className:"excel-file-title",children:"Archivo cargado"}),s.jsx("div",{className:"excel-file-name",children:Ne.name})]}),s.jsxs("div",{className:"excel-file-actions",children:[s.jsxs("label",{className:"excel-link",children:["Cambiar archivo",s.jsx("input",{type:"file",accept:".csv,.xlsx",onChange:ji})]}),s.jsx("button",{className:"campaigns-danger",type:"button",onClick:da,children:"Eliminar archivo"})]})]}):s.jsx("div",{className:"excel-dropzone",children:s.jsxs("div",{className:"excel-dropzone-inner",children:[s.jsx("div",{className:"excel-dropzone-icon",children:"?"}),s.jsx("div",{className:"excel-dropzone-title",children:"Sube tu archivo de Excel"}),s.jsxs("div",{className:"excel-dropzone-subtitle",children:["Arrastra y suelta tu archivo .xlsx o .csv aqu o"," ",s.jsxs("label",{className:"excel-link",children:["explora tus archivos",s.jsx("input",{type:"file",accept:".csv,.xlsx",onChange:ji})]})]}),s.jsxs("div",{className:"excel-dropzone-tags",children:[s.jsx("span",{children:"Mximo 50MB"}),s.jsx("span",{children:"Hasta 50,000 filas"})]})]})}),Ne?s.jsxs("div",{className:"excel-grid",children:[s.jsxs("div",{className:"excel-card",children:[s.jsx("div",{className:"excel-card-title",children:"Configuracin de Importacin"}),s.jsxs("label",{className:"excel-field",children:[s.jsx("span",{children:"Lista de destino"}),s.jsxs("select",{value:ee.targetMode,onChange:o=>se(j=>({...j,targetMode:o.target.value})),children:[s.jsx("option",{value:"new",children:"Crear Nueva Lista"}),s.jsx("option",{value:"existing",children:"Elegir Lista Existente"})]})]}),ee.targetMode==="new"?s.jsxs("label",{className:"excel-field",children:[s.jsx("span",{children:"Nombre de la nueva lista"}),s.jsx("input",{type:"text",placeholder:"Ej: IMPORT_JULIO",value:ee.listName,onChange:o=>se(j=>({...j,listName:o.target.value}))})]}):s.jsxs("label",{className:"excel-field",children:[s.jsx("span",{children:"Lista existente"}),s.jsxs("select",{value:ee.targetSegmentId,onChange:o=>se(j=>({...j,targetSegmentId:o.target.value})),children:[s.jsx("option",{value:"",children:"Selecciona una lista"}),Kn.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]})]}),s.jsxs("label",{className:"excel-field",children:[s.jsx("span",{children:"Prefijo de etiqueta (opcional)"}),s.jsx("input",{type:"text",placeholder:"Ej: IMPORT_JULIO_",value:ee.prefix,onChange:o=>se(j=>({...j,prefix:o.target.value}))})]}),s.jsxs("label",{className:"excel-checkbox",children:[s.jsx("input",{type:"checkbox",checked:ee.ignoreDuplicates,onChange:o=>se(j=>({...j,ignoreDuplicates:o.target.checked}))}),"Ignorar contactos duplicados"]}),pn&&s.jsxs("div",{className:"excel-summary",children:["Procesadas: ",pn.processed,"  Nuevos:"," ",pn.created,"  Duplicados:"," ",pn.skipped,"  Errores: ",pn.errors]})]}),s.jsxs("div",{className:"excel-card",children:[s.jsxs("div",{className:"excel-card-title",children:["Vista previa de mapeo",s.jsxs("span",{className:"excel-pill",children:["Columnas detectadas: ",((Li=nt==null?void 0:nt.columns)==null?void 0:Li.length)||0]})]}),s.jsxs("div",{className:"excel-map-table",children:[s.jsxs("div",{className:"excel-map-head",children:[s.jsx("span",{children:"Columna Excel"}),s.jsx("span",{children:"Mapeo CRM"}),s.jsx("span",{children:"Ejemplo"})]}),((nt==null?void 0:nt.columns)||[]).map((o,j)=>{var D,G;return s.jsxs("div",{className:"excel-map-row",children:[s.jsx("span",{children:o}),s.jsx("select",{value:aa[j]||"ignore",onChange:X=>ps(he=>{const st=[...he];return st[j]=X.target.value,st}),children:iy.map(X=>s.jsx("option",{value:X.value,children:X.label},X.value))}),s.jsx("span",{children:((G=(D=nt==null?void 0:nt.previewRows)==null?void 0:D[0])==null?void 0:G[j])||"--"})]},`${o}-${j}`)}),!nt&&s.jsx("div",{className:"empty-state",children:"Sube un archivo para ver el mapeo."})]})]})]}):s.jsxs("div",{className:"excel-placeholder",children:[s.jsx("div",{className:"excel-placeholder-title",children:"Agrega un archivo para continuar"}),s.jsx("div",{className:"excel-placeholder-subtitle",children:"Luego podrs mapear todas las columnas a los campos del CRM."})]})]}),ye==="odoo"&&s.jsxs("div",{className:"audience-flow-content odoo-flow",children:[s.jsxs("div",{className:"odoo-status",children:[s.jsx("span",{className:`odoo-indicator ${ia.connected?"on":"off"}`}),"Estado: ",ia.connected?"Odoo conectado":"Odoo no conectado"]}),s.jsxs("div",{className:"odoo-actions",children:[s.jsx("button",{className:"campaigns-ghost",type:"button",onClick:Sr,disabled:di,children:di?"Validando...":"Validar Conexin"}),s.jsx("button",{className:"campaigns-primary",type:"button",onClick:ua,disabled:qn,children:qn?"Actualizando...":"Actualizar Lista Odoo"})]}),s.jsx("div",{className:"odoo-note",children:"Se importarn contactos y se crearn audiencias por etiqueta Automticamente."}),vs&&s.jsxs("div",{className:"odoo-summary",children:[s.jsx("div",{className:"odoo-summary-title",children:"Resultado de sincronizacin"}),s.jsxs("div",{className:"odoo-summary-metrics",children:[s.jsxs("span",{children:["Aadidos: ",vs.created||0]}),s.jsxs("span",{children:["Actualizados: ",vs.updated||0]}),s.jsxs("span",{children:["Omitidos: ",vs.skipped||0]})]}),(Oi=(Ri=vs.preview)==null?void 0:Ri.created)!=null&&Oi.length?s.jsxs("div",{className:"odoo-preview",children:[s.jsx("div",{className:"odoo-preview-title",children:"Contactos aadidos"}),s.jsx("ul",{children:vs.preview.created.map(o=>s.jsxs("li",{children:[s.jsx("strong",{children:o.name||"Sin nombre"})," ",s.jsx("span",{children:o.phone_e164||""})]},`${o.phone_e164||o.name}-${o.id||""}`))})]}):null]})]})]})]}):s.jsxs(s.Fragment,{children:[ze==="templates"&&s.jsxs("section",{className:"campaigns-panel templates-panel",children:[s.jsxs("div",{className:"templates-toolbar",children:[s.jsxs("label",{className:"templates-search ui-search",children:[s.jsx("span",{className:"template-search-icon ui-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre de plantilla...",value:w,onChange:o=>P(o.target.value)})]}),s.jsxs("select",{className:"templates-select",value:O,onChange:o=>K(o.target.value),children:[s.jsx("option",{value:"all",children:"Todas las categorias"}),yo.map(o=>s.jsx("option",{value:o.toLowerCase(),children:Ah[o]||o},o))]})]}),s.jsxs("div",{className:"template-grid template-grid--library",children:[bi.map(o=>{const j=(o.status||(o.is_active?"APPROVED":"PENDING")).toUpperCase(),D=Zi[j]||Zi.PENDING,G=Ah[o.category]||o.category||"GENERAL",X=o.id===e.template_id,he=o.rejection_reason||o.rejectionReason||o.rejection_message||"",st=j==="REJECTED"?"Ver detalles":"Previsualizar";return s.jsxs("div",{className:`template-card ${X?"selected":""}`,children:[s.jsxs("div",{className:"template-head",children:[s.jsx("div",{className:"template-name",title:o.name,children:o.name}),s.jsx("span",{className:`template-status ${D.className}`,children:D.label})]}),s.jsx("div",{className:"template-category",children:G}),s.jsx("div",{className:`template-preview ${j==="REJECTED"?"rejected":""}`,children:o.body_preview||o.body_text||"Sin preview"}),j==="REJECTED"&&he&&s.jsxs("div",{className:"template-rejection",children:["Rechazada por Meta: ",he]}),s.jsx("div",{className:"template-footer",children:s.jsx("button",{className:"template-action",type:"button",onClick:()=>To(o),children:st})})]},o.id)}),!bi.length&&s.jsx("div",{className:"empty-state",children:"Sin plantillas disponibles"})]})]}),ze==="audiences"&&s.jsx("section",{className:"campaigns-panel audiences-panel",children:s.jsxs("div",{className:"audiences-layout",children:[s.jsxs("div",{className:"audiences-list",children:[s.jsxs("label",{className:"audiences-search ui-search",children:[s.jsx("span",{className:"template-search-icon ui-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar lista...",value:Re,onChange:o=>Ue(o.target.value)})]}),s.jsxs("div",{className:"audience-list",children:[nr.map(o=>{var j;return s.jsxs("button",{type:"button",className:`audience-card ${Cn===o.id?"active":""}`,onClick:()=>Ni(o),children:[s.jsxs("div",{className:"audience-title",children:[s.jsx("span",{children:o.name}),s.jsxs("div",{className:"audience-title-actions",children:[s.jsx("span",{className:"audience-count",children:((j=o.count)==null?void 0:j.toLocaleString("es-PE"))||0}),!o.isDefault&&o.type!=="odoo"&&s.jsxs("div",{className:"audience-menu-wrapper",children:[s.jsx("button",{className:"audience-menu",type:"button","aria-label":"Opciones de audiencia",onClick:D=>{D.stopPropagation(),wr(G=>G===o.id?null:o.id)},children:"..."}),ft===o.id&&s.jsxs("div",{className:"audience-menu-dropdown",children:[s.jsx("button",{type:"button",onClick:()=>mo(o),children:"Renombrar"}),s.jsx("button",{type:"button",className:"danger",onClick:()=>po(o),children:"Eliminar"})]})]})]})]}),s.jsx("div",{className:"audience-subtitle",children:o.subtitle})]},o.id)}),!nr.length&&s.jsx("div",{className:"empty-state",children:"Sin audiencias disponibles"})]})]}),s.jsxs("div",{className:"audiences-table-panel",children:[s.jsxs("div",{className:"audiences-filters",children:[s.jsxs("div",{className:"audiences-filter",children:[s.jsx("span",{children:"ETIQUETA:"}),s.jsx("button",{className:"audiences-filter-chip",type:"button",onClick:()=>ha("tag",["Todas","Con etiquetas","Sin etiquetas"]),children:en.tag})]}),s.jsxs("div",{className:"audiences-filter",children:[s.jsx("span",{children:"FECHA:"}),s.jsx("button",{className:"audiences-filter-chip",type:"button",onClick:()=>ha("date",["Cualquier fecha","ltimos 30 das"]),children:en.date})]}),s.jsxs("div",{className:"audiences-filter",children:[s.jsx("span",{children:"ESTADO:"}),s.jsx("button",{className:"audiences-filter-chip",type:"button",onClick:()=>ha("status",["Activos","Inactivos"]),children:en.status})]}),s.jsxs("div",{className:"audiences-filter-actions",children:[s.jsx("button",{className:"audiences-icon-btn",type:"button","aria-label":"Descargar",children:""}),s.jsx("button",{className:"audiences-icon-btn",type:"button","aria-label":"Actualizar",onClick:mn,children:""})]})]}),s.jsxs("div",{className:"audiences-search-row",children:[s.jsxs("label",{className:"audiences-search-field ui-search",children:[s.jsx("span",{className:"template-search-icon ui-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar contacto en esta lista...",value:En,onChange:o=>{ht(o.target.value),Zs(1)}})]}),s.jsxs("div",{className:"audiences-total",children:[gi.toLocaleString("es-PE")," contactos en total"]})]}),s.jsxs("div",{className:"audiences-bulk",children:[s.jsxs("div",{className:"audiences-bulk-info",children:[Xn.length," seleccionados"]}),s.jsxs("select",{className:"audiences-bulk-select",value:xs,onChange:o=>ot(o.target.value),children:[s.jsx("option",{value:"",children:"Selecciona audiencia destino..."}),rr.map(o=>s.jsx("option",{value:o.id,children:o.name},`bulk-${o.id}`))]}),s.jsx("button",{className:"audiences-bulk-btn",type:"button",disabled:Xs||!Xn.length||!Ln||Ln===Jn,onClick:()=>ga("add"),children:"Aadir"}),s.jsx("button",{className:"audiences-bulk-btn",type:"button",disabled:Xs||!Xn.length||!Ln||Ln===Jn,onClick:()=>ga("move"),children:"Mover"}),s.jsx("button",{className:"audiences-bulk-btn danger",type:"button",disabled:Xs||!Xn.length||!Jn,onClick:()=>ga("remove"),children:"Eliminar"})]}),(At==null?void 0:At.type)==="odoo"&&s.jsx("div",{className:"audiences-bulk-note",children:"Las acciones masivas solo aplican a contactos con conversacin de WhatsApp."}),s.jsxs("div",{className:"audiences-table",children:[s.jsxs("div",{className:"audiences-table-head",children:[s.jsx("span",{children:s.jsx("input",{ref:Ye,type:"checkbox","aria-label":"Seleccionar todos",checked:Yn.length>0&&Gn.size===Yn.length,onChange:o=>vo(o.target.checked)})}),s.jsx("span",{children:"CONTACTO"}),s.jsx("span",{children:"WHATSAPP"}),s.jsx("span",{children:"ETIQUETAS"}),s.jsx("span",{children:"FECHA REGISTRO"}),s.jsx("span",{children:"ESTADO"}),s.jsx("span",{})]}),vi&&s.jsx("div",{className:"loading",children:"Cargando contactos..."}),!vi&&Ks.length===0&&s.jsx("div",{className:"empty-state",children:"No hay contactos en esta audiencia."}),!vi&&Ks.map(o=>{const j=o.name||"Sin nombre",D=o.email||"",G=o.phone_e164||o.phone||"-",X=Array.isArray(o.tags)?o.tags:o.tags?[o.tags]:[],he=j.trim().slice(0,1).toUpperCase(),st=o.conversation_id||o.conversationId||"";return s.jsxs("div",{className:"audiences-table-row",children:[s.jsx("input",{type:"checkbox","aria-label":"Seleccionar contacto",checked:Gn.has(st),onChange:()=>xo(o),disabled:!st}),s.jsxs("div",{className:"audiences-contact",children:[s.jsx("div",{className:"audiences-avatar",children:he}),s.jsxs("div",{className:"audiences-contact-info",children:[s.jsx("div",{className:"audiences-contact-name",children:j}),D&&s.jsx("div",{className:"audiences-contact-email",children:D})]})]}),s.jsx("div",{children:G}),s.jsx("div",{className:"audiences-tags",children:X.length?X.map(Tt=>s.jsx("span",{className:"audiences-tag",children:Tt},`${o.id}-${Tt}`)):s.jsx("span",{className:"audiences-tag empty",children:""})}),s.jsx("div",{children:o.created_at?M(o.created_at):""}),s.jsx("div",{className:"audiences-status",children:(o.status||"ACTIVO").toUpperCase()}),s.jsxs("div",{className:"audiences-menu-wrapper",children:[s.jsx("button",{className:"audiences-menu",type:"button","aria-label":"Opciones",onClick:()=>bo(o.id),disabled:!o.id,children:"..."}),bt===o.id&&s.jsxs("div",{className:"audiences-menu-dropdown",children:[s.jsx("button",{type:"button",onClick:()=>ar(o),children:"Editar"}),s.jsx("button",{type:"button",className:"danger",onClick:()=>Eo(o),children:"Eliminar"})]})]})]},o.id||G)})]}),s.jsxs("div",{className:"audiences-pagination",children:[s.jsxs("div",{className:"audiences-page-info",children:["Pgina ",yt," de ",An]}),s.jsxs("div",{className:"audiences-page-actions",children:[s.jsx("button",{className:"audiences-page-btn",type:"button",disabled:yt<=1,onClick:()=>Zs(o=>Math.max(1,o-1)),children:"<"}),ki.map(o=>s.jsx("button",{className:`audiences-page-btn ${o===yt?"active":""}`,type:"button",onClick:()=>Zs(o),children:o},`aud-page-${o}`)),s.jsx("button",{className:"audiences-page-btn",type:"button",disabled:yt>=An,onClick:()=>Zs(o=>Math.min(An,o+1)),children:">"})]})]})]})]})}),ze==="new"&&s.jsx("section",{className:"campaigns-panel campaigns-module",children:T?s.jsxs("div",{className:"campaigns-launch",children:[s.jsxs("form",{className:"campaigns-launch-form",ref:Et,onSubmit:Ao,children:[s.jsxs("div",{className:"launch-step",children:[s.jsx("span",{className:"launch-step-number",children:"1"}),s.jsxs("div",{className:"launch-card",children:[s.jsx("div",{className:"launch-step-title",children:"Nombre de la Campaa"}),s.jsx("input",{type:"text",placeholder:"Ej: Promocin Black Friday 2024",value:e.name,onChange:o=>t(j=>({...j,name:o.target.value}))})]})]}),s.jsxs("div",{className:"launch-step",children:[s.jsx("span",{className:"launch-step-number",children:"2"}),s.jsxs("div",{className:"launch-card",children:[s.jsx("div",{className:"launch-step-title",children:"Seleccionar Audiencia"}),s.jsxs("select",{value:jo,onChange:o=>No(o.target.value),children:[s.jsx("option",{value:"",children:"Selecciona un segmento..."}),pt.filter(o=>o.type!=="odoo").map(o=>s.jsx("option",{value:`segment:${o.id}`,children:o.name},`seg-${o.id}`)),s.jsx("option",{value:"verified",children:"Solo verificados"}),s.jsx("option",{value:"assigned:unassigned",children:"Sin asignar"})]})]})]}),s.jsxs("div",{className:"launch-step",children:[s.jsx("span",{className:"launch-step-number",children:"3"}),s.jsxs("div",{className:"launch-card",children:[s.jsx("div",{className:"launch-step-title",children:"Elegir Plantilla de Meta"}),s.jsxs("div",{className:"launch-template-search ui-search",children:[s.jsx("span",{className:"template-search-icon ui-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar plantilla...",value:Q,onChange:o=>ie(o.target.value)}),s.jsx("button",{type:"button",onClick:()=>ie(""),children:"Limpiar"})]}),s.jsx("div",{className:"launch-templates-scroll",children:s.jsxs("div",{className:"launch-templates",children:[Ci.map(o=>{const j=o.status||"APPROVED",D=Zi[j]||Zi.APPROVED,G=e.template_id===o.id;return s.jsxs("button",{className:`launch-template ${G?"selected":""}`,type:"button",onClick:()=>Ei(o.id),children:[s.jsx("div",{className:"launch-template-icon"}),s.jsx("div",{className:"launch-template-title",children:o.name}),s.jsx("div",{className:"launch-template-preview",children:o.body_preview||o.body_text||"Sin preview"}),s.jsx("span",{className:`launch-template-status ${D.className}`,children:D.label})]},o.id)}),Ci.length===0&&s.jsx("div",{className:"launch-empty",children:"Sin plantillas"})]})})]})]}),s.jsxs("div",{className:"launch-step",children:[s.jsx("span",{className:"launch-step-number",children:"4"}),s.jsxs("div",{className:"launch-card",children:[s.jsx("div",{className:"launch-step-title",children:"Programacin"}),s.jsxs("div",{className:"launch-schedule",children:[s.jsx("button",{className:`launch-schedule-option ${Ft==="now"?"active":""}`,type:"button",onClick:()=>{Zt("now"),t(o=>({...o,scheduled_for:"",send_now:!0}))},children:"Enviar Ahora"}),s.jsx("button",{className:`launch-schedule-option ${Ft==="schedule"?"active":""}`,type:"button",onClick:()=>{Zt("schedule"),t(o=>({...o,send_now:!1}))},children:"Programar Envo"})]}),Ft==="schedule"&&s.jsx("input",{type:"datetime-local",value:e.scheduled_for,onChange:o=>t(j=>({...j,scheduled_for:o.target.value,send_now:!1}))})]})]})]}),s.jsxs("aside",{className:"campaigns-launch-preview",children:[s.jsx("div",{className:"preview-title",children:"Vista previa en tiempo real"}),s.jsxs("div",{className:"preview-phone",children:[s.jsxs("div",{className:"preview-phone-header",children:[s.jsx("div",{className:"preview-phone-notch"}),s.jsxs("div",{className:"preview-phone-title",children:[s.jsx("div",{className:"preview-phone-avatar"}),s.jsxs("div",{children:[s.jsx("div",{className:"preview-phone-name",children:"Nombre del Cliente"}),s.jsx("div",{className:"preview-phone-status",children:"en lnea"})]})]})]}),s.jsxs("div",{className:"preview-phone-body",children:[s.jsx("div",{className:"preview-day-pill",children:"HOY"}),s.jsx("div",{className:"preview-bubble",children:(v==null?void 0:v.body_preview)||(v==null?void 0:v.body_text)||"Selecciona una plantilla para ver el contenido."}),_i.length>0&&s.jsx("div",{className:"preview-actions",children:_i.map((o,j)=>s.jsx("button",{type:"button",children:o.text||o.label||o.title||`Botn ${j+1}`},`preview-btn-${j}`))}),s.jsx("div",{className:"preview-time",children:"10:45 AM"})]}),s.jsxs("div",{className:"preview-phone-input",children:[s.jsx("span",{children:"Escribir mensaje..."}),s.jsx("div",{className:"preview-mic"})]})]}),s.jsxs("div",{className:"preview-summary",children:[s.jsx("div",{className:"preview-summary-title",children:"Resumen"}),s.jsxs("div",{className:"preview-summary-row",children:[s.jsx("span",{children:"Destinatarios"}),s.jsx("strong",{children:(va==null?void 0:va.count)||0})]}),s.jsxs("div",{className:"preview-summary-row",children:[s.jsx("span",{children:"Plantilla"}),s.jsx("strong",{children:(v==null?void 0:v.name)||"Sin plantilla"})]})]})]})]}):s.jsxs("div",{className:"campaigns-dashboard",children:[s.jsxs("aside",{className:"campaigns-sidebar",children:[s.jsxs("label",{className:"campaigns-search ui-search",children:[s.jsx("span",{className:"template-search-icon ui-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar campaa...",value:Z,onChange:o=>de(o.target.value)})]}),s.jsxs("div",{className:"campaigns-filters-list",children:[s.jsxs("button",{className:`campaigns-filter-item ${ce==="all"?"active":""}`,type:"button",onClick:()=>Le("all"),children:[s.jsx("span",{children:"Todas las Campaas"}),s.jsx("span",{className:"campaigns-filter-count",children:sr.all})]}),s.jsxs("button",{className:`campaigns-filter-item ${ce==="completed"?"active":""}`,type:"button",onClick:()=>Le("completed"),children:[s.jsx("span",{children:"Enviadas"}),s.jsx("span",{className:"campaigns-filter-count",children:sr.completed})]}),s.jsxs("button",{className:`campaigns-filter-item ${ce==="scheduled"?"active":""}`,type:"button",onClick:()=>Le("scheduled"),children:[s.jsx("span",{children:"Programadas"}),s.jsx("span",{className:"campaigns-filter-count",children:sr.scheduled})]}),s.jsxs("button",{className:`campaigns-filter-item ${ce==="draft"?"active":""}`,type:"button",onClick:()=>Le("draft"),children:[s.jsx("span",{children:"Borradores"}),s.jsx("span",{className:"campaigns-filter-count",children:sr.draft})]}),s.jsxs("button",{className:`campaigns-filter-item ${ce==="failed"?"active":""}`,type:"button",onClick:()=>Le("failed"),children:[s.jsx("span",{children:"Fallidas"}),s.jsx("span",{className:"campaigns-filter-count",children:sr.failed})]})]}),s.jsxs("div",{className:"campaigns-quota",children:[s.jsx("div",{className:"campaigns-quota-title",children:"Cuota de mensajes"}),s.jsx("div",{className:"campaigns-quota-bar",children:s.jsx("div",{className:"campaigns-quota-fill",style:{width:"65%"}})}),s.jsx("div",{className:"campaigns-quota-meta",children:"65% usado"})]})]}),s.jsxs("div",{className:"campaigns-table-panel",children:[s.jsxs("div",{className:"campaigns-table-filters",children:[s.jsx("div",{className:"campaigns-filter-chip",children:"Canal: WhatsApp Business"}),s.jsx("div",{className:"campaigns-filter-chip",children:"Periodo: ltimos 30 das"}),s.jsxs("div",{className:"campaigns-table-actions",children:[s.jsx("button",{className:"audiences-icon-btn",type:"button",children:""}),s.jsx("button",{className:"audiences-icon-btn",type:"button",onClick:()=>R(lt,et,Z.trim()),children:""})]})]}),s.jsxs("div",{className:"campaigns-table",children:[s.jsxs("div",{className:"campaigns-table-head",children:[s.jsx("span",{children:"Campaa"}),s.jsx("span",{children:"Fecha"}),s.jsx("span",{children:"Audiencia"}),s.jsx("span",{children:"Enviados"}),s.jsx("span",{children:"Ledos"}),s.jsx("span",{children:"Respuestas"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{})]}),pa.map(o=>{const j=o.messages_count||o.audience_count||"--",D=o.read_count||"--",G=o.reply_count||"--",X=fa(o.status),he=Eh[X]||X,st=["running","sending"].includes(X),Tt=["completed","failed"].includes(X),tn=!st,Zn=!st;return s.jsxs("div",{className:"campaigns-table-row",children:[s.jsxs("div",{className:"campaigns-table-title",children:[s.jsx("div",{className:"campaigns-table-name",children:o.name}),s.jsxs("div",{className:"campaigns-table-ref",children:["Ref: ",o.id.slice(0,10)]})]}),s.jsx("div",{className:"campaigns-table-date",children:M(o.created_at)}),s.jsx("div",{className:"campaigns-table-tags",children:s.jsx("span",{className:"campaigns-pill",children:o.audience_label||"Base General"})}),s.jsx("div",{className:"campaigns-metric",children:j}),s.jsx("div",{className:"campaigns-metric",children:D}),s.jsx("div",{className:"campaigns-metric",children:G}),s.jsx("div",{className:`campaigns-status ${X}`,children:he}),s.jsx("div",{className:"campaigns-row-actions",children:s.jsxs("div",{className:"campaigns-row-menu",children:[s.jsx("button",{className:"campaigns-row-menu-btn",type:"button","aria-label":"Opciones",onClick:br=>ko(o.id,br),children:"..."}),pe===o.id&&s.jsxs("div",{className:`campaigns-row-dropdown ${Ze==="up"?"drop-up":""}`,children:[tn&&s.jsx("button",{type:"button",onClick:()=>{kr(o),ge(null)},children:"Editar"}),Tt&&s.jsx("button",{type:"button",onClick:()=>{So(o),ge(null)},children:"Reenviar"}),Zn&&s.jsx("button",{type:"button",className:"danger",onClick:()=>{_o(o),ge(null)},children:"Eliminar"})]})]})})]},o.id)}),!pa.length&&s.jsx("div",{className:"empty-state",children:"Sin campaas registradas"})]}),s.jsxs("div",{className:"campaigns-table-footer",children:[s.jsxs("span",{children:["Mostrando ",pa.length," de"," ",k||i.length," campaas"]}),s.jsxs("div",{className:"audiences-page-actions",children:[s.jsx("button",{className:"audiences-page-btn",type:"button",disabled:lt<=1,onClick:()=>{const o=Math.max(1,lt-1);hn(o),R(o,et,Z.trim())},children:"<"}),Tn.pages.map(o=>s.jsx("button",{className:`audiences-page-btn ${o===lt?"active":""}`,type:"button",onClick:()=>{hn(o),R(o,et,Z.trim())},children:o},`camp-page-${o}`)),s.jsx("button",{className:"audiences-page-btn",type:"button",disabled:lt>=Tn.totalPages,onClick:()=>{const o=Math.min(Tn.totalPages,lt+1);hn(o),R(o,et,Z.trim())},children:">"})]})]})]})]})}),ze==="history"&&s.jsxs("section",{className:"campaigns-panel campaigns-history",children:[s.jsxs("div",{className:"campaigns-history-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"campaigns-history-title",children:"Historial de Envos"}),s.jsx("div",{className:"campaigns-history-subtitle",children:"ltimos 30 das"})]}),s.jsx("button",{className:"campaigns-link",type:"button",onClick:R,children:"Ver todo el historial"})]}),s.jsxs("div",{className:"history-table history-table--main",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("span",{children:"Campaa / Fecha"}),s.jsx("span",{children:"Alcance"}),s.jsx("span",{children:"Tasa de lectura"}),s.jsx("span",{children:"Respuestas"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Acciones"})]}),i.map(o=>{const j=Eh[o.status]||o.status,D=o.audience_count||o.messages_count||o.total||"--";return s.jsxs("div",{className:"history-row",children:[s.jsxs("div",{className:"history-title",children:[s.jsx("div",{className:"history-name",children:o.name}),s.jsx("div",{className:"history-date",children:M(o.created_at)})]}),s.jsxs("div",{className:"history-metric",children:[s.jsx("div",{className:"history-value",children:D}),s.jsx("div",{className:"history-label",children:"contactos"})]}),s.jsxs("div",{className:"history-meter",children:[s.jsx("div",{className:"history-value",children:"--"}),s.jsx("div",{className:"history-bar",children:s.jsx("div",{className:"history-bar-fill",style:{width:"0%"}})})]}),s.jsxs("div",{className:"history-metric",children:[s.jsx("div",{className:"history-value",children:"--"}),s.jsx("div",{className:"history-label",children:"mensajes"})]}),s.jsx("div",{className:`history-status ${o.status}`,children:j}),s.jsxs("div",{className:"history-actions",children:[s.jsx("button",{className:"campaigns-ghost small",type:"button",onClick:()=>I(o.id),children:"Ver mensajes"}),s.jsx("button",{className:"campaigns-danger small",type:"button",onClick:()=>g(o.id),disabled:o.status==="sending",children:"Enviar"})]})]},o.id)}),!i.length&&s.jsx("div",{className:"empty-state",children:"Sin Campaas registradas"})]}),l&&s.jsxs("div",{className:"campaigns-messages",children:[s.jsx("div",{className:"campaigns-history-title",children:"Mensajes"}),s.jsxs("div",{className:"history-table history-table--messages",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("span",{children:"WA"}),s.jsx("span",{children:"Status"}),s.jsx("span",{children:"Enviado"})]}),c.map(o=>s.jsxs("div",{className:"history-row",children:[s.jsx("span",{children:o.wa_id}),s.jsx("span",{children:o.status}),s.jsx("span",{children:M(o.sent_at)})]},o.id))]})]})]})]})})]}),oe&&s.jsx("div",{className:"modal-overlay",onClick:()=>ue(!1),children:s.jsxs("div",{className:"modal-content modal-large",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Previsualizar plantilla"}),s.jsx("button",{className:"modal-close",onClick:()=>ue(!1),children:"x"})]}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"preview-phone",children:[s.jsxs("div",{className:"preview-phone-header",children:[s.jsx("div",{className:"preview-phone-notch"}),s.jsxs("div",{className:"preview-phone-title",children:[s.jsx("div",{className:"preview-phone-avatar"}),s.jsxs("div",{children:[s.jsx("div",{className:"preview-phone-name",children:A}),s.jsx("div",{className:"preview-phone-status",children:"en lnea"})]})]})]}),s.jsxs("div",{className:"preview-phone-body",children:[s.jsx("div",{className:"preview-day-pill",children:"HOY"}),s.jsx("div",{className:"preview-bubble",children:(_e==null?void 0:_e.body_preview)||(_e==null?void 0:_e.body_text)||"Sin previsualizacin disponible."}),Si.length>0&&s.jsx("div",{className:"preview-actions",children:Si.map((o,j)=>s.jsx("button",{type:"button",children:o.text||o.label||o.title||`Botn ${j+1}`},`preview-modal-btn-${j}`))}),s.jsx("div",{className:"preview-time",children:"10:45 AM"})]}),s.jsxs("div",{className:"preview-phone-input",children:[s.jsx("span",{children:"Escribir mensaje..."}),s.jsx("div",{className:"preview-mic"})]})]})})]})}),Ct&&s.jsx("div",{className:"modal-overlay",onClick:()=>It(!1),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Editar contacto"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>It(!1),children:"x"})]}),s.jsxs("form",{className:"modal-body",onSubmit:Co,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:be.name,onChange:o=>it(j=>({...j,name:o.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Telfono"}),s.jsx("input",{type:"text",value:be.phone,onChange:o=>it(j=>({...j,phone:o.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:be.email,onChange:o=>it(j=>({...j,email:o.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"CI / NIT"}),s.jsx("input",{type:"text",value:be.vat,onChange:o=>it(j=>({...j,vat:o.target.value}))})]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>It(!1),children:"Cancelar"}),s.jsx("button",{className:"btn-primary",type:"submit",disabled:Vt,children:Vt?"Guardando...":"Guardar"})]})]})]})})]})}function Ua({variant:e="error",title:t,message:n,actionLabel:r,onAction:a,dismissLabel:i="Cerrar",onDismiss:l}){const c=e==="offline"?"x":"!";return s.jsxs("div",{className:`notice-banner notice-banner-${e}`,children:[s.jsx("div",{className:"notice-icon","aria-hidden":"true",children:c}),s.jsxs("div",{className:"notice-content",children:[t?s.jsx("div",{className:"notice-title",children:t}):null,s.jsx("div",{className:"notice-text",children:n})]}),s.jsxs("div",{className:"notice-actions",children:[r&&s.jsx("button",{className:"notice-action",type:"button",onClick:a,children:r}),l&&s.jsx("button",{className:"notice-close",type:"button",onClick:l,children:i})]})]})}const oy={admin:{title:"Administrador",subtitle:"Acceso total",tone:"alert"},recepcion:{title:"Operador",subtitle:"Atencion al cliente",tone:"info"},caja:{title:"Supervisor",subtitle:"Auditoria y gestion",tone:"dark"},marketing:{title:"Marketing",subtitle:"Crecimiento y campanas",tone:"info"},doctor:{title:"Doctor",subtitle:"Atencion al cliente",tone:"dark"}},Lh=[{id:"chat",label:"Chat"},{id:"dashboard",label:"Dashboard"},{id:"campaigns",label:"Campanas"}],Rh=[{id:"general",label:"General"},{id:"users",label:"Gestion de Usuarios"},{id:"bot",label:"Configuracion de Bot"},{id:"templates",label:"Plantillas de Meta"},{id:"audit",label:"Registros / Auditoria"},{id:"odoo",label:"Integracion Odoo"}];function Oh(e){return oy[e]||{title:e,subtitle:"Acceso personalizado",tone:"info"}}function cy({settingsTab:e,setSettingsTab:t,rolePermissions:n,setRolePermissions:r,isAdmin:a,adminUsers:i,userForm:l,setUserForm:c,roleOptions:u,handleUserSubmit:m,handleUserDelete:S,defaultRolePermissions:v,handleRoleDelete:y}){const[E,R]=h.useState(""),[I,g]=h.useState(!1),[f,p]=h.useState(""),[x,k]=h.useState(null),[M,$]=h.useState(!1),[A,w]=h.useState("create"),[P,O]=h.useState("recepcion"),[K,oe]=h.useState({modules:{},settings:{}}),ue=h.useMemo(()=>{const T=E.trim().toLowerCase(),q=i||[];return T?q.filter(b=>{var ie,pe;const U=((ie=b.name)==null?void 0:ie.toLowerCase())||"",Q=((pe=b.email)==null?void 0:pe.toLowerCase())||"";return U.includes(T)||Q.includes(T)}):q},[i,E]);function _e(T){const q=(n==null?void 0:n[T])||(v==null?void 0:v[T])||{modules:{},settings:{}};return{modules:{...q.modules||{}},settings:{...q.settings||{}}}}function Ce(T,q="edit"){w(q),O(T),oe(_e(T)),$(!0)}function Re(T,q,b){oe(U=>{const Q={...U},ie={...Q[T]||{}},pe={...ie[q]||{}},ge=!pe[b];return pe[b]=ge,b==="write"&&ge&&(pe.read=!0),b==="read"&&!ge&&(pe.write=!1),ie[q]=pe,Q[T]=ie,Q})}function Ue(){P&&(r(T=>({...T,[P]:K})),$(!1))}function W(){P&&y&&y(P),$(!1)}function te(T,q,b,U){a&&r(Q=>{var bt,ve;const ie={...Q},pe={modules:{...(bt=ie[T])==null?void 0:bt.modules},settings:{...(ve=ie[T])==null?void 0:ve.settings}},ge={...pe[q]},Ze={...ge[b]},xt=!Ze[U];return Ze[U]=xt,U==="write"&&xt&&(Ze.read=!0),U==="read"&&!xt&&(Ze.write=!1),ge[b]=Ze,pe[q]=ge,ie[T]=pe,ie})}function Z(T){return Oh(T).title.toUpperCase()}function de(T,q){return T!=null&&T.id?`OP-${T.id.slice(-4).toUpperCase()}`:`OP-${String(q+1).padStart(4,"0")}`}function ce(T){c({id:T.id,name:T.name,email:T.email,role:T.role,password:"",is_active:T.is_active}),g(!0)}function Le(){c({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),g(!0)}return s.jsxs("div",{className:"users-page",children:[s.jsxs("header",{className:"users-header",children:[s.jsxs("div",{className:"users-title-row",children:[s.jsx("span",{className:"users-kicker"}),s.jsxs("div",{children:[s.jsx("div",{className:"users-title",children:"Gestion de Usuarios"}),s.jsx("div",{className:"users-subtitle",children:"Administra los accesos y roles de los operadores de tu empresa."})]})]}),s.jsxs("div",{className:"users-actions",children:[e==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"users-search",children:[s.jsx("span",{className:"users-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar usuario...",value:E,onChange:T=>R(T.target.value)})]}),s.jsx("button",{className:"settings-primary",type:"button",onClick:Le,children:"Nuevo Usuario"})]}),e==="roles"&&s.jsx("button",{className:"settings-primary",type:"button",onClick:()=>Ce("recepcion","create"),children:"+ Nuevo Rol"})]})]}),s.jsxs("div",{className:"users-tabs",children:[s.jsx("button",{className:`users-tab ${e==="list"?"active":""}`,type:"button",onClick:()=>t("list"),children:"Lista de Usuarios"}),s.jsx("button",{className:`users-tab ${e==="roles"?"active":""}`,type:"button",onClick:()=>t("roles"),children:"Roles y Permisos"})]}),e==="list"&&s.jsxs("div",{className:"users-table",children:[s.jsxs("div",{className:"users-table-head",children:[s.jsx("span",{children:"Nombre / Usuario"}),s.jsx("span",{children:"Email"}),s.jsx("span",{children:"Rol"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Acciones"})]}),ue.map((T,q)=>{var b;return s.jsxs("div",{className:"users-row",children:[s.jsxs("div",{className:"users-cell user-name",children:[s.jsx("div",{className:"user-avatar",children:((b=T.name)==null?void 0:b[0])||"?"}),s.jsxs("div",{children:[s.jsx("div",{className:"user-title",children:T.name}),s.jsx("div",{className:"user-id",children:de(T,q)})]})]}),s.jsx("div",{className:"users-cell",children:T.email}),s.jsx("div",{className:"users-cell",children:s.jsx("span",{className:`role-pill ${T.role}`,children:Z(T.role)})}),s.jsx("div",{className:"users-cell",children:s.jsx("span",{className:`status-pill ${T.is_active?"active":"inactive"}`,children:T.is_active?"Activo":"Inactivo"})}),s.jsx("div",{className:"users-cell",children:s.jsxs("div",{className:"users-actions-menu",children:[s.jsx("button",{className:"users-action",type:"button",onClick:()=>p(U=>U===T.id?"":T.id),children:"..."}),f===T.id&&s.jsxs("div",{className:"users-menu",children:[s.jsx("button",{type:"button",onClick:()=>{p(""),ce(T)},children:"Editar"}),s.jsx("button",{type:"button",onClick:()=>{p(""),k(T)},children:"Eliminar"})]})]})})]},T.id)}),!ue.length&&s.jsx("div",{className:"empty-state",children:"Sin usuarios para mostrar"})]}),e==="roles"&&s.jsx("div",{className:"roles-grid",children:u.map(T=>{const q=Oh(T),b=n==null?void 0:n[T];return s.jsxs("div",{className:"role-card",children:[s.jsxs("div",{className:"role-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"role-title",children:q.title}),s.jsx("div",{className:`role-subtitle ${q.tone}`,children:q.subtitle})]}),s.jsx("button",{className:"role-edit",type:"button",onClick:()=>Ce(T,"edit"),children:"edit"})]}),s.jsxs("div",{className:"role-permissions",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Lh.map(U=>{var Q,ie,pe,ge;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:U.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ie=(Q=b==null?void 0:b.modules)==null?void 0:Q[U.id])==null?void 0:ie.read)||!1,disabled:!a,onChange:()=>te(T,"modules",U.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ge=(pe=b==null?void 0:b.modules)==null?void 0:pe[U.id])==null?void 0:ge.write)||!1,disabled:!a,onChange:()=>te(T,"modules",U.id,"write")}),s.jsx("span",{})]})]},U.id)})]}),s.jsxs("div",{className:"role-settings",children:[s.jsx("div",{className:"role-settings-title",children:"Configuracion"}),Rh.map(U=>{var Q,ie,pe,ge;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:U.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ie=(Q=b==null?void 0:b.settings)==null?void 0:Q[U.id])==null?void 0:ie.read)||!1,disabled:!a,onChange:()=>te(T,"settings",U.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ge=(pe=b==null?void 0:b.settings)==null?void 0:pe[U.id])==null?void 0:ge.write)||!1,disabled:!a,onChange:()=>te(T,"settings",U.id,"write")}),s.jsx("span",{})]})]},U.id)})]})]},T)})}),I&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:l.id?"Editar usuario":"Crear usuario"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>g(!1),children:"x"})]}),s.jsxs("form",{className:"form-grid",onSubmit:async T=>{await m(T),g(!1)},children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:l.name,onChange:T=>c(q=>({...q,name:T.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:l.email,onChange:T=>c(q=>({...q,email:T.target.value})),disabled:!!l.id})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Rol"}),s.jsx("select",{value:l.role,onChange:T=>c(q=>({...q,role:T.target.value})),children:u.map(T=>s.jsx("option",{value:T,children:T},T))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Password"}),s.jsx("input",{type:"password",value:l.password,onChange:T=>c(q=>({...q,password:T.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_active,onChange:T=>c(q=>({...q,is_active:T.target.checked}))}),"Activo"]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"primary",type:"submit",children:l.id?"Guardar cambios":"Crear"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>g(!1),children:"Cancelar"})]})]})]})}),x&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:"Eliminar usuario"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>k(null),children:"x"})]}),s.jsxs("p",{className:"modal-text",children:["Vas a desactivar a ",s.jsx("strong",{children:x.email}),". Continuar?"]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"danger",type:"button",onClick:()=>{S==null||S(x.id),k(null)},children:"Eliminar"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>k(null),children:"Cancelar"})]})]})}),M&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card modal-lg",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:A==="create"?"Nuevo rol":"Editar rol"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>$(!1),children:"x"})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Rol"}),A==="edit"?s.jsx("select",{value:P,disabled:!0,children:u.map(T=>s.jsx("option",{value:T,children:T},T))}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",list:"role-options",placeholder:"nuevo-rol",value:P,onChange:T=>O(T.target.value)}),s.jsx("datalist",{id:"role-options",children:u.map(T=>s.jsx("option",{value:T},T))})]})]}),s.jsxs("div",{className:"role-permissions",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{children:"Modulos"}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Lh.map(T=>{var q,b,U,Q;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:T.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((b=(q=K==null?void 0:K.modules)==null?void 0:q[T.id])==null?void 0:b.read)||!1,onChange:()=>Re("modules",T.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((Q=(U=K==null?void 0:K.modules)==null?void 0:U[T.id])==null?void 0:Q.write)||!1,onChange:()=>Re("modules",T.id,"write")}),s.jsx("span",{})]})]},T.id)})]}),s.jsxs("div",{className:"role-settings",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{children:"Configuracion"}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Rh.map(T=>{var q,b,U,Q;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:T.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((b=(q=K==null?void 0:K.settings)==null?void 0:q[T.id])==null?void 0:b.read)||!1,onChange:()=>Re("settings",T.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((Q=(U=K==null?void 0:K.settings)==null?void 0:U[T.id])==null?void 0:Q.write)||!1,onChange:()=>Re("settings",T.id,"write")}),s.jsx("span",{})]})]},T.id)})]})]}),s.jsxs("div",{className:"form-actions",children:[A==="edit"&&s.jsx("button",{className:"danger",type:"button",onClick:W,children:"Eliminar rol"}),s.jsx("button",{className:"primary",type:"button",onClick:Ue,disabled:!P,children:"Guardar"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>$(!1),children:"Cancelar"})]})]})})]})}function uy({branches:e,branchForm:t,setBranchForm:n,handleBranchSubmit:r,handleBranchDisable:a,services:i,serviceForm:l,setServiceForm:c,handleServiceSubmit:u,handleServiceDisable:m,handleServiceBranchToggle:S,tenantChannels:v,channelForm:y,setChannelForm:E,handleChannelSelect:R,handleChannelSubmit:I}){return s.jsxs("div",{className:"page-grid",children:[s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Sucursales"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Codigo"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Accion"})]}),e.map(g=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:g.name}),s.jsx("span",{children:g.code}),s.jsx("span",{children:g.is_active?"Activa":"Inactiva"}),s.jsxs("div",{className:"row-actions",children:[s.jsx("button",{className:"ghost",onClick:()=>n({id:g.id,code:g.code,name:g.name,address:g.address,lat:g.lat,lng:g.lng,hours_text:g.hours_text,phone:g.phone||"",is_active:g.is_active}),children:"Editar"}),s.jsx("button",{className:"danger",onClick:()=>a(g.id),children:"Desactivar"})]})]},g.id))]}),s.jsx("div",{className:"panel-title",children:t.id?"Editar sucursal":"Crear sucursal"}),s.jsxs("form",{className:"form-grid",onSubmit:r,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Codigo"}),s.jsx("input",{type:"text",value:t.code,onChange:g=>n(f=>({...f,code:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:t.name,onChange:g=>n(f=>({...f,name:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Direccion"}),s.jsx("input",{type:"text",value:t.address,onChange:g=>n(f=>({...f,address:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Lat"}),s.jsx("input",{type:"number",value:t.lat,onChange:g=>n(f=>({...f,lat:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Lng"}),s.jsx("input",{type:"number",value:t.lng,onChange:g=>n(f=>({...f,lng:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Telefono"}),s.jsx("input",{type:"text",value:t.phone,onChange:g=>n(f=>({...f,phone:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Horarios"}),s.jsx("textarea",{rows:"3",value:t.hours_text,onChange:g=>n(f=>({...f,hours_text:g.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:t.is_active,onChange:g=>n(f=>({...f,is_active:g.target.checked}))}),"Activa"]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Servicios"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Servicio"}),s.jsx("span",{children:"Precio"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Accion"})]}),i.map(g=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:g.name}),s.jsxs("span",{children:["Bs ",g.price_bob]}),s.jsx("span",{children:g.is_active?"Activo":"Inactivo"}),s.jsxs("div",{className:"row-actions",children:[s.jsx("button",{className:"ghost",onClick:()=>c({id:g.id,code:g.code,name:g.name,subtitle:g.subtitle||"",description:g.description,price_bob:g.price_bob,duration_min:g.duration_min||"",image_url:g.image_url||"",is_featured:g.is_featured,is_active:g.is_active}),children:"Editar"}),s.jsx("button",{className:"danger",onClick:()=>m(g.id),children:"Desactivar"})]})]},g.id))]}),s.jsx("div",{className:"panel-title",children:l.id?"Editar servicio":"Crear servicio"}),s.jsxs("form",{className:"form-grid",onSubmit:u,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Codigo"}),s.jsx("input",{type:"text",value:l.code,onChange:g=>c(f=>({...f,code:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:l.name,onChange:g=>c(f=>({...f,name:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Subtitulo"}),s.jsx("input",{type:"text",value:l.subtitle,onChange:g=>c(f=>({...f,subtitle:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Descripcion"}),s.jsx("textarea",{rows:"3",value:l.description,onChange:g=>c(f=>({...f,description:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Precio (Bs)"}),s.jsx("input",{type:"number",value:l.price_bob,onChange:g=>c(f=>({...f,price_bob:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Duracion (min)"}),s.jsx("input",{type:"number",value:l.duration_min,onChange:g=>c(f=>({...f,duration_min:g.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Imagen URL"}),s.jsx("input",{type:"text",value:l.image_url,onChange:g=>c(f=>({...f,image_url:g.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_featured,onChange:g=>c(f=>({...f,is_featured:g.target.checked}))}),"Destacado"]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_active,onChange:g=>c(f=>({...f,is_active:g.target.checked}))}),"Activo"]}),l.id&&s.jsxs("div",{className:"field",children:[s.jsx("span",{children:"Disponibilidad por sucursal"}),s.jsx("div",{className:"chip-grid",children:e.map(g=>{var x,k;const f=(k=(x=i.find(M=>M.id===l.id))==null?void 0:x.branches)==null?void 0:k.find(M=>{var A;return(((A=M.branch)==null?void 0:A.id)||M.branch_id)===g.id}),p=(f==null?void 0:f.is_available)||!1;return s.jsxs("label",{className:"chip",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:M=>S(i.find($=>$.id===l.id),g.id,M.target.checked)}),g.name]},g.id)})})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Lineas de WhatsApp"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Phone ID"}),s.jsx("span",{children:"Accion"})]}),(v||[]).map(g=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:g.display_name||"Linea sin nombre"}),s.jsx("span",{children:g.phone_number_id}),s.jsx("button",{className:"ghost",onClick:()=>R(g),children:"Renombrar"})]},g.id)),!(v!=null&&v.length)&&s.jsx("div",{className:"empty-state",children:"Sin lineas registradas"})]}),s.jsx("div",{className:"panel-title",children:y.id?"Editar linea":"Selecciona una linea"}),s.jsxs("form",{className:"form-grid",onSubmit:I,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre visible"}),s.jsx("input",{type:"text",value:y.display_name,onChange:g=>E(f=>({...f,display_name:g.target.value})),disabled:!y.id})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:!y.id,children:"Guardar"})})]})]})]})}function dy(){var R,I,g,f,p,x,k,M,$,A;const[e,t]=h.useState([]),[n,r]=h.useState(null),[a,i]=h.useState(!0),[l,c]=h.useState("");h.useEffect(()=>{u()},[]);async function u(){i(!0);try{const[w,P]=await Promise.all([me("/api/admin/bots"),me("/api/admin/bots/metrics")]);t(w.bots||[]),r(P.metrics),c("")}catch(w){console.error(w),c(w.message||"Error al cargar datos")}finally{i(!1)}}async function m(w,P){try{await qe(`/api/admin/bots/${w}`,{is_active:P}),t(O=>O.map(K=>K.id===w?{...K,is_active:P}:K))}catch(O){c(O.message||"Error al cambiar estado")}}const S=w=>{if(!w)return"Sin actividad reciente";const P=new Date(w),K=new Date-P,oe=Math.floor(K/6e4);if(oe<1)return"Hace un momento";if(oe<60)return`ltima actividad: hace ${oe} min`;const ue=Math.floor(oe/60);return ue<24?`ltima actividad: hace ${ue}h`:`ltima actividad: ${P.toLocaleDateString()}`},v=e.filter(w=>w.is_active).length,y=v>0?"ACTIVO":"INACTIVO",E=v>0?"active":"inactive";return s.jsxs("div",{className:"bot-section",children:[s.jsxs("div",{className:"bot-section-header",children:[s.jsxs("div",{className:"bot-section-title-area",children:[s.jsx("div",{className:"bot-section-icon",children:""}),s.jsxs("div",{children:[s.jsx("h2",{className:"bot-section-title",children:"Gestin de Bots"}),s.jsx("p",{className:"bot-section-subtitle",children:"Administra los flujos automatizados y el rendimiento tcnico."})]})]}),s.jsxs("div",{className:"bot-section-global-toggle",children:[s.jsx("span",{className:"bot-toggle-label",children:"ESTADO DEL BOT:"}),s.jsxs("div",{className:`bot-toggle-pill ${E}`,children:[s.jsx("span",{className:"bot-toggle-dot"}),s.jsx("span",{children:y})]})]})]}),l&&s.jsx("div",{className:"bot-error",children:l}),s.jsxs("div",{className:"bot-section-content",children:[s.jsxs("div",{className:"bot-flows-panel",children:[s.jsx("div",{className:"bot-panel-header",children:s.jsx("span",{className:"bot-panel-title",children:"MONITOREO DE FLUJOS"})}),a?s.jsx("div",{className:"bot-loading",children:"Cargando bots..."}):e.length===0?s.jsxs("div",{className:"bot-empty",children:[s.jsx("p",{children:"No hay bots asignados a tu cuenta."}),s.jsx("p",{className:"bot-empty-hint",children:"Contacta con soporte si necesitas activar un bot."})]}):s.jsx("div",{className:"bot-flows-list",children:e.map(w=>s.jsxs("div",{className:"bot-flow-card",children:[s.jsxs("div",{className:"bot-flow-info",children:[s.jsx("span",{className:"bot-flow-icon",children:w.flow_icon||""}),s.jsxs("div",{children:[s.jsx("div",{className:"bot-flow-name",children:w.flow_name}),s.jsxs("div",{className:`bot-flow-status ${w.is_active?"active":"inactive"}`,children:[" ",w.is_active?"ACTIVO":"INACTIVO"]})]})]}),s.jsx("div",{className:"bot-flow-actions",children:s.jsxs("label",{className:"bot-toggle-switch",children:[s.jsx("input",{type:"checkbox",checked:w.is_active,onChange:()=>m(w.id,!w.is_active)}),s.jsx("span",{className:"bot-toggle-slider"})]})}),s.jsx("div",{className:"bot-flow-meta",children:S(w.updated_at)}),w.flow_description&&s.jsx("div",{className:"bot-flow-desc",children:w.flow_description})]},w.id))})]}),s.jsxs("div",{className:"bot-metrics-panel",children:[s.jsx("div",{className:"bot-panel-header",children:s.jsx("span",{className:"bot-panel-title",children:"MTRICAS DE EFICACIA DETALLADAS"})}),s.jsxs("div",{className:"bot-metrics-grid",children:[s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:`bot-metric-badge ${((R=n==null?void 0:n.interactions)==null?void 0:R.change)>=0?"positive":"neutral"}`,children:[((I=n==null?void 0:n.interactions)==null?void 0:I.change)>0?"+":"",(g=n==null?void 0:n.interactions)==null?void 0:g.change,"% ",(f=n==null?void 0:n.interactions)==null?void 0:f.label]}),s.jsx("div",{className:"bot-metric-label",children:"INTERACCIONES"}),s.jsx("div",{className:"bot-metric-value",children:n?n.interactions.value:"--"}),s.jsx("div",{className:"bot-metric-sub",children:"Total de sesiones iniciadas hoy"})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:"bot-metric-badge neutral",children:["Objetivo: ",(p=n==null?void 0:n.resolution)==null?void 0:p.target,"%"]}),s.jsx("div",{className:"bot-metric-label",children:"RESOLUCIN FINAL"}),s.jsxs("div",{className:"bot-metric-value",children:[n?n.resolution.value:"--","%"]}),s.jsx("div",{className:"bot-metric-progress",children:s.jsx("div",{className:"bot-metric-progress-fill",style:{width:`${n?n.resolution.value:0}%`}})})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:"bot-metric-badge sla",children:[" ",(x=n==null?void 0:n.uptime)==null?void 0:x.status]}),s.jsx("div",{className:"bot-metric-label",children:"VIDA DEL PROCESO"}),s.jsx("div",{className:"bot-metric-value",children:n?n.uptime.value:"--"}),s.jsx("div",{className:"bot-metric-sub",children:"UPTIME SISTEMA"})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:`bot-metric-icon ${((k=n==null?void 0:n.errors)==null?void 0:k.value)>0?"error":""}`,children:""}),s.jsx("div",{className:`bot-metric-badge ${((M=n==null?void 0:n.errors)==null?void 0:M.value)===0?"stable":"neutral"}`,children:($=n==null?void 0:n.errors)==null?void 0:$.status}),s.jsx("div",{className:"bot-metric-label",children:"ERRORES"}),s.jsx("div",{className:"bot-metric-value",children:n?n.errors.value:"--"}),s.jsxs("div",{className:`bot-metric-sub ${((A=n==null?void 0:n.errors)==null?void 0:A.critical)>0?"error-sub":""}`,children:["CRTICOS: ",n?n.errors.critical:0]})]})]})]})]})]})}const Ph={DRAFT:{bg:"#e3e8ef",text:"#475569",label:"BORRADOR"},PENDING:{bg:"#fef3c7",text:"#d97706",label:"PENDIENTE"},APPROVED:{bg:"#d1fae5",text:"#059669",label:"APROBADA"},REJECTED:{bg:"#fee2e2",text:"#dc2626",label:"RECHAZADA"},PAUSED:{bg:"#fef3c7",text:"#d97706",label:"PAUSADA"},DISABLED:{bg:"#e5e7eb",text:"#6b7280",label:"DESHABILITADA"}},hy=[{value:"UTILITY",label:"Utility"},{value:"MARKETING",label:"Marketing"},{value:"AUTHENTICATION",label:"Authentication"}],fy=[{value:"es",label:"Espaol (ES)"},{value:"en",label:"English (EN)"}];function py({templates:e=[],templateForm:t,setTemplateForm:n,handleTemplateSubmit:r,handleTemplateSubmitToMeta:a,handleTemplateDelete:i,handleSyncTemplates:l,onLoadTemplates:c,brandName:u=""}){var q;const m=(u||"PODOPIE").trim(),[S,v]=h.useState("list"),[y,E]=h.useState(null),[R,I]=h.useState(""),[g,f]=h.useState(!1),[p,x]=h.useState(""),[k,M]=h.useState(!1),[$,A]=h.useState(!1),[w,P]=h.useState(null),[O,K]=h.useState({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),[oe,ue]=h.useState([]);h.useEffect(()=>{c&&c()},[]);const _e=async()=>{f(!0);try{await l()}finally{f(!1)}},Ce=()=>{E(null),K({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),ue([]),v("editor")},Re=b=>{E(b),K({name:b.name||"",category:b.category||"UTILITY",language:b.language||"es",body_text:b.body_text||b.body_preview||"",header_type:b.header_type||"",header_content:b.header_content||"",footer_text:b.footer_text||"",buttons:b.buttons_json||[]}),ue(b.variable_mappings||[]),v("editor")},Ue=async b=>{!(b!=null&&b.id)||!i||!window.confirm(`Eliminar la plantilla "${b.name}"? Esta accin la ocultar localmente y la eliminar de Meta si aplica.`)||await i(b.id)},W=async b=>{b.preventDefault();const U={...O,id:y==null?void 0:y.id,variable_mappings:oe};if(n&&n(U),r){const Q=await r(null,U);Q&&E(Q)}},te=async()=>{if(a){M(!0);try{let b=y==null?void 0:y.id;if(!b){const U={...O,variable_mappings:oe},Q=await r(null,U);b=Q==null?void 0:Q.id,Q&&E(Q)}b&&(await a(b),v("list"),E(null))}finally{M(!1)}}},Z=()=>{v("list"),E(null)},de=b=>{const U=(b==null?void 0:b.buttons_json)??(b==null?void 0:b.buttons)??[];if(Array.isArray(U))return U;if(typeof U=="string")try{const Q=JSON.parse(U);return Array.isArray(Q)?Q:[]}catch{return[]}return[]},Le=(b=>{const U=b.match(/\{\{(\d+)\}\}/g)||[];return[...new Set(U)].map(Q=>parseInt(Q.replace(/[{}]/g,"")))})(O.body_text),T=e.filter(b=>{var ie;const U=!R||((ie=b.name)==null?void 0:ie.toLowerCase().includes(R.toLowerCase()))||(b.body_text||b.body_preview||"").toLowerCase().includes(R.toLowerCase()),Q=!p||b.status===p;return U&&Q});return S==="list"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"templates-section",children:[s.jsxs("div",{className:"templates-header",children:[s.jsxs("div",{className:"templates-title-row",children:[s.jsx("h1",{children:"Plantillas de Meta"}),s.jsxs("span",{className:"meta-connected-badge",children:[s.jsx("span",{className:"status-dot"}),"CONECTADO A META API"]})]}),s.jsxs("div",{className:"templates-actions",children:[s.jsx("div",{className:"search-input-wrap",children:s.jsx("input",{type:"text",placeholder:"Buscar plantillas...",value:R,onChange:b=>I(b.target.value)})}),s.jsxs("select",{value:p,onChange:b=>x(b.target.value),className:"status-filter-select",children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"APPROVED",children:"Aprobadas"}),s.jsx("option",{value:"PENDING",children:"Pendientes"}),s.jsx("option",{value:"REJECTED",children:"Rechazadas"}),s.jsx("option",{value:"DRAFT",children:"Borradores"})]}),s.jsx("button",{className:"btn-sync",onClick:_e,disabled:g,children:g?" Sincronizando...":" Sincronizar"}),s.jsxs("button",{className:"btn-create-template",onClick:Ce,children:[s.jsx("span",{children:"+"})," Crear Nueva Plantilla"]})]})]}),s.jsxs("div",{className:"templates-grid",children:[T.map(b=>{var Q;const U=Ph[b.status]||Ph.DRAFT;return s.jsxs("div",{className:"template-card",onClick:()=>Re(b),children:[s.jsxs("div",{className:"template-card-head",children:[s.jsx("div",{className:"template-category-icon",children:b.category==="MARKETING"?"":b.category==="UTILITY"?"":""}),s.jsx("span",{className:"template-status-badge",style:{backgroundColor:U.bg,color:U.text},children:U.label})]}),s.jsx("h3",{className:"template-card-name",children:b.name}),s.jsxs("div",{className:"template-card-meta",children:[s.jsx("span",{className:"tag-category",children:b.category}),s.jsx("span",{className:"tag-language",children:b.language==="es"?"ESPAOL (ES)":(Q=b.language)==null?void 0:Q.toUpperCase()})]}),(b.body_text||b.body_preview)&&s.jsxs("p",{className:"template-card-preview",children:[(b.body_text||b.body_preview).slice(0,80),"..."]}),s.jsxs("div",{className:"template-card-actions",children:[s.jsx("button",{className:"btn-preview",onClick:ie=>{ie.stopPropagation(),P(b),A(!0)},children:"Vista previa"}),s.jsx("button",{className:"btn-preview danger",onClick:ie=>{ie.stopPropagation(),Ue(b)},children:"Eliminar"})]})]},b.id)}),s.jsxs("div",{className:"template-card template-card-create",onClick:Ce,children:[s.jsx("div",{className:"create-icon",children:"+"}),s.jsx("h3",{children:"Crear nueva plantilla"}),s.jsx("p",{children:"Empieza a disear tu flujo de WhatsApp"})]})]}),T.length===0&&!R&&s.jsx("div",{className:"templates-empty",children:s.jsx("p",{children:"No hay plantillas. Crea una nueva o sincroniza desde Meta."})})]}),$&&s.jsx("div",{className:"modal-overlay",onClick:()=>A(!1),children:s.jsxs("div",{className:"modal-content modal-large",onClick:b=>b.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Vista previa"}),s.jsx("button",{className:"modal-close",onClick:()=>A(!1),children:"x"})]}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"preview-phone",children:[s.jsxs("div",{className:"preview-phone-header",children:[s.jsx("div",{className:"preview-phone-notch"}),s.jsxs("div",{className:"preview-phone-title",children:[s.jsx("div",{className:"preview-phone-avatar"}),s.jsxs("div",{children:[s.jsx("div",{className:"preview-phone-name",children:m}),s.jsx("div",{className:"preview-phone-status",children:"en lnea"})]})]})]}),s.jsxs("div",{className:"preview-phone-body",children:[s.jsx("div",{className:"preview-day-pill",children:"HOY"}),s.jsx("div",{className:"preview-bubble",children:(w==null?void 0:w.body_preview)||(w==null?void 0:w.body_text)||"Sin previsualizacin disponible."}),de(w).length>0&&s.jsx("div",{className:"preview-actions",children:de(w).map((b,U)=>s.jsx("button",{type:"button",children:b.text||b.label||b.title||`Botn ${U+1}`},`prev-${U}`))}),s.jsx("div",{className:"preview-time",children:"10:45 AM"})]}),s.jsxs("div",{className:"preview-phone-input",children:[s.jsx("span",{children:"Escribir mensaje..."}),s.jsx("div",{className:"preview-mic"})]})]})})]})})]}):s.jsxs("div",{className:"template-editor",children:[s.jsxs("div",{className:"editor-header",children:[s.jsxs("div",{className:"editor-breadcrumb",children:[s.jsx("button",{className:"btn-back",onClick:Z,children:" Volver"}),s.jsx("span",{className:"breadcrumb-sep",children:"/"}),s.jsx("span",{children:y?"Editar Plantilla":"Nueva Plantilla"})]}),s.jsxs("div",{className:"editor-actions",children:[s.jsx("button",{className:"btn-save-draft",onClick:W,children:" Guardar Borrador"}),((y==null?void 0:y.status)==="DRAFT"||(y==null?void 0:y.status)==="REJECTED"||!y)&&s.jsx("button",{className:"btn-primary",onClick:te,disabled:k||!O.name||!O.body_text,children:k?"Enviando...":"Enviar a Meta"}),s.jsx("button",{className:"btn-discard",onClick:Z,children:" Descartar"})]})]}),s.jsxs("div",{className:"editor-layout",children:[s.jsxs("div",{className:"editor-form-panel",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:" General Settings"}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Template Name"}),s.jsx("input",{type:"text",placeholder:"patient_appointment_reminder",value:O.name,onChange:b=>K({...O,name:b.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")})})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Category"}),s.jsx("select",{value:O.category,onChange:b=>K({...O,category:b.target.value}),children:hy.map(b=>s.jsx("option",{value:b.value,children:b.label},b.value))})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Language"}),s.jsx("select",{value:O.language,onChange:b=>K({...O,language:b.target.value}),children:fy.map(b=>s.jsx("option",{value:b.value,children:b.label},b.value))})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{children:" Message Body"}),s.jsx("button",{className:"btn-insert-var",type:"button",onClick:()=>{const b=Le.length+1;K({...O,body_text:O.body_text+`{{${b}}}`})},children:"+ Insert Variable"})]}),s.jsx("textarea",{rows:"6",placeholder:`Hola {{1}}, te recordamos tu cita en ${m} para el da {{2}} a las {{3}}. Por favor, confirma tu asistencia.`,value:O.body_text,onChange:b=>K({...O,body_text:b.target.value})}),s.jsxs("div",{className:"char-count",children:[O.body_text.length," / 1024"]})]})]}),s.jsxs("div",{className:"editor-preview-panel",children:[s.jsx("div",{className:"preview-title",children:"Vista previa en tiempo real"}),s.jsxs("div",{className:"preview-phone",children:[s.jsxs("div",{className:"preview-phone-header",children:[s.jsx("div",{className:"preview-phone-notch"}),s.jsxs("div",{className:"preview-phone-title",children:[s.jsx("div",{className:"preview-phone-avatar"}),s.jsxs("div",{children:[s.jsx("div",{className:"preview-phone-name",children:m}),s.jsx("div",{className:"preview-phone-status",children:"en lnea"})]})]})]}),s.jsxs("div",{className:"preview-phone-body",children:[s.jsx("div",{className:"preview-day-pill",children:"HOY"}),s.jsx("div",{className:"preview-bubble",children:O.body_text||"Tu mensaje aparecer aqu..."}),O.buttons&&O.buttons.length>0&&s.jsx("div",{className:"preview-actions",children:O.buttons.map((b,U)=>s.jsx("button",{type:"button",children:b.text||b.title||`Botn ${U+1}`},`btn-${U}`))}),s.jsx("div",{className:"preview-time",children:"10:42 AM"})]}),s.jsxs("div",{className:"preview-phone-input",children:[s.jsx("span",{children:"Escribir mensaje..."}),s.jsx("div",{className:"preview-mic"})]})]}),s.jsxs("div",{className:"preview-summary",children:[s.jsx("div",{className:"preview-summary-title",children:"Resumen"}),s.jsxs("div",{className:"preview-summary-row",children:[s.jsx("span",{children:"Plantilla"}),s.jsx("strong",{children:O.name||"Sin nombre"})]}),s.jsxs("div",{className:"preview-summary-row",children:[s.jsx("span",{children:"Idioma"}),s.jsx("strong",{children:((q=O.language)==null?void 0:q.toUpperCase())||"ES"})]})]})]}),s.jsxs("div",{className:"editor-mapping-panel",children:[s.jsxs("div",{className:"mapping-tabs",children:[s.jsx("button",{className:"tab active",children:"VARIABLES"}),s.jsx("button",{className:"tab",children:"BUTTONS"})]}),s.jsxs("div",{className:"mapping-section",children:[s.jsx("h4",{children:"ODOO FIELD MAPPING"}),Le.length===0?s.jsxs("p",{className:"mapping-empty",children:["Agrega variables ","{{1}}",", ","{{2}}","... en tu mensaje"]}):Le.map(b=>{const U=oe.find(Q=>Q.var_index===b)||{};return s.jsxs("div",{className:"mapping-item",children:[s.jsxs("div",{className:"mapping-var-badge",children:[`{{${b}}}`," Variable"]}),s.jsxs("select",{value:U.source_path||"",onChange:Q=>{const ie=oe.filter(pe=>pe.var_index!==b);ie.push({var_index:b,source_type:"odoo",source_path:Q.target.value}),ue(ie)},children:[s.jsx("option",{value:"",children:"Select Odoo Field..."}),s.jsx("option",{value:"partner_id.name",children:"patient_id.name"}),s.jsx("option",{value:"start_date",children:"start_date (Formatted)"}),s.jsx("option",{value:"start_time",children:"start_time"}),s.jsx("option",{value:"partner_id.phone",children:"patient_phone"})]}),s.jsx("span",{className:`mapping-status ${U.source_path?"linked":"needs"}`,children:U.source_path?" Linked":" Needs mapping"})]},b)})]}),s.jsxs("div",{className:"mapping-section",children:[s.jsxs("div",{className:"mapping-section-header",children:[s.jsx("h4",{children:"ACTION BUTTONS"}),s.jsx("button",{className:"btn-add-button",onClick:()=>{K({...O,buttons:[...O.buttons||[],{type:"QUICK_REPLY",text:""}]})},children:"+ Add Button"})]}),(O.buttons||[]).map((b,U)=>s.jsxs("div",{className:"button-item",children:[s.jsx("span",{className:"button-icon",children:""}),s.jsx("input",{type:"text",placeholder:"Button text",value:b.text||"",onChange:Q=>{const ie=[...O.buttons];ie[U]={...ie[U],text:Q.target.value},K({...O,buttons:ie})}}),s.jsx("button",{className:"btn-remove",onClick:()=>{const Q=O.buttons.filter((ie,pe)=>pe!==U);K({...O,buttons:Q})},children:""})]},U))]}),s.jsxs("div",{className:"mapping-tip",children:[s.jsx("span",{className:"tip-icon",children:""}),s.jsx("span",{children:"Tip: Asegrate de que tus variables estn correctamente mapeadas a campos de Odoo antes de enviar."})]})]})]})]})}const Mh={campaigns:"",users:"",bot:"",chat:"",templates:"",audience:"",system:""},my={"user.created":"USUARIO CREADO","user.updated":"USUARIO EDITADO","user.disabled":"USUARIO ELIMINADO",template_draft_created:"PLANTILLA CREADA",template_draft_updated:"PLANTILLA EDITADA",template_submitted:"PLANTILLA ENVIADA",template_deleted:"PLANTILLA ELIMINADA",template_restored:"PLANTILLA RESTAURADA",audience_created:"SEGMENTO CREADO",audience_updated:"SEGMENTO EDITADO",audience_deleted:"SEGMENTO ELIMINADO","campaign.created":"CAMPAA CREADA","campaign.queued":"CAMPAA EN COLA","campaign.sending":"CAMPAA LANZADA","settings.updated":"CONFIG ACTUALIZADA","role_permissions.updated":"PERMISOS CAMBIADOS","role_permissions.deleted":"ROL ELIMINADO","conversation.status_changed":"CHAT ACTUALIZADO","conversation.tag_added":"TAG AGREGADO","conversation.tag_removed":"TAG ELIMINADO"};function jm(e){var r;const t=((r=e==null?void 0:e.data_json)==null?void 0:r.entity)||"";if(t==="template")return"templates";if(t==="audience")return"audience";if(t==="campaign")return"campaigns";if(t==="conversation")return"chat";const n=(e==null?void 0:e.action)||"";return n.includes("user")?"users":n.includes("campaign")?"campaigns":n.includes("template")?"templates":n.includes("audience")?"audience":n.includes("bot")?"bot":n.includes("conversation")?"chat":"system"}function cc(e){if(!e)return{date:"--",time:"--"};const t=new Date(e);return Number.isNaN(t.getTime())?{date:"--",time:"--"}:{date:t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),time:t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}function gy(e,t="csv"){const r=[["timestamp","usuario","email","accion","modulo","data"].join(",")];e.forEach(m=>{var R,I;const S=((R=m.user)==null?void 0:R.name)||"Sistema",v=((I=m.user)==null?void 0:I.email)||"",y=jm(m),E=[new Date(m.created_at).toISOString(),S,v,m.action,y,JSON.stringify(m.data_json||{})];r.push(E.map(g=>`"${String(g).replace(/"/g,'""')}"`).join(","))});const a=r.join(`
`),i=t==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"text/csv;charset=utf-8;",l=t==="excel"?"audit_logs.xlsx":"audit_logs.csv",c=new Blob([a],{type:i}),u=document.createElement("a");u.href=URL.createObjectURL(c),u.download=l,document.body.appendChild(u),u.click(),document.body.removeChild(u)}function vy(){var $,A;const[e,t]=h.useState(""),[n,r]=h.useState(""),[a,i]=h.useState(""),[l,c]=h.useState(1),[u]=h.useState(6),[m,S]=h.useState(0),[v,y]=h.useState([]),[E,R]=h.useState(!1),[I,g]=h.useState(null),f=Math.max(1,Math.ceil(m/u)),p=async({pageOverride:w}={})=>{R(!0);try{const P=new URLSearchParams;P.set("page",String(w||l)),P.set("page_size",String(u)),e.trim()&&P.set("q",e.trim()),n&&P.set("from",n),a&&P.set("to",a);const O=await me(`/api/admin/audit?${P.toString()}`);y(O.logs||[]),S(O.total||0)}finally{R(!1)}};h.useEffect(()=>{p()},[l]);const x=()=>{c(1),p({pageOverride:1})},k=async(w="csv")=>{const P=new URLSearchParams;P.set("page","1"),P.set("page_size","1000"),e.trim()&&P.set("q",e.trim()),n&&P.set("from",n),a&&P.set("to",a);const O=await me(`/api/admin/audit?${P.toString()}`);gy(O.logs||[],w)},M=h.useMemo(()=>{const w=[],P=Math.max(1,l-1),O=Math.min(f,P+2);for(let K=P;K<=O;K+=1)w.push(K);return w},[l,f]);return s.jsxs("div",{className:"audit-module",children:[s.jsxs("div",{className:"audit-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audit-title",children:"Registros / Auditoria"}),s.jsx("div",{className:"audit-subtitle",children:"Monitorea acciones de usuarios y eventos del sistema"})]}),s.jsxs("div",{className:"audit-export-group",children:[s.jsx("button",{className:"audit-export",type:"button",onClick:()=>k("excel"),children:" Exportar Excel"}),s.jsx("button",{className:"audit-export outline",type:"button",onClick:()=>k("csv"),children:" Exportar CSV"})]})]}),s.jsxs("div",{className:"audit-filters",children:[s.jsxs("div",{className:"audit-search",children:[s.jsx("span",{className:"audit-search-icon"}),s.jsx("input",{type:"text",placeholder:"Filtrar por usuario o accion..",value:e,onChange:w=>t(w.target.value)})]}),s.jsxs("div",{className:"audit-date",children:[s.jsx("span",{children:"Desde"}),s.jsx("input",{type:"date",value:n,onChange:w=>r(w.target.value)})]}),s.jsxs("div",{className:"audit-date",children:[s.jsx("span",{children:"Hasta"}),s.jsx("input",{type:"date",value:a,onChange:w=>i(w.target.value)})]}),s.jsx("button",{className:"audit-filter-btn",type:"button",onClick:x,children:"Filtrar"})]}),s.jsxs("div",{className:"audit-card",children:[s.jsxs("div",{className:"audit-table-head",children:[s.jsx("span",{children:"Timestamp"}),s.jsx("span",{children:"Usuario"}),s.jsx("span",{children:"Accion"}),s.jsx("span",{children:"Modulo"})]}),E&&s.jsx("div",{className:"audit-empty",children:"Cargando registros..."}),!E&&!v.length&&s.jsx("div",{className:"audit-empty",children:"Sin registros para mostrar"}),!E&&v.map(w=>{var _e,Ce;const P=cc(w.created_at),O=jm(w),K=my[w.action]||w.action,oe=((_e=w.user)==null?void 0:_e.name)||"System Bot",ue=((Ce=w.user)==null?void 0:Ce.email)||"automated@service";return s.jsxs("button",{type:"button",className:"audit-row",onClick:()=>g(w),children:[s.jsxs("div",{className:"audit-cell time",children:[s.jsx("div",{children:P.date}),s.jsx("div",{className:"audit-time",children:P.time})]}),s.jsxs("div",{className:"audit-cell user",children:[s.jsx("div",{className:"audit-avatar",children:(oe==null?void 0:oe[0])||"S"}),s.jsxs("div",{children:[s.jsx("div",{className:"audit-user-name",children:oe}),s.jsx("div",{className:"audit-user-email",children:ue})]})]}),s.jsx("div",{className:"audit-cell action",children:s.jsx("span",{className:"audit-action-pill",children:K})}),s.jsxs("div",{className:"audit-cell module",children:[s.jsx("span",{className:"audit-module-icon",children:Mh[O]||Mh.system}),O.charAt(0).toUpperCase()+O.slice(1)]})]},w.id)})]}),s.jsxs("div",{className:"audit-footer",children:[s.jsxs("div",{children:["Mostrando ",v.length," de ",m," registros"]}),s.jsxs("div",{className:"audit-pagination",children:[s.jsx("button",{type:"button",disabled:l<=1,onClick:()=>c(w=>Math.max(1,w-1)),children:""}),M.map(w=>s.jsx("button",{type:"button",className:w===l?"active":"",onClick:()=>c(w),children:w},w)),s.jsx("button",{type:"button",disabled:l>=f,onClick:()=>c(w=>Math.min(f,w+1)),children:""})]})]}),I&&s.jsx("div",{className:"audit-modal",children:s.jsxs("div",{className:"audit-modal-card",children:[s.jsxs("div",{className:"audit-modal-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audit-modal-title",children:"Detalle del registro"}),s.jsx("div",{className:"audit-modal-subtitle",children:I.action})]}),s.jsx("button",{type:"button",onClick:()=>g(null),children:""})]}),s.jsxs("div",{className:"audit-modal-body",children:[s.jsxs("div",{className:"audit-detail",children:[s.jsx("span",{children:"Usuario"}),s.jsx("strong",{children:(($=I.user)==null?void 0:$.name)||"System Bot"}),s.jsx("small",{children:((A=I.user)==null?void 0:A.email)||"automated@service"})]}),s.jsxs("div",{className:"audit-detail",children:[s.jsx("span",{children:"Timestamp"}),s.jsx("strong",{children:cc(I.created_at).date}),s.jsx("small",{children:cc(I.created_at).time})]}),s.jsxs("div",{className:"audit-detail full",children:[s.jsx("span",{children:"Data"}),s.jsx("pre",{children:JSON.stringify(I.data_json||{},null,2)})]})]})]})})]})}function xy(){return s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Integracion Odoo"}),s.jsx("div",{className:"empty-state",children:"Seccion en construccion"})]})}function yy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"6",r:"2",strokeWidth:"2"}),s.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeWidth:"2"}),s.jsx("circle",{cx:"15",cy:"12",r:"2",strokeWidth:"2"}),s.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18",strokeWidth:"2"}),s.jsx("circle",{cx:"11",cy:"18",r:"2",strokeWidth:"2"})]})}function jy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"9",cy:"8",r:"3",strokeWidth:"2"}),s.jsx("path",{d:"M4 20c0-3 2.7-5.5 6-5.5s6 2.5 6 5.5",strokeWidth:"2"}),s.jsx("circle",{cx:"17",cy:"9",r:"2",strokeWidth:"2"}),s.jsx("path",{d:"M14 20c0-1.8 1.4-3.4 3.2-4",strokeWidth:"2"})]})}function Ny(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"2"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"2"}),s.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"2"})]})}function wy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"2",strokeWidth:"2"}),s.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"9",strokeWidth:"2"}),s.jsx("line",{x1:"9",y1:"13",x2:"15",y2:"13",strokeWidth:"2"})]})}function _y(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"6",y:"5",width:"12",height:"15",rx:"2",strokeWidth:"2"}),s.jsx("path",{d:"M9 5h6",strokeWidth:"2"}),s.jsx("path",{d:"M9 10h6",strokeWidth:"2"}),s.jsx("path",{d:"M9 14h6",strokeWidth:"2"})]})}function Sy(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M8 4h4a2 2 0 1 1 0 4h-1v2h2a2 2 0 1 1 0 4h-2v2H8a2 2 0 1 1-4 0V8a2 2 0 1 1 4 0z",strokeWidth:"2"})})}function ky({settingsSection:e,setSettingsSection:t,settingsTab:n,setSettingsTab:r,rolePermissions:a,setRolePermissions:i,currentRole:l,isAdmin:c,adminUsers:u,userForm:m,setUserForm:S,roleOptions:v,handleUserSubmit:y,settings:E,setSettings:R,handleSaveSettings:I,branches:g,services:f,branchForm:p,setBranchForm:x,handleBranchSubmit:k,handleBranchDisable:M,serviceForm:$,setServiceForm:A,handleServiceSubmit:w,handleServiceDisable:P,handleServiceBranchToggle:O,templates:K,templateForm:oe,setTemplateForm:ue,handleTemplateSubmit:_e,handleTemplateSubmitToMeta:Ce,handleTemplateDelete:Re,handleSyncTemplates:Ue,auditLogs:W,formatDate:te,planName:Z,tenantChannels:de,channelForm:ce,setChannelForm:Le,handleChannelSelect:T,handleChannelSubmit:q,handleUserDelete:b,defaultRolePermissions:U,handleRoleDelete:Q,useShellLayout:ie=!1,pageError:pe,isOffline:ge=!1,onDismissError:Ze,brandName:xt=""}){const bt=a==null?void 0:a[l],ve=[{title:"Principal",items:[{id:"general",label:"General",icon:yy},{id:"users",label:"Gestion de Usuarios",icon:jy},{id:"bot",label:"Configuracion de Bot",icon:Ny}]},{title:"Canales e Integraciones",items:[{id:"templates",label:"Plantillas de Meta",icon:wy},{id:"audit",label:"Registros / Auditoria",icon:_y},{id:"odoo",label:"Integracion Odoo",icon:Sy}]}];function Ct(Qe){var be,it;return!!((it=(be=bt==null?void 0:bt.settings)==null?void 0:be[Qe])!=null&&it.read)}function It(Qe){Ct(Qe)&&t(Qe)}const Vt=s.jsxs(s.Fragment,{children:[s.jsxs("aside",{className:"settings-sidebar",children:[s.jsxs("div",{className:"settings-header",children:[s.jsx("div",{className:"settings-title",children:"CONFIGURACION"}),s.jsxs("div",{className:"settings-version",children:[(xt||"Empresa").toUpperCase()," OS V2.0"]})]}),ve.map(Qe=>s.jsxs("div",{className:"settings-group",children:[s.jsx("div",{className:"settings-group-title",children:Qe.title}),s.jsx("div",{className:"settings-group-list",children:Qe.items.map(be=>{const it=!Ct(be.id),Ft=be.icon;return s.jsxs("button",{className:`settings-item ${e===be.id?"active":""}`,type:"button",onClick:()=>It(be.id),disabled:it,children:[s.jsx("span",{className:"settings-icon","aria-hidden":"true",children:s.jsx(Ft,{className:"settings-icon-svg"})}),be.label]},be.id)})})]},Qe.title)),s.jsxs("div",{className:"settings-plan",children:[s.jsx("div",{className:"settings-plan-label",children:"Plan actual"}),s.jsx("div",{className:"settings-plan-name",children:Z||"Sin plan"})]})]}),s.jsxs("div",{className:"settings-content",children:[e==="users"&&s.jsx(cy,{settingsTab:n,setSettingsTab:r,rolePermissions:a,setRolePermissions:i,isAdmin:c,adminUsers:u,userForm:m,setUserForm:S,roleOptions:v,handleUserSubmit:y,handleUserDelete:b,defaultRolePermissions:U,handleRoleDelete:Q}),e==="general"&&s.jsx(uy,{branches:g,branchForm:p,setBranchForm:x,handleBranchSubmit:k,handleBranchDisable:M,services:f,serviceForm:$,setServiceForm:A,handleServiceSubmit:w,handleServiceDisable:P,handleServiceBranchToggle:O,tenantChannels:de,channelForm:ce,setChannelForm:Le,handleChannelSelect:T,handleChannelSubmit:q}),e==="bot"&&s.jsx(dy,{settings:E,setSettings:R,handleSaveSettings:I}),e==="templates"&&s.jsx(py,{templates:K,templateForm:oe,setTemplateForm:ue,handleTemplateSubmit:_e,handleTemplateSubmitToMeta:Ce,handleTemplateDelete:Re,handleSyncTemplates:Ue,brandName:xt}),e==="audit"&&s.jsx(vy,{auditLogs:W,formatDate:te}),e==="odoo"&&s.jsx(xy,{}),ge?s.jsx(Ua,{variant:"offline",title:"Sin conexin",message:"No podemos actualizar la informacin en tiempo real. Te mostramos lo ltimo cargado.",actionLabel:"Reintentar",onAction:()=>window.location.reload()}):pe?s.jsx(Ua,{variant:"error",title:"Ocurri un problema",message:pe,dismissLabel:"Cerrar",onDismiss:Ze}):null]})]});return ie?Vt:s.jsx("section",{className:"settings-layout",children:Vt})}function by(){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"1.8"}),s.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"1.8"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"1.8"}),s.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"1.8"})]})}function Cy({tenantId:e,tenantBots:t,availableFlows:n,loading:r,onAddBot:a,onRemoveBot:i,onUpdateBotConfig:l}){const[c,u]=h.useState(""),[m,S]=h.useState("openai"),[v,y]=h.useState(""),[E,R]=h.useState({}),I=new Set(t.map(A=>A.flow_id)),g=n.filter(A=>!I.has(A.id)),f=h.useMemo(()=>new Map(n.map(A=>[A.id,A])),[n]),p=g.find(A=>A.id===c),x=!!(p!=null&&p.requires_ai);function k(){if(!c)return;a(c,x?{ai:{provider:m,key:v||void 0}}:null),u(""),y("")}function M(A,w){R(P=>({...P,[A]:{...P[A]||{},...w}}))}function $(A){var oe,ue;if(!l)return;const w=E[A.id]||{},P=w.provider||((ue=(oe=A.config)==null?void 0:oe.ai)==null?void 0:ue.provider)||"openai",O=w.key||"",K={ai:{provider:P,...O?{key:O}:{}}};l(A.id,K),M(A.id,{key:""})}return s.jsxs("section",{className:"sa-bot-card","data-tenant":e||"",children:[s.jsxs("header",{className:"sa-bot-header",children:[s.jsx("div",{className:"sa-bot-icon-large","aria-hidden":"true",children:s.jsx(by,{})}),s.jsxs("div",{className:"sa-bot-title-group",children:[s.jsx("h3",{children:"Asignacion de Bots"}),s.jsx("p",{children:"Selecciona que flujos estaran disponibles para este cliente. Los flujos asignados apareceran inmediatamente en el panel del usuario."})]})]}),s.jsx("div",{className:"sa-bot-body",children:r?s.jsx("div",{className:"sa-bot-loading",children:"Cargando asignaciones..."}):t.length===0?s.jsxs("div",{className:"sa-bot-empty",children:[s.jsx("div",{className:"sa-bot-empty-icon",children:"+"}),s.jsx("div",{className:"sa-bot-empty-title",children:"Sin bots asignados"}),s.jsx("div",{className:"sa-bot-empty-sub",children:"Agrega un flujo desde el selector para activarlo en este tenant."})]}):s.jsx("div",{className:"sa-bot-grid",children:t.map(A=>{var w,P,O,K,oe,ue,_e;return s.jsxs("div",{className:"sa-assigned-bot",children:[s.jsx("div",{className:"sa-bot-item-icon",children:A.flow_icon||">"}),s.jsxs("div",{className:"sa-bot-item-info",children:[s.jsx("span",{className:"sa-bot-item-name",children:A.flow_name||A.flow_id}),s.jsx("span",{className:"sa-bot-item-desc",children:A.flow_description||"Sin descripcion"}),((w=f.get(A.flow_id))==null?void 0:w.requires_ai)&&s.jsxs("div",{className:"sa-bot-ai-config",children:[s.jsxs("div",{className:"sa-ai-field",children:[s.jsx("label",{className:"sa-select-label",children:"Proveedor IA"}),s.jsxs("select",{className:"sa-select-styled",value:((P=E[A.id])==null?void 0:P.provider)||((K=(O=A.config)==null?void 0:O.ai)==null?void 0:K.provider)||"openai",onChange:Ce=>M(A.id,{provider:Ce.target.value}),children:[s.jsx("option",{value:"openai",children:"OpenAI"}),s.jsx("option",{value:"gemini",children:"Gemini"})]})]}),s.jsxs("div",{className:"sa-ai-field",children:[s.jsx("label",{className:"sa-select-label",children:"API Key"}),s.jsx("input",{type:"password",className:"sa-input",placeholder:(ue=(oe=A.config)==null?void 0:oe.ai)!=null&&ue.key_present?"******** (configurada)":"Pegue la API key",value:((_e=E[A.id])==null?void 0:_e.key)||"",onChange:Ce=>M(A.id,{key:Ce.target.value})})]}),s.jsx("button",{type:"button",className:"sa-btn-assign sa-btn-save",onClick:()=>$(A),children:"Guardar IA"})]})]}),s.jsx("button",{type:"button",className:"sa-btn-remove",title:"Quitar bot del cliente",onClick:()=>i(A.id),children:"Quitar"})]},A.id)})})}),s.jsxs("div",{className:"sa-bot-controls",children:[s.jsxs("div",{className:"sa-select-container",children:[s.jsx("label",{className:"sa-select-label",children:"Asignar bot"}),s.jsxs("select",{className:"sa-select-styled",value:c,onChange:A=>u(A.target.value),disabled:g.length===0,children:[s.jsx("option",{value:"",children:g.length===0?"No hay mas bots disponibles":"Selecciona un bot para asignar"}),g.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]})]}),x&&s.jsxs("div",{className:"sa-ai-assign",children:[s.jsxs("div",{className:"sa-ai-field",children:[s.jsx("label",{className:"sa-select-label",children:"Proveedor IA"}),s.jsxs("select",{className:"sa-select-styled",value:m,onChange:A=>S(A.target.value),children:[s.jsx("option",{value:"openai",children:"OpenAI"}),s.jsx("option",{value:"gemini",children:"Gemini"})]})]}),s.jsxs("div",{className:"sa-ai-field",children:[s.jsx("label",{className:"sa-select-label",children:"API Key"}),s.jsx("input",{type:"password",className:"sa-input",placeholder:"Pegue la API key",value:v,onChange:A=>y(A.target.value)})]})]}),s.jsx("button",{type:"button",className:"sa-btn-assign",onClick:k,disabled:!c,children:"Asignar Bot"})]})]})}const sn={name:"",slug:"",plan:"",db_url:"",phone_number_id:"",line_name:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",brand_name:"",logo_url:"",brand_primary:"#22d3ee",brand_accent:"#38bdf8",brand_bg:"#0b0f16",timezone:"",odoo_base_url:"",odoo_db_name:"",odoo_username:"",odoo_password:""},Ey=[{value:"starter",label:"Starter"},{value:"growth",label:"Growth"},{value:"scale",label:"Scale"},{value:"enterprise",label:"Enterprise"}];function Ay(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"})]})}function du(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Ty(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"3.5",strokeWidth:"1.6"}),s.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1.2l2-1.5-2-3.5-2.4.7a7.2 7.2 0 0 0-2-1.2L12 2 9.5 4.3a7.2 7.2 0 0 0-2 1.2l-2.4-.7-2 3.5 2 1.5A7 7 0 0 0 5 12c0 .4 0 .8.1 1.2l-2 1.5 2 3.5 2.4-.7a7.2 7.2 0 0 0 2 1.2L12 22l2.5-2.3a7.2 7.2 0 0 0 2-1.2l2.4.7 2-3.5-2-1.5c.1-.4.1-.8.1-1.2Z",strokeWidth:"1.2",strokeLinejoin:"round"})]})}function Ly(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.6"}),s.jsx("path",{d:"M16.5 16.5 20 20",strokeWidth:"1.6",strokeLinecap:"round"})]})}function Ry(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M6 12h12",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"m13 6 6 6-6 6",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Oy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M18 6 6 18",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"m6 6 12 12",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Py(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56",strokeWidth:"1.8",strokeLinecap:"round"})})}function Ih(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Dh(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"m2 2 20 20",strokeWidth:"1.8",strokeLinecap:"round"})]})}function My(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 18h.01",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Iy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"m15 5 4 4",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Dy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M3 6h18",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",strokeWidth:"1.8",strokeLinecap:"round"})]})}const Bh={display_name:"",phone_number_id:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",is_active:!0,is_default:!1};function By({isOpen:e,onClose:t,initialData:n,onSave:r,tenantId:a}){const[i,l]=h.useState(Bh),[c,u]=h.useState(!1),[m,S]=h.useState(!1),[v,y]=h.useState(!1),[E,R]=h.useState(null);if(h.useEffect(()=>{e&&(l(n||{...Bh}),R(null))},[e,n]),!e)return null;const I=async g=>{if(g.preventDefault(),y(!0),R(null),!i.phone_number_id||!i.verify_token||!n&&!i.wa_token){R("Los campos ID de Telfono, Verify Token y Access Token son obligatorios."),y(!1);return}try{await r({...i,tenant_id:a}),t()}catch(f){console.error("Error saving channel:",f),R(f.message||"Error al guardar la lnea.")}finally{y(!1)}};return s.jsx("div",{className:"sa-modal-overlay",onClick:t,children:s.jsxs("div",{className:"sa-modal-content",onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"sa-modal-header",children:[s.jsx("div",{className:"sa-modal-title",children:n?"Editar Lnea WhatsApp":"Nueva Lnea WhatsApp"}),s.jsx("button",{className:"sa-modal-close",onClick:t,children:s.jsx(Oy,{width:24,height:24})})]}),s.jsxs("div",{className:"sa-modal-body",children:[E&&s.jsx("div",{className:"sa-alert",style:{marginBottom:"1rem"},children:E}),s.jsxs("div",{className:"sa-form-grid",children:[s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Nombre para mostrar (Opcional)"}),s.jsx("input",{value:i.display_name||"",onChange:g=>l({...i,display_name:g.target.value}),placeholder:"Ej: Ventas Principal"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Phone Number ID *"}),s.jsx("input",{value:i.phone_number_id||"",onChange:g=>l({...i,phone_number_id:g.target.value}),placeholder:"Identificador del nmero de telfono"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"WABA ID (WhatsApp Business Account ID)"}),s.jsx("input",{value:i.waba_id||"",onChange:g=>l({...i,waba_id:g.target.value}),placeholder:"Identificador de la cuenta de WhatsApp Business"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Verify Token (Webhook) *"}),s.jsx("input",{value:i.verify_token||"",onChange:g=>l({...i,verify_token:g.target.value}),placeholder:"Token de verificacin webhook"})]}),s.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[s.jsx("label",{children:"Permanent Access Token *"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:c?"text":"password",value:i.wa_token||"",onChange:g=>l({...i,wa_token:g.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"Token de acceso permanente",style:{width:"100%",paddingRight:"40px"}}),s.jsx("button",{type:"button",onClick:()=>u(!c),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:c?s.jsx(Dh,{width:18,height:18}):s.jsx(Ih,{width:18,height:18})})]})]}),s.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[s.jsx("label",{children:"App Secret (Opcional)"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:m?"text":"password",value:i.app_secret||"",onChange:g=>l({...i,app_secret:g.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"App Secret de Meta",style:{width:"100%",paddingRight:"40px"}}),s.jsx("button",{type:"button",onClick:()=>S(!m),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:m?s.jsx(Dh,{width:18,height:18}):s.jsx(Ih,{width:18,height:18})})]})]})]}),s.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"2rem"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[s.jsx("input",{type:"checkbox",checked:!!i.is_active,onChange:g=>l({...i,is_active:g.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Activa"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[s.jsx("input",{type:"checkbox",checked:!!i.is_default,onChange:g=>l({...i,is_default:g.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Principal (Por Defecto)"]})]})]}),s.jsxs("div",{className:"sa-modal-footer",children:[s.jsx("button",{className:"sa-btn ghost",onClick:t,disabled:v,children:"Cancelar"}),s.jsx("button",{className:"sa-btn primary",onClick:I,disabled:v,children:v?s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(Py,{width:16,height:16,className:"animate-spin"})," Guardando..."]}):"Guardar Lnea"})]})]})})}function zy({channels:e=[],tenantId:t,onRefresh:n}){const[r,a]=h.useState(!1),[i,l]=h.useState(null),c=()=>{l(null),a(!0)},u=v=>{l(v),a(!0)},m=async v=>{i?await qe(`/api/superadmin/channels/${i.id}`,v):await Se("/api/superadmin/channels",v),await n()},S=async v=>{if(confirm("Ests seguro de que deseas eliminar esta lnea? Esta accin no se puede deshacer."))try{await Bn(`/api/superadmin/channels/${v}`),await n()}catch(y){console.error("Error deleting channel:",y),alert("No se pudo eliminar la lnea.")}};return s.jsxs("section",{className:"sa-lines-card",children:[s.jsxs("header",{className:"sa-lines-header",children:[s.jsxs("div",{className:"sa-lines-title",children:[s.jsx("div",{className:"sa-lines-icon",children:s.jsx(My,{width:24,height:24})}),s.jsxs("div",{children:[s.jsx("h3",{children:"Lneas de WhatsApp Cloud"}),s.jsx("p",{children:"Gestiona las conexiones activas de WhatsApp para este tenant."})]})]}),s.jsxs("button",{className:"sa-btn primary",onClick:c,children:[s.jsx(du,{width:16,height:16,style:{marginRight:"0.5rem"}}),"Agregar Nueva Lnea"]})]}),s.jsx("div",{className:"sa-lines-body",children:s.jsxs("div",{className:"sa-lines-grid",children:[e.map(v=>s.jsxs("div",{className:`sa-line-card ${v.is_active?"":"opacity-75"}`,children:[s.jsxs("div",{className:"sa-line-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"sa-line-name",children:v.display_name||"Sin nombre"}),s.jsxs("div",{className:"sa-line-meta",children:["ID: ",v.phone_number_id]})]}),s.jsx("div",{className:`sa-line-status ${v.is_active?"active":""}`,title:v.is_active?"Activo":"Inactivo"})]}),s.jsxs("div",{className:"sa-line-badges",children:[v.is_default&&s.jsx("span",{className:"sa-line-badge default",children:"DEFAULT"}),!v.is_active&&s.jsx("span",{className:"sa-status warn",children:"INACTIVO"})]}),s.jsxs("div",{className:"sa-line-details",children:[s.jsxs("div",{className:"sa-line-detail",children:[s.jsx("span",{className:"sa-detail-label",children:"WABA ID"}),s.jsx("span",{className:"sa-detail-value",children:v.waba_id||"-"})]}),s.jsxs("div",{className:"sa-line-detail",children:[s.jsx("span",{className:"sa-detail-label",children:"Verify Token"}),s.jsx("span",{className:"sa-detail-value",children:v.verify_token?`${v.verify_token.substring(0,16)}...`:"-"})]})]}),s.jsxs("div",{className:"sa-line-actions",children:[s.jsx("button",{className:"sa-btn ghost",onClick:()=>u(v),title:"Editar",children:s.jsx(Iy,{width:16,height:16})}),s.jsx("button",{className:"sa-btn ghost",onClick:()=>S(v.id),title:"Eliminar",style:{color:"#f87171"},children:s.jsx(Dy,{width:16,height:16})})]})]},v.id)),s.jsxs("button",{type:"button",className:"sa-line-add-card",onClick:c,children:[s.jsx("div",{className:"sa-add-icon-circle",children:s.jsx(du,{width:24,height:24})}),s.jsx("span",{children:"Nueva Conexin"})]})]})}),s.jsx(By,{isOpen:r,onClose:()=>a(!1),initialData:i,onSave:m,tenantId:t})]})}function zh({route:e="/superadmin",onNavigate:t,onImpersonateTenant:n,onLogout:r=()=>{}}){const[a,i]=h.useState([]),[l,c]=h.useState([]),[u,m]=h.useState([]),[S,v]=h.useState(""),[y,E]=h.useState(""),[R,I]=h.useState("Verificacion de red: sistema ok"),[g,f]=h.useState(sn),[p,x]=h.useState(!1),[k,M]=h.useState(!1),[$,A]=h.useState(""),[w,P]=h.useState(""),[O,K]=h.useState(!0),[oe,ue]=h.useState(sn),[_e,Ce]=h.useState(!0),[Re,Ue]=h.useState(!1),W=h.useRef(""),[te,Z]=h.useState([]),[de,ce]=h.useState([]),[Le,T]=h.useState(!1),{pushToast:q}=dd(),b=h.useMemo(()=>{if(!e)return"";const _=e.match(/^\/superadmin\/tenants\/([^/]+)\/?$/)||e.match(/^\/superadmin\/tenant\/([^/]+)\/?$/)||e.match(/^\/superadmin\/edit\/([^/]+)\/?$/);return _?_[1]:""},[e]),U=e.startsWith("/superadmin/new"),Q=!!b,ie=U||Q,pe=h.useCallback(_=>{if(t){t(_,{replace:!1});return}typeof window>"u"||window.history.pushState({},"",_)},[t]);async function ge(){try{const _=await me("/api/superadmin/tenants");i(_.tenants||[]);const V=await me("/api/superadmin/channels");c(V.channels||[]),E("")}catch(_){E(_.message||"No se pudo cargar datos.")}}h.useEffect(()=>{ge(),et()},[]),h.useMemo(()=>{const _=new Map;return l.forEach(V=>{const H=_.get(V.tenant_id)||0;_.set(V.tenant_id,H+1)}),_},[l]);const Ze=h.useMemo(()=>{const _=S.trim().toLowerCase();return _?a.filter(V=>{const H=String(V.name||"").toLowerCase(),re=String(V.slug||"").toLowerCase(),Ne=String(V.id||"").toLowerCase();return H.includes(_)||re.includes(_)||Ne.includes(_)}):a.slice()},[a,S]),xt=a.length,bt=a.filter(_=>_.is_active).length;a.filter(_=>_.has_database).length;const ve=a.filter(_=>_.has_odoo).length,Ct=xt?Math.round(ve/xt*100):0;function It(_){if(!_)return"--";const V=new Date(_);return Number.isNaN(V.getTime())?"--":V.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"2-digit"})}function Vt(_){return 10+Math.abs(Array.from(_).reduce((re,Ne)=>re+Ne.charCodeAt(0),0))%70}function Qe(){f(sn),ue(sn),P(""),K(!0),Ce(!0),ce([]),m([]),I("Verificacion de red: sistema ok"),W.current=""}function be(){Qe(),E(""),pe("/superadmin/new")}function it(){W.current="",pe("/superadmin")}async function Ft(_){if(n)try{E(""),A(_),await n(_)}catch(V){E(V.message||"No se pudo entrar al tenant.")}finally{A("")}}function Zt(_){const V={};return Object.keys(sn).forEach(H=>{const re=_[H];V[H]=typeof re=="string"?re.trim():re||""}),{...sn,...V}}async function lt(_){if(_){W.current=_,P(_),f(sn),ue(sn),K(!0),Ce(!0),ce([]),m([]),Ue(!0),E("");try{const V=await me(`/api/superadmin/tenants/${_}/details`);if(W.current!==_)return;const H=V.tenant||{},re=V.branding||null,Ne=V.odoo||null,fn=V.database||null,dt=V.channel||null;m(V.channels||[]);const tt=(re==null?void 0:re.colors)||{},nt=Zt({...sn,name:H.name||"",slug:H.slug||"",plan:H.plan||"",db_url:(fn==null?void 0:fn.db_url)||"",brand_name:(re==null?void 0:re.brand_name)||"",logo_url:(re==null?void 0:re.logo_url)||"",brand_primary:(tt==null?void 0:tt.primary)||sn.brand_primary,brand_accent:(tt==null?void 0:tt.accent)||sn.brand_accent,brand_bg:(tt==null?void 0:tt.bg)||sn.brand_bg,odoo_base_url:(Ne==null?void 0:Ne.base_url)||"",odoo_db_name:(Ne==null?void 0:Ne.db_name)||"",odoo_username:(Ne==null?void 0:Ne.username)||"",odoo_password:(Ne==null?void 0:Ne.password)||""});f(nt),ue(nt),P(H.id||_),K(!!H.is_active),Ce(!!H.is_active),I("Modo edicion: cambios pendientes"),await xe(_)}catch(V){E(V.message||"No se pudo cargar tenant.")}finally{Ue(!1)}}}async function hn(_){if(_)try{const V=await me(`/api/superadmin/tenants/${_}/details`);if(w&&w!==_)return;m(V.channels||[])}catch(V){console.error("Error loading tenant channels",V)}}async function et(){try{const _=await me("/api/superadmin/flows");Z(_.flows||[])}catch(_){console.error("Error loading flows",_)}}async function xe(_){if(_){T(!0);try{const V=await me(`/api/superadmin/tenant-bots?tenant_id=${_}`);ce(V.tenant_bots||[])}catch(V){console.error("Error loading tenant bots",V)}finally{T(!1)}}}async function Et(_,V){try{await qe(`/api/superadmin/tenant-bots/${_}`,{is_active:V}),ce(H=>H.map(re=>re.id===_?{...re,is_active:V}:re))}catch(H){E(H.message||"Error al cambiar estado del bot.")}}async function F(_,V=null){if(w)try{const H=await Se("/api/superadmin/tenant-bots",{tenant_id:w,flow_id:_,config:V});H.tenant_bot&&(ce(re=>[H.tenant_bot,...re]),q({message:"Bot agregado correctamente"}))}catch(H){E(H.message||"Error al agregar bot."),q({type:"error",message:H.message||"Error al agregar bot"})}}async function Oe(_){const V=de.find(H=>H.id===_);try{await Bn(`/api/superadmin/tenant-bots/${_}`),ce(H=>H.filter(re=>re.id!==_)),q({message:"Bot eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{if(!V)return;const H=await Se("/api/superadmin/tenant-bots",{tenant_id:V.tenant_id,flow_id:V.flow_id,config:V.config||null});H!=null&&H.tenant_bot&&V.is_active===!1&&await qe(`/api/superadmin/tenant-bots/${H.tenant_bot.id}`,{is_active:!1}),await xe(w),q({message:"Bot restaurado"})}catch(H){q({type:"error",message:(H==null?void 0:H.message)||"No se pudo restaurar el bot"})}}})}catch(H){E(H.message||"Error al eliminar bot."),q({type:"error",message:H.message||"Error al eliminar bot"})}}async function ye(_,V){try{const H=await qe(`/api/superadmin/tenant-bots/${_}`,{config:V});H!=null&&H.tenant_bot&&ce(re=>re.map(Ne=>Ne.id===_?H.tenant_bot:Ne)),q({message:"Configuracion IA actualizada"})}catch(H){E(H.message||"Error al actualizar configuracion del bot."),q({type:"error",message:H.message||"Error al actualizar configuracion del bot"})}}async function Ke(_){E(""),pe(`/superadmin/tenants/${_.id}`)}async function Sn(){await ge(),w&&await hn(w)}function L(){const _=g.name.trim(),V=g.slug.trim(),H=g.db_url.trim();return!_||!V?{ok:!1,message:"Nombre y subdominio son requeridos."}:!w&&!H?{ok:!1,message:"Tenant DB URL es requerido."}:(g.brand_name.trim()||g.logo_url.trim()||g.brand_primary||g.brand_accent||g.brand_bg)&&!g.brand_name.trim()?{ok:!1,message:"Brand name es requerido."}:(g.odoo_base_url||g.odoo_db_name||g.odoo_username||g.odoo_password)&&(!g.odoo_base_url||!g.odoo_db_name||!g.odoo_username||!w&&!g.odoo_password)?{ok:!1,message:"Odoo incompleto: base_url, db_name, username, password."}:{ok:!0}}function Ee(_){if(!_)return"Verificacion completada";const V=[];if(_.database){const H=_.database.ok?"DB ok":"DB error",re=typeof _.database.latency_ms=="number"?` (${_.database.latency_ms}ms)`:"";V.push(`${H}${re}`)}if(_.odoo){const H=_.odoo.ok?"Odoo ok":"Odoo error",re=typeof _.odoo.latency_ms=="number"?` (${_.odoo.latency_ms}ms)`:"";V.push(`${H}${re}`)}return V.length?`Verificacion completada: ${V.join(" | ")}`:"Verificacion completada"}function qs(_){if(_!=null&&_.database&&!_.database.ok){const V=_.database.details||_.database.error;return kn(V||"Error en DB")}if(_!=null&&_.odoo&&!_.odoo.ok){const V=_.odoo.details||_.odoo.error;return kn(V||"Error en Odoo")}return"No se pudo validar conexion"}function kn(_){const V=(_||"").toString(),H=V.toLowerCase();return H.includes("missing")?"Completa los campos de Odoo":H.includes("db_connection_failed")?"No se pudo conectar a la base de datos":H.includes("odoo")&&H.includes("failed")?"No se pudo autenticar en Odoo":V||"No se pudo validar conexion"}async function Wn(){const _=L();if(!_.ok){I(_.message);return}x(!0),I("Verificando conexion...");try{const V=await Se("/api/superadmin/tenants/validate",{db_url:g.db_url.trim(),odoo_base_url:g.odoo_base_url.trim(),odoo_db_name:g.odoo_db_name.trim(),odoo_username:g.odoo_username.trim(),odoo_password:g.odoo_password.trim()}),H=Ee(V.checks);I(H),V.ok?q({message:H}):q({type:"error",message:qs(V.checks)})}catch(V){I("Error validando conexion"),q({type:"error",message:V.message||"No se pudo validar conexion"})}finally{x(!1)}}async function hs(_){var H;if(_.preventDefault(),Q&&!Wt)return;const V=L();if(!V.ok){E(V.message);return}try{M(!0),E("");let re=w;if(re?await qe(`/api/superadmin/tenants/${re}`,{name:g.name.trim(),slug:g.slug.trim(),plan:g.plan.trim(),is_active:O}):re=(H=(await Se("/api/superadmin/tenants",{name:g.name.trim(),slug:g.slug.trim(),plan:g.plan.trim()})).tenant)==null?void 0:H.id,!re)throw new Error("tenant_not_ready");if(g.db_url.trim()&&await Se(`/api/superadmin/tenants/${re}/database`,{db_url:g.db_url.trim()}),(g.brand_name.trim()||g.logo_url.trim())&&await qe("/api/superadmin/branding",{tenant_id:re,brand_name:g.brand_name.trim(),logo_url:g.logo_url.trim()||null,colors:null}),g.odoo_base_url||g.odoo_db_name||g.odoo_username||g.odoo_password){const dt={tenant_id:re,base_url:g.odoo_base_url.trim(),db_name:g.odoo_db_name.trim(),username:g.odoo_username.trim()};g.odoo_password.trim()&&(dt.password=g.odoo_password.trim()),await qe("/api/superadmin/odoo",dt)}if(await ge(),w){const dt=Zt(g);f(dt),ue(dt),Ce(O),I("Cambios guardados"),q({message:"Tenant actualizado correctamente"})}else Qe(),q({message:"Tenant creado correctamente"})}catch(re){E(re.message||"No se pudo guardar tenant."),q({type:"error",message:re.message||"No se pudo guardar tenant"})}finally{M(!1)}}async function bn(){if(!w)return;const _=!O;try{M(!0),E(""),await qe(`/api/superadmin/tenants/${w}`,{is_active:_}),K(_),Ce(_),I(_?"Tenant reactivado":"Tenant bloqueado"),await ge()}catch(V){E(V.message||"No se pudo cambiar estado del tenant.")}finally{M(!1)}}const Wt=h.useMemo(()=>!w&&!Q||O!==_e?!0:Object.keys(oe).some(_=>{const V=String(g[_]??""),H=String(oe[_]??"");return V!==H}),[_e,oe,O,w,Q,g]);return h.useEffect(()=>{if(Q&&b&&b!==w){lt(b);return}U&&(w||Re)&&Qe()},[Re,w,U,Q,b]),s.jsxs("div",{className:"sa-shell",children:[s.jsxs("aside",{className:"sa-rail",children:[s.jsx("div",{className:"sa-rail-logo",children:"PRZV"}),s.jsxs("button",{type:"button",className:`sa-rail-btn ${ie?"":"active"}`,onClick:it,children:[s.jsx(Ay,{className:"sa-rail-icon"}),s.jsx("span",{children:"Dashboard"})]}),s.jsxs("button",{type:"button",className:`sa-rail-btn ${U?"active":""}`,onClick:be,children:[s.jsx(du,{className:"sa-rail-icon"}),s.jsx("span",{children:"Nuevo"})]}),s.jsxs("button",{type:"button",className:"sa-rail-btn",children:[s.jsx(Ty,{className:"sa-rail-icon"}),s.jsx("span",{children:"Ajustes"})]}),s.jsxs("div",{className:"sa-rail-footer",children:[s.jsx("div",{className:"sa-avatar",children:"SA"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-role",children:"Superadmin"}),s.jsx("div",{className:"sa-meta",children:"Control plane"})]})]})]}),s.jsxs("main",{className:"sa-main",children:[!ie&&s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sa-topbar",children:[s.jsxs("div",{children:[s.jsx("div",{className:"sa-kicker",children:"Panel de control Perzivalh"}),s.jsxs("div",{className:"sa-title",children:["Sistema operativo ",s.jsx("span",{className:"sa-dot"})]}),s.jsx("div",{className:"sa-subtitle",children:"Estado general del entorno"})]}),s.jsxs("div",{className:"sa-top-actions",children:[s.jsx("span",{className:"sa-version",children:"v0.4 stable"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:ge,children:"Recargar"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:r,children:"Cerrar sesion"}),s.jsx("button",{className:"sa-btn primary",type:"button",onClick:be,children:"Nuevo tenant"})]})]}),s.jsxs("section",{className:"sa-kpi-grid",children:[s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Total de empresas (tenants)"}),s.jsx("div",{className:"sa-kpi-value",children:xt}),s.jsxs("div",{className:"sa-kpi-meta",children:["+",bt," activas"]})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Usuarios activos totales"}),s.jsx("div",{className:"sa-kpi-value",children:"--"}),s.jsx("div",{className:"sa-kpi-meta",children:"En tiempo real"})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Mensajes hoy"}),s.jsx("div",{className:"sa-kpi-value",children:"--"}),s.jsx("div",{className:"sa-kpi-meta",children:"Canal API"})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Conexiones Odoo activas"}),s.jsxs("div",{className:"sa-kpi-value",children:[Ct,"%"]}),s.jsxs("div",{className:"sa-kpi-meta",children:[ve," sincronizadas"]})]})]}),s.jsxs("section",{className:"sa-table-card",children:[s.jsxs("div",{className:"sa-table-header",children:[s.jsxs("div",{className:"sa-search",children:[s.jsx(Ly,{className:"sa-search-icon"}),s.jsx("input",{value:S,onChange:_=>v(_.target.value),placeholder:"Filtrar empresas..."})]}),s.jsxs("div",{className:"sa-table-actions",children:[s.jsx("button",{className:"sa-btn ghost",type:"button",children:"Ordenar por salud"}),s.jsx("button",{className:"sa-btn ghost",type:"button",children:"Exportar CSV"})]})]}),s.jsxs("div",{className:"sa-table",children:[s.jsxs("div",{className:"sa-table-head",children:[s.jsx("div",{children:"ID referencia"}),s.jsx("div",{children:"Nombre de la empresa"}),s.jsx("div",{children:"Estado"}),s.jsx("div",{children:"Uso de recursos"}),s.jsx("div",{children:"Tiempo de actividad"}),s.jsx("div",{children:"Acciones"})]}),Ze.length?Ze.map(_=>{var Ne;const V=Vt(_.id||"tenant"),H=_.has_database?"db":"no-db",re=_.has_database;return s.jsxs("div",{className:"sa-table-row",children:[s.jsx("div",{className:"sa-ref",children:((Ne=_.slug)==null?void 0:Ne.toUpperCase())||"TENANT"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-tenant-name",children:_.name}),s.jsx("div",{className:"sa-tenant-meta",children:_.id.slice(0,8)})]}),s.jsx("div",{className:`sa-status ${_.is_active?"ok":"warn"}`,children:_.is_active?"activo":"inactivo"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-progress",children:s.jsx("span",{className:`sa-progress-fill ${H}`,style:{width:`${V}%`}})}),s.jsxs("div",{className:"sa-tenant-meta",children:[V,"% carga"]})]}),s.jsx("div",{className:"sa-tenant-meta",children:It(_.created_at)}),s.jsx("div",{children:s.jsxs("div",{className:"sa-action-group",children:[s.jsx("button",{className:"sa-action",type:"button",onClick:()=>Ft(_.id),disabled:!re||$===_.id,children:re?$===_.id?"Entrando...":"Entrar":"Sin DB"}),s.jsx("button",{className:"sa-link",type:"button",onClick:()=>Ke(_),children:s.jsx(Ry,{className:"sa-link-icon"})})]})})]},_.id)}):s.jsx("div",{className:"sa-empty",children:"Sin tenants para mostrar."})]}),s.jsxs("div",{className:"sa-footer-note",children:["Mostrando ",Ze.length||0," empresas en produccion"]})]})]}),ie&&s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sa-create-header",children:[s.jsx("button",{className:"sa-back",type:"button",onClick:it,children:"Volver al dashboard"}),s.jsx("div",{className:"sa-create-title",children:Q?"Editar tenant":"Registrar nuevo tenant"}),s.jsxs("div",{className:"sa-create-actions",children:[s.jsx("div",{className:"sa-create-meta",children:"Modo: superadmin"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:r,children:"Cerrar sesion"})]})]}),y?s.jsx("div",{className:"sa-alert",children:y}):null,s.jsxs("form",{className:"sa-form",onSubmit:hs,children:[s.jsxs("div",{className:"sa-form-grid sa-form-grid-2",children:[s.jsxs("div",{className:"sa-form-section",children:[s.jsx("div",{className:"sa-section-title",children:"Identidad del tenant"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Nombre de la empresa"}),s.jsx("input",{value:g.name,onChange:_=>f({...g,name:_.target.value}),placeholder:"Ej. Empresa Alfa"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Subdominio reservado"}),s.jsx("input",{value:g.slug,onChange:_=>f({...g,slug:_.target.value}),placeholder:"alfa-salud"})]}),s.jsxs("div",{className:"sa-field sa-field-row",children:[s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Plan"}),s.jsxs("select",{value:g.plan,onChange:_=>f({...g,plan:_.target.value}),children:[s.jsx("option",{value:"",children:"Seleccionar"}),Ey.map(_=>s.jsx("option",{value:_.value,children:_.label},_.value))]})]}),Q&&s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Estado del tenant"}),s.jsxs("select",{value:O?"active":"inactive",onChange:_=>K(_.target.value==="active"),children:[s.jsx("option",{value:"active",children:"Activo"}),s.jsx("option",{value:"inactive",children:"Bloqueado"})]})]})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Brand name"}),s.jsx("input",{value:g.brand_name,onChange:_=>f({...g,brand_name:_.target.value}),placeholder:"Perzivalh"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Logo URL"}),s.jsx("input",{value:g.logo_url,onChange:_=>f({...g,logo_url:_.target.value}),placeholder:"https://"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Paleta de colores"}),s.jsx("div",{className:"sa-note",children:"Personalizacin deshabilitada por ahora."})]}),!Q&&s.jsx("div",{className:"sa-note",children:"Nota: al registrar un tenant se inicia el aprovisionamiento en el entorno de produccion."})]}),s.jsxs("div",{className:"sa-form-section",children:[s.jsx("div",{className:"sa-section-title",children:"Variables de entorno (envs)"}),s.jsxs("div",{className:"sa-subsection",children:[s.jsx("div",{className:"sa-subsection-title",children:"Base de datos"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Tenant DB URL"}),s.jsx("input",{value:g.db_url,onChange:_=>f({...g,db_url:_.target.value}),placeholder:"postgresql://..."})]})]}),s.jsxs("div",{className:"sa-subsection",children:[s.jsx("div",{className:"sa-subsection-title",children:"Odoo (opcional)"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo Base URL"}),s.jsx("input",{value:g.odoo_base_url,onChange:_=>f({...g,odoo_base_url:_.target.value}),placeholder:"https://odoo-instancia"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo DB Name"}),s.jsx("input",{value:g.odoo_db_name,onChange:_=>f({...g,odoo_db_name:_.target.value}),placeholder:"db_tenant_prod"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo User"}),s.jsx("input",{value:g.odoo_username,onChange:_=>f({...g,odoo_username:_.target.value}),placeholder:"usuario@empresa.com"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo Password (opcional)"}),s.jsx("input",{type:"password",value:g.odoo_password,onChange:_=>f({...g,odoo_password:_.target.value}),placeholder:"********"})]})]})]})]}),s.jsxs("div",{className:"sa-form-actions",children:[s.jsx("div",{className:"sa-status-note",children:Q?Re?"Cargando datos...":Wt?"Cambios pendientes":"Sin cambios":R}),s.jsx("div",{className:"sa-form-buttons",children:Q?s.jsxs(s.Fragment,{children:[Wt&&s.jsx("button",{className:"sa-btn primary",type:"submit",disabled:k,children:k?"Guardando...":"Guardar cambios"}),s.jsx("button",{className:"sa-btn danger",type:"button",onClick:bn,disabled:k||!w,children:O?"Bloquear tenant":"Reactivar tenant"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:Wn,disabled:p||k,children:p?"Validando...":"Validar conexion"}),s.jsx("button",{className:"sa-btn primary",type:"submit",disabled:k,children:k?"Guardando...":"Desplegar instancia"})]})})]})]}),w?s.jsx(zy,{channels:u.length?u:l.filter(_=>_.tenant_id===w),tenantId:w,onRefresh:Sn}):s.jsx("div",{style:{marginTop:"2rem",padding:"1rem",border:"1px dashed rgba(255,255,255,0.2)",borderRadius:"12px",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textAlign:"center"},children:"Crea el tenant primero para configurar las lneas de WhatsApp."}),w&&s.jsx(Cy,{tenantId:w,tenantBots:de,availableFlows:te,loading:Le,onToggleBot:Et,onAddBot:F,onRemoveBot:Oe,onUpdateBotConfig:ye})]})]})]})}const $h=["open","pending","assigned"],Uh=["admin","recepcion","caja","marketing","doctor"],ss={admin:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!0},campaigns:{read:!0,write:!0},settings:{read:!0,write:!0}},settings:{general:{read:!0,write:!0},users:{read:!0,write:!0},bot:{read:!0,write:!0},templates:{read:!0,write:!0},audit:{read:!0,write:!0},odoo:{read:!0,write:!0}}},recepcion:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},caja:{modules:{chat:{read:!0,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},marketing:{modules:{chat:{read:!1,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!0,write:!0},settings:{read:!0,write:!1}},settings:{general:{read:!0,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!0,write:!0},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},doctor:{modules:{chat:{read:!0,write:!1},dashboard:{read:!1,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}}};function uc(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleString()}function $y(e){if(!e)return"-";const t=new Date(e);if(Number.isNaN(t.getTime()))return"-";const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=Math.round((r-a)/864e5);return i===0?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i===1?"Ayer":["Dom","Lun","Mar","Mie","Jue","Vie","Sab"][t.getDay()]}function Vh(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=Math.round((r-a)/864e5);return i===0?"Hoy":i===1?"Ayer":`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`}function ne(e){if(!e)return"Error inesperado";if(typeof e=="string")return e==="offline"?"Sin conexin a internet. Revisa tu red y vuelve a intentar.":e==="network_error"?"No se pudo conectar con el servidor. Intenta de nuevo.":e==="request_failed"?"No se pudo completar la solicitud. Intenta nuevamente.":e;const t=e.message||"Error inesperado";return t==="offline"||t.toLowerCase().includes("failed to fetch")?"Sin conexin a internet. Revisa tu red y vuelve a intentar.":t==="network_error"||t.toLowerCase().includes("networkerror")?"No se pudo conectar con el servidor. Intenta de nuevo.":t==="request_failed"?"No se pudo completar la solicitud. Intenta nuevamente.":t}function Uy(e,t){return e?t.includes(e.role):!1}function dc(e){if(!e||typeof e!="object")return{...ss};const t={...ss};return Object.entries(e).forEach(([n,r])=>{var a,i;!r||typeof r!="object"||(t[n]={modules:{...(a=ss[n])==null?void 0:a.modules,...r.modules},settings:{...(i=ss[n])==null?void 0:i.settings,...r.settings}})}),t}function Lt(e,t,n,r="read"){var i;const a=(i=e==null?void 0:e[t])==null?void 0:i[n];return a?!!a[r]:!1}function Ar(e){const t=n=>n.status==="pending"&&!n.assigned_user_id?0:n.status==="pending"&&n.assigned_user_id?1:n.status==="assigned"?2:3;return[...e].sort((n,r)=>{const a=t(n),i=t(r);if(a!==i)return a-i;const l=new Date(n.last_message_at||n.created_at||0).getTime();return new Date(r.last_message_at||r.created_at||0).getTime()-l})}function Vy(e){const t=new URLSearchParams;Object.entries(e||{}).forEach(([r,a])=>{a==null||a===""||t.append(r,a)});const n=t.toString();return n?`?${n}`:""}function Fh(e){if(!e)return"?";const t=e.trim();return t?t[0].toUpperCase():"?"}function Wh(e){if(typeof document>"u")return;const t=document.documentElement.style;t.removeProperty("--accent"),t.removeProperty("--accent-strong"),t.removeProperty("--accent-soft"),t.removeProperty("--accent-soft-2"),t.removeProperty("--scroll-thumb"),t.removeProperty("--scroll-thumb-hover")}function Fy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M4.5 5.5h15v10H8l-3.5 3.5V5.5Z",strokeWidth:"1.8",strokeLinejoin:"round"}),s.jsx("path",{d:"M8 9h8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M8 12.5h5",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Wy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"})]})}function Hy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M6 9a6 6 0 1 1 12 0c0 4.2 2 5.5 2 5.5H4S6 13.2 6 9Z",strokeWidth:"1.8",strokeLinejoin:"round"}),s.jsx("path",{d:"M9.5 19a2.5 2.5 0 0 0 5 0",strokeWidth:"1.8"})]})}function qy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"2",strokeLinecap:"round"})]})}function Gy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"4",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 3v2.5",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M12 18.5V21",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M3 12h2.5",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M18.5 12H21",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5.2 5.2l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M17 17l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5.2 18.8 7 17",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M17 7l1.8-1.8",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Qy(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M20 14.2A8.5 8.5 0 1 1 9.8 4 6.5 6.5 0 0 0 20 14.2Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function Ky(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.8"}),s.jsx("path",{d:"M16.5 16.5 21 21",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Yy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Xy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"3.5",y:"6",width:"11",height:"12",rx:"2",strokeWidth:"1.8"}),s.jsx("path",{d:"m14.5 10 6-3v10l-6-3",strokeWidth:"1.8"})]})}function Jy(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M6.5 4.5 9 3l2.5 4-2.5 1.5c1.2 2.3 3.2 4.3 5.5 5.5L16 11l4 2.5-1.5 2.5c-.7 1.2-2.2 1.7-3.6 1.3a15.9 15.9 0 0 1-7.7-7.7c-.4-1.4.1-2.9 1.3-3.6Z",strokeWidth:"1.6",strokeLinejoin:"round"})})}function Zy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 10v6",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"7.5",r:"1",fill:"currentColor"})]})}function ej(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"m4 12 15-7-6 14-2.5-5.2L4 12Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function tj(){const[e,t]=h.useState(localStorage.getItem("token")||""),[n,r]=h.useState(()=>typeof window<"u"&&localStorage.getItem("superadmin_token")||""),[a,i]=h.useState(null),[l,c]=h.useState(null),[u,m]=h.useState(null),[S,v]=h.useState([]),[y,E]=h.useState({id:"",display_name:""}),[R,I]=h.useState(()=>{if(typeof window>"u")return{};try{return JSON.parse(localStorage.getItem("last_read_map")||"{}")}catch{return{}}}),[g,f]=h.useState({email:"",password:""}),[p,x]=h.useState(""),[k,M]=h.useState("chats"),[$,A]=h.useState(()=>typeof window<"u"?window.location.pathname:"/"),[w,P]=h.useState(()=>localStorage.getItem("theme")||"light"),[O,K]=h.useState(()=>typeof window<"u"&&window.navigator?!window.navigator.onLine:!1),[oe,ue]=h.useState(!1),[_e,Ce]=h.useState(!1),[Re,Ue]=h.useState(!1),[W,te]=h.useState(!0),[Z,de]=h.useState(!1),[ce,Le]=h.useState(""),T=h.useRef(null),q=h.useRef(null),b=h.useRef(null),U=h.useRef({conversationId:null,lastId:null,length:0}),Q=h.useRef(0),ie=h.useRef(!1),pe=h.useRef(0),[ge,Ze]=h.useState("users"),[xt,bt]=h.useState("list"),[ve,Ct]=h.useState(()=>dc(null)),[It,Vt]=h.useState(!1),[Qe,be]=h.useState(!1),[it,Ft]=h.useState(!1),Zt=h.useMemo(()=>{const d=Object.keys(ve||{}).filter(N=>!Uh.includes(N));return[...Uh,...d]},[ve]),[lt,hn]=h.useState({status:"",assigned_user_id:"",tag:"",search:"",phone_number_id:""}),et=$.startsWith("/superadmin"),[xe,Et]=h.useState([]),[F,Oe]=h.useState(null),[ye,Ke]=h.useState([]),[Sn,L]=h.useState(""),[Ee,qs]=h.useState("text"),[kn,Wn]=h.useState([]),[hs,bn]=h.useState([]),[Wt,_]=h.useState(""),[V,H]=h.useState(""),[re,Ne]=h.useState(""),[fn,dt]=h.useState(!1),[tt,nt]=h.useState({name:"",color:"#6b7280"}),[fs,aa]=h.useState(!1),[ps,ee]=h.useState(""),{pushToast:se}=dd(),pn=h.useRef(new Map),Hn=h.useRef(new Map),Gs=h.useRef(new Map),ms=h.useRef(new Map),ia=h.useRef(new Map),[Qs,di]=h.useState(null),[gs,qn]=h.useState([]),[hi,vs]=h.useState([]),[lo,ze]=h.useState(0),[fi,Nr]=h.useState([]),[pi,Cn]=h.useState(""),[mi,Ks]=h.useState(null),[Ys,gi]=h.useState([]),[la,vi]=h.useState(null),[Ht,En]=h.useState({name:"",template_id:"",scheduled_for:"",send_now:!0}),[ht,Gn]=h.useState({status:"",tag:"",assigned_user_id:"",verified_only:!1,segment_id:"",segment_name:""}),[Qn,xs]=h.useState([]),[ot,Xs]=h.useState({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),[Js,yt]=h.useState(null),[Zs,ys]=h.useState([]),[en,oo]=h.useState([]),[ft,wr]=h.useState({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),[Ye,qt]=h.useState({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),[js,xi]=h.useState({id:"",name:"",language:"es",category:"",body_preview:"",is_active:!0}),[ke,er]=h.useState([]),Kn=((l==null?void 0:l.brand_name)||(u==null?void 0:u.name)||"Perzivalh").trim(),[_r,jt]=h.useState(!1),[oa,ca]=h.useState(!1),[Ns,ws]=h.useState(null),co=48,uo=80,yi=60,Sr=320,ua=120,ho=5,ji=2*60*1e3,da=h.useRef(new Map);function fo(){const d=da.current;for(;d.size>ho;){const N=d.keys().next().value;d.delete(N)}}function tr(d){const N=da.current,C=N.get(d);return C?Date.now()-C.updatedAt>ji?(N.delete(d),null):C:null}function Ni(d,N){const C=da.current;C.delete(d),C.set(d,{...N,updatedAt:Date.now()}),fo()}const mn=h.useCallback((d,N={})=>{if(typeof window>"u")return;const C=d||"/";if(window.location.pathname===C){A(C);return}N.replace?window.history.replaceState({},"",C):window.history.pushState({},"",C),A(C)},[]),po=h.useMemo(()=>gs.find(d=>d.id===Ht.template_id),[gs,Ht.template_id]),mo=h.useMemo(()=>{const d=[...ye].reverse().find(N=>N.type==="note");return(d==null?void 0:d.text)||""},[ye]),ha=h.useMemo(()=>ye.filter(d=>d.type==="note"),[ye]);h.useEffect(()=>{if(typeof window>"u")return;const d=()=>{A(window.location.pathname||"/")};return window.addEventListener("popstate",d),()=>window.removeEventListener("popstate",d)},[]),h.useEffect(()=>{Er(e||null)},[e]),h.useEffect(()=>{document.body.dataset.theme=w,localStorage.setItem("theme",w)},[w]),h.useEffect(()=>{if(typeof window>"u")return;const d=()=>{K(!window.navigator.onLine)};return d(),window.addEventListener("online",d),window.addEventListener("offline",d),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",d)}},[]),h.useEffect(()=>{de(!1),te(!0),requestAnimationFrame(()=>{Tn()}),F&&Yn(F)},[F==null?void 0:F.id]),h.useEffect(()=>{k==="chats"&&(de(!1),te(!0),requestAnimationFrame(()=>{Tn()}))},[k,F==null?void 0:F.id]),h.useEffect(()=>{var Te;if(!F){Le("");return}const d=ye[ye.length-1],N=(d==null?void 0:d.id)||(d==null?void 0:d.created_at)||(ye.length?`${ye.length}`:null),C=U.current,ae=C.conversationId===F.id&&d&&C.lastId&&N!==C.lastId;if(ie.current&&ye.length>0){ie.current=!1,requestAnimationFrame(()=>{Tn()});return}if(ae?W?Tn():de(!0):W&&de(!1),U.current={conversationId:F.id,lastId:N,length:ye.length},rr(),W&&ye.length>Sr){const J=ye.slice(-Sr);Ke(J),ws(((Te=J[0])==null?void 0:Te.created_at)||null),jt(!0)}},[ye,F==null?void 0:F.id,W]),h.useEffect(()=>{var N;if(!(F!=null&&F.id)||!ye.length)return;const d={messages:ye.slice(-ua),cursor:Ns||((N=ye[0])==null?void 0:N.created_at)||null,hasMore:_r};Ni(F.id,d)},[ye,Ns,_r,F==null?void 0:F.id]),h.useEffect(()=>{k!=="chats"&&te(!1)},[k]),h.useEffect(()=>{if(!e)return;let d=!0;return me("/api/me").then(N=>{d&&i(N.user)}).catch(()=>{d&&(t(""),i(null))}),()=>{d=!1}},[e]),h.useEffect(()=>{if(!a||a.role==="superadmin"){c(null),v([]),Wh();return}let d=!0;return me("/api/branding").then(N=>{d&&c(N.branding||null)}).catch(()=>{d&&c(null)}),me("/api/tenant").then(N=>{d&&m(N.tenant||null)}).catch(()=>{d&&m(null)}),me("/api/channels").then(N=>{d&&v(N.channels||[])}).catch(()=>{d&&v([])}),()=>{d=!1}},[a]),h.useEffect(()=>{Wh()},[l]),h.useEffect(()=>{if(a){if(a.role==="superadmin"){et||mn("/superadmin",{replace:!0});return}et&&mn("/",{replace:!0})}},[a,et,mn]),h.useEffect(()=>{a&&a.role!=="superadmin"&&(go(),nr())},[a]),h.useEffect(()=>{a&&a.role!=="superadmin"&&pt()},[a]),h.useEffect(()=>{!a||k!=="chats"||a.role!=="superadmin"&&At()},[a,k,lt]),h.useEffect(()=>{a&&a.role!=="superadmin"&&(k==="dashboard"&&Ei(),k==="campaigns"&&(Rn(),kr(1,6)))},[a,k]),h.useEffect(()=>{if(!a||k!=="admin")return;const d=(ve==null?void 0:ve[a.role])||ss[a.role],N=Lt(d,"settings","users"),C=Lt(d,"settings","bot"),B=Lt(d,"settings","general"),ae=Lt(d,"settings","templates"),Te=Lt(d,"settings","audit");ge==="users"&&N&&ar(),ge==="bot"&&C&&Ao(),ge==="general"&&B&&On(),ge==="templates"&&ae&&Rn(),ge==="audit"&&Te&&st()},[a,k,ge,ve]),h.useEffect(()=>{if(!a||k!=="admin")return;const d=(ve==null?void 0:ve[a.role])||ss[a.role],C=["general","users","bot","templates","audit","odoo"].filter(B=>Lt(d,"settings",B));if(!C.length){M(result.user.role==="superadmin"?"superadmin":"chats");return}C.includes(ge)||Ze(C[0])},[a,k,ge,ve]),h.useEffect(()=>{if(!e||(a==null?void 0:a.role)==="superadmin")return;const d=Xx(e),N={current:null},C=["/sounds/new-notification-09-352705.wav","/sounds/new-notification-09-352705.mp3"],B=()=>{if(N.current)return N.current;const J=new Audio(C[0]);J.volume=1;let le=0;return J.addEventListener("error",()=>{le+=1,le<C.length&&(J.src=C[le],J.load())}),N.current=J,J},ae=()=>{const J=B();J.play().then(()=>{J.pause(),J.currentTime=0}).catch(()=>{})};window.addEventListener("click",ae,{once:!0}),window.addEventListener("touchstart",ae,{once:!0});const Te=()=>{if(!(typeof window>"u"))try{const J=B();J.currentTime=0,J.play().catch(()=>{})}catch{}};return d.on("conversation:update",({conversation:J})=>{const le=ia.current.get(J.id);ia.current.set(J.id,J.status),J.status==="pending"&&!J.assigned_user_id&&le!=="pending"&&(Te(),se({message:"Nueva conversacin pendiente"})),Et(Ie=>{const Pe=Ie.map(Nt=>Nt.id===J.id?{...Nt,...J}:Nt);return Pe.find(Nt=>Nt.id===J.id)||Pe.push(J),Ar(Pe)}),Oe(Ie=>(Ie==null?void 0:Ie.id)===J.id?{...Ie,...J}:Ie)}),d.on("message:new",({conversation:J,message:le})=>{J.status==="pending"&&!J.assigned_user_id&&Te();const Ie={...J,last_message_text:(le==null?void 0:le.text)||null,last_message_type:(le==null?void 0:le.type)||null,last_message_direction:(le==null?void 0:le.direction)||null,last_message_at:(le==null?void 0:le.created_at)||J.last_message_at};Et(Pe=>{const Nt=Pe.map(Ss=>Ss.id===J.id?{...Ss,...Ie}:Ss);return Nt.find(Ss=>Ss.id===J.id)||Nt.push(Ie),Ar(Nt)}),Oe(Pe=>(Pe==null?void 0:Pe.id)===J.id?{...Pe,...Ie}:Pe),Ke(Pe=>!F||F.id!==J.id?Pe:(Yn(Ie),[...Pe,le]))}),()=>{d.disconnect()}},[e,F]),h.useEffect(()=>{if(!a)return;if(a.role==="superadmin"){k!=="superadmin"&&M("superadmin");return}const d=(ve==null?void 0:ve[a.role])||ss[a.role],N=Lt(d,"modules","chat"),C=Lt(d,"modules","dashboard"),B=Lt(d,"modules","campaigns"),ae=Lt(d,"modules","settings");k==="chats"&&!N&&M(C?"dashboard":B?"campaigns":"admin"),k==="dashboard"&&!C&&M(N?"chats":B?"campaigns":"admin"),k==="campaigns"&&!B&&M(N?"chats":C?"dashboard":"admin"),k==="admin"&&!ae&&M(N?"chats":C?"dashboard":"campaigns")},[a,k,ve]),h.useEffect(()=>{if(!a||a.role!=="admin"||!It||!Qe||it)return;const d=setTimeout(()=>{const N=pe.current;Ft(!0),qe("/api/admin/role-permissions",{permissions:ve}).then(()=>{pe.current===N&&be(!1)}).catch(C=>{ee(ne(C))}).finally(()=>{Ft(!1)})},350);return()=>clearTimeout(d)},[a,ve,Qe,It,it]);async function go(){try{const d=await me("/api/users");bn(d.users||[])}catch(d){ee(ne(d))}}async function pt(){try{const d=await me("/api/role-permissions"),N=dc(d.permissions||null);pe.current=0,Ct(N),be(!1),Vt(!0)}catch(d){ee(ne(d)),Vt(!0)}}async function nr(){try{const d=await me("/api/tags");Wn(d.tags||[])}catch(d){ee(ne(d))}}async function At(){try{const d=Vy(lt),N=await me(`/api/conversations${d}`);Et(Ar(N.conversations||[]))}catch(d){ee(ne(d))}}async function wi(d){var ae,Te;ie.current=!0;const N=tr(d),C=xe.find(J=>J.id===d);aa(!N),Jn(),C&&Oe(C),N&&(Ke(N.messages||[]),ws(N.cursor||null),jt(!!N.hasMore),rr(),requestAnimationFrame(()=>{Tn()}));const B=Q.current+1;Q.current=B;try{const J=`?limit=${uo}&window_hours=${co}`,le=await me(`/api/conversations/${d}${J}`);if(Q.current!==B)return;let Ie=le.conversation;const Pe=le.messages||[];if((Ie==null?void 0:Ie.status)==="pending"&&!Ie.assigned_user_id&&(a!=null&&a.id))try{Ie=(await qe(`/api/conversations/${d}/assign`,{})).conversation,Et(Ss=>Ar(Ss.map(ir=>ir.id===d?{...ir,...Ie}:ir)))}catch(Nt){String(ne(Nt)).includes("already_assigned")&&se({type:"error",message:"Conversacin tomada por otro operador"})}Oe(Ie),Ke(Pe),jt(!!le.has_more),ws(le.next_cursor||((ae=Pe[0])==null?void 0:ae.created_at)||null),Ni(d,{messages:Pe.slice(-ua),cursor:le.next_cursor||((Te=Pe[0])==null?void 0:Te.created_at)||null,hasMore:!!le.has_more}),Yn(Ie)}catch(J){ee(ne(J))}finally{Q.current===B&&aa(!1)}}async function _i(d){var Te;if(!_r||oa)return;const N=Ns;if(!N){jt(!1);return}ca(!0);const C=q.current,B=C?C.scrollHeight:0,ae=C?C.scrollTop:0;try{const J=`?limit=${yi}&before=${encodeURIComponent(N)}`,le=await me(`/api/conversations/${d}${J}`);if((F==null?void 0:F.id)!==d)return;const Ie=le.messages||[];Ie.length?(Ke(Pe=>{const Nt=new Set(Pe.map(ir=>ir.id));return[...Ie.filter(ir=>!Nt.has(ir.id)),...Pe]}),ws(le.next_cursor||((Te=Ie[0])==null?void 0:Te.created_at)||N),jt(!!le.has_more),requestAnimationFrame(()=>{const Pe=q.current;if(!Pe)return;const Nt=Pe.scrollHeight;Pe.scrollTop=Nt-B+ae})):jt(!1)}catch(J){ee(ne(J))}finally{ca(!1)}}async function Si(d){d.preventDefault(),x("");try{const N=await Se("/api/auth/login",{email:g.email,password:g.password});t(N.token),Er(N.token),i(N.user),r(""),localStorage.removeItem("superadmin_token");const C=N.user.role==="superadmin";M(C?"superadmin":"chats"),C?mn("/superadmin",{replace:!0}):et&&mn("/",{replace:!0})}catch{x("Credenciales invalidas")}}function An(){t(""),Er(null),i(null),Et([]),Oe(null),Ke([]),M("chats"),Ue(!1),Ct(dc(null)),Vt(!1),be(!1),Ft(!1),pe.current=0,r(""),localStorage.removeItem("superadmin_token"),mn("/",{replace:!0})}async function ki(d){const N=await Se(`/api/superadmin/tenants/${d}/impersonate`);!n&&e&&(localStorage.setItem("superadmin_token",e),r(e)),t(N.token),Er(N.token),i(N.user),M("chats"),mn("/",{replace:!0})}function fa(){const d=n||(typeof window<"u"?localStorage.getItem("superadmin_token"):"");if(!d){An();return}localStorage.removeItem("superadmin_token"),r(""),t(d),Er(d),i(null),M("chats"),mn("/superadmin",{replace:!0})}function sr(d){Ct(N=>typeof d=="function"?d(N):d),pe.current+=1,be(!0)}function pa(){P(d=>d==="light"?"dark":"light")}function Tn(){const d=q.current;d&&(d.scrollTop=d.scrollHeight,te(!0),de(!1),rr())}function Yn(d){!(d!=null&&d.id)||!(d!=null&&d.last_message_at)||I(N=>{const C={...N,[d.id]:d.last_message_at};return localStorage.setItem("last_read_map",JSON.stringify(C)),C})}function Xn(){const d=q.current;if(!d)return;const C=d.scrollHeight-d.scrollTop-d.clientHeight<24;te(C),C&&de(!1),d.scrollTop<120&&_r&&!oa&&F&&_i(F.id),rr()}function Jn(){Ke([]),ws(null),jt(!1),ca(!1),U.current={conversationId:null,lastId:null,length:0}}function rr(){b.current||(b.current=requestAnimationFrame(()=>{b.current=null,ma()}))}function ma(){const d=q.current;if(!d)return;const N=d.querySelectorAll(".day-pill");if(!N.length){Le("");return}const C=d.scrollTop,B=12;let ae=N[0];for(const J of N)if(J.offsetTop-B<=C)ae=J;else break;const Te=ae.dataset.dayLabel||ae.textContent||"";Le(Te)}function Ln(){Oe(null),Jn()}function vo(d){var N;L(d),(N=T.current)==null||N.focus()}async function xo(d){if(d.preventDefault(),!F||!Sn.trim())return;const N=Sn.trim();L("");try{await Se(`/api/conversations/${F.id}/messages`,{text:N,type:Ee})}catch(C){ee(ne(C))}}async function ga(d){if(d.preventDefault(),!F||!V.trim())return;const N=V.trim();H("");try{const C=await Se(`/api/conversations/${F.id}/messages`,{text:N,type:"note"});C!=null&&C.message&&Ke(B=>[...B,C.message]),C!=null&&C.conversation&&Oe(C.conversation)}catch(C){ee(ne(C))}}async function yo(){if(F)try{const d=await qe(`/api/conversations/${F.id}/assign`);Oe(d.conversation),Et(N=>Ar(N.map(C=>C.id===d.conversation.id?{...C,...d.conversation}:C)))}catch(d){const N=ne(d)||"No se pudo tomar la conversacion";se({type:"error",message:N})}}async function bi(){if(!(!F||!re))try{const d=await qe(`/api/conversations/${F.id}/assign`,{user_id:re});Oe(d.conversation),Et(N=>Ar(N.map(C=>C.id===d.conversation.id?{...C,...d.conversation}:C))),Ne(""),se({message:"Conversacin reasignada"})}catch(d){const N=ne(d)||"No se pudo reasignar";se({type:"error",message:N})}}async function Ci(d){var N;if(F)try{let B=(await qe(`/api/conversations/${F.id}/status`,{status:d})).conversation;if(d==="open"&&((N=B==null?void 0:B.tags)!=null&&N.length)){const ae=B.tags.find(Te=>(Te.name||"").toLowerCase()==="pendiente");if(ae)try{B=(await Se(`/api/conversations/${B.id}/tags`,{add:[],remove:[ae.name]})).conversation||B}catch{B={...B,tags:B.tags.filter(J=>J.name!==ae.name)}}}Oe(B),Et(ae=>ae.map(Te=>Te.id===B.id?{...Te,...B}:Te))}catch(C){ee(ne(C))}}async function va(d){var C;if(!F)return;const N=((C=F.tags)==null?void 0:C.some(B=>B.name===d))||!1;if(N){const B=`${F.id}:${d}`;if(ms.current.has(B))return;const ae=F,Te={...F,tags:(F.tags||[]).filter(le=>le.name!==d)};Oe(Te);const J=setTimeout(async()=>{try{const le=await Se(`/api/conversations/${ae.id}/tags`,{add:[],remove:[d]});(F==null?void 0:F.id)===ae.id&&Oe(le.conversation)}catch(le){(F==null?void 0:F.id)===ae.id&&Oe(ae),se({type:"error",message:ne(le)||"No se pudo eliminar el tag"})}finally{ms.current.delete(B)}},8e3);ms.current.set(B,{timer:J,snapshot:ae}),se({message:"Tag eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const le=ms.current.get(B);le!=null&&le.timer&&clearTimeout(le.timer),le!=null&&le.snapshot?Oe(le.snapshot):Oe(ae),ms.current.delete(B),se({message:"Eliminacin cancelada"})}});return}try{const B=await Se(`/api/conversations/${F.id}/tags`,{add:N?[]:[d],remove:N?[d]:[]});Oe(B.conversation)}catch(B){ee(ne(B))}}async function jo(d){if(d.preventDefault(),!Wt.trim()||!F)return;const N=Wt.trim();_("");try{const C=await Se(`/api/conversations/${F.id}/tags`,{add:[N]});Oe(C.conversation),await nr()}catch(C){ee(ne(C))}}async function No(d){d.preventDefault();const N=tt.name.trim();if(!N){ee("Completa el nombre de la etiqueta");return}try{await Se("/api/tags",{name:N,color:tt.color||null}),nt({name:"",color:"#6b7280"}),await nr(),se({message:"Etiqueta creada"})}catch(C){ee(ne(C))}}async function wo(d,N){if(d)try{await Bn(`/api/tags/${d}`),Oe(C=>C&&{...C,tags:(C.tags||[]).filter(B=>B.name!==N)}),await nr(),se({message:"Etiqueta eliminada"})}catch(C){ee(ne(C))}}async function Ei(){try{const d=await me("/api/dashboard/metrics");di(d)}catch(d){ee(ne(d))}}async function Rn(){try{const d=await me("/api/templates").catch(()=>me("/api/admin/templates"));qn(d.templates||[])}catch(d){ee(ne(d))}}async function kr(d=1,N=6,C=""){try{const B=new URLSearchParams({page:String(d),page_size:String(N)});C&&B.set("q",C);const ae=await me(`/api/admin/campaigns?${B.toString()}`);vs(ae.campaigns||[]),ze(Number.isFinite(ae.total)?ae.total:(ae.campaigns||[]).length)}catch(B){ee(ne(B))}}async function _o(d){Cn(d);try{const N=await me(`/api/admin/campaigns/${d}/messages`);Nr(N.messages||[])}catch(N){ee(ne(N))}}async function So(d){var N;if(d.preventDefault(),!Ht.name.trim()||!Ht.template_id){ee("Completa el nombre y plantilla");return}ht.status&&ht.status,ht.tag&&ht.tag.trim(),ht.assigned_user_id&&ht.assigned_user_id,ht.verified_only,ht.segment_id&&(ht.segment_id,ht.segment_name&&ht.segment_name);try{const C=await Se("/api/admin/campaigns",{name:Ht.name.trim(),template_id:Ht.template_id,audience_filter:ht.segment_id?{segment_id:ht.segment_id}:ht,scheduled_for:Ht.scheduled_for||null});if(Ht.send_now&&!Ht.scheduled_for){const B=(N=C==null?void 0:C.campaign)==null?void 0:N.id;B&&await Se(`/api/admin/campaigns/${B}/send`,{})}En({name:"",template_id:"",scheduled_for:"",send_now:!0}),Gn({status:"",tag:"",assigned_user_id:"",verified_only:!1,segment_id:"",segment_name:""}),await kr(1,6),se({message:"Campaa creada correctamente"})}catch(C){ee(ne(C)),se({type:"error",message:ne(C)||"Error al crear campaa"})}}async function ko(d){try{await Se(`/api/admin/campaigns/${d}/send`,{}),await kr(1,6)}catch(N){ee(ne(N))}}async function bo(){try{await me("/api/templates/sync"),await Rn()}catch(d){ee(ne(d))}}async function ar(){try{const d=await me("/api/admin/users");xs(d.users||[])}catch(d){ee(ne(d))}}async function Co(d){if(d.preventDefault(),!ot.name.trim()||!ot.role){ee("Completa los campos requeridos");return}try{ot.id?(await qe(`/api/admin/users/${ot.id}`,{name:ot.name.trim(),role:ot.role,is_active:ot.is_active,password:ot.password||void 0}),se({message:"Usuario actualizado correctamente"})):(await Se("/api/admin/users",{name:ot.name.trim(),email:ot.email.trim().toLowerCase(),role:ot.role,password:ot.password}),se({message:"Usuario creado correctamente"})),Xs({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),await ar()}catch(N){ee(ne(N)),se({type:"error",message:ne(N)||"Error al guardar usuario"})}}async function Eo(d){if(!d||pn.current.has(d))return;let N=null;try{N=Qn.slice(),xs(B=>B.filter(ae=>ae.id!==d));const C=setTimeout(async()=>{try{await Bn(`/api/admin/users/${d}`),await ar(),se({message:"Usuario eliminado definitivamente"})}catch(B){N?xs(N):await ar(),se({type:"error",message:ne(B)||"No se pudo eliminar el usuario"})}finally{pn.current.delete(d)}},8e3);pn.current.set(d,{timer:C,snapshot:N}),se({message:"Usuario eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const B=pn.current.get(d);B!=null&&B.timer&&clearTimeout(B.timer),B!=null&&B.snapshot?xs(B.snapshot):N?xs(N):await ar(),pn.current.delete(d),se({message:"Eliminacin cancelada"})}})}catch(C){ee(ne(C)),se({type:"error",message:ne(C)||"Error al eliminar usuario"})}}async function Ao(){try{const d=await me("/api/admin/settings");yt(d.settings)}catch(d){ee(ne(d))}}async function To(){if(Js)try{const d=await qe("/api/admin/settings",{bot_enabled:Js.bot_enabled,auto_reply_enabled:Js.auto_reply_enabled});yt(d.settings)}catch(d){ee(ne(d))}}async function On(){try{const[d,N]=await Promise.all([me("/api/admin/branches"),me("/api/admin/services")]);ys(d.branches||[]),oo(N.services||[])}catch(d){ee(ne(d))}}async function Lo(){try{const d=await me("/api/channels");v(d.channels||[])}catch{v([])}}function Ai(d){E({id:d.id,display_name:d.display_name||""})}async function Ti(d){if(d.preventDefault(),!!y.id)try{await qe(`/api/channels/${y.id}`,{display_name:y.display_name.trim()}),E({id:"",display_name:""}),await Lo(),se({message:"Canal actualizado correctamente"})}catch(N){ee(ne(N)),se({type:"error",message:ne(N)||"Error al guardar canal"})}}async function Li(d){const N=ve==null?void 0:ve[d];if(!(!d||Hn.current.has(d)))try{Ct(B=>{const ae={...B};return delete ae[d],ae});const C=setTimeout(async()=>{try{await Bn(`/api/admin/role-permissions/${d}`),se({message:"Rol eliminado definitivamente"})}catch(B){N&&Ct(ae=>({...ae,[d]:N})),se({type:"error",message:ne(B)||"No se pudo eliminar el rol"})}finally{Hn.current.delete(d)}},8e3);Hn.current.set(d,{timer:C,currentPermissions:N}),se({message:"Rol eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const B=Hn.current.get(d);B!=null&&B.timer&&clearTimeout(B.timer),B!=null&&B.currentPermissions&&Ct(ae=>({...ae,[d]:B.currentPermissions})),Hn.current.delete(d),se({message:"Eliminacin cancelada"})}})}catch(C){ee(ne(C)),se({type:"error",message:ne(C)||"Error al eliminar rol"})}}async function Ri(d){if(d.preventDefault(),!ft.code.trim()||!ft.name.trim()){ee("Completa codigo y nombre");return}const N={code:ft.code.trim(),name:ft.name.trim(),address:ft.address.trim(),lat:ft.lat!==""?Number(ft.lat):0,lng:ft.lng!==""?Number(ft.lng):0,hours_text:ft.hours_text.trim(),phone:ft.phone.trim()||null,is_active:ft.is_active};try{ft.id?(await qe(`/api/admin/branches/${ft.id}`,N),se({message:"Sucursal actualizada correctamente"})):(await Se("/api/admin/branches",N),se({message:"Sucursal creada correctamente"})),wr({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),await On()}catch(C){ee(ne(C)),se({type:"error",message:ne(C)||"Error al guardar sucursal"})}}async function Oi(d){try{await Bn(`/api/admin/branches/${d}`),await On(),se({message:"Sucursal eliminada correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await qe(`/api/admin/branches/${d}`,{is_active:!0}),await On(),se({message:"Sucursal restaurada"})}catch(N){se({type:"error",message:ne(N)||"No se pudo restaurar la sucursal"})}}})}catch(N){ee(ne(N)),se({type:"error",message:ne(N)||"Error al eliminar sucursal"})}}async function o(d){if(d.preventDefault(),!Ye.code.trim()||!Ye.name.trim()){ee("Completa codigo y nombre");return}const N={code:Ye.code.trim(),name:Ye.name.trim(),subtitle:Ye.subtitle.trim()||null,description:Ye.description.trim(),price_bob:Ye.price_bob?Number(Ye.price_bob):0,duration_min:Ye.duration_min?Number(Ye.duration_min):null,image_url:Ye.image_url.trim()||null,is_featured:Ye.is_featured,is_active:Ye.is_active};try{Ye.id?(await qe(`/api/admin/services/${Ye.id}`,N),se({message:"Servicio actualizado correctamente"})):(await Se("/api/admin/services",N),se({message:"Servicio creado correctamente"})),qt({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),await On()}catch(C){ee(ne(C)),se({type:"error",message:ne(C)||"Error al guardar servicio"})}}async function j(d){try{await Bn(`/api/admin/services/${d}`),await On(),se({message:"Servicio eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await qe(`/api/admin/services/${d}`,{is_active:!0}),await On(),se({message:"Servicio restaurado"})}catch(N){se({type:"error",message:ne(N)||"No se pudo restaurar el servicio"})}}})}catch(N){ee(ne(N)),se({type:"error",message:ne(N)||"Error al eliminar servicio"})}}async function D(d,N,C){if(d)try{await Se(`/api/admin/services/${d.id}/branches`,{branch_id:N,is_available:C}),await On()}catch(B){ee(ne(B))}}async function G(d,N){d!=null&&d.preventDefault&&d.preventDefault();const C=N||js||{},B=typeof C.name=="string"?C.name.trim():"";if(!B)return ee("Completa el nombre"),null;const ae={name:B,category:C.category||"UTILITY",language:C.language||"es",body_text:C.body_text||C.body_preview||"",header_type:C.header_type||null,header_content:C.header_content||null,footer_text:C.footer_text||null,buttons:C.buttons||C.buttons_json||[]},Te=C.variable_mappings||C.variableMappings||[];try{let J=null;return C.id?(J=await Ul(`/api/templates/${C.id}`,ae),await Ul(`/api/templates/${C.id}/mappings`,{mappings:Te}),se({message:"Borrador actualizado correctamente"})):(J=await Se("/api/templates/draft",{...ae,variable_mappings:Te}),se({message:"Borrador creado correctamente"})),await Rn(),(J==null?void 0:J.template)||null}catch(J){return ee(ne(J)),se({type:"error",message:ne(J)||"Error al guardar plantilla"}),null}}async function X(d){if(d)try{await Se(`/api/templates/${d}/submit`,{}),await Rn(),se({message:"Plantilla enviada a revisin de Meta"})}catch(N){ee(ne(N)),se({type:"error",message:ne(N)||"Error al enviar a Meta"})}}async function he(d){if(d&&!Gs.current.has(d))try{const N=gs.slice();qn(B=>B.filter(ae=>ae.id!==d));const C=setTimeout(async()=>{try{await Bn(`/api/templates/${d}`),await Rn(),se({message:"Plantilla eliminada definitivamente"})}catch(B){qn(N),se({type:"error",message:ne(B)||"No se pudo eliminar la plantilla"})}finally{Gs.current.delete(d)}},8e3);Gs.current.set(d,{timer:C,snapshot:N}),se({message:"Plantilla eliminada. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const B=Gs.current.get(d);B!=null&&B.timer&&clearTimeout(B.timer),B!=null&&B.snapshot?qn(B.snapshot):qn(N),Gs.current.delete(d),se({message:"Eliminacin cancelada"})}})}catch(N){ee(ne(N)),se({type:"error",message:ne(N)||"Error al eliminar plantilla"})}}async function st(){try{const d=await me("/api/admin/audit?limit=200");er(d.logs||[])}catch(d){ee(ne(d))}}const Tt={open:0,pending:0,closed:0};((Qs==null?void 0:Qs.status_counts)||[]).forEach(d=>{Tt[d.status]=d._count.status});const tn=et?"Acceso al control plane":"Acceso a bandeja multiusuario";if(!e||!a)return s.jsx("div",{className:"login-shell",children:s.jsxs("div",{className:"login-card",children:[s.jsx("div",{className:"login-title",children:"Perzivalh"}),s.jsx("div",{className:"login-subtitle",children:tn}),O?s.jsx(Ua,{variant:"offline",title:"Sin conexin",message:"No tienes internet en este momento. Conctate y vuelve a intentar iniciar sesin.",actionLabel:"Reintentar",onAction:()=>window.location.reload()}):null,s.jsxs("form",{className:"login-form",onSubmit:Si,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:g.email,onChange:d=>f(N=>({...N,email:d.target.value})),required:!0})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Password"}),s.jsx("input",{type:"password",value:g.password,onChange:d=>f(N=>({...N,password:d.target.value})),required:!0})]}),p?s.jsx("div",{className:"error",children:p}):null,s.jsx("button",{className:"primary",type:"submit",children:"Entrar"})]})]})});if((a==null?void 0:a.role)==="superadmin"&&et)return s.jsx("main",{className:"superadmin-page",children:s.jsx(zh,{route:$,onNavigate:mn,onImpersonateTenant:ki,onLogout:An})});const Zn=(ve==null?void 0:ve[a.role])||ss[a.role],br=Lt(Zn,"modules","chat"),Ro=Lt(Zn,"modules","dashboard"),es=Lt(Zn,"modules","campaigns"),Pn=Lt(Zn,"modules","settings"),Mn=Uy(a,["admin"]),_s=Lt(Zn,"modules","chat","write"),nn=[],hd={open:"Bot activo",pending:"Pendiente",assigned:"Tomada"},Nm=F?F.display_name||F.phone_e164||F.wa_id:"Selecciona un chat",wm=(F==null?void 0:F.phone_e164)||(F==null?void 0:F.wa_id)||"",_m=F?hd[F.status]||"Sin estado":"",Sm=[{id:"chats",label:"Chats",icon:Fy,enabled:br},{id:"dashboard",label:"Dashboard",icon:Wy,enabled:Ro},{id:"campaigns",label:"Campaas",icon:Hy,enabled:es},{id:"admin",label:"Configuraciones",icon:qy,enabled:Pn}],Oo=[];let fd="";ye.forEach(d=>{const N=d.created_at,C=N?new Date(N):null,B=C&&!Number.isNaN(C.getTime())?`${C.getFullYear()}-${C.getMonth()}-${C.getDate()}`:"";if(B&&B!==fd){const ae=Vh(N);Oo.push(s.jsx("div",{className:"day-pill","data-day-label":ae,children:ae},`day-${B}`)),fd=B}Oo.push(s.jsxs("div",{className:`message ${d.direction} ${d.type==="note"?"note":""}`,"data-day-key":B,"data-day-label":B?Vh(N):"",children:[s.jsx("div",{className:"message-text",children:d.text||`[${d.type}]`}),s.jsx("div",{className:"message-meta",children:uc(d.created_at)})]},d.id))});const km=!!n&&a.role!=="superadmin";return s.jsxs("div",{className:`app-shell ${k==="admin"?"admin-shell":""}`,children:[s.jsx(ey,{navItems:Sm,view:k,onSetView:M,theme:w,onToggleTheme:pa,user:a,logoUrl:(l==null?void 0:l.logo_url)||"",brandName:Kn,isProfileOpen:Re,onToggleProfile:()=>Ue(d=>!d),onLogout:An,onReturnToSuperadmin:fa,showReturnToSuperadmin:km,getInitial:Fh,SunIcon:Gy,MoonIcon:Qy}),k==="admin"?s.jsx(ky,{settingsSection:ge,setSettingsSection:Ze,settingsTab:xt,setSettingsTab:bt,rolePermissions:ve,setRolePermissions:sr,defaultRolePermissions:ss,currentRole:a.role,isAdmin:Mn,adminUsers:Qn,userForm:ot,setUserForm:Xs,roleOptions:Zt,handleUserSubmit:Co,handleUserDelete:Eo,settings:Js,setSettings:yt,handleSaveSettings:To,planName:(u==null?void 0:u.plan)||"",branches:Zs,services:en,branchForm:ft,setBranchForm:wr,handleBranchSubmit:Ri,handleBranchDisable:Oi,serviceForm:Ye,setServiceForm:qt,handleServiceSubmit:o,handleServiceDisable:j,handleServiceBranchToggle:D,tenantChannels:S,channelForm:y,setChannelForm:E,handleChannelSelect:Ai,handleChannelSubmit:Ti,handleRoleDelete:Li,templates:gs,templateForm:js,setTemplateForm:xi,handleTemplateSubmit:G,handleTemplateSubmitToMeta:X,handleTemplateDelete:he,handleSyncTemplates:bo,auditLogs:ke,formatDate:uc,useShellLayout:!0,pageError:ps,isOffline:O,onDismissError:()=>ee(""),brandName:Kn}):k==="superadmin"?s.jsx("main",{className:"content content-page",children:s.jsx(zh,{onImpersonateTenant:ki,onLogout:An})}):s.jsxs("main",{className:`content ${k==="chats"?"content-chats":"content-page"}`,children:[k==="chats"&&s.jsx(ty,{activeConversation:F,conversations:xe,channels:S,brandName:Kn,lastReadMap:R,filters:lt,showFilters:oe,users:hs,tags:kn,statusOptions:$h,statusLabels:hd,formatListTime:$y,messageBlocks:Oo,messageDraft:Sn,messageMode:Ee,quickActions:nn,tagInput:Wt,setTagInput:_,noteInput:V,notesList:ha,latestNote:mo,loadingConversation:fs,isInfoOpen:_e,hasUnread:Z,scrollDayLabel:ce,activeName:Nm,activePhone:wm,activeStatusLabel:_m,canManageStatus:_s,currentUser:a,messageInputRef:T,chatBodyRef:q,setShowFilters:ue,setFilters:hn,loadConversation:wi,handleBackToList:Ln,setIsInfoOpen:Ce,handleChatScroll:Xn,handleAssignSelf:yo,handleStatusChange:Ci,handleToggleTag:va,handleAddTag:jo,setNoteInput:H,handleAddNote:ga,reassignUserId:re,setReassignUserId:Ne,handleReassignConversation:bi,handleOpenTagManager:()=>dt(!0),handleCloseTagManager:()=>dt(!1),showTagManager:fn,tagManagerForm:tt,setTagManagerForm:nt,handleCreateTag:No,handleDeleteTag:wo,handleQuickAction:vo,handleSendMessage:xo,setMessageMode:qs,setMessageDraft:L,scrollChatToBottom:Tn,getInitial:Fh,PlusIcon:Yy,SearchIcon:Ky,VideoIcon:Xy,PhoneIcon:Jy,InfoIcon:Zy,SendIcon:ej}),k==="dashboard"&&s.jsx(ry,{statusCounts:Tt,metrics:Qs,onRefresh:Ei,brandName:Kn}),k==="campaigns"&&s.jsx(ly,{campaignForm:Ht,setCampaignForm:En,campaignFilter:ht,setCampaignFilter:Gn,templates:gs,campaigns:hi,selectedCampaignId:pi,campaignMessages:fi,users:hs,tags:kn,channels:S,selectedTemplate:po,statusOptions:$h,onCreateCampaign:So,onLoadCampaigns:kr,onLoadCampaignMessages:_o,onSendCampaign:ko,formatDate:uc,brandName:Kn}),O?s.jsx(Ua,{variant:"offline",title:"Sin conexin",message:"No podemos actualizar la informacin en tiempo real. Te mostramos lo ltimo cargado.",actionLabel:"Reintentar",onAction:()=>window.location.reload()}):ps?s.jsx(Ua,{variant:"error",title:"Ocurri un problema",message:ps,dismissLabel:"Cerrar",onDismiss:()=>ee("")}):null]})]})}const nj=rm(document.getElementById("root"));nj.render(s.jsx(Jx,{children:s.jsx(tj,{})}));
