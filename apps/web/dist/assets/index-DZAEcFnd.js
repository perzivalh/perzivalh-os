(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var $u={exports:{}},Ka={},Uu={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ar=Symbol.for("react.element"),Pp=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),Dp=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),Ip=Symbol.for("react.provider"),Bp=Symbol.for("react.context"),zp=Symbol.for("react.forward_ref"),$p=Symbol.for("react.suspense"),Up=Symbol.for("react.memo"),Vp=Symbol.for("react.lazy"),dc=Symbol.iterator;function Fp(e){return e===null||typeof e!="object"?null:(e=dc&&e[dc]||e["@@iterator"],typeof e=="function"?e:null)}var Vu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fu=Object.assign,Wu={};function Ls(e,t,n){this.props=e,this.context=t,this.refs=Wu,this.updater=n||Vu}Ls.prototype.isReactComponent={};Ls.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ls.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hu(){}Hu.prototype=Ls.prototype;function Xl(e,t,n){this.props=e,this.context=t,this.refs=Wu,this.updater=n||Vu}var Jl=Xl.prototype=new Hu;Jl.constructor=Xl;Fu(Jl,Ls.prototype);Jl.isPureReactComponent=!0;var hc=Array.isArray,qu=Object.prototype.hasOwnProperty,Zl={current:null},Qu={key:!0,ref:!0,__self:!0,__source:!0};function Gu(e,t,n){var r,a={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)qu.call(t,r)&&!Qu.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),h=0;h<o;h++)c[h]=arguments[h+2];a.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Ar,type:e,key:i,ref:l,props:a,_owner:Zl.current}}function Wp(e,t){return{$$typeof:Ar,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ar}function Hp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fc=/\/+/g;function vi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Hp(""+e.key):t.toString(36)}function ca(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ar:case Pp:l=!0}}if(l)return l=e,a=a(l),e=r===""?"."+vi(l,0):r,hc(a)?(n="",e!=null&&(n=e.replace(fc,"$&/")+"/"),ca(a,t,n,"",function(h){return h})):a!=null&&(eo(a)&&(a=Wp(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(fc,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=r===""?".":r+":",hc(e))for(var o=0;o<e.length;o++){i=e[o];var c=r+vi(i,o);l+=ca(i,t,n,c,a)}else if(c=Fp(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=r+vi(i,o++),l+=ca(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Fr(e,t,n){if(e==null)return e;var r=[],a=0;return ca(e,r,"","",function(i){return t.call(n,i,a++)}),r}function qp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},ua={transition:null},Qp={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:ua,ReactCurrentOwner:Zl};function Yu(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Fr,forEach:function(e,t,n){Fr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Fr(e,function(){t++}),t},toArray:function(e){return Fr(e,function(t){return t})||[]},only:function(e){if(!eo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Ls;oe.Fragment=Op;oe.Profiler=Mp;oe.PureComponent=Xl;oe.StrictMode=Dp;oe.Suspense=$p;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qp;oe.act=Yu;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Fu({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Zl.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)qu.call(t,c)&&!Qu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var h=0;h<c;h++)o[h]=arguments[h+2];r.children=o}return{$$typeof:Ar,type:e.type,key:a,ref:i,props:r,_owner:l}};oe.createContext=function(e){return e={$$typeof:Bp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ip,_context:e},e.Consumer=e};oe.createElement=Gu;oe.createFactory=function(e){var t=Gu.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:zp,render:e}};oe.isValidElement=eo;oe.lazy=function(e){return{$$typeof:Vp,_payload:{_status:-1,_result:e},_init:qp}};oe.memo=function(e,t){return{$$typeof:Up,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=ua.transition;ua.transition={};try{e()}finally{ua.transition=t}};oe.unstable_act=Yu;oe.useCallback=function(e,t){return ot.current.useCallback(e,t)};oe.useContext=function(e){return ot.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};oe.useEffect=function(e,t){return ot.current.useEffect(e,t)};oe.useId=function(){return ot.current.useId()};oe.useImperativeHandle=function(e,t,n){return ot.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return ot.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return ot.current.useReducer(e,t,n)};oe.useRef=function(e){return ot.current.useRef(e)};oe.useState=function(e){return ot.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return ot.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return ot.current.useTransition()};oe.version="18.3.1";Uu.exports=oe;var v=Uu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp=v,Yp=Symbol.for("react.element"),Kp=Symbol.for("react.fragment"),Xp=Object.prototype.hasOwnProperty,Jp=Gp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zp={key:!0,ref:!0,__self:!0,__source:!0};function Ku(e,t,n){var r,a={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Xp.call(t,r)&&!Zp.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Yp,type:e,key:i,ref:l,props:a,_owner:Jp.current}}Ka.Fragment=Kp;Ka.jsx=Ku;Ka.jsxs=Ku;$u.exports=Ka;var s=$u.exports,Xu={exports:{}},wt={},Ju={exports:{}},Zu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,W){var S=z.length;z.push(W);e:for(;0<S;){var H=S-1>>>1,G=z[H];if(0<a(G,W))z[H]=W,z[S]=G,S=H;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var W=z[0],S=z.pop();if(S!==W){z[0]=S;e:for(var H=0,G=z.length,Z=G>>>1;H<Z;){var L=2*(H+1)-1,X=z[L],Q=L+1,V=z[Q];if(0>a(X,S))Q<G&&0>a(V,X)?(z[H]=V,z[Q]=S,H=Q):(z[H]=X,z[L]=S,H=L);else if(Q<G&&0>a(V,S))z[H]=V,z[Q]=S,H=Q;else break e}}return W}function a(z,W){var S=z.sortIndex-W.sortIndex;return S!==0?S:z.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],h=[],x=1,p=null,y=3,A=!1,m=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(z){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=z)r(h),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(h)}}function k(z){if(T=!1,g(z),!m)if(n(c)!==null)m=!0,se(P);else{var W=n(h);W!==null&&Ee(k,W.startTime-z)}}function P(z,W){m=!1,T&&(T=!1,u(C),C=-1),A=!0;var S=y;try{for(g(W),p=n(c);p!==null&&(!(p.expirationTime>W)||z&&!Y());){var H=p.callback;if(typeof H=="function"){p.callback=null,y=p.priorityLevel;var G=H(p.expirationTime<=W);W=e.unstable_now(),typeof G=="function"?p.callback=G:p===n(c)&&r(c),g(W)}else r(c);p=n(c)}if(p!==null)var Z=!0;else{var L=n(h);L!==null&&Ee(k,L.startTime-W),Z=!1}return Z}finally{p=null,y=S,A=!1}}var j=!1,O=null,C=-1,B=5,U=-1;function Y(){return!(e.unstable_now()-U<B)}function le(){if(O!==null){var z=e.unstable_now();U=z;var W=!0;try{W=O(!0,z)}finally{W?fe():(j=!1,O=null)}}else j=!1}var fe;if(typeof f=="function")fe=function(){f(le)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,we=ye.port2;ye.port1.onmessage=le,fe=function(){we.postMessage(null)}}else fe=function(){w(le,0)};function se(z){O=z,j||(j=!0,fe())}function Ee(z,W){C=w(function(){z(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){m||A||(m=!0,se(P))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var S=y;y=W;try{return z()}finally{y=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var S=y;y=z;try{return W()}finally{y=S}},e.unstable_scheduleCallback=function(z,W,S){var H=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?H+S:H):S=H,z){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=S+G,z={id:x++,callback:W,priorityLevel:z,startTime:S,expirationTime:G,sortIndex:-1},S>H?(z.sortIndex=S,t(h,z),n(c)===null&&z===n(h)&&(T?(u(C),C=-1):T=!0,Ee(k,S-H))):(z.sortIndex=G,t(c,z),m||A||(m=!0,se(P))),z},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(z){var W=y;return function(){var S=y;y=W;try{return z.apply(this,arguments)}finally{y=S}}}})(Zu);Ju.exports=Zu;var em=Ju.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm=v,Nt=em;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ed=new Set,pr={};function Jn(e,t){_s(e,t),_s(e+"Capture",t)}function _s(e,t){for(pr[e]=t,e=0;e<t.length;e++)ed.add(t[e])}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xi=Object.prototype.hasOwnProperty,nm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pc={},mc={};function sm(e){return Xi.call(mc,e)?!0:Xi.call(pc,e)?!1:nm.test(e)?mc[e]=!0:(pc[e]=!0,!1)}function rm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function am(e,t,n,r){if(t===null||typeof t>"u"||rm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,n,r,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var to=/[\-:]([a-z])/g;function no(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(to,no);Xe[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(to,no);Xe[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(to,no);Xe[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function so(e,t,n,r){var a=Xe.hasOwnProperty(t)?Xe[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(am(t,n,a,r)&&(n=null),r||a===null?sm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var dn=tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wr=Symbol.for("react.element"),as=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),ro=Symbol.for("react.strict_mode"),Ji=Symbol.for("react.profiler"),td=Symbol.for("react.provider"),nd=Symbol.for("react.context"),ao=Symbol.for("react.forward_ref"),Zi=Symbol.for("react.suspense"),el=Symbol.for("react.suspense_list"),io=Symbol.for("react.memo"),gn=Symbol.for("react.lazy"),sd=Symbol.for("react.offscreen"),gc=Symbol.iterator;function Hs(e){return e===null||typeof e!="object"?null:(e=gc&&e[gc]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,yi;function er(e){if(yi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yi=t&&t[1]||""}return`
`+yi+e}var xi=!1;function ji(e,t){if(!e||xi)return"";xi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{xi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?er(e):""}function im(e){switch(e.tag){case 5:return er(e.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 2:case 15:return e=ji(e.type,!1),e;case 11:return e=ji(e.type.render,!1),e;case 1:return e=ji(e.type,!0),e;default:return""}}function tl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case is:return"Fragment";case as:return"Portal";case Ji:return"Profiler";case ro:return"StrictMode";case Zi:return"Suspense";case el:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nd:return(e.displayName||"Context")+".Consumer";case td:return(e._context.displayName||"Context")+".Provider";case ao:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case io:return t=e.displayName||null,t!==null?t:tl(e.type)||"Memo";case gn:t=e._payload,e=e._init;try{return tl(e(t))}catch{}}return null}function lm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tl(t);case 8:return t===ro?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function An(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function om(e){var t=rd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hr(e){e._valueTracker||(e._valueTracker=om(e))}function ad(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Sa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nl(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function vc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=An(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function id(e,t){t=t.checked,t!=null&&so(e,"checked",t,!1)}function sl(e,t){id(e,t);var n=An(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rl(e,t.type,n):t.hasOwnProperty("defaultValue")&&rl(e,t.type,An(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function rl(e,t,n){(t!=="number"||Sa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tr=Array.isArray;function vs(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+An(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function al(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(tr(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:An(n)}}function ld(e,t){var n=An(t.value),r=An(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function jc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function od(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function il(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?od(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qr,cd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cm=["Webkit","ms","Moz","O"];Object.keys(ar).forEach(function(e){cm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ar[t]=ar[e]})});function ud(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ar.hasOwnProperty(e)&&ar[e]?(""+t).trim():t+"px"}function dd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=ud(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var um=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ll(e,t){if(t){if(um[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function ol(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cl=null;function lo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ul=null,ys=null,xs=null;function Nc(e){if(e=Or(e)){if(typeof ul!="function")throw Error(M(280));var t=e.stateNode;t&&(t=ti(t),ul(e.stateNode,e.type,t))}}function hd(e){ys?xs?xs.push(e):xs=[e]:ys=e}function fd(){if(ys){var e=ys,t=xs;if(xs=ys=null,Nc(e),t)for(e=0;e<t.length;e++)Nc(t[e])}}function pd(e,t){return e(t)}function md(){}var Ni=!1;function gd(e,t,n){if(Ni)return e(t,n);Ni=!0;try{return pd(e,t,n)}finally{Ni=!1,(ys!==null||xs!==null)&&(md(),fd())}}function gr(e,t){var n=e.stateNode;if(n===null)return null;var r=ti(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var dl=!1;if(ln)try{var qs={};Object.defineProperty(qs,"passive",{get:function(){dl=!0}}),window.addEventListener("test",qs,qs),window.removeEventListener("test",qs,qs)}catch{dl=!1}function dm(e,t,n,r,a,i,l,o,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(x){this.onError(x)}}var ir=!1,Ea=null,Ca=!1,hl=null,hm={onError:function(e){ir=!0,Ea=e}};function fm(e,t,n,r,a,i,l,o,c){ir=!1,Ea=null,dm.apply(hm,arguments)}function pm(e,t,n,r,a,i,l,o,c){if(fm.apply(this,arguments),ir){if(ir){var h=Ea;ir=!1,Ea=null}else throw Error(M(198));Ca||(Ca=!0,hl=h)}}function Zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wc(e){if(Zn(e)!==e)throw Error(M(188))}function mm(e){var t=e.alternate;if(!t){if(t=Zn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return wc(a),e;if(i===r)return wc(a),t;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function yd(e){return e=mm(e),e!==null?xd(e):null}function xd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xd(e);if(t!==null)return t;e=e.sibling}return null}var jd=Nt.unstable_scheduleCallback,_c=Nt.unstable_cancelCallback,gm=Nt.unstable_shouldYield,vm=Nt.unstable_requestPaint,Re=Nt.unstable_now,ym=Nt.unstable_getCurrentPriorityLevel,oo=Nt.unstable_ImmediatePriority,Nd=Nt.unstable_UserBlockingPriority,ba=Nt.unstable_NormalPriority,xm=Nt.unstable_LowPriority,wd=Nt.unstable_IdlePriority,Xa=null,Qt=null;function jm(e){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Xa,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:_m,Nm=Math.log,wm=Math.LN2;function _m(e){return e>>>=0,e===0?32:31-(Nm(e)/wm|0)|0}var Qr=64,Gr=4194304;function nr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ta(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?r=nr(o):(i&=l,i!==0&&(r=nr(i)))}else l=n&~a,l!==0?r=nr(l):i!==0&&(r=nr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-It(t),a=1<<n,r|=e[n],t&=~a;return r}function km(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-It(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&r)&&(a[l]=km(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function fl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _d(){var e=Qr;return Qr<<=1,!(Qr&4194240)&&(Qr=64),e}function wi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=n}function Em(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-It(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function co(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-It(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ge=0;function kd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sd,uo,Ed,Cd,bd,pl=!1,Yr=[],wn=null,_n=null,kn=null,vr=new Map,yr=new Map,yn=[],Cm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kc(e,t){switch(e){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":vr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(t.pointerId)}}function Qs(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Or(t),t!==null&&uo(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function bm(e,t,n,r,a){switch(t){case"focusin":return wn=Qs(wn,e,t,n,r,a),!0;case"dragenter":return _n=Qs(_n,e,t,n,r,a),!0;case"mouseover":return kn=Qs(kn,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return vr.set(i,Qs(vr.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,yr.set(i,Qs(yr.get(i)||null,e,t,n,r,a)),!0}return!1}function Td(e){var t=Vn(e.target);if(t!==null){var n=Zn(t);if(n!==null){if(t=n.tag,t===13){if(t=vd(n),t!==null){e.blockedOn=t,bd(e.priority,function(){Ed(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function da(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ml(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);cl=r,n.target.dispatchEvent(r),cl=null}else return t=Or(n),t!==null&&uo(t),e.blockedOn=n,!1;t.shift()}return!0}function Sc(e,t,n){da(e)&&n.delete(t)}function Tm(){pl=!1,wn!==null&&da(wn)&&(wn=null),_n!==null&&da(_n)&&(_n=null),kn!==null&&da(kn)&&(kn=null),vr.forEach(Sc),yr.forEach(Sc)}function Gs(e,t){e.blockedOn===t&&(e.blockedOn=null,pl||(pl=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,Tm)))}function xr(e){function t(a){return Gs(a,e)}if(0<Yr.length){Gs(Yr[0],e);for(var n=1;n<Yr.length;n++){var r=Yr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wn!==null&&Gs(wn,e),_n!==null&&Gs(_n,e),kn!==null&&Gs(kn,e),vr.forEach(t),yr.forEach(t),n=0;n<yn.length;n++)r=yn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<yn.length&&(n=yn[0],n.blockedOn===null);)Td(n),n.blockedOn===null&&yn.shift()}var js=dn.ReactCurrentBatchConfig,La=!0;function Lm(e,t,n,r){var a=ge,i=js.transition;js.transition=null;try{ge=1,ho(e,t,n,r)}finally{ge=a,js.transition=i}}function Am(e,t,n,r){var a=ge,i=js.transition;js.transition=null;try{ge=4,ho(e,t,n,r)}finally{ge=a,js.transition=i}}function ho(e,t,n,r){if(La){var a=ml(e,t,n,r);if(a===null)Ri(e,t,r,Aa,n),kc(e,r);else if(bm(a,e,t,n,r))r.stopPropagation();else if(kc(e,r),t&4&&-1<Cm.indexOf(e)){for(;a!==null;){var i=Or(a);if(i!==null&&Sd(i),i=ml(e,t,n,r),i===null&&Ri(e,t,r,Aa,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Ri(e,t,r,null,n)}}var Aa=null;function ml(e,t,n,r){if(Aa=null,e=lo(r),e=Vn(e),e!==null)if(t=Zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Aa=e,null}function Ld(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ym()){case oo:return 1;case Nd:return 4;case ba:case xm:return 16;case wd:return 536870912;default:return 16}default:return 16}}var jn=null,fo=null,ha=null;function Ad(){if(ha)return ha;var e,t=fo,n=t.length,r,a="value"in jn?jn.value:jn.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===a[i-r];r++);return ha=a.slice(e,1<r?1-r:void 0)}function fa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kr(){return!0}function Ec(){return!1}function _t(e){function t(n,r,a,i,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Kr:Ec,this.isPropagationStopped=Ec,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kr)},persist:function(){},isPersistent:Kr}),t}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=_t(As),Pr=Le({},As,{view:0,detail:0}),Rm=_t(Pr),_i,ki,Ys,Ja=Le({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ys&&(Ys&&e.type==="mousemove"?(_i=e.screenX-Ys.screenX,ki=e.screenY-Ys.screenY):ki=_i=0,Ys=e),_i)},movementY:function(e){return"movementY"in e?e.movementY:ki}}),Cc=_t(Ja),Pm=Le({},Ja,{dataTransfer:0}),Om=_t(Pm),Dm=Le({},Pr,{relatedTarget:0}),Si=_t(Dm),Mm=Le({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),Im=_t(Mm),Bm=Le({},As,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zm=_t(Bm),$m=Le({},As,{data:0}),bc=_t($m),Um={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fm[e])?!!t[e]:!1}function mo(){return Wm}var Hm=Le({},Pr,{key:function(e){if(e.key){var t=Um[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(e){return e.type==="keypress"?fa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qm=_t(Hm),Qm=Le({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tc=_t(Qm),Gm=Le({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),Ym=_t(Gm),Km=Le({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xm=_t(Km),Jm=Le({},Ja,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zm=_t(Jm),eg=[9,13,27,32],go=ln&&"CompositionEvent"in window,lr=null;ln&&"documentMode"in document&&(lr=document.documentMode);var tg=ln&&"TextEvent"in window&&!lr,Rd=ln&&(!go||lr&&8<lr&&11>=lr),Lc=" ",Ac=!1;function Pd(e,t){switch(e){case"keyup":return eg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Od(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ls=!1;function ng(e,t){switch(e){case"compositionend":return Od(t);case"keypress":return t.which!==32?null:(Ac=!0,Lc);case"textInput":return e=t.data,e===Lc&&Ac?null:e;default:return null}}function sg(e,t){if(ls)return e==="compositionend"||!go&&Pd(e,t)?(e=Ad(),ha=fo=jn=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rd&&t.locale!=="ko"?null:t.data;default:return null}}var rg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rg[e.type]:t==="textarea"}function Dd(e,t,n,r){hd(r),t=Ra(t,"onChange"),0<t.length&&(n=new po("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var or=null,jr=null;function ag(e){qd(e,0)}function Za(e){var t=us(e);if(ad(t))return e}function ig(e,t){if(e==="change")return t}var Md=!1;if(ln){var Ei;if(ln){var Ci="oninput"in document;if(!Ci){var Pc=document.createElement("div");Pc.setAttribute("oninput","return;"),Ci=typeof Pc.oninput=="function"}Ei=Ci}else Ei=!1;Md=Ei&&(!document.documentMode||9<document.documentMode)}function Oc(){or&&(or.detachEvent("onpropertychange",Id),jr=or=null)}function Id(e){if(e.propertyName==="value"&&Za(jr)){var t=[];Dd(t,jr,e,lo(e)),gd(ag,t)}}function lg(e,t,n){e==="focusin"?(Oc(),or=t,jr=n,or.attachEvent("onpropertychange",Id)):e==="focusout"&&Oc()}function og(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Za(jr)}function cg(e,t){if(e==="click")return Za(t)}function ug(e,t){if(e==="input"||e==="change")return Za(t)}function dg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:dg;function Nr(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Xi.call(t,a)||!zt(e[a],t[a]))return!1}return!0}function Dc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mc(e,t){var n=Dc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dc(n)}}function Bd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zd(){for(var e=window,t=Sa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Sa(e.document)}return t}function vo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hg(e){var t=zd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bd(n.ownerDocument.documentElement,n)){if(r!==null&&vo(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=Mc(n,i);var l=Mc(n,r);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fg=ln&&"documentMode"in document&&11>=document.documentMode,os=null,gl=null,cr=null,vl=!1;function Ic(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vl||os==null||os!==Sa(r)||(r=os,"selectionStart"in r&&vo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cr&&Nr(cr,r)||(cr=r,r=Ra(gl,"onSelect"),0<r.length&&(t=new po("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=os)))}function Xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cs={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionend:Xr("Transition","TransitionEnd")},bi={},$d={};ln&&($d=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function ei(e){if(bi[e])return bi[e];if(!cs[e])return e;var t=cs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $d)return bi[e]=t[n];return e}var Ud=ei("animationend"),Vd=ei("animationiteration"),Fd=ei("animationstart"),Wd=ei("transitionend"),Hd=new Map,Bc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pn(e,t){Hd.set(e,t),Jn(t,[e])}for(var Ti=0;Ti<Bc.length;Ti++){var Li=Bc[Ti],pg=Li.toLowerCase(),mg=Li[0].toUpperCase()+Li.slice(1);Pn(pg,"on"+mg)}Pn(Ud,"onAnimationEnd");Pn(Vd,"onAnimationIteration");Pn(Fd,"onAnimationStart");Pn("dblclick","onDoubleClick");Pn("focusin","onFocus");Pn("focusout","onBlur");Pn(Wd,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gg=new Set("cancel close invalid load scroll toggle".split(" ").concat(sr));function zc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,pm(r,t,void 0,e),e.currentTarget=null}function qd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;zc(a,o,h),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,h=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;zc(a,o,h),i=c}}}if(Ca)throw e=hl,Ca=!1,hl=null,e}function ke(e,t){var n=t[wl];n===void 0&&(n=t[wl]=new Set);var r=e+"__bubble";n.has(r)||(Qd(t,e,2,!1),n.add(r))}function Ai(e,t,n){var r=0;t&&(r|=4),Qd(n,e,r,t)}var Jr="_reactListening"+Math.random().toString(36).slice(2);function wr(e){if(!e[Jr]){e[Jr]=!0,ed.forEach(function(n){n!=="selectionchange"&&(gg.has(n)||Ai(n,!1,e),Ai(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jr]||(t[Jr]=!0,Ai("selectionchange",!1,t))}}function Qd(e,t,n,r){switch(Ld(t)){case 1:var a=Lm;break;case 4:a=Am;break;default:a=ho}n=a.bind(null,t,n,e),a=void 0,!dl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ri(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Vn(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}gd(function(){var h=i,x=lo(n),p=[];e:{var y=Hd.get(e);if(y!==void 0){var A=po,m=e;switch(e){case"keypress":if(fa(n)===0)break e;case"keydown":case"keyup":A=qm;break;case"focusin":m="focus",A=Si;break;case"focusout":m="blur",A=Si;break;case"beforeblur":case"afterblur":A=Si;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Ym;break;case Ud:case Vd:case Fd:A=Im;break;case Wd:A=Xm;break;case"scroll":A=Rm;break;case"wheel":A=Zm;break;case"copy":case"cut":case"paste":A=zm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Tc}var T=(t&4)!==0,w=!T&&e==="scroll",u=T?y!==null?y+"Capture":null:y;T=[];for(var f=h,g;f!==null;){g=f;var k=g.stateNode;if(g.tag===5&&k!==null&&(g=k,u!==null&&(k=gr(f,u),k!=null&&T.push(_r(f,k,g)))),w)break;f=f.return}0<T.length&&(y=new A(y,m,null,n,x),p.push({event:y,listeners:T}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",y&&n!==cl&&(m=n.relatedTarget||n.fromElement)&&(Vn(m)||m[on]))break e;if((A||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,A?(m=n.relatedTarget||n.toElement,A=h,m=m?Vn(m):null,m!==null&&(w=Zn(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(A=null,m=h),A!==m)){if(T=Cc,k="onMouseLeave",u="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(T=Tc,k="onPointerLeave",u="onPointerEnter",f="pointer"),w=A==null?y:us(A),g=m==null?y:us(m),y=new T(k,f+"leave",A,n,x),y.target=w,y.relatedTarget=g,k=null,Vn(x)===h&&(T=new T(u,f+"enter",m,n,x),T.target=g,T.relatedTarget=w,k=T),w=k,A&&m)t:{for(T=A,u=m,f=0,g=T;g;g=ss(g))f++;for(g=0,k=u;k;k=ss(k))g++;for(;0<f-g;)T=ss(T),f--;for(;0<g-f;)u=ss(u),g--;for(;f--;){if(T===u||u!==null&&T===u.alternate)break t;T=ss(T),u=ss(u)}T=null}else T=null;A!==null&&$c(p,y,A,T,!1),m!==null&&w!==null&&$c(p,w,m,T,!0)}}e:{if(y=h?us(h):window,A=y.nodeName&&y.nodeName.toLowerCase(),A==="select"||A==="input"&&y.type==="file")var P=ig;else if(Rc(y))if(Md)P=ug;else{P=og;var j=lg}else(A=y.nodeName)&&A.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(P=cg);if(P&&(P=P(e,h))){Dd(p,P,n,x);break e}j&&j(e,y,h),e==="focusout"&&(j=y._wrapperState)&&j.controlled&&y.type==="number"&&rl(y,"number",y.value)}switch(j=h?us(h):window,e){case"focusin":(Rc(j)||j.contentEditable==="true")&&(os=j,gl=h,cr=null);break;case"focusout":cr=gl=os=null;break;case"mousedown":vl=!0;break;case"contextmenu":case"mouseup":case"dragend":vl=!1,Ic(p,n,x);break;case"selectionchange":if(fg)break;case"keydown":case"keyup":Ic(p,n,x)}var O;if(go)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ls?Pd(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Rd&&n.locale!=="ko"&&(ls||C!=="onCompositionStart"?C==="onCompositionEnd"&&ls&&(O=Ad()):(jn=x,fo="value"in jn?jn.value:jn.textContent,ls=!0)),j=Ra(h,C),0<j.length&&(C=new bc(C,e,null,n,x),p.push({event:C,listeners:j}),O?C.data=O:(O=Od(n),O!==null&&(C.data=O)))),(O=tg?ng(e,n):sg(e,n))&&(h=Ra(h,"onBeforeInput"),0<h.length&&(x=new bc("onBeforeInput","beforeinput",null,n,x),p.push({event:x,listeners:h}),x.data=O))}qd(p,t)})}function _r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ra(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=gr(e,n),i!=null&&r.unshift(_r(e,i,a)),i=gr(e,t),i!=null&&r.push(_r(e,i,a))),e=e.return}return r}function ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $c(e,t,n,r,a){for(var i=t._reactName,l=[];n!==null&&n!==r;){var o=n,c=o.alternate,h=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&h!==null&&(o=h,a?(c=gr(n,i),c!=null&&l.unshift(_r(n,c,o))):a||(c=gr(n,i),c!=null&&l.push(_r(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var vg=/\r\n?/g,yg=/\u0000|\uFFFD/g;function Uc(e){return(typeof e=="string"?e:""+e).replace(vg,`
`).replace(yg,"")}function Zr(e,t,n){if(t=Uc(t),Uc(e)!==t&&n)throw Error(M(425))}function Pa(){}var yl=null,xl=null;function jl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nl=typeof setTimeout=="function"?setTimeout:void 0,xg=typeof clearTimeout=="function"?clearTimeout:void 0,Vc=typeof Promise=="function"?Promise:void 0,jg=typeof queueMicrotask=="function"?queueMicrotask:typeof Vc<"u"?function(e){return Vc.resolve(null).then(e).catch(Ng)}:Nl;function Ng(e){setTimeout(function(){throw e})}function Pi(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),xr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);xr(t)}function Sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Rs=Math.random().toString(36).slice(2),qt="__reactFiber$"+Rs,kr="__reactProps$"+Rs,on="__reactContainer$"+Rs,wl="__reactEvents$"+Rs,wg="__reactListeners$"+Rs,_g="__reactHandles$"+Rs;function Vn(e){var t=e[qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[on]||n[qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fc(e);e!==null;){if(n=e[qt])return n;e=Fc(e)}return t}e=n,n=e.parentNode}return null}function Or(e){return e=e[qt]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function us(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function ti(e){return e[kr]||null}var _l=[],ds=-1;function On(e){return{current:e}}function Se(e){0>ds||(e.current=_l[ds],_l[ds]=null,ds--)}function Ne(e,t){ds++,_l[ds]=e.current,e.current=t}var Rn={},st=On(Rn),pt=On(!1),Qn=Rn;function ks(e,t){var n=e.type.contextTypes;if(!n)return Rn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mt(e){return e=e.childContextTypes,e!=null}function Oa(){Se(pt),Se(st)}function Wc(e,t,n){if(st.current!==Rn)throw Error(M(168));Ne(st,t),Ne(pt,n)}function Gd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(M(108,lm(e)||"Unknown",a));return Le({},n,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rn,Qn=st.current,Ne(st,e),Ne(pt,pt.current),!0}function Hc(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=Gd(e,t,Qn),r.__reactInternalMemoizedMergedChildContext=e,Se(pt),Se(st),Ne(st,e)):Se(pt),Ne(pt,n)}var tn=null,ni=!1,Oi=!1;function Yd(e){tn===null?tn=[e]:tn.push(e)}function kg(e){ni=!0,Yd(e)}function Dn(){if(!Oi&&tn!==null){Oi=!0;var e=0,t=ge;try{var n=tn;for(ge=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}tn=null,ni=!1}catch(a){throw tn!==null&&(tn=tn.slice(e+1)),jd(oo,Dn),a}finally{ge=t,Oi=!1}}return null}var hs=[],fs=0,Ma=null,Ia=0,St=[],Et=0,Gn=null,sn=1,rn="";function zn(e,t){hs[fs++]=Ia,hs[fs++]=Ma,Ma=e,Ia=t}function Kd(e,t,n){St[Et++]=sn,St[Et++]=rn,St[Et++]=Gn,Gn=e;var r=sn;e=rn;var a=32-It(r)-1;r&=~(1<<a),n+=1;var i=32-It(t)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,sn=1<<32-It(t)+a|n<<a|r,rn=i+e}else sn=1<<i|n<<a|r,rn=e}function yo(e){e.return!==null&&(zn(e,1),Kd(e,1,0))}function xo(e){for(;e===Ma;)Ma=hs[--fs],hs[fs]=null,Ia=hs[--fs],hs[fs]=null;for(;e===Gn;)Gn=St[--Et],St[Et]=null,rn=St[--Et],St[Et]=null,sn=St[--Et],St[Et]=null}var jt=null,xt=null,Ce=!1,Mt=null;function Xd(e,t){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,xt=Sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Gn!==null?{id:sn,overflow:rn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,xt=null,!0):!1;default:return!1}}function kl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sl(e){if(Ce){var t=xt;if(t){var n=t;if(!qc(e,t)){if(kl(e))throw Error(M(418));t=Sn(n.nextSibling);var r=jt;t&&qc(e,t)?Xd(r,n):(e.flags=e.flags&-4097|2,Ce=!1,jt=e)}}else{if(kl(e))throw Error(M(418));e.flags=e.flags&-4097|2,Ce=!1,jt=e}}}function Qc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function ea(e){if(e!==jt)return!1;if(!Ce)return Qc(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jl(e.type,e.memoizedProps)),t&&(t=xt)){if(kl(e))throw Jd(),Error(M(418));for(;t;)Xd(e,t),t=Sn(t.nextSibling)}if(Qc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=Sn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=jt?Sn(e.stateNode.nextSibling):null;return!0}function Jd(){for(var e=xt;e;)e=Sn(e.nextSibling)}function Ss(){xt=jt=null,Ce=!1}function jo(e){Mt===null?Mt=[e]:Mt.push(e)}var Sg=dn.ReactCurrentBatchConfig;function Ks(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function ta(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gc(e){var t=e._init;return t(e._payload)}function Zd(e){function t(u,f){if(e){var g=u.deletions;g===null?(u.deletions=[f],u.flags|=16):g.push(f)}}function n(u,f){if(!e)return null;for(;f!==null;)t(u,f),f=f.sibling;return null}function r(u,f){for(u=new Map;f!==null;)f.key!==null?u.set(f.key,f):u.set(f.index,f),f=f.sibling;return u}function a(u,f){return u=Tn(u,f),u.index=0,u.sibling=null,u}function i(u,f,g){return u.index=g,e?(g=u.alternate,g!==null?(g=g.index,g<f?(u.flags|=2,f):g):(u.flags|=2,f)):(u.flags|=1048576,f)}function l(u){return e&&u.alternate===null&&(u.flags|=2),u}function o(u,f,g,k){return f===null||f.tag!==6?(f=Ui(g,u.mode,k),f.return=u,f):(f=a(f,g),f.return=u,f)}function c(u,f,g,k){var P=g.type;return P===is?x(u,f,g.props.children,k,g.key):f!==null&&(f.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gn&&Gc(P)===f.type)?(k=a(f,g.props),k.ref=Ks(u,f,g),k.return=u,k):(k=ja(g.type,g.key,g.props,null,u.mode,k),k.ref=Ks(u,f,g),k.return=u,k)}function h(u,f,g,k){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Vi(g,u.mode,k),f.return=u,f):(f=a(f,g.children||[]),f.return=u,f)}function x(u,f,g,k,P){return f===null||f.tag!==7?(f=qn(g,u.mode,k,P),f.return=u,f):(f=a(f,g),f.return=u,f)}function p(u,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Ui(""+f,u.mode,g),f.return=u,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Wr:return g=ja(f.type,f.key,f.props,null,u.mode,g),g.ref=Ks(u,null,f),g.return=u,g;case as:return f=Vi(f,u.mode,g),f.return=u,f;case gn:var k=f._init;return p(u,k(f._payload),g)}if(tr(f)||Hs(f))return f=qn(f,u.mode,g,null),f.return=u,f;ta(u,f)}return null}function y(u,f,g,k){var P=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return P!==null?null:o(u,f,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Wr:return g.key===P?c(u,f,g,k):null;case as:return g.key===P?h(u,f,g,k):null;case gn:return P=g._init,y(u,f,P(g._payload),k)}if(tr(g)||Hs(g))return P!==null?null:x(u,f,g,k,null);ta(u,g)}return null}function A(u,f,g,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return u=u.get(g)||null,o(f,u,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Wr:return u=u.get(k.key===null?g:k.key)||null,c(f,u,k,P);case as:return u=u.get(k.key===null?g:k.key)||null,h(f,u,k,P);case gn:var j=k._init;return A(u,f,g,j(k._payload),P)}if(tr(k)||Hs(k))return u=u.get(g)||null,x(f,u,k,P,null);ta(f,k)}return null}function m(u,f,g,k){for(var P=null,j=null,O=f,C=f=0,B=null;O!==null&&C<g.length;C++){O.index>C?(B=O,O=null):B=O.sibling;var U=y(u,O,g[C],k);if(U===null){O===null&&(O=B);break}e&&O&&U.alternate===null&&t(u,O),f=i(U,f,C),j===null?P=U:j.sibling=U,j=U,O=B}if(C===g.length)return n(u,O),Ce&&zn(u,C),P;if(O===null){for(;C<g.length;C++)O=p(u,g[C],k),O!==null&&(f=i(O,f,C),j===null?P=O:j.sibling=O,j=O);return Ce&&zn(u,C),P}for(O=r(u,O);C<g.length;C++)B=A(O,u,C,g[C],k),B!==null&&(e&&B.alternate!==null&&O.delete(B.key===null?C:B.key),f=i(B,f,C),j===null?P=B:j.sibling=B,j=B);return e&&O.forEach(function(Y){return t(u,Y)}),Ce&&zn(u,C),P}function T(u,f,g,k){var P=Hs(g);if(typeof P!="function")throw Error(M(150));if(g=P.call(g),g==null)throw Error(M(151));for(var j=P=null,O=f,C=f=0,B=null,U=g.next();O!==null&&!U.done;C++,U=g.next()){O.index>C?(B=O,O=null):B=O.sibling;var Y=y(u,O,U.value,k);if(Y===null){O===null&&(O=B);break}e&&O&&Y.alternate===null&&t(u,O),f=i(Y,f,C),j===null?P=Y:j.sibling=Y,j=Y,O=B}if(U.done)return n(u,O),Ce&&zn(u,C),P;if(O===null){for(;!U.done;C++,U=g.next())U=p(u,U.value,k),U!==null&&(f=i(U,f,C),j===null?P=U:j.sibling=U,j=U);return Ce&&zn(u,C),P}for(O=r(u,O);!U.done;C++,U=g.next())U=A(O,u,C,U.value,k),U!==null&&(e&&U.alternate!==null&&O.delete(U.key===null?C:U.key),f=i(U,f,C),j===null?P=U:j.sibling=U,j=U);return e&&O.forEach(function(le){return t(u,le)}),Ce&&zn(u,C),P}function w(u,f,g,k){if(typeof g=="object"&&g!==null&&g.type===is&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Wr:e:{for(var P=g.key,j=f;j!==null;){if(j.key===P){if(P=g.type,P===is){if(j.tag===7){n(u,j.sibling),f=a(j,g.props.children),f.return=u,u=f;break e}}else if(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gn&&Gc(P)===j.type){n(u,j.sibling),f=a(j,g.props),f.ref=Ks(u,j,g),f.return=u,u=f;break e}n(u,j);break}else t(u,j);j=j.sibling}g.type===is?(f=qn(g.props.children,u.mode,k,g.key),f.return=u,u=f):(k=ja(g.type,g.key,g.props,null,u.mode,k),k.ref=Ks(u,f,g),k.return=u,u=k)}return l(u);case as:e:{for(j=g.key;f!==null;){if(f.key===j)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(u,f.sibling),f=a(f,g.children||[]),f.return=u,u=f;break e}else{n(u,f);break}else t(u,f);f=f.sibling}f=Vi(g,u.mode,k),f.return=u,u=f}return l(u);case gn:return j=g._init,w(u,f,j(g._payload),k)}if(tr(g))return m(u,f,g,k);if(Hs(g))return T(u,f,g,k);ta(u,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(u,f.sibling),f=a(f,g),f.return=u,u=f):(n(u,f),f=Ui(g,u.mode,k),f.return=u,u=f),l(u)):n(u,f)}return w}var Es=Zd(!0),eh=Zd(!1),Ba=On(null),za=null,ps=null,No=null;function wo(){No=ps=za=null}function _o(e){var t=Ba.current;Se(Ba),e._currentValue=t}function El(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){za=e,No=ps=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function Lt(e){var t=e._currentValue;if(No!==e)if(e={context:e,memoizedValue:t,next:null},ps===null){if(za===null)throw Error(M(308));ps=e,za.dependencies={lanes:0,firstContext:e}}else ps=ps.next=e;return t}var Fn=null;function ko(e){Fn===null?Fn=[e]:Fn.push(e)}function th(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,ko(t)):(n.next=a.next,a.next=n),t.interleaved=n,cn(e,r)}function cn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vn=!1;function So(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function an(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function En(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,cn(e,n)}return a=r.interleaved,a===null?(t.next=t,ko(r)):(t.next=a.next,a.next=t),r.interleaved=t,cn(e,n)}function pa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,co(e,n)}}function Yc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $a(e,t,n,r){var a=e.updateQueue;vn=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,h=c.next;c.next=null,l===null?i=h:l.next=h,l=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==l&&(o===null?x.firstBaseUpdate=h:o.next=h,x.lastBaseUpdate=c))}if(i!==null){var p=a.baseState;l=0,x=h=c=null,o=i;do{var y=o.lane,A=o.eventTime;if((r&y)===y){x!==null&&(x=x.next={eventTime:A,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,T=o;switch(y=t,A=n,T.tag){case 1:if(m=T.payload,typeof m=="function"){p=m.call(A,p,y);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,y=typeof m=="function"?m.call(A,p,y):m,y==null)break e;p=Le({},p,y);break e;case 2:vn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[o]:y.push(o))}else A={eventTime:A,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(h=x=A,c=p):x=x.next=A,l|=y;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;y=o,o=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(x===null&&(c=p),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Kn|=l,e.lanes=l,e.memoizedState=p}}function Kc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(M(191,a));a.call(r)}}}var Dr={},Gt=On(Dr),Sr=On(Dr),Er=On(Dr);function Wn(e){if(e===Dr)throw Error(M(174));return e}function Eo(e,t){switch(Ne(Er,t),Ne(Sr,e),Ne(Gt,Dr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:il(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=il(t,e)}Se(Gt),Ne(Gt,t)}function Cs(){Se(Gt),Se(Sr),Se(Er)}function sh(e){Wn(Er.current);var t=Wn(Gt.current),n=il(t,e.type);t!==n&&(Ne(Sr,e),Ne(Gt,n))}function Co(e){Sr.current===e&&(Se(Gt),Se(Sr))}var be=On(0);function Ua(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Di=[];function bo(){for(var e=0;e<Di.length;e++)Di[e]._workInProgressVersionPrimary=null;Di.length=0}var ma=dn.ReactCurrentDispatcher,Mi=dn.ReactCurrentBatchConfig,Yn=0,Te=null,ze=null,Qe=null,Va=!1,ur=!1,Cr=0,Eg=0;function Ze(){throw Error(M(321))}function To(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zt(e[n],t[n]))return!1;return!0}function Lo(e,t,n,r,a,i){if(Yn=i,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ma.current=e===null||e.memoizedState===null?Lg:Ag,e=n(r,a),ur){i=0;do{if(ur=!1,Cr=0,25<=i)throw Error(M(301));i+=1,Qe=ze=null,t.updateQueue=null,ma.current=Rg,e=n(r,a)}while(ur)}if(ma.current=Fa,t=ze!==null&&ze.next!==null,Yn=0,Qe=ze=Te=null,Va=!1,t)throw Error(M(300));return e}function Ao(){var e=Cr!==0;return Cr=0,e}function Ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Te.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function At(){if(ze===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Qe===null?Te.memoizedState:Qe.next;if(t!==null)Qe=t,ze=e;else{if(e===null)throw Error(M(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Qe===null?Te.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function br(e,t){return typeof t=="function"?t(e):t}function Ii(e){var t=At(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=ze,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=l=null,c=null,h=i;do{var x=h.lane;if((Yn&x)===x)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var p={lane:x,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(o=c=p,l=r):c=c.next=p,Te.lanes|=x,Kn|=x}h=h.next}while(h!==null&&h!==i);c===null?l=r:c.next=o,zt(r,t.memoizedState)||(ft=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Te.lanes|=i,Kn|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bi(e){var t=At(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);zt(i,t.memoizedState)||(ft=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function rh(){}function ah(e,t){var n=Te,r=At(),a=t(),i=!zt(r.memoizedState,a);if(i&&(r.memoizedState=a,ft=!0),r=r.queue,Ro(oh.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Tr(9,lh.bind(null,n,r,a,t),void 0,null),Ge===null)throw Error(M(349));Yn&30||ih(n,t,a)}return a}function ih(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lh(e,t,n,r){t.value=n,t.getSnapshot=r,ch(t)&&uh(e)}function oh(e,t,n){return n(function(){ch(t)&&uh(e)})}function ch(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zt(e,n)}catch{return!0}}function uh(e){var t=cn(e,1);t!==null&&Bt(t,e,1,-1)}function Xc(e){var t=Ht();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:e},t.queue=e,e=e.dispatch=Tg.bind(null,Te,e),[t.memoizedState,e]}function Tr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function dh(){return At().memoizedState}function ga(e,t,n,r){var a=Ht();Te.flags|=e,a.memoizedState=Tr(1|t,n,void 0,r===void 0?null:r)}function si(e,t,n,r){var a=At();r=r===void 0?null:r;var i=void 0;if(ze!==null){var l=ze.memoizedState;if(i=l.destroy,r!==null&&To(r,l.deps)){a.memoizedState=Tr(t,n,i,r);return}}Te.flags|=e,a.memoizedState=Tr(1|t,n,i,r)}function Jc(e,t){return ga(8390656,8,e,t)}function Ro(e,t){return si(2048,8,e,t)}function hh(e,t){return si(4,2,e,t)}function fh(e,t){return si(4,4,e,t)}function ph(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mh(e,t,n){return n=n!=null?n.concat([e]):null,si(4,4,ph.bind(null,t,e),n)}function Po(){}function gh(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&To(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vh(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&To(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function yh(e,t,n){return Yn&21?(zt(n,t)||(n=_d(),Te.lanes|=n,Kn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n)}function Cg(e,t){var n=ge;ge=n!==0&&4>n?n:4,e(!0);var r=Mi.transition;Mi.transition={};try{e(!1),t()}finally{ge=n,Mi.transition=r}}function xh(){return At().memoizedState}function bg(e,t,n){var r=bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jh(e))Nh(t,n);else if(n=th(e,t,n,r),n!==null){var a=lt();Bt(n,e,r,a),wh(n,t,r)}}function Tg(e,t,n){var r=bn(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jh(e))Nh(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,zt(o,l)){var c=t.interleaved;c===null?(a.next=a,ko(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=th(e,t,a,r),n!==null&&(a=lt(),Bt(n,e,r,a),wh(n,t,r))}}function jh(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function Nh(e,t){ur=Va=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,co(e,n)}}var Fa={readContext:Lt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},Lg={readContext:Lt,useCallback:function(e,t){return Ht().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:Jc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ga(4194308,4,ph.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){return ga(4,2,e,t)},useMemo:function(e,t){var n=Ht();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ht();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=bg.bind(null,Te,e),[r.memoizedState,e]},useRef:function(e){var t=Ht();return e={current:e},t.memoizedState=e},useState:Xc,useDebugValue:Po,useDeferredValue:function(e){return Ht().memoizedState=e},useTransition:function(){var e=Xc(!1),t=e[0];return e=Cg.bind(null,e[1]),Ht().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Te,a=Ht();if(Ce){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),Ge===null)throw Error(M(349));Yn&30||ih(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Jc(oh.bind(null,r,i,e),[e]),r.flags|=2048,Tr(9,lh.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Ht(),t=Ge.identifierPrefix;if(Ce){var n=rn,r=sn;n=(r&~(1<<32-It(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Cr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Eg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ag={readContext:Lt,useCallback:gh,useContext:Lt,useEffect:Ro,useImperativeHandle:mh,useInsertionEffect:hh,useLayoutEffect:fh,useMemo:vh,useReducer:Ii,useRef:dh,useState:function(){return Ii(br)},useDebugValue:Po,useDeferredValue:function(e){var t=At();return yh(t,ze.memoizedState,e)},useTransition:function(){var e=Ii(br)[0],t=At().memoizedState;return[e,t]},useMutableSource:rh,useSyncExternalStore:ah,useId:xh,unstable_isNewReconciler:!1},Rg={readContext:Lt,useCallback:gh,useContext:Lt,useEffect:Ro,useImperativeHandle:mh,useInsertionEffect:hh,useLayoutEffect:fh,useMemo:vh,useReducer:Bi,useRef:dh,useState:function(){return Bi(br)},useDebugValue:Po,useDeferredValue:function(e){var t=At();return ze===null?t.memoizedState=e:yh(t,ze.memoizedState,e)},useTransition:function(){var e=Bi(br)[0],t=At().memoizedState;return[e,t]},useMutableSource:rh,useSyncExternalStore:ah,useId:xh,unstable_isNewReconciler:!1};function Pt(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Cl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ri={isMounted:function(e){return(e=e._reactInternals)?Zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=lt(),a=bn(e),i=an(r,a);i.payload=t,n!=null&&(i.callback=n),t=En(e,i,a),t!==null&&(Bt(t,e,a,r),pa(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=lt(),a=bn(e),i=an(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=En(e,i,a),t!==null&&(Bt(t,e,a,r),pa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lt(),r=bn(e),a=an(n,r);a.tag=2,t!=null&&(a.callback=t),t=En(e,a,r),t!==null&&(Bt(t,e,r,n),pa(t,e,r))}};function Zc(e,t,n,r,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Nr(n,r)||!Nr(a,i):!0}function _h(e,t,n){var r=!1,a=Rn,i=t.contextType;return typeof i=="object"&&i!==null?i=Lt(i):(a=mt(t)?Qn:st.current,r=t.contextTypes,i=(r=r!=null)?ks(e,a):Rn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ri,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function eu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ri.enqueueReplaceState(t,t.state,null)}function bl(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},So(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Lt(i):(i=mt(t)?Qn:st.current,a.context=ks(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Cl(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ri.enqueueReplaceState(a,a.state,null),$a(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function bs(e,t){try{var n="",r=t;do n+=im(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function zi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Tl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Pg=typeof WeakMap=="function"?WeakMap:Map;function kh(e,t,n){n=an(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ha||(Ha=!0,zl=r),Tl(e,t)},n}function Sh(e,t,n){n=an(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Tl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Tl(e,t),typeof r!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function tu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Pg;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Qg.bind(null,e,t,n),t.then(e,e))}function nu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function su(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=an(-1,1),t.tag=2,En(n,t,1))),n.lanes|=1),e)}var Og=dn.ReactCurrentOwner,ft=!1;function it(e,t,n,r){t.child=e===null?eh(t,null,n,r):Es(t,e.child,n,r)}function ru(e,t,n,r,a){n=n.render;var i=t.ref;return Ns(t,a),r=Lo(e,t,n,r,i,a),n=Ao(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,un(e,t,a)):(Ce&&n&&yo(t),t.flags|=1,it(e,t,r,a),t.child)}function au(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!Uo(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Eh(e,t,i,r,a)):(e=ja(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nr,n(l,r)&&e.ref===t.ref)return un(e,t,a)}return t.flags|=1,e=Tn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Eh(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Nr(i,r)&&e.ref===t.ref)if(ft=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,un(e,t,a)}return Ll(e,t,n,r,a)}function Ch(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(gs,yt),yt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(gs,yt),yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(gs,yt),yt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ne(gs,yt),yt|=r;return it(e,t,a,n),t.child}function bh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ll(e,t,n,r,a){var i=mt(n)?Qn:st.current;return i=ks(t,i),Ns(t,a),n=Lo(e,t,n,r,i,a),r=Ao(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,un(e,t,a)):(Ce&&r&&yo(t),t.flags|=1,it(e,t,n,a),t.child)}function iu(e,t,n,r,a){if(mt(n)){var i=!0;Da(t)}else i=!1;if(Ns(t,a),t.stateNode===null)va(e,t),_h(t,n,r),bl(t,n,r,a),r=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=Lt(h):(h=mt(n)?Qn:st.current,h=ks(t,h));var x=n.getDerivedStateFromProps,p=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==h)&&eu(t,l,r,h),vn=!1;var y=t.memoizedState;l.state=y,$a(t,r,l,a),c=t.memoizedState,o!==r||y!==c||pt.current||vn?(typeof x=="function"&&(Cl(t,n,x,r),c=t.memoizedState),(o=vn||Zc(t,n,o,r,y,c,h))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=h,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,nh(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Pt(t.type,o),l.props=h,p=t.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Lt(c):(c=mt(n)?Qn:st.current,c=ks(t,c));var A=n.getDerivedStateFromProps;(x=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||y!==c)&&eu(t,l,r,c),vn=!1,y=t.memoizedState,l.state=y,$a(t,r,l,a);var m=t.memoizedState;o!==p||y!==m||pt.current||vn?(typeof A=="function"&&(Cl(t,n,A,r),m=t.memoizedState),(h=vn||Zc(t,n,h,r,y,m,c)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),l.props=r,l.state=m,l.context=c,r=h):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Al(e,t,n,r,i,a)}function Al(e,t,n,r,a,i){bh(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return a&&Hc(t,n,!1),un(e,t,i);r=t.stateNode,Og.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Es(t,e.child,null,i),t.child=Es(t,null,o,i)):it(e,t,o,i),t.memoizedState=r.state,a&&Hc(t,n,!0),t.child}function Th(e){var t=e.stateNode;t.pendingContext?Wc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wc(e,t.context,!1),Eo(e,t.containerInfo)}function lu(e,t,n,r,a){return Ss(),jo(a),t.flags|=256,it(e,t,n,r),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0};function Pl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lh(e,t,n){var r=t.pendingProps,a=be.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ne(be,a&1),e===null)return Sl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=li(l,r,0,null),e=qn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Pl(n),t.memoizedState=Rl,e):Oo(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Dg(e,t,l,r,o,a,n);if(i){i=r.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Tn(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Tn(o,i):(i=qn(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?Pl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Rl,r}return i=e.child,e=i.sibling,r=Tn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Oo(e,t){return t=li({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function na(e,t,n,r){return r!==null&&jo(r),Es(t,e.child,null,n),e=Oo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dg(e,t,n,r,a,i,l){if(n)return t.flags&256?(t.flags&=-257,r=zi(Error(M(422))),na(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=li({mode:"visible",children:r.children},a,0,null),i=qn(i,a,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Es(t,e.child,null,l),t.child.memoizedState=Pl(l),t.memoizedState=Rl,i);if(!(t.mode&1))return na(e,t,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(M(419)),r=zi(i,r,void 0),na(e,t,l,r)}if(o=(l&e.childLanes)!==0,ft||o){if(r=Ge,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,cn(e,a),Bt(r,e,a,-1))}return $o(),r=zi(Error(M(421))),na(e,t,l,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Gg.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,xt=Sn(a.nextSibling),jt=t,Ce=!0,Mt=null,e!==null&&(St[Et++]=sn,St[Et++]=rn,St[Et++]=Gn,sn=e.id,rn=e.overflow,Gn=t),t=Oo(t,r.children),t.flags|=4096,t)}function ou(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),El(e.return,t,n)}function $i(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Ah(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(it(e,t,r.children,n),r=be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ou(e,n,t);else if(e.tag===19)ou(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(be,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ua(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),$i(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ua(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}$i(t,!0,n,null,i);break;case"together":$i(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function va(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function un(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=Tn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Tn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Mg(e,t,n){switch(t.tag){case 3:Th(t),Ss();break;case 5:sh(t);break;case 1:mt(t.type)&&Da(t);break;case 4:Eo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ne(Ba,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ne(be,be.current&1),t.flags|=128,null):n&t.child.childLanes?Lh(e,t,n):(Ne(be,be.current&1),e=un(e,t,n),e!==null?e.sibling:null);Ne(be,be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ah(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ne(be,be.current),r)break;return null;case 22:case 23:return t.lanes=0,Ch(e,t,n)}return un(e,t,n)}var Rh,Ol,Ph,Oh;Rh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ol=function(){};Ph=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Wn(Gt.current);var i=null;switch(n){case"input":a=nl(e,a),r=nl(e,r),i=[];break;case"select":a=Le({},a,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":a=al(e,a),r=al(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Pa)}ll(n,r);var l;n=null;for(h in a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var o=a[h];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(pr.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(o=a!=null?a[h]:void 0,r.hasOwnProperty(h)&&c!==o&&(c!=null||o!=null))if(h==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(pr.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ke("scroll",e),i||o===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};Oh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xs(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ig(e,t,n){var r=t.pendingProps;switch(xo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return mt(t.type)&&Oa(),et(t),null;case 3:return r=t.stateNode,Cs(),Se(pt),Se(st),bo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ea(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mt!==null&&(Vl(Mt),Mt=null))),Ol(e,t),et(t),null;case 5:Co(t);var a=Wn(Er.current);if(n=t.type,e!==null&&t.stateNode!=null)Ph(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return et(t),null}if(e=Wn(Gt.current),ea(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[qt]=t,r[kr]=i,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<sr.length;a++)ke(sr[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":vc(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":xc(r,i),ke("invalid",r)}ll(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Zr(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Zr(r.textContent,o,e),a=["children",""+o]):pr.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ke("scroll",r)}switch(n){case"input":Hr(r),yc(r,i,!0);break;case"textarea":Hr(r),jc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pa)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=od(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[qt]=t,e[kr]=r,Rh(e,t,!1,!1),t.stateNode=e;e:{switch(l=ol(n,r),n){case"dialog":ke("cancel",e),ke("close",e),a=r;break;case"iframe":case"object":case"embed":ke("load",e),a=r;break;case"video":case"audio":for(a=0;a<sr.length;a++)ke(sr[a],e);a=r;break;case"source":ke("error",e),a=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),a=r;break;case"details":ke("toggle",e),a=r;break;case"input":vc(e,r),a=nl(e,r),ke("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Le({},r,{value:void 0}),ke("invalid",e);break;case"textarea":xc(e,r),a=al(e,r),ke("invalid",e);break;default:a=r}ll(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?dd(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cd(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&mr(e,c):typeof c=="number"&&mr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",e):c!=null&&so(e,i,c,l))}switch(n){case"input":Hr(e),yc(e,r,!1);break;case"textarea":Hr(e),jc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+An(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?vs(e,!!r.multiple,i,!1):r.defaultValue!=null&&vs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Pa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)Oh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=Wn(Er.current),Wn(Gt.current),ea(t)){if(r=t.stateNode,n=t.memoizedProps,r[qt]=t,(i=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:Zr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zr(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=t,t.stateNode=r}return et(t),null;case 13:if(Se(be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&xt!==null&&t.mode&1&&!(t.flags&128))Jd(),Ss(),t.flags|=98560,i=!1;else if(i=ea(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(M(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[qt]=t}else Ss(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;et(t),i=!1}else Mt!==null&&(Vl(Mt),Mt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?$e===0&&($e=3):$o())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return Cs(),Ol(e,t),e===null&&wr(t.stateNode.containerInfo),et(t),null;case 10:return _o(t.type._context),et(t),null;case 17:return mt(t.type)&&Oa(),et(t),null;case 19:if(Se(be),i=t.memoizedState,i===null)return et(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)Xs(i,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ua(e),l!==null){for(t.flags|=128,Xs(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(be,be.current&1|2),t.child}e=e.sibling}i.tail!==null&&Re()>Ts&&(t.flags|=128,r=!0,Xs(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ua(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ce)return et(t),null}else 2*Re()-i.renderingStartTime>Ts&&n!==1073741824&&(t.flags|=128,r=!0,Xs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Re(),t.sibling=null,n=be.current,Ne(be,r?n&1|2:n&1),t):(et(t),null);case 22:case 23:return zo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yt&1073741824&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function Bg(e,t){switch(xo(t),t.tag){case 1:return mt(t.type)&&Oa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cs(),Se(pt),Se(st),bo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Co(t),null;case 13:if(Se(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(be),null;case 4:return Cs(),null;case 10:return _o(t.type._context),null;case 22:case 23:return zo(),null;case 24:return null;default:return null}}var sa=!1,nt=!1,zg=typeof WeakSet=="function"?WeakSet:Set,F=null;function ms(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Dl(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var cu=!1;function $g(e,t){if(yl=La,e=zd(),vo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,h=0,x=0,p=e,y=null;t:for(;;){for(var A;p!==n||a!==0&&p.nodeType!==3||(o=l+a),p!==i||r!==0&&p.nodeType!==3||(c=l+r),p.nodeType===3&&(l+=p.nodeValue.length),(A=p.firstChild)!==null;)y=p,p=A;for(;;){if(p===e)break t;if(y===n&&++h===a&&(o=l),y===i&&++x===r&&(c=l),(A=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=A}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xl={focusedElem:e,selectionRange:n},La=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,w=m.memoizedState,u=t.stateNode,f=u.getSnapshotBeforeUpdate(t.elementType===t.type?T:Pt(t.type,T),w);u.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(k){Ae(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return m=cu,cu=!1,m}function dr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Dl(t,n,i)}a=a.next}while(a!==r)}}function ai(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ml(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Dh(e){var t=e.alternate;t!==null&&(e.alternate=null,Dh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qt],delete t[kr],delete t[wl],delete t[wg],delete t[_g])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mh(e){return e.tag===5||e.tag===3||e.tag===4}function uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Il(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Pa));else if(r!==4&&(e=e.child,e!==null))for(Il(e,t,n),e=e.sibling;e!==null;)Il(e,t,n),e=e.sibling}function Bl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bl(e,t,n),e=e.sibling;e!==null;)Bl(e,t,n),e=e.sibling}var Ye=null,Ot=!1;function mn(e,t,n){for(n=n.child;n!==null;)Ih(e,t,n),n=n.sibling}function Ih(e,t,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Xa,n)}catch{}switch(n.tag){case 5:nt||ms(n,t);case 6:var r=Ye,a=Ot;Ye=null,mn(e,t,n),Ye=r,Ot=a,Ye!==null&&(Ot?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Ot?(e=Ye,n=n.stateNode,e.nodeType===8?Pi(e.parentNode,n):e.nodeType===1&&Pi(e,n),xr(e)):Pi(Ye,n.stateNode));break;case 4:r=Ye,a=Ot,Ye=n.stateNode.containerInfo,Ot=!0,mn(e,t,n),Ye=r,Ot=a;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Dl(n,t,l),a=a.next}while(a!==r)}mn(e,t,n);break;case 1:if(!nt&&(ms(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ae(n,t,o)}mn(e,t,n);break;case 21:mn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,mn(e,t,n),nt=r):mn(e,t,n);break;default:mn(e,t,n)}}function du(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new zg),t.forEach(function(r){var a=Yg.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Rt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ye=o.stateNode,Ot=!1;break e;case 3:Ye=o.stateNode.containerInfo,Ot=!0;break e;case 4:Ye=o.stateNode.containerInfo,Ot=!0;break e}o=o.return}if(Ye===null)throw Error(M(160));Ih(i,l,a),Ye=null,Ot=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(h){Ae(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bh(t,e),t=t.sibling}function Bh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Wt(e),r&4){try{dr(3,e,e.return),ai(3,e)}catch(T){Ae(e,e.return,T)}try{dr(5,e,e.return)}catch(T){Ae(e,e.return,T)}}break;case 1:Rt(t,e),Wt(e),r&512&&n!==null&&ms(n,n.return);break;case 5:if(Rt(t,e),Wt(e),r&512&&n!==null&&ms(n,n.return),e.flags&32){var a=e.stateNode;try{mr(a,"")}catch(T){Ae(e,e.return,T)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&id(a,i),ol(o,l);var h=ol(o,i);for(l=0;l<c.length;l+=2){var x=c[l],p=c[l+1];x==="style"?dd(a,p):x==="dangerouslySetInnerHTML"?cd(a,p):x==="children"?mr(a,p):so(a,x,p,h)}switch(o){case"input":sl(a,i);break;case"textarea":ld(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?vs(a,!!i.multiple,A,!1):y!==!!i.multiple&&(i.defaultValue!=null?vs(a,!!i.multiple,i.defaultValue,!0):vs(a,!!i.multiple,i.multiple?[]:"",!1))}a[kr]=i}catch(T){Ae(e,e.return,T)}}break;case 6:if(Rt(t,e),Wt(e),r&4){if(e.stateNode===null)throw Error(M(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(T){Ae(e,e.return,T)}}break;case 3:if(Rt(t,e),Wt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xr(t.containerInfo)}catch(T){Ae(e,e.return,T)}break;case 4:Rt(t,e),Wt(e);break;case 13:Rt(t,e),Wt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Io=Re())),r&4&&du(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(h=nt)||x,Rt(t,e),nt=h):Rt(t,e),Wt(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!x&&e.mode&1)for(F=e,x=e.child;x!==null;){for(p=F=x;F!==null;){switch(y=F,A=y.child,y.tag){case 0:case 11:case 14:case 15:dr(4,y,y.return);break;case 1:ms(y,y.return);var m=y.stateNode;if(typeof m.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(T){Ae(r,n,T)}}break;case 5:ms(y,y.return);break;case 22:if(y.memoizedState!==null){fu(p);continue}}A!==null?(A.return=y,F=A):fu(p)}x=x.sibling}e:for(x=null,p=e;;){if(p.tag===5){if(x===null){x=p;try{a=p.stateNode,h?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=ud("display",l))}catch(T){Ae(e,e.return,T)}}}else if(p.tag===6){if(x===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(T){Ae(e,e.return,T)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Rt(t,e),Wt(e),r&4&&du(e);break;case 21:break;default:Rt(t,e),Wt(e)}}function Wt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Mh(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(mr(a,""),r.flags&=-33);var i=uu(e);Bl(e,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,o=uu(e);Il(e,o,l);break;default:throw Error(M(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ug(e,t,n){F=e,zh(e)}function zh(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var a=F,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||sa;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||nt;o=sa;var h=nt;if(sa=l,(nt=c)&&!h)for(F=a;F!==null;)l=F,c=l.child,l.tag===22&&l.memoizedState!==null?pu(a):c!==null?(c.return=l,F=c):pu(a);for(;i!==null;)F=i,zh(i),i=i.sibling;F=a,sa=o,nt=h}hu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,F=i):hu(e)}}function hu(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||ai(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Pt(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Kc(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Kc(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var x=h.memoizedState;if(x!==null){var p=x.dehydrated;p!==null&&xr(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}nt||t.flags&512&&Ml(t)}catch(y){Ae(t,t.return,y)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function fu(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function pu(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ai(4,t)}catch(c){Ae(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Ae(t,a,c)}}var i=t.return;try{Ml(t)}catch(c){Ae(t,i,c)}break;case 5:var l=t.return;try{Ml(t)}catch(c){Ae(t,l,c)}}}catch(c){Ae(t,t.return,c)}if(t===e){F=null;break}var o=t.sibling;if(o!==null){o.return=t.return,F=o;break}F=t.return}}var Vg=Math.ceil,Wa=dn.ReactCurrentDispatcher,Do=dn.ReactCurrentOwner,Tt=dn.ReactCurrentBatchConfig,he=0,Ge=null,Me=null,Ke=0,yt=0,gs=On(0),$e=0,Lr=null,Kn=0,ii=0,Mo=0,hr=null,ht=null,Io=0,Ts=1/0,en=null,Ha=!1,zl=null,Cn=null,ra=!1,Nn=null,qa=0,fr=0,$l=null,ya=-1,xa=0;function lt(){return he&6?Re():ya!==-1?ya:ya=Re()}function bn(e){return e.mode&1?he&2&&Ke!==0?Ke&-Ke:Sg.transition!==null?(xa===0&&(xa=_d()),xa):(e=ge,e!==0||(e=window.event,e=e===void 0?16:Ld(e.type)),e):1}function Bt(e,t,n,r){if(50<fr)throw fr=0,$l=null,Error(M(185));Rr(e,n,r),(!(he&2)||e!==Ge)&&(e===Ge&&(!(he&2)&&(ii|=n),$e===4&&xn(e,Ke)),gt(e,r),n===1&&he===0&&!(t.mode&1)&&(Ts=Re()+500,ni&&Dn()))}function gt(e,t){var n=e.callbackNode;Sm(e,t);var r=Ta(e,e===Ge?Ke:0);if(r===0)n!==null&&_c(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&_c(n),t===1)e.tag===0?kg(mu.bind(null,e)):Yd(mu.bind(null,e)),jg(function(){!(he&6)&&Dn()}),n=null;else{switch(kd(r)){case 1:n=oo;break;case 4:n=Nd;break;case 16:n=ba;break;case 536870912:n=wd;break;default:n=ba}n=Qh(n,$h.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $h(e,t){if(ya=-1,xa=0,he&6)throw Error(M(327));var n=e.callbackNode;if(ws()&&e.callbackNode!==n)return null;var r=Ta(e,e===Ge?Ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Qa(e,r);else{t=r;var a=he;he|=2;var i=Vh();(Ge!==e||Ke!==t)&&(en=null,Ts=Re()+500,Hn(e,t));do try{Hg();break}catch(o){Uh(e,o)}while(!0);wo(),Wa.current=i,he=a,Me!==null?t=0:(Ge=null,Ke=0,t=$e)}if(t!==0){if(t===2&&(a=fl(e),a!==0&&(r=a,t=Ul(e,a))),t===1)throw n=Lr,Hn(e,0),xn(e,r),gt(e,Re()),n;if(t===6)xn(e,r);else{if(a=e.current.alternate,!(r&30)&&!Fg(a)&&(t=Qa(e,r),t===2&&(i=fl(e),i!==0&&(r=i,t=Ul(e,i))),t===1))throw n=Lr,Hn(e,0),xn(e,r),gt(e,Re()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:$n(e,ht,en);break;case 3:if(xn(e,r),(r&130023424)===r&&(t=Io+500-Re(),10<t)){if(Ta(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){lt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Nl($n.bind(null,e,ht,en),t);break}$n(e,ht,en);break;case 4:if(xn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-It(r);i=1<<l,l=t[l],l>a&&(a=l),r&=~i}if(r=a,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vg(r/1960))-r,10<r){e.timeoutHandle=Nl($n.bind(null,e,ht,en),r);break}$n(e,ht,en);break;case 5:$n(e,ht,en);break;default:throw Error(M(329))}}}return gt(e,Re()),e.callbackNode===n?$h.bind(null,e):null}function Ul(e,t){var n=hr;return e.current.memoizedState.isDehydrated&&(Hn(e,t).flags|=256),e=Qa(e,t),e!==2&&(t=ht,ht=n,t!==null&&Vl(t)),e}function Vl(e){ht===null?ht=e:ht.push.apply(ht,e)}function Fg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!zt(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xn(e,t){for(t&=~Mo,t&=~ii,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-It(t),r=1<<n;e[n]=-1,t&=~r}}function mu(e){if(he&6)throw Error(M(327));ws();var t=Ta(e,0);if(!(t&1))return gt(e,Re()),null;var n=Qa(e,t);if(e.tag!==0&&n===2){var r=fl(e);r!==0&&(t=r,n=Ul(e,r))}if(n===1)throw n=Lr,Hn(e,0),xn(e,t),gt(e,Re()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$n(e,ht,en),gt(e,Re()),null}function Bo(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(Ts=Re()+500,ni&&Dn())}}function Xn(e){Nn!==null&&Nn.tag===0&&!(he&6)&&ws();var t=he;he|=1;var n=Tt.transition,r=ge;try{if(Tt.transition=null,ge=1,e)return e()}finally{ge=r,Tt.transition=n,he=t,!(he&6)&&Dn()}}function zo(){yt=gs.current,Se(gs)}function Hn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xg(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(xo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oa();break;case 3:Cs(),Se(pt),Se(st),bo();break;case 5:Co(r);break;case 4:Cs();break;case 13:Se(be);break;case 19:Se(be);break;case 10:_o(r.type._context);break;case 22:case 23:zo()}n=n.return}if(Ge=e,Me=e=Tn(e.current,null),Ke=yt=t,$e=0,Lr=null,Mo=ii=Kn=0,ht=hr=null,Fn!==null){for(t=0;t<Fn.length;t++)if(n=Fn[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}n.pending=r}Fn=null}return e}function Uh(e,t){do{var n=Me;try{if(wo(),ma.current=Fa,Va){for(var r=Te.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Va=!1}if(Yn=0,Qe=ze=Te=null,ur=!1,Cr=0,Do.current=null,n===null||n.return===null){$e=1,Lr=t,Me=null;break}e:{var i=e,l=n.return,o=n,c=t;if(t=Ke,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,x=o,p=x.tag;if(!(x.mode&1)&&(p===0||p===11||p===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var A=nu(l);if(A!==null){A.flags&=-257,su(A,l,o,i,t),A.mode&1&&tu(i,h,t),t=A,c=h;var m=t.updateQueue;if(m===null){var T=new Set;T.add(c),t.updateQueue=T}else m.add(c);break e}else{if(!(t&1)){tu(i,h,t),$o();break e}c=Error(M(426))}}else if(Ce&&o.mode&1){var w=nu(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),su(w,l,o,i,t),jo(bs(c,o));break e}}i=c=bs(c,o),$e!==4&&($e=2),hr===null?hr=[i]:hr.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var u=kh(i,c,t);Yc(i,u);break e;case 1:o=c;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Cn===null||!Cn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=Sh(i,o,t);Yc(i,k);break e}}i=i.return}while(i!==null)}Wh(n)}catch(P){t=P,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function Vh(){var e=Wa.current;return Wa.current=Fa,e===null?Fa:e}function $o(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(Kn&268435455)&&!(ii&268435455)||xn(Ge,Ke)}function Qa(e,t){var n=he;he|=2;var r=Vh();(Ge!==e||Ke!==t)&&(en=null,Hn(e,t));do try{Wg();break}catch(a){Uh(e,a)}while(!0);if(wo(),he=n,Wa.current=r,Me!==null)throw Error(M(261));return Ge=null,Ke=0,$e}function Wg(){for(;Me!==null;)Fh(Me)}function Hg(){for(;Me!==null&&!gm();)Fh(Me)}function Fh(e){var t=qh(e.alternate,e,yt);e.memoizedProps=e.pendingProps,t===null?Wh(e):Me=t,Do.current=null}function Wh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Bg(n,t),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Me=null;return}}else if(n=Ig(n,t,yt),n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);$e===0&&($e=5)}function $n(e,t,n){var r=ge,a=Tt.transition;try{Tt.transition=null,ge=1,qg(e,t,n,r)}finally{Tt.transition=a,ge=r}return null}function qg(e,t,n,r){do ws();while(Nn!==null);if(he&6)throw Error(M(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Em(e,i),e===Ge&&(Me=Ge=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ra||(ra=!0,Qh(ba,function(){return ws(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tt.transition,Tt.transition=null;var l=ge;ge=1;var o=he;he|=4,Do.current=null,$g(e,n),Bh(n,e),hg(xl),La=!!yl,xl=yl=null,e.current=n,Ug(n),vm(),he=o,ge=l,Tt.transition=i}else e.current=n;if(ra&&(ra=!1,Nn=e,qa=a),i=e.pendingLanes,i===0&&(Cn=null),jm(n.stateNode),gt(e,Re()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ha)throw Ha=!1,e=zl,zl=null,e;return qa&1&&e.tag!==0&&ws(),i=e.pendingLanes,i&1?e===$l?fr++:(fr=0,$l=e):fr=0,Dn(),null}function ws(){if(Nn!==null){var e=kd(qa),t=Tt.transition,n=ge;try{if(Tt.transition=null,ge=16>e?16:e,Nn===null)var r=!1;else{if(e=Nn,Nn=null,qa=0,he&6)throw Error(M(331));var a=he;for(he|=4,F=e.current;F!==null;){var i=F,l=i.child;if(F.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var h=o[c];for(F=h;F!==null;){var x=F;switch(x.tag){case 0:case 11:case 15:dr(8,x,i)}var p=x.child;if(p!==null)p.return=x,F=p;else for(;F!==null;){x=F;var y=x.sibling,A=x.return;if(Dh(x),x===h){F=null;break}if(y!==null){y.return=A,F=y;break}F=A}}}var m=i.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var w=T.sibling;T.sibling=null,T=w}while(T!==null)}}F=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,F=l;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:dr(9,i,i.return)}var u=i.sibling;if(u!==null){u.return=i.return,F=u;break e}F=i.return}}var f=e.current;for(F=f;F!==null;){l=F;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,F=g;else e:for(l=f;F!==null;){if(o=F,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ai(9,o)}}catch(P){Ae(o,o.return,P)}if(o===l){F=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,F=k;break e}F=o.return}}if(he=a,Dn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Xa,e)}catch{}r=!0}return r}finally{ge=n,Tt.transition=t}}return!1}function gu(e,t,n){t=bs(n,t),t=kh(e,t,1),e=En(e,t,1),t=lt(),e!==null&&(Rr(e,1,t),gt(e,t))}function Ae(e,t,n){if(e.tag===3)gu(e,e,n);else for(;t!==null;){if(t.tag===3){gu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cn===null||!Cn.has(r))){e=bs(n,e),e=Sh(t,e,1),t=En(t,e,1),e=lt(),t!==null&&(Rr(t,1,e),gt(t,e));break}}t=t.return}}function Qg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(Ke&n)===n&&($e===4||$e===3&&(Ke&130023424)===Ke&&500>Re()-Io?Hn(e,0):Mo|=n),gt(e,t)}function Hh(e,t){t===0&&(e.mode&1?(t=Gr,Gr<<=1,!(Gr&130023424)&&(Gr=4194304)):t=1);var n=lt();e=cn(e,t),e!==null&&(Rr(e,t,n),gt(e,n))}function Gg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hh(e,n)}function Yg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),Hh(e,n)}var qh;qh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ft=!1,Mg(e,t,n);ft=!!(e.flags&131072)}else ft=!1,Ce&&t.flags&1048576&&Kd(t,Ia,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;va(e,t),e=t.pendingProps;var a=ks(t,st.current);Ns(t,n),a=Lo(null,t,r,e,a,n);var i=Ao();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(i=!0,Da(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,So(t),a.updater=ri,t.stateNode=a,a._reactInternals=t,bl(t,r,e,n),t=Al(null,t,r,!0,i,n)):(t.tag=0,Ce&&i&&yo(t),it(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(va(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Xg(r),e=Pt(r,e),a){case 0:t=Ll(null,t,r,e,n);break e;case 1:t=iu(null,t,r,e,n);break e;case 11:t=ru(null,t,r,e,n);break e;case 14:t=au(null,t,r,Pt(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Pt(r,a),Ll(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Pt(r,a),iu(e,t,r,a,n);case 3:e:{if(Th(t),e===null)throw Error(M(387));r=t.pendingProps,i=t.memoizedState,a=i.element,nh(e,t),$a(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=bs(Error(M(423)),t),t=lu(e,t,r,n,a);break e}else if(r!==a){a=bs(Error(M(424)),t),t=lu(e,t,r,n,a);break e}else for(xt=Sn(t.stateNode.containerInfo.firstChild),jt=t,Ce=!0,Mt=null,n=eh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),r===a){t=un(e,t,n);break e}it(e,t,r,n)}t=t.child}return t;case 5:return sh(t),e===null&&Sl(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,jl(r,a)?l=null:i!==null&&jl(r,i)&&(t.flags|=32),bh(e,t),it(e,t,l,n),t.child;case 6:return e===null&&Sl(t),null;case 13:return Lh(e,t,n);case 4:return Eo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Es(t,null,r,n):it(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Pt(r,a),ru(e,t,r,a,n);case 7:return it(e,t,t.pendingProps,n),t.child;case 8:return it(e,t,t.pendingProps.children,n),t.child;case 12:return it(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Ne(Ba,r._currentValue),r._currentValue=l,i!==null)if(zt(i.value,l)){if(i.children===a.children&&!pt.current){t=un(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=an(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var x=h.pending;x===null?c.next=c:(c.next=x.next,x.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),El(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),El(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}it(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ns(t,n),a=Lt(a),r=r(a),t.flags|=1,it(e,t,r,n),t.child;case 14:return r=t.type,a=Pt(r,t.pendingProps),a=Pt(r.type,a),au(e,t,r,a,n);case 15:return Eh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Pt(r,a),va(e,t),t.tag=1,mt(r)?(e=!0,Da(t)):e=!1,Ns(t,n),_h(t,r,a),bl(t,r,a,n),Al(null,t,r,!0,e,n);case 19:return Ah(e,t,n);case 22:return Ch(e,t,n)}throw Error(M(156,t.tag))};function Qh(e,t){return jd(e,t)}function Kg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,n,r){return new Kg(e,t,n,r)}function Uo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xg(e){if(typeof e=="function")return Uo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ao)return 11;if(e===io)return 14}return 2}function Tn(e,t){var n=e.alternate;return n===null?(n=bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ja(e,t,n,r,a,i){var l=2;if(r=e,typeof e=="function")Uo(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case is:return qn(n.children,a,i,t);case ro:l=8,a|=8;break;case Ji:return e=bt(12,n,t,a|2),e.elementType=Ji,e.lanes=i,e;case Zi:return e=bt(13,n,t,a),e.elementType=Zi,e.lanes=i,e;case el:return e=bt(19,n,t,a),e.elementType=el,e.lanes=i,e;case sd:return li(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case td:l=10;break e;case nd:l=9;break e;case ao:l=11;break e;case io:l=14;break e;case gn:l=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=bt(l,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function qn(e,t,n,r){return e=bt(7,e,r,t),e.lanes=n,e}function li(e,t,n,r){return e=bt(22,e,r,t),e.elementType=sd,e.lanes=n,e.stateNode={isHidden:!1},e}function Ui(e,t,n){return e=bt(6,e,null,t),e.lanes=n,e}function Vi(e,t,n){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jg(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wi(0),this.expirationTimes=wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Vo(e,t,n,r,a,i,l,o,c){return e=new Jg(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=bt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},So(i),e}function Zg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Gh(e){if(!e)return Rn;e=e._reactInternals;e:{if(Zn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(mt(n))return Gd(e,n,t)}return t}function Yh(e,t,n,r,a,i,l,o,c){return e=Vo(n,r,!0,e,a,i,l,o,c),e.context=Gh(null),n=e.current,r=lt(),a=bn(n),i=an(r,a),i.callback=t??null,En(n,i,a),e.current.lanes=a,Rr(e,a,r),gt(e,r),e}function oi(e,t,n,r){var a=t.current,i=lt(),l=bn(a);return n=Gh(n),t.context===null?t.context=n:t.pendingContext=n,t=an(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=En(a,t,l),e!==null&&(Bt(e,a,l,i),pa(e,a,l)),l}function Ga(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fo(e,t){vu(e,t),(e=e.alternate)&&vu(e,t)}function ev(){return null}var Kh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wo(e){this._internalRoot=e}ci.prototype.render=Wo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));oi(e,t,null,null)};ci.prototype.unmount=Wo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xn(function(){oi(null,e,null,null)}),t[on]=null}};function ci(e){this._internalRoot=e}ci.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yn.length&&t!==0&&t<yn[n].priority;n++);yn.splice(n,0,e),n===0&&Td(e)}};function Ho(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ui(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yu(){}function tv(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var h=Ga(l);i.call(h)}}var l=Yh(t,r,e,0,null,!1,!1,"",yu);return e._reactRootContainer=l,e[on]=l.current,wr(e.nodeType===8?e.parentNode:e),Xn(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var h=Ga(c);o.call(h)}}var c=Vo(e,0,!1,null,null,!1,!1,"",yu);return e._reactRootContainer=c,e[on]=c.current,wr(e.nodeType===8?e.parentNode:e),Xn(function(){oi(t,c,n,r)}),c}function di(e,t,n,r,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Ga(l);o.call(c)}}oi(t,l,e,a)}else l=tv(n,t,e,a,r);return Ga(l)}Sd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=nr(t.pendingLanes);n!==0&&(co(t,n|1),gt(t,Re()),!(he&6)&&(Ts=Re()+500,Dn()))}break;case 13:Xn(function(){var r=cn(e,1);if(r!==null){var a=lt();Bt(r,e,1,a)}}),Fo(e,1)}};uo=function(e){if(e.tag===13){var t=cn(e,134217728);if(t!==null){var n=lt();Bt(t,e,134217728,n)}Fo(e,134217728)}};Ed=function(e){if(e.tag===13){var t=bn(e),n=cn(e,t);if(n!==null){var r=lt();Bt(n,e,t,r)}Fo(e,t)}};Cd=function(){return ge};bd=function(e,t){var n=ge;try{return ge=e,t()}finally{ge=n}};ul=function(e,t,n){switch(t){case"input":if(sl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ti(r);if(!a)throw Error(M(90));ad(r),sl(r,a)}}}break;case"textarea":ld(e,n);break;case"select":t=n.value,t!=null&&vs(e,!!n.multiple,t,!1)}};pd=Bo;md=Xn;var nv={usingClientEntryPoint:!1,Events:[Or,us,ti,hd,fd,Bo]},Js={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sv={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yd(e),e===null?null:e.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||ev,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{Xa=aa.inject(sv),Qt=aa}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nv;wt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ho(t))throw Error(M(200));return Zg(e,t,null,n)};wt.createRoot=function(e,t){if(!Ho(e))throw Error(M(299));var n=!1,r="",a=Kh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Vo(e,1,!1,null,null,n,!1,r,a),e[on]=t.current,wr(e.nodeType===8?e.parentNode:e),new Wo(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=yd(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return Xn(e)};wt.hydrate=function(e,t,n){if(!ui(t))throw Error(M(200));return di(null,e,t,!0,n)};wt.hydrateRoot=function(e,t,n){if(!Ho(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",l=Kh;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Yh(t,null,e,1,n??null,a,!1,i,l),e[on]=t.current,wr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new ci(t)};wt.render=function(e,t,n){if(!ui(t))throw Error(M(200));return di(null,e,t,!1,n)};wt.unmountComponentAtNode=function(e){if(!ui(e))throw Error(M(40));return e._reactRootContainer?(Xn(function(){di(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1};wt.unstable_batchedUpdates=Bo;wt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ui(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return di(e,t,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function Xh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xh)}catch(e){console.error(e)}}Xh(),Xu.exports=wt;var rv=Xu.exports,Jh,xu=rv;Jh=xu.createRoot,xu.hydrateRoot;const av="http://localhost:3000";let Fl=localStorage.getItem("token");function rs(e){Fl=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async function Mr(e,t={}){const n={"Content-Type":"application/json",...t.headers||{}};Fl&&(n.Authorization=`Bearer ${Fl}`);const r=await fetch(`${av}${e}`,{...t,headers:n});if(!r.ok){const i=(await r.json().catch(()=>({}))).error||"request_failed";throw new Error(i)}return r.json()}function de(e){return Mr(e,{method:"GET"})}function je(e,t){return Mr(e,{method:"POST",body:JSON.stringify(t||{})})}function tt(e,t){return Mr(e,{method:"PATCH",body:JSON.stringify(t||{})})}function ju(e,t){return Mr(e,{method:"PUT",body:JSON.stringify(t||{})})}function Un(e){return Mr(e,{method:"DELETE"})}const Kt=Object.create(null);Kt.open="0";Kt.close="1";Kt.ping="2";Kt.pong="3";Kt.message="4";Kt.upgrade="5";Kt.noop="6";const Na=Object.create(null);Object.keys(Kt).forEach(e=>{Na[Kt[e]]=e});const Wl={type:"error",data:"parser error"},Zh=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ef=typeof ArrayBuffer=="function",tf=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,qo=({type:e,data:t},n,r)=>Zh&&t instanceof Blob?n?r(t):Nu(t,r):ef&&(t instanceof ArrayBuffer||tf(t))?n?r(t):Nu(new Blob([t]),r):r(Kt[e]+(t||"")),Nu=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function wu(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Fi;function iv(e,t){if(Zh&&e.data instanceof Blob)return e.data.arrayBuffer().then(wu).then(t);if(ef&&(e.data instanceof ArrayBuffer||tf(e.data)))return t(wu(e.data));qo(e,!1,n=>{Fi||(Fi=new TextEncoder),t(Fi.encode(n))})}const _u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<_u.length;e++)rr[_u.charCodeAt(e)]=e;const lv=e=>{let t=e.length*.75,n=e.length,r,a=0,i,l,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),x=new Uint8Array(h);for(r=0;r<n;r+=4)i=rr[e.charCodeAt(r)],l=rr[e.charCodeAt(r+1)],o=rr[e.charCodeAt(r+2)],c=rr[e.charCodeAt(r+3)],x[a++]=i<<2|l>>4,x[a++]=(l&15)<<4|o>>2,x[a++]=(o&3)<<6|c&63;return h},ov=typeof ArrayBuffer=="function",Qo=(e,t)=>{if(typeof e!="string")return{type:"message",data:nf(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:cv(e.substring(1),t)}:Na[n]?e.length>1?{type:Na[n],data:e.substring(1)}:{type:Na[n]}:Wl},cv=(e,t)=>{if(ov){const n=lv(e);return nf(n,t)}else return{base64:!0,data:e}},nf=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},sf="",uv=(e,t)=>{const n=e.length,r=new Array(n);let a=0;e.forEach((i,l)=>{qo(i,!1,o=>{r[l]=o,++a===n&&t(r.join(sf))})})},dv=(e,t)=>{const n=e.split(sf),r=[];for(let a=0;a<n.length;a++){const i=Qo(n[a],t);if(r.push(i),i.type==="error")break}return r};function hv(){return new TransformStream({transform(e,t){iv(e,n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let Wi;function ia(e){return e.reduce((t,n)=>t+n.length,0)}function la(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)n[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function fv(e,t){Wi||(Wi=new TextDecoder);const n=[];let r=0,a=-1,i=!1;return new TransformStream({transform(l,o){for(n.push(l);;){if(r===0){if(ia(n)<1)break;const c=la(n,1);i=(c[0]&128)===128,a=c[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(ia(n)<2)break;const c=la(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(ia(n)<8)break;const c=la(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),x=h.getUint32(0);if(x>Math.pow(2,21)-1){o.enqueue(Wl);break}a=x*Math.pow(2,32)+h.getUint32(4),r=3}else{if(ia(n)<a)break;const c=la(n,a);o.enqueue(Qo(i?c:Wi.decode(c),t)),r=0}if(a===0||a>e){o.enqueue(Wl);break}}}})}const rf=4;function Ie(e){if(e)return pv(e)}function pv(e){for(var t in Ie.prototype)e[t]=Ie.prototype[t];return e}Ie.prototype.on=Ie.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ie.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Ie.prototype.off=Ie.prototype.removeListener=Ie.prototype.removeAllListeners=Ie.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,a=0;a<n.length;a++)if(r=n[a],r===t||r.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Ie.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,a=n.length;r<a;++r)n[r].apply(this,t)}return this};Ie.prototype.emitReserved=Ie.prototype.emit;Ie.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ie.prototype.hasListeners=function(e){return!!this.listeners(e).length};const hi=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Ct=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),mv="arraybuffer";function af(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const gv=Ct.setTimeout,vv=Ct.clearTimeout;function fi(e,t){t.useNativeTimers?(e.setTimeoutFn=gv.bind(Ct),e.clearTimeoutFn=vv.bind(Ct)):(e.setTimeoutFn=Ct.setTimeout.bind(Ct),e.clearTimeoutFn=Ct.clearTimeout.bind(Ct))}const yv=1.33;function xv(e){return typeof e=="string"?jv(e):Math.ceil((e.byteLength||e.size)*yv)}function jv(e){let t=0,n=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function lf(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Nv(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function wv(e){let t={},n=e.split("&");for(let r=0,a=n.length;r<a;r++){let i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class _v extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Go extends Ie{constructor(t){super(),this.writable=!1,fi(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new _v(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Qo(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Nv(t);return n.length?"?"+n:""}}class kv extends Go{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};dv(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,uv(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=lf()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let of=!1;try{of=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Sv=of;function Ev(){}class Cv extends kv{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Yt extends Ie{constructor(t,n,r){super(),this.createRequest=t,fi(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=af(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Yt.requestsCount++,Yt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ev,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Yt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Yt.requestsCount=0;Yt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ku);else if(typeof addEventListener=="function"){const e="onpagehide"in Ct?"pagehide":"unload";addEventListener(e,ku,!1)}}function ku(){for(let e in Yt.requests)Yt.requests.hasOwnProperty(e)&&Yt.requests[e].abort()}const bv=function(){const e=cf({xdomain:!1});return e&&e.responseType!==null}();class Tv extends Cv{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=bv&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Yt(cf,this.uri(),t)}}function cf(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Sv))return new XMLHttpRequest}catch{}if(!t)try{return new Ct[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const uf=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Lv extends Go{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=uf?{}:af(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;qo(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&hi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=lf()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Hi=Ct.WebSocket||Ct.MozWebSocket;class Av extends Lv{createSocket(t,n,r){return uf?new Hi(t,n,r):n?new Hi(t,n):new Hi(t)}doWrite(t,n){this.ws.send(n)}}class Rv extends Go{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=fv(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),a=hv();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],a=n===t.length-1;this._writer.write(r).then(()=>{a&&hi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Pv={websocket:Av,webtransport:Rv,polling:Tv},Ov=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Dv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Hl(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let a=Ov.exec(e||""),i={},l=14;for(;l--;)i[Dv[l]]=a[l]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Mv(i,i.path),i.queryKey=Iv(i,i.query),i}function Mv(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Iv(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(n[a]=i)}),n}const ql=typeof addEventListener=="function"&&typeof removeEventListener=="function",wa=[];ql&&addEventListener("offline",()=>{wa.forEach(e=>e())},!1);class Ln extends Ie{constructor(t,n){if(super(),this.binaryType=mv,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Hl(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Hl(n.host).host);fi(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=wv(this.opts.query)),ql&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wa.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=rf,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ln.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ln.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(n+=xv(a)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,hi(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,a){if(typeof n=="function"&&(a=n,n=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Ln.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ql&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=wa.indexOf(this._offlineEventListener);r!==-1&&wa.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ln.protocol=rf;class Bv extends Ln{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Ln.priorWebsocketSuccess=!1;const a=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ln.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function i(){r||(r=!0,x(),n.close(),n=null)}const l=p=>{const y=new Error("probe error: "+p);y.transport=n.name,i(),this.emitReserved("upgradeError",y)};function o(){l("transport closed")}function c(){l("socket closed")}function h(p){n&&p.name!==n.name&&i()}const x=()=>{n.removeListener("open",a),n.removeListener("error",l),n.removeListener("close",o),this.off("close",c),this.off("upgrading",h)};n.once("open",a),n.once("error",l),n.once("close",o),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let zv=class extends Bv{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>Pv[a]).filter(a=>!!a)),super(t,r)}};function $v(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Hl(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Uv=typeof ArrayBuffer=="function",Vv=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,df=Object.prototype.toString,Fv=typeof Blob=="function"||typeof Blob<"u"&&df.call(Blob)==="[object BlobConstructor]",Wv=typeof File=="function"||typeof File<"u"&&df.call(File)==="[object FileConstructor]";function Yo(e){return Uv&&(e instanceof ArrayBuffer||Vv(e))||Fv&&e instanceof Blob||Wv&&e instanceof File}function _a(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(_a(e[n]))return!0;return!1}if(Yo(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return _a(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&_a(e[n]))return!0;return!1}function Hv(e){const t=[],n=e.data,r=e;return r.data=Ql(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ql(e,t){if(!e)return e;if(Yo(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ql(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ql(e[r],t));return n}return e}function qv(e,t){return e.data=Gl(e.data,t),delete e.attachments,e}function Gl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Gl(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Gl(e[n],t));return e}const hf=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Qv=5;var re;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(re||(re={}));class Gv{constructor(t){this.replacer=t}encode(t){return(t.type===re.EVENT||t.type===re.ACK)&&_a(t)?this.encodeAsBinary({type:t.type===re.EVENT?re.BINARY_EVENT:re.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===re.BINARY_EVENT||t.type===re.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Hv(t),r=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(r),a}}class Ko extends Ie{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===re.BINARY_EVENT;r||n.type===re.BINARY_ACK?(n.type=r?re.EVENT:re.ACK,this.reconstructor=new Yv(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Yo(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(re[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===re.BINARY_EVENT||r.type===re.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(i,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(i,n)}else r.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(Ko.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case re.CONNECT:return Ya(n);case re.DISCONNECT:return n===void 0;case re.CONNECT_ERROR:return typeof n=="string"||Ya(n);case re.EVENT:case re.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&hf.indexOf(n[0])===-1);case re.ACK:case re.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Yv{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=qv(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Kv(e){return typeof e=="string"}const Xv=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function Jv(e){return e===void 0||Xv(e)}function Ya(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zv(e,t){switch(e){case re.CONNECT:return t===void 0||Ya(t);case re.DISCONNECT:return t===void 0;case re.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&hf.indexOf(t[0])===-1);case re.ACK:return Array.isArray(t);case re.CONNECT_ERROR:return typeof t=="string"||Ya(t);default:return!1}}function ey(e){return Kv(e.nsp)&&Jv(e.id)&&Zv(e.type,e.data)}const ty=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ko,Encoder:Gv,get PacketType(){return re},isPacketValid:ey,protocol:Qv},Symbol.toStringTag,{value:"Module"}));function Dt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const ny=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ff extends Ie{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Dt(t,"open",this.onopen.bind(this)),Dt(t,"packet",this.onpacket.bind(this)),Dt(t,"error",this.onerror.bind(this)),Dt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,a,i;if(ny.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:re.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const x=this.ids++,p=n.pop();this._registerAckCallback(x,p),l.id=x}const o=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},a),l=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,o)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((r,a)=>{const i=(l,o)=>l?a(l):r(o);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>(this._queue[0],a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:re.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case re.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case re.EVENT:case re.BINARY_EVENT:this.onevent(t);break;case re.ACK:case re.BINARY_ACK:this.onack(t);break;case re.DISCONNECT:this.ondisconnect();break;case re.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...a){r||(r=!0,n.packet({type:re.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:re.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Ps(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ps.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Ps.prototype.reset=function(){this.attempts=0};Ps.prototype.setMin=function(e){this.ms=e};Ps.prototype.setMax=function(e){this.max=e};Ps.prototype.setJitter=function(e){this.jitter=e};class Yl extends Ie{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,fi(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ps({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||ty;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new zv(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=Dt(n,"open",function(){r.onopen(),t&&t()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},l=Dt(n,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Dt(t,"ping",this.onping.bind(this)),Dt(t,"data",this.ondata.bind(this)),Dt(t,"error",this.onerror.bind(this)),Dt(t,"close",this.onclose.bind(this)),Dt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){hi(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new ff(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Zs={};function ka(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=$v(e,t.path||"/socket.io"),r=n.source,a=n.id,i=n.path,l=Zs[a]&&i in Zs[a].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return o?c=new Yl(r,t):(Zs[a]||(Zs[a]=new Yl(r,t)),c=Zs[a]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(ka,{Manager:Yl,Socket:ff,io:ka,connect:ka});const sy="http://localhost:3000";function ry(e){return ka(sy,{auth:{token:e}})}const pf=v.createContext(null);function ay({children:e}){const[t,n]=v.useState([]),r=v.useRef(new Map),a=o=>{n(h=>h.filter(x=>x.id!==o));const c=r.current.get(o);c&&(clearTimeout(c),r.current.delete(o))},i=({message:o,type:c="success",actionLabel:h,onAction:x,duration:p=6e3})=>{const y=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if(n(A=>[...A,{id:y,message:o,type:c,actionLabel:h,onAction:x,duration:p}]),p>0){const A=setTimeout(()=>a(y),p);r.current.set(y,A)}return y},l=o=>o==="error"?s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M12 4.5c.5 0 .95.26 1.2.68l6.5 11.25a1.35 1.35 0 0 1-1.2 2.02H5.5a1.35 1.35 0 0 1-1.2-2.02L10.8 5.18c.25-.42.7-.68 1.2-.68Zm0 4.25a.9.9 0 0 0-.9.9v5.5a.9.9 0 1 0 1.8 0v-5.5a.9.9 0 0 0-.9-.9Zm0 8.3a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z",fill:"currentColor"})}):o==="info"?s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M12 3.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17Zm0 3.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Zm-1.2 4.2h2.4v6.1h-2.4v-6.1Z",fill:"currentColor"})}):s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M9.5 16.6 5.6 12.7a1 1 0 1 1 1.4-1.4l2.5 2.5 7.5-7.5a1 1 0 1 1 1.4 1.4l-8.9 8.9a1 1 0 0 1-1.4 0Z",fill:"currentColor"})});return s.jsxs(pf.Provider,{value:{pushToast:i,removeToast:a},children:[e,s.jsx("div",{className:"toast-container",children:t.map(o=>s.jsxs("div",{className:`toast toast-${o.type}`,style:{"--toast-duration":`${o.duration}ms`},children:[s.jsx("div",{className:"toast-icon",children:l(o.type)}),s.jsx("div",{className:"toast-message",children:o.message}),o.actionLabel&&s.jsx("button",{className:"toast-action",type:"button",onClick:()=>{o.onAction&&Promise.resolve(o.onAction()).catch(()=>{}),a(o.id)},children:o.actionLabel}),s.jsx("button",{className:"toast-close",type:"button",onClick:()=>a(o.id),children:"x"}),o.duration>0&&s.jsx("div",{className:`toast-progress toast-progress-${o.type}`})]},o.id))})]})}function Xo(){const e=v.useContext(pf);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function iy({user:e,isOpen:t,onToggle:n,onLogout:r,onReturnToSuperadmin:a,showReturnToSuperadmin:i,getInitial:l}){return s.jsxs("div",{className:"rail-profile",children:[s.jsx("button",{className:`profile-button ${t?"active":""}`,type:"button",onClick:n,title:"Perfil","aria-label":"Perfil",children:s.jsx("span",{children:l(e.name)})}),t&&s.jsxs("div",{className:"profile-card",children:[s.jsx("div",{className:"profile-title",children:e.name}),s.jsx("div",{className:"profile-meta",children:e.email||"Sin correo"}),s.jsx("div",{className:"profile-role",children:e.role}),i?s.jsx("button",{className:"ghost",type:"button",onClick:a,children:"Volver a superadmin"}):null,s.jsx("button",{className:"primary",type:"button",onClick:r,children:"Salir"})]})]})}function ly({navItems:e,view:t,onSetView:n,theme:r,onToggleTheme:a,user:i,logoUrl:l,brandName:o,isProfileOpen:c,onToggleProfile:h,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:A,SunIcon:m,MoonIcon:T}){const w=(o||"P").trim().charAt(0)||"P";return s.jsxs("aside",{className:"nav-rail",children:[s.jsx("button",{className:"rail-logo",type:"button",title:"Perzivalh",children:l?s.jsx("img",{src:l,alt:o||"Logo"}):s.jsx("span",{className:"logo-mark",children:w})}),s.jsx("nav",{className:"rail-nav",children:e.map(u=>{const f=u.icon;return s.jsx("button",{className:`rail-button ${t===u.id?"active":""}`,onClick:()=>u.enabled&&n(u.id),title:u.label,"aria-label":u.label,type:"button",disabled:!u.enabled,children:s.jsx(f,{className:"rail-icon"})},u.id)})}),s.jsx("div",{className:"rail-spacer"}),s.jsx("button",{className:"rail-button",type:"button",onClick:a,title:r==="dark"?"Tema claro":"Tema oscuro","aria-label":r==="dark"?"Tema claro":"Tema oscuro",children:r==="dark"?s.jsx(m,{className:"rail-icon"}):s.jsx(T,{className:"rail-icon"})}),s.jsx(iy,{user:i,isOpen:c,onToggle:h,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:A})]})}function oy({activeConversation:e,conversations:t,channels:n,brandName:r,lastReadMap:a,filters:i,showFilters:l,users:o,tags:c,statusOptions:h,statusLabels:x,formatListTime:p,formatCompactDate:y,messageBlocks:A,messageDraft:m,messageMode:T,quickActions:w,tagInput:u,noteInput:f,notesList:g,latestNote:k,loadingConversation:P,isInfoOpen:j,hasUnread:O,activeName:C,activePhone:B,activeStatusLabel:U,canManageStatus:Y,currentUser:le,messageInputRef:fe,chatBodyRef:ye,setShowFilters:we,setFilters:se,loadConversation:Ee,handleBackToList:z,setIsInfoOpen:W,handleChatScroll:S,handleAssignSelf:H,handleStatusChange:G,handleToggleTag:Z,handleAddTag:L,setNoteInput:X,handleAddNote:Q,reassignUserId:V,setReassignUserId:ae,handleReassignConversation:ce,handleOpenTagManager:ue,handleCloseTagManager:pe,showTagManager:Ue,tagManagerForm:Ve,setTagManagerForm:Fe,handleCreateTag:ut,handleDeleteTag:Pe,handleQuickAction:Be,handleSendMessage:We,setMessageMode:$t,setMessageDraft:_,scrollChatToBottom:I,getInitial:ie,PlusIcon:me,SearchIcon:He,VideoIcon:Ut,PhoneIcon:Mn,InfoIcon:es,SendIcon:Os}){const In=new Map((n||[]).map(R=>[R.phone_number_id,R.display_name||(R.phone_number_id?`Linea ${String(R.phone_number_id).slice(-4)}`:"")])),Vt=(e==null?void 0:e.assigned_user_id)&&e.assigned_user_id!==(le==null?void 0:le.id);function ts(R){if(!R)return"Sin mensajes";const xe=R.last_message_preview||R.last_message_text||R.last_message||"";return xe||(R.last_message_type?`[${R.last_message_type}]`:"Sin mensajes")}return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:`chat-shell ${e?"has-active":""}`,children:[s.jsxs("aside",{className:"chat-list-panel",children:[s.jsxs("div",{className:"chat-list-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"list-title",children:(r||"Perzivalh").toUpperCase()}),s.jsx("div",{className:"list-subtitle",children:"Chats"})]}),s.jsx("button",{className:"icon-button add-chat",type:"button",title:"Nuevo chat",children:s.jsx(me,{className:"icon"})})]}),s.jsxs("div",{className:"chat-search",children:[s.jsx(He,{className:"search-icon"}),s.jsx("input",{type:"text",placeholder:"Buscar pacientes o mensajes",value:i.search,onFocus:()=>we(!0),onClick:()=>we(!0),onChange:R=>se(xe=>({...xe,search:R.target.value}))}),l&&s.jsx("button",{className:"search-close",type:"button",onClick:()=>we(!1),"aria-label":"Cerrar filtros",children:"x"})]}),l&&s.jsxs("div",{className:"chat-filters",children:[s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Status"}),s.jsxs("select",{value:i.status,onChange:R=>se(xe=>({...xe,status:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),h.map(R=>s.jsx("option",{value:R,children:x[R]||R},R))]})]}),s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Asignado"}),s.jsxs("select",{value:i.assigned_user_id,onChange:R=>se(xe=>({...xe,assigned_user_id:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"unassigned",children:"Sin asignar"}),o.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("label",{className:"filter-field",children:[s.jsx("span",{children:"Tags"}),s.jsxs("select",{value:i.tag,onChange:R=>se(xe=>({...xe,tag:R.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),c.map(R=>s.jsx("option",{value:R.name,children:R.name},R.id))]})]})]}),s.jsxs("div",{className:"list-header",children:[s.jsxs("select",{className:"line-filter",value:i.phone_number_id,onChange:R=>se(xe=>({...xe,phone_number_id:R.target.value})),children:[s.jsx("option",{value:"",children:"Todas las lineas"}),(n||[]).map(R=>s.jsx("option",{value:R.phone_number_id,children:R.display_name||`Linea ${String(R.phone_number_id).slice(-4)}`},R.id))]}),s.jsx("span",{children:t.length})]}),s.jsx("div",{className:"conversation-list",children:t.map((R,xe)=>{var Jt,ne,J;const Ds=(e==null?void 0:e.id)===R.id,Bn=R.status==="pending"&&!R.assigned_user_id,Xt=R.display_name||R.phone_e164||R.wa_id||"Sin nombre",N=ts(R),$=Number(R.unread_count||R.unread_messages||R.unread||0),q=((ne=(Jt=R.tags)==null?void 0:Jt[0])==null?void 0:ne.name)||"",ee=(J=R.assigned_user)!=null&&J.name?`Tomada por ${R.assigned_user.name}`:"",ve=R.phone_number_id?In.get(R.phone_number_id)||`Linea ${String(R.phone_number_id).slice(-4)}`:"",Ft=(a==null?void 0:a[R.id])||null,qe=R.last_message_at,dt=qe&&(!Ft||new Date(qe).getTime()>new Date(Ft).getTime())&&R.last_message_direction==="in";return s.jsxs("button",{className:`conversation-item ${Ds?"active":""}`,onClick:()=>Ee(R.id),style:{animationDelay:`${Math.min(xe,6)*60}ms`},children:[s.jsxs("div",{className:"avatar",children:[s.jsx("span",{children:ie(Xt)}),Bn&&s.jsx("span",{className:"presence-dot"})]}),s.jsxs("div",{className:"conversation-body",children:[s.jsxs("div",{className:"conversation-row",children:[s.jsx("span",{className:"conversation-name",children:Xt}),s.jsxs("div",{className:"conversation-right",children:[s.jsx("span",{className:"conversation-time",children:p(R.last_message_at)}),$>0&&s.jsx("span",{className:"conversation-unread",children:$})]})]}),s.jsx("div",{className:`conversation-preview ${dt?"unread":""}`,children:N}),s.jsxs("div",{className:"conversation-meta",children:[ve&&s.jsx("span",{className:"status-pill line-pill",children:ve}),ee&&s.jsx("span",{className:"status-pill assignee-pill",children:ee}),q&&s.jsx("span",{className:"status-pill tag-pill",children:q})]})]})]},R.id)})})]}),s.jsxs("div",{className:`chat-view ${j?"info-open":"info-closed"}`,children:[s.jsx("div",{className:"chat-main",children:s.jsxs("div",{className:"chat-card",children:[s.jsxs("header",{className:"chat-topbar",children:[s.jsxs("div",{className:"chat-title",children:[e&&s.jsx("button",{className:"back-button",type:"button",onClick:z,children:"Chats"}),s.jsx("div",{className:"chat-avatar",children:s.jsx("span",{children:ie(C)})}),s.jsxs("div",{children:[s.jsx("div",{className:"chat-name",children:C}),e?s.jsx("div",{className:"chat-status",children:U}):s.jsx("div",{className:"chat-status muted",children:"Elige una conversacion"})]})]}),s.jsxs("div",{className:"chat-actions",children:[s.jsx("button",{className:"icon-button",type:"button",title:"Video",children:s.jsx(Ut,{className:"icon"})}),s.jsx("button",{className:"icon-button",type:"button",title:"Llamar",children:s.jsx(Mn,{className:"icon"})}),s.jsx("button",{className:"icon-button",type:"button",title:"Buscar",children:s.jsx(He,{className:"icon"})}),s.jsx("button",{className:`icon-button ${j?"active":""}`,type:"button",title:"Info",onClick:()=>W(R=>!R),children:s.jsx(es,{className:"icon"})})]})]}),s.jsxs("div",{className:"chat-body",ref:ye,onScroll:S,children:[P&&s.jsx("div",{className:"empty",children:"Cargando..."}),!P&&!e&&s.jsx("div",{className:"empty",children:"Selecciona una conversacion"}),!P&&e&&s.jsxs(s.Fragment,{children:[A.length?A:s.jsx("div",{className:"empty-state",children:"Sin mensajes"}),s.jsx("div",{className:"chat-encryption",children:"Los mensajes estan cifrados de extremo a extremo."})]})]}),O&&s.jsx("button",{className:"new-message-banner",type:"button",onClick:I,children:"Nuevos mensajes"}),s.jsxs("form",{className:"chat-composer",onSubmit:We,children:[Vt&&s.jsx("div",{className:"assign-warning",children:"Conversacion tomada por otro operador."}),s.jsx("div",{className:"quick-actions",children:w.map(R=>s.jsx("button",{className:"quick-action",type:"button",onClick:()=>Be(R),disabled:Vt,children:R},R))}),s.jsxs("div",{className:"composer-row",children:[s.jsxs("select",{className:"message-mode",value:T,onChange:R=>$t(R.target.value),disabled:Vt,children:[s.jsx("option",{value:"text",children:"WhatsApp"}),s.jsx("option",{value:"note",children:"Nota interna"})]}),s.jsx("input",{ref:fe,type:"text",placeholder:"Escribe un mensaje...",value:m,onChange:R=>_(R.target.value),disabled:Vt}),s.jsx("button",{className:"send-button",type:"submit",disabled:Vt,children:s.jsx(Os,{className:"icon"})})]})]})]})}),s.jsxs("aside",{className:"chat-info",children:[s.jsxs("div",{className:"info-card",children:[s.jsx("div",{className:"info-avatar",children:s.jsx("span",{children:ie(C)})}),s.jsx("div",{className:"info-name",children:C}),s.jsx("div",{className:"info-phone",children:B||"Sin telefono"}),s.jsx("button",{className:"primary",type:"button",children:"Abrir en Odoo"})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Informacion del paciente"}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Ultima visita"}),s.jsx("span",{children:y((e==null?void 0:e.last_visit_at)||(e==null?void 0:e.last_visit))})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Tratamiento actual"}),s.jsx("span",{children:(e==null?void 0:e.current_treatment)||(e==null?void 0:e.treatment)||"-"})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{children:"Alergias"}),s.jsx("span",{children:(e==null?void 0:e.allergies)||"Ninguna reportada"})]})]}),s.jsxs("div",{className:"info-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("div",{className:"section-title",children:"Etiquetas"}),s.jsx("button",{className:"link-button",type:"button",onClick:ue,children:"Gestionar"})]}),s.jsx("div",{className:"tag-list",children:((e==null?void 0:e.tags)||[]).length?e.tags.map(R=>s.jsxs("span",{className:"tag-chip",children:[s.jsx("span",{className:"tag-chip-label",children:R.name}),s.jsx("button",{className:"tag-remove",type:"button",title:"Quitar etiqueta",onClick:()=>Z(R.name),children:"x"})]},R.name)):s.jsx("div",{className:"empty-state",children:"Sin etiquetas"})}),s.jsxs("form",{className:"tag-form",onSubmit:L,children:[s.jsxs("select",{value:u,onChange:R=>setTagInput(R.target.value),children:[s.jsx("option",{value:"",children:"Selecciona etiqueta..."}),c.filter(R=>!(e!=null&&e.tagsx.some(xe=>xe.name===R.name))).map(R=>s.jsx("option",{value:R.name,children:R.name},R.id))]}),s.jsx("button",{className:"icon-button",type:"submit",title:"Agregar",children:s.jsx(me,{className:"icon"})})]})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Notas internas"}),g!=null&&g.length?s.jsx("div",{className:"notes-stack",children:g.slice(-5).map(R=>s.jsx("div",{className:"note-card",children:R.text},R.id))}):s.jsx("div",{className:"empty-state",children:"Sin notas internas"}),s.jsxs("form",{className:"note-form",onSubmit:Q,children:[s.jsx("input",{type:"text",placeholder:"Agregar nota interna...",value:f,onChange:R=>X(R.target.value),disabled:!e}),s.jsx("button",{className:"icon-button",type:"submit",title:"Guardar nota",children:s.jsx(me,{className:"icon"})})]})]}),e&&s.jsxs("div",{className:"info-section",children:[s.jsx("div",{className:"section-title",children:"Acciones"}),s.jsxs("div",{className:"action-stack",children:[s.jsx("button",{className:"ghost",type:"button",onClick:H,disabled:Vt,children:"Tomar conversacion"}),Y&&s.jsxs("div",{className:"reassign-row",children:[s.jsxs("select",{value:V,onChange:R=>ae(R.target.value),children:[s.jsx("option",{value:"",children:"Reasignar a..."}),o.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]}),s.jsx("button",{className:"ghost",type:"button",onClick:ce,disabled:!V,children:"Reasignar"})]}),Y&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"ghost",type:"button",onClick:()=>G("open"),children:"Reactivar bot"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>G("pending"),children:"Liberar para otro operador"})]})]})]})]})]})]}),Ue&&s.jsx("div",{className:"modal-overlay",onClick:pe,children:s.jsxs("div",{className:"modal-card",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:"Gestion de etiquetas"}),s.jsx("button",{className:"modal-close",type:"button",onClick:pe,children:"x"})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("form",{className:"tag-manager-form",onSubmit:ut,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:Ve.name,onChange:R=>Fe(xe=>({...xe,name:R.target.value})),placeholder:"Nombre de etiqueta"})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Color"}),s.jsx("input",{type:"color",value:Ve.color,onChange:R=>Fe(xe=>({...xe,color:R.target.value}))})]}),s.jsx("div",{className:"modal-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Crear etiqueta"})})]}),s.jsx("div",{className:"tag-manager-list",children:(c||[]).map(R=>s.jsxs("div",{className:"tag-manager-row",children:[s.jsx("span",{className:"tag-chip",style:{borderColor:R.color||"#cbd5f5"},children:s.jsx("span",{className:"tag-chip-label",children:R.name})}),s.jsx("div",{className:"tag-manager-actions",children:s.jsx("button",{className:"danger soft",type:"button",onClick:()=>Pe(R.id,R.name),children:"Eliminar"})})]},R.id))})]})]})})]})}const cy=[{day:"2024-01-01",in_count:210,out_count:90},{day:"2024-01-04",in_count:280,out_count:120},{day:"2024-01-07",in_count:240,out_count:110},{day:"2024-01-10",in_count:320,out_count:140},{day:"2024-01-13",in_count:300,out_count:130},{day:"2024-01-17",in_count:310,out_count:135},{day:"2024-01-20",in_count:290,out_count:120},{day:"2024-01-24",in_count:260,out_count:115},{day:"2024-01-27",in_count:330,out_count:150},{day:"2024-01-30",in_count:340,out_count:160}];function uy(e){const t=e?new Date(e):null;if(!t||Number.isNaN(t.getTime()))return"--";const n=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${String(t.getDate()).padStart(2,"0")} ${n[t.getMonth()].toUpperCase()}`}function Su(e){return e.length?e.map((t,n)=>`${n===0?"M":"L"}${t.x} ${t.y}`).join(" "):""}function dy({statusCounts:e,metrics:t,onRefresh:n}){var P;const r=(e.open||0)+(e.pending||0),a=t!=null&&t.avg_first_reply_seconds?Number(t.avg_first_reply_seconds)/60:null,i=a?`${a.toFixed(1)}m`:"-",l=(t==null?void 0:t.conversion_rate)??(t==null?void 0:t.conversion_rate_percent)??null,c=`${(l==null?18.4:l>1?l:l*100).toFixed(1)}%`,h=((P=t==null?void 0:t.message_volume)==null?void 0:P.length)>0?t.message_volume.slice(-10):cy,x=Math.max(...h.map(j=>j.in_count+j.out_count),1),p=h.length*42+30,y=220,A=150,m=180,T=h.map((j,O)=>{const B=(j.in_count+j.out_count)/x*A,U=j.in_count/x*A,Y=j.out_count/x*A;return{x:22+O*42,totalHeight:B,inHeight:U,outHeight:Y}}),w=Su(T.map((j,O)=>({x:j.x+10,y:m-j.inHeight}))),u=Su(T.map(j=>({x:j.x+10,y:m-j.outHeight}))),f=Array.from(new Set([0,Math.floor(h.length/3),Math.floor(2*h.length/3),h.length-1])),g=Math.round((t==null?void 0:t.team_efficiency)||94),k=((t==null?void 0:t.top_tags)||[]).slice(0,3);return s.jsxs("section",{className:"dashboard-layout",children:[s.jsxs("div",{className:"dashboard-main",children:[s.jsxs("header",{className:"dashboard-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kicker",children:"PODOPIE Enterprise"}),s.jsx("h2",{className:"dashboard-title",children:"Dashboard"}),s.jsx("div",{className:"dashboard-subtitle",children:"Marketing Analytics & WhatsApp CRM Overview"})]}),s.jsxs("div",{className:"dashboard-actions",children:[s.jsxs("button",{className:"dash-filter",type:"button",children:[s.jsx("span",{className:"dash-filter-icon","aria-hidden":"true"}),"Ultimos 30 dias"]}),s.jsx("button",{className:"primary",type:"button",onClick:n,children:"Generar Reporte"})]})]}),s.jsxs("div",{className:"dashboard-kpis",children:[s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Conversaciones activas"}),s.jsx("div",{className:"dash-kpi-value",children:r.toLocaleString()})]}),s.jsx("div",{className:"dash-kpi-icon",children:"C"})]}),s.jsx("div",{className:"dash-kpi-change up",children:"+12.5%"})]}),s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Tiempo de respuesta"}),s.jsx("div",{className:"dash-kpi-value",children:i})]}),s.jsx("div",{className:"dash-kpi-icon",children:"T"})]}),s.jsx("div",{className:"dash-kpi-change down",children:"-0.8m"})]}),s.jsxs("div",{className:"dash-kpi",children:[s.jsxs("div",{className:"dash-kpi-top",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-kpi-label",children:"Tasa de conversion"}),s.jsx("div",{className:"dash-kpi-value",children:c})]}),s.jsx("div",{className:"dash-kpi-icon",children:"%"})]}),s.jsx("div",{className:"dash-kpi-change up",children:"+2.1%"})]})]}),s.jsxs("div",{className:"dash-card dash-chart-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-card-title",children:"Flujo de Mensajes"}),s.jsx("div",{className:"dash-card-subtitle",children:"Volumen diario"})]}),s.jsxs("div",{className:"dash-legend",children:[s.jsxs("span",{className:"dash-legend-item",children:[s.jsx("span",{className:"dash-legend-dot in"})," Entrantes"]}),s.jsxs("span",{className:"dash-legend-item",children:[s.jsx("span",{className:"dash-legend-dot out"})," Salientes"]})]})]}),s.jsx("div",{className:"dash-chart",children:s.jsxs("svg",{className:"dash-chart-svg",viewBox:`0 0 ${p} ${y}`,preserveAspectRatio:"none",children:[s.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"60",x2:p,y2:"60"}),s.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"120",x2:p,y2:"120"}),T.map((j,O)=>s.jsxs("g",{children:[s.jsx("rect",{className:"dash-bar in",x:j.x,y:m-j.inHeight,width:"20",height:j.inHeight,rx:"6"}),s.jsx("rect",{className:"dash-bar out",x:j.x,y:m-j.inHeight-j.outHeight,width:"20",height:j.outHeight,rx:"6"})]},`bar-${O}`)),s.jsx("path",{className:"dash-line in",d:w}),s.jsx("path",{className:"dash-line out",d:u})]})}),s.jsx("div",{className:"dash-chart-labels",children:f.map(j=>{var O;return s.jsx("span",{children:uy((O=h[j])==null?void 0:O.day)},`label-${j}`)})})]}),s.jsxs("div",{className:"dashboard-lower",children:[s.jsxs("div",{className:"dash-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsx("div",{className:"dash-card-title",children:"Ultimas etiquetas detectadas"}),s.jsx("button",{className:"link-button",type:"button",children:"Ver todo"})]}),s.jsxs("div",{className:"dash-tag-table",children:[s.jsxs("div",{className:"dash-tag-head",children:[s.jsx("span",{children:"Etiqueta"}),s.jsx("span",{children:"Frecuencia"}),s.jsx("span",{children:"Accion"})]}),k.map(j=>s.jsxs("div",{className:"dash-tag-row",children:[s.jsx("span",{className:"dash-tag-chip",children:j.name}),s.jsx("span",{className:"dash-tag-count",children:j.count}),s.jsx("span",{className:"dash-tag-action",children:">"})]},j.name)),!k.length&&s.jsx("div",{className:"empty-state",children:"Sin etiquetas recientes"})]})]}),s.jsxs("div",{className:"dash-card",children:[s.jsxs("div",{className:"dash-card-header",children:[s.jsx("div",{className:"dash-card-title",children:"Actividad de Campana"}),s.jsx("span",{className:"dash-pill",children:"Monitor"})]}),s.jsxs("div",{className:"dash-campaign",children:[s.jsx("div",{className:"dash-campaign-title",children:'Campana de Verano "Pies Sanos"'}),s.jsxs("div",{className:"dash-campaign-meta",children:[s.jsx("span",{className:"dash-pill solid",children:"84% enviado"}),s.jsx("span",{className:"dash-muted",children:"Hace 2 horas"})]}),s.jsx("div",{className:"dash-progress",children:s.jsx("div",{className:"dash-progress-fill",style:{width:"84%"}})}),s.jsx("div",{className:"dash-muted",children:"1,240 destinatarios"})]})]})]})]}),s.jsxs("aside",{className:"dashboard-side",children:[s.jsxs("div",{className:"dash-card",children:[s.jsx("div",{className:"dash-card-title",children:"Performance de Operadores"}),s.jsx("div",{className:"dash-card-subtitle",children:"Top 5 leaderboard - hoy"}),s.jsx("div",{className:"dash-operator-list",children:[{name:"Lucia Fernandez",role:"Especialista CRM",resolved:84,pending:3},{name:"Ricardo Gomez",role:"Atencion Pacientes",resolved:71,pending:8},{name:"Ana Martinez",role:"Soporte Medico",resolved:65,pending:12}].map(j=>s.jsxs("div",{className:"dash-operator",children:[s.jsx("div",{className:"dash-operator-avatar",children:j.name[0]}),s.jsxs("div",{className:"dash-operator-meta",children:[s.jsx("div",{className:"dash-operator-name",children:j.name}),s.jsx("div",{className:"dash-operator-role",children:j.role}),s.jsxs("div",{className:"dash-operator-stats",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dash-stat-label",children:"Resueltos"}),s.jsx("div",{className:"dash-stat-value",children:j.resolved})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dash-stat-label",children:"Pendientes"}),s.jsx("div",{className:"dash-stat-value danger",children:j.pending})]})]})]})]},j.name))})]}),s.jsxs("div",{className:"dash-card",children:[s.jsx("div",{className:"dash-card-title",children:"Eficiencia de Equipo"}),s.jsxs("div",{className:"dash-efficiency",children:[s.jsxs("div",{className:"dash-efficiency-value",children:[g,"%"]}),s.jsx("div",{className:"dash-progress",children:s.jsx("div",{className:"dash-progress-fill",style:{width:`${g}%`}})}),s.jsx("div",{className:"dash-muted",children:"Objetivo diario: 500 conversiones"})]})]})]})]})}const hy={draft:"BORRADOR",scheduled:"PROGRAMADA",sending:"ENVIANDO",sent:"FINALIZADA",failed:"ERROR"};function fy({campaignForm:e,setCampaignForm:t,campaignFilter:n,setCampaignFilter:r,templates:a,campaigns:i,selectedCampaignId:l,campaignMessages:o,users:c,tags:h,selectedTemplate:x,statusOptions:p,onCreateCampaign:y,onLoadCampaigns:A,onLoadCampaignMessages:m,onSendCampaign:T,formatDate:w}){const[u,f]=v.useState(""),[g,k]=v.useState(!1),{pushToast:P}=Xo(),[j,O]=v.useState(!1),[C,B]=v.useState(!1),[U,Y]=v.useState(!1),[le,fe]=v.useState(!1),[ye,we]=v.useState(null),[se,Ee]=v.useState({name:"",description:"",rules:[]}),[z,W]=v.useState(!1),[S,H]=v.useState([]),[G,Z]=v.useState(!1),[L,X]=v.useState(null),[Q,V]=v.useState([]);v.useEffect(()=>{ae(),ce()},[]);async function ae(){try{const _=await de("/api/audiences");_&&_.segments&&V(_.segments)}catch(_){console.error("Failed to load segments",_)}}async function ce(){try{const _=await de("/api/contacts/stats");X(_||null)}catch(_){console.error("Failed to load Odoo stats",_),X(null)}}async function ue(){fe(!0),we(null);try{const _=await je("/api/contacts/import-odoo",{source:"odoo"});we(_),ae(),ce(),P({message:"Contactos importados correctamente"})}catch(_){we({error:_.message||"Error al importar"}),P({type:"error",message:_.message||"Error al importar contactos"})}finally{fe(!1)}}async function pe(_){if(_.preventDefault(),!!se.name.trim()){W(!0);try{await je("/api/audiences",{name:se.name,description:se.description,rules_json:se.rules.length?se.rules:[{field:"all",operator:"eq",value:!0}]}),B(!1),Ee({name:"",description:"",rules:[]}),ae(),P({message:"Segmento creado correctamente"})}catch(I){P({type:"error",message:I.message||"No se pudo crear el segmento"})}finally{W(!1)}}}async function Ue(){Z(!0);try{const _=await de("/api/contacts");H((_==null?void 0:_.contacts)||[])}catch(_){console.error("Failed to load contacts",_)}finally{Z(!1)}}function Ve(){Y(!0),Ue()}const Fe=v.useMemo(()=>{const _={id:"odoo",name:"odoo",subtitle:"Origen: Odoo",count:(L==null?void 0:L.total)||0,type:"odoo"},I=(h||[]).slice(0,6).map((me,He)=>({id:me.id||`tag-${me.name}-${He}`,name:me.name,subtitle:"Segmento por etiqueta",count:me.count||me.total||0,type:"tag"})),ie=Q.map(me=>({id:me.id,name:me.name,subtitle:me.description||"Segmento personalizado",count:me.estimated_count||0,type:"custom"}));return[_,...ie,...I]},[h,Q,L]),ut=v.useMemo(()=>{const _=u.trim().toLowerCase();return _?a.filter(I=>{var He,Ut;const ie=((He=I.name)==null?void 0:He.toLowerCase())||"",me=((Ut=I.category)==null?void 0:Ut.toLowerCase())||"";return ie.includes(_)||me.includes(_)}):a},[u,a]),Pe=v.useMemo(()=>Fe.find(_=>_.name===n.tag),[Fe,n.tag]),Be=v.useMemo(()=>n.tag?`tag:${n.tag}`:n.assigned_user_id?`assigned:${n.assigned_user_id}`:n.status?`status:${n.status}`:n.verified_only?"verified":"",[n]);function We(_){r(I=>{const ie={...I,status:"",tag:"",assigned_user_id:"",verified_only:!1};return _.startsWith("tag:")?ie.tag=_.slice(4):_.startsWith("status:")?ie.status=_.slice(7):_.startsWith("assigned:")?ie.assigned_user_id=_.slice(9):_==="verified"&&(ie.verified_only=!0),ie})}function $t(_){t(I=>({...I,template_id:_}))}return s.jsxs("section",{className:"campaigns-page",children:[s.jsxs("header",{className:"campaigns-header",children:[s.jsxs("div",{className:"campaigns-title",children:[s.jsx("span",{className:"campaigns-mark"}),s.jsxs("div",{children:[s.jsxs("div",{className:"campaigns-title-row",children:[s.jsx("span",{className:"campaigns-brand",children:"PODOPIE"}),s.jsx("span",{className:"campaigns-divider"}),s.jsx("span",{className:"campaigns-heading",children:"Campaigns"})]}),s.jsx("div",{className:"campaigns-subtitle",children:"Gestion de envios masivos y audiencias para CRM WhatsApp"})]})]}),s.jsxs("div",{className:"campaigns-actions",children:[s.jsx("button",{className:"campaigns-ghost",type:"button",onClick:()=>O(!0),children:"Importar Contactos"}),s.jsx("button",{className:"campaigns-danger",type:"button",onClick:()=>B(!0),children:"+ Nuevo Segmento"})]})]}),j&&s.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:s.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Importar Contactos"}),s.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsx("p",{children:"Importar contactos desde Odoo (pacientes y partners)"}),ye&&s.jsx("div",{className:`import-result ${ye.error?"error":"success"}`,children:ye.error?s.jsxs("span",{children:[" ",ye.error]}):s.jsxs("span",{children:[" Importados: ",ye.imported||0," contactos (",ye.new||0," nuevos, ",ye.updated||0," actualizados)"]})}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{className:"btn-primary",onClick:ue,disabled:le,children:le?"Importando...":" Importar desde Odoo"}),s.jsx("button",{className:"btn-secondary",onClick:Ve,children:" Ver Contactos Existentes"})]})]})]})}),C&&s.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:s.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Nuevo Segmento"}),s.jsx("button",{className:"modal-close",onClick:()=>B(!1),children:""})]}),s.jsxs("form",{className:"modal-body",onSubmit:pe,children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Nombre del Segmento"}),s.jsx("input",{type:"text",placeholder:"Ej: Pacientes Onicomicosis",value:se.name,onChange:_=>Ee({...se,name:_.target.value}),required:!0})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Descripcin"}),s.jsx("textarea",{placeholder:"Descripcin opcional...",value:se.description,onChange:_=>Ee({...se,description:_.target.value}),rows:"2"})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("span",{children:"Reglas de Filtro"}),s.jsxs("select",{onChange:_=>{_.target.value&&Ee({...se,rules:[...se.rules,{field:_.target.value,operator:"eq",value:""}]})},children:[s.jsx("option",{value:"",children:"+ Agregar filtro..."}),s.jsx("option",{value:"is_patient",children:"Es paciente"}),s.jsx("option",{value:"has_phone",children:"Tiene telfono"}),s.jsx("option",{value:"tag",children:"Tiene etiqueta"})]}),se.rules.map((_,I)=>s.jsxs("div",{className:"filter-rule",children:[s.jsx("span",{className:"rule-badge",children:_.field}),s.jsx("button",{type:"button",onClick:()=>{Ee({...se,rules:se.rules.filter((ie,me)=>me!==I)})},children:""})]},I))]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{type:"button",className:"btn-ghost",onClick:()=>B(!1),children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn-primary",disabled:z,children:z?"Guardando...":"Crear Segmento"})]})]})]})}),U&&s.jsx("div",{className:"modal-overlay",onClick:()=>Y(!1),children:s.jsxs("div",{className:"modal-content modal-large",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsxs("h2",{children:["Contactos (",S.length,")"]}),s.jsx("button",{className:"modal-close",onClick:()=>Y(!1),children:""})]}),s.jsx("div",{className:"modal-body",children:G?s.jsx("div",{className:"loading",children:"Cargando contactos..."}):S.length===0?s.jsx("div",{className:"empty-state",children:"No hay contactos. Importa desde Odoo."}):s.jsxs("div",{className:"contacts-table",children:[s.jsxs("div",{className:"contacts-header",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Telfono"}),s.jsx("span",{children:"Email"}),s.jsx("span",{children:"Tipo"})]}),S.slice(0,50).map(_=>s.jsxs("div",{className:"contacts-row",children:[s.jsx("span",{children:_.name}),s.jsx("span",{children:_.phone_e164||"-"}),s.jsx("span",{children:_.email||"-"}),s.jsx("span",{className:"contact-type",children:_.is_patient?"Paciente":"Contacto"})]},_.id)),S.length>50&&s.jsxs("div",{className:"contacts-more",children:["...y ",S.length-50," ms"]})]})})]})}),s.jsxs("div",{className:"campaigns-layout",children:[s.jsxs("aside",{className:"campaigns-audiences",children:[s.jsx("div",{className:"campaigns-section-title",children:"Mis audiencias"}),s.jsx("div",{className:"audience-list",children:Fe.map(_=>s.jsxs("button",{type:"button",className:`audience-card ${n.tag===_.name?"active":""}`,onClick:()=>{if(_.type==="odoo"){Ve();return}r(I=>({...I,tag:_.name}))},children:[s.jsxs("div",{className:"audience-title",children:[s.jsx("span",{children:_.name}),s.jsx("span",{className:"audience-count",children:_.count})]}),s.jsx("div",{className:"audience-subtitle",children:_.subtitle})]},_.id))})]}),s.jsxs("div",{className:"campaigns-templates",children:[s.jsxs("div",{className:"campaigns-section-header",children:[s.jsx("div",{className:"campaigns-section-title",children:"Plantillas Meta (HSM)"}),s.jsxs("div",{className:"template-search",children:[s.jsx("span",{className:"template-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar plantilla...",value:u,onChange:_=>f(_.target.value)})]})]}),s.jsxs("div",{className:"template-grid",children:[ut.map(_=>{const I=_.is_active?"APROBADA":"PENDIENTE",ie=_.is_active?"approved":"pending",me=(_.category||"Marketing").toUpperCase(),He=_.id===e.template_id;return s.jsxs("div",{className:`template-card ${He?"selected":""}`,children:[s.jsxs("div",{className:"template-head",children:[s.jsx("div",{className:"template-name",children:_.name}),s.jsx("span",{className:`template-status ${ie}`,children:I})]}),s.jsx("div",{className:"template-category",children:me}),s.jsx("div",{className:"template-preview",children:_.body_preview||"Sin preview"}),s.jsx("button",{className:"template-action",type:"button",onClick:()=>$t(_.id),children:"Previsualizar"})]},_.id)}),!ut.length&&s.jsx("div",{className:"empty-state",children:"Sin plantillas disponibles"})]})]}),s.jsxs("aside",{className:"campaigns-create",children:[s.jsx("div",{className:"campaigns-section-title",children:"Nueva campana"}),s.jsxs("form",{className:"campaigns-form",onSubmit:y,children:[s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Nombre de campana"}),s.jsx("input",{type:"text",placeholder:"Ej: Promo Onicomicosis Mar",value:e.name,onChange:_=>t(I=>({...I,name:_.target.value}))})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Seleccionar audiencia"}),s.jsxs("select",{value:Be,onChange:_=>We(_.target.value),children:[s.jsx("option",{value:"",children:"Selecciona un segmento..."}),Fe.filter(_=>_.type!=="odoo").map(_=>s.jsx("option",{value:`tag:${_.name}`,children:_.name},`seg-${_.id}`)),s.jsx("option",{value:"verified",children:"Solo verificados"}),s.jsx("option",{value:"assigned:unassigned",children:"Sin asignar"}),p.map(_=>s.jsxs("option",{value:`status:${_}`,children:["Status: ",_]},`status-${_}`))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Plantilla Meta"}),s.jsxs("select",{value:e.template_id,onChange:_=>t(I=>({...I,template_id:_.target.value})),children:[s.jsx("option",{value:"",children:"Selecciona plantilla..."}),a.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Programacion"}),s.jsx("input",{type:"datetime-local",value:e.scheduled_for,onChange:_=>t(I=>({...I,scheduled_for:_.target.value}))})]}),s.jsx("button",{className:"campaigns-advanced-toggle",type:"button",onClick:()=>k(_=>!_),children:g?"Ocultar filtros avanzados":"Filtros avanzados"}),g&&s.jsxs("div",{className:"campaigns-advanced",children:[s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Status filtro"}),s.jsxs("select",{value:n.status,onChange:_=>r(I=>({...I,status:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),p.map(_=>s.jsx("option",{value:_,children:_},_))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Asignado"}),s.jsxs("select",{value:n.assigned_user_id,onChange:_=>r(I=>({...I,assigned_user_id:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"unassigned",children:"Sin asignar"}),c.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-field",children:[s.jsx("span",{children:"Tag"}),s.jsxs("select",{value:n.tag,onChange:_=>r(I=>({...I,tag:_.target.value})),children:[s.jsx("option",{value:"",children:"Todos"}),h.map(_=>s.jsx("option",{value:_.name,children:_.name},_.id))]})]}),s.jsxs("label",{className:"campaigns-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.verified_only,onChange:_=>r(I=>({...I,verified_only:_.target.checked}))}),"Solo verificados"]})]}),s.jsx("button",{className:"campaigns-launch",type:"submit",children:"Lanzar Campana"}),s.jsxs("div",{className:"campaigns-hint",children:["Se enviaran aproximadamente"," ",s.jsx("strong",{children:(Pe==null?void 0:Pe.count)||0})," mensajes HSM"]}),s.jsx("div",{className:"campaigns-preview-box",children:(x==null?void 0:x.body_preview)||"Selecciona una plantilla para ver preview"})]})]})]}),s.jsxs("section",{className:"campaigns-history",children:[s.jsxs("div",{className:"campaigns-history-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"campaigns-history-title",children:"Historial de Envios"}),s.jsx("div",{className:"campaigns-history-subtitle",children:"Ultimos 30 dias"})]}),s.jsx("button",{className:"campaigns-link",type:"button",onClick:A,children:"Ver todo el historial"})]}),s.jsxs("div",{className:"history-table",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("span",{children:"Campana / Fecha"}),s.jsx("span",{children:"Alcance"}),s.jsx("span",{children:"Tasa de lectura"}),s.jsx("span",{children:"Respuestas"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Acciones"})]}),i.map(_=>{const I=hy[_.status]||_.status,ie=_.audience_count||_.messages_count||_.total||"--";return s.jsxs("div",{className:"history-row",children:[s.jsxs("div",{className:"history-title",children:[s.jsx("div",{className:"history-name",children:_.name}),s.jsx("div",{className:"history-date",children:w(_.created_at)})]}),s.jsxs("div",{className:"history-metric",children:[s.jsx("div",{className:"history-value",children:ie}),s.jsx("div",{className:"history-label",children:"contactos"})]}),s.jsxs("div",{className:"history-meter",children:[s.jsx("div",{className:"history-value",children:"--"}),s.jsx("div",{className:"history-bar",children:s.jsx("div",{className:"history-bar-fill",style:{width:"0%"}})})]}),s.jsxs("div",{className:"history-metric",children:[s.jsx("div",{className:"history-value",children:"--"}),s.jsx("div",{className:"history-label",children:"mensajes"})]}),s.jsx("div",{className:`history-status ${_.status}`,children:I}),s.jsxs("div",{className:"history-actions",children:[s.jsx("button",{className:"campaigns-ghost small",type:"button",onClick:()=>m(_.id),children:"Ver mensajes"}),s.jsx("button",{className:"campaigns-danger small",type:"button",onClick:()=>T(_.id),disabled:_.status==="sending",children:"Enviar"})]})]},_.id)}),!i.length&&s.jsx("div",{className:"empty-state",children:"Sin campanas registradas"})]}),l&&s.jsxs("div",{className:"campaigns-messages",children:[s.jsx("div",{className:"campaigns-history-title",children:"Mensajes"}),s.jsxs("div",{className:"history-table",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("span",{children:"WA"}),s.jsx("span",{children:"Status"}),s.jsx("span",{children:"Enviado"})]}),o.map(_=>s.jsxs("div",{className:"history-row",children:[s.jsx("span",{children:_.wa_id}),s.jsx("span",{children:_.status}),s.jsx("span",{children:w(_.sent_at)})]},_.id))]})]})]})]})}const py={admin:{title:"Administrador",subtitle:"Acceso total",tone:"alert"},recepcion:{title:"Operador",subtitle:"Atencion al cliente",tone:"info"},caja:{title:"Supervisor",subtitle:"Auditoria y gestion",tone:"dark"},marketing:{title:"Marketing",subtitle:"Crecimiento y campanas",tone:"info"},doctor:{title:"Doctor",subtitle:"Atencion al cliente",tone:"dark"}},Eu=[{id:"chat",label:"Chat"},{id:"dashboard",label:"Dashboard"},{id:"campaigns",label:"Campanas"}],Cu=[{id:"general",label:"General"},{id:"users",label:"Gestion de Usuarios"},{id:"bot",label:"Configuracion de Bot"},{id:"templates",label:"Plantillas de Meta"},{id:"audit",label:"Registros / Auditoria"},{id:"odoo",label:"Integracion Odoo"}];function bu(e){return py[e]||{title:e,subtitle:"Acceso personalizado",tone:"info"}}function my({settingsTab:e,setSettingsTab:t,rolePermissions:n,setRolePermissions:r,isAdmin:a,adminUsers:i,userForm:l,setUserForm:o,roleOptions:c,handleUserSubmit:h,handleUserDelete:x,defaultRolePermissions:p,handleRoleDelete:y}){const[A,m]=v.useState(""),[T,w]=v.useState(!1),[u,f]=v.useState(""),[g,k]=v.useState(null),[P,j]=v.useState(!1),[O,C]=v.useState("create"),[B,U]=v.useState("recepcion"),[Y,le]=v.useState({modules:{},settings:{}}),fe=v.useMemo(()=>{const L=A.trim().toLowerCase(),X=i||[];return L?X.filter(Q=>{var ce,ue;const V=((ce=Q.name)==null?void 0:ce.toLowerCase())||"",ae=((ue=Q.email)==null?void 0:ue.toLowerCase())||"";return V.includes(L)||ae.includes(L)}):X},[i,A]);function ye(L){const X=(n==null?void 0:n[L])||(p==null?void 0:p[L])||{modules:{},settings:{}};return{modules:{...X.modules||{}},settings:{...X.settings||{}}}}function we(L,X="edit"){C(X),U(L),le(ye(L)),j(!0)}function se(L,X,Q){le(V=>{const ae={...V},ce={...ae[L]||{}},ue={...ce[X]||{}},pe=!ue[Q];return ue[Q]=pe,Q==="write"&&pe&&(ue.read=!0),Q==="read"&&!pe&&(ue.write=!1),ce[X]=ue,ae[L]=ce,ae})}function Ee(){B&&(r(L=>({...L,[B]:Y})),j(!1))}function z(){B&&y&&y(B),j(!1)}function W(L,X,Q,V){a&&r(ae=>{var Fe,ut;const ce={...ae},ue={modules:{...(Fe=ce[L])==null?void 0:Fe.modules},settings:{...(ut=ce[L])==null?void 0:ut.settings}},pe={...ue[X]},Ue={...pe[Q]},Ve=!Ue[V];return Ue[V]=Ve,V==="write"&&Ve&&(Ue.read=!0),V==="read"&&!Ve&&(Ue.write=!1),pe[Q]=Ue,ue[X]=pe,ce[L]=ue,ce})}function S(L){return bu(L).title.toUpperCase()}function H(L,X){return L!=null&&L.id?`OP-${L.id.slice(-4).toUpperCase()}`:`OP-${String(X+1).padStart(4,"0")}`}function G(L){o({id:L.id,name:L.name,email:L.email,role:L.role,password:"",is_active:L.is_active}),w(!0)}function Z(){o({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),w(!0)}return s.jsxs("div",{className:"users-page",children:[s.jsxs("header",{className:"users-header",children:[s.jsxs("div",{className:"users-title-row",children:[s.jsx("span",{className:"users-kicker"}),s.jsxs("div",{children:[s.jsx("div",{className:"users-title",children:"Gestion de Usuarios"}),s.jsx("div",{className:"users-subtitle",children:"Administra los accesos y roles de los operadores de tu empresa."})]})]}),s.jsxs("div",{className:"users-actions",children:[e==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"users-search",children:[s.jsx("span",{className:"users-search-icon","aria-hidden":"true"}),s.jsx("input",{type:"text",placeholder:"Buscar usuario...",value:A,onChange:L=>m(L.target.value)})]}),s.jsx("button",{className:"settings-primary",type:"button",onClick:Z,children:"Nuevo Usuario"})]}),e==="roles"&&s.jsx("button",{className:"settings-primary",type:"button",onClick:()=>we("recepcion","create"),children:"+ Nuevo Rol"})]})]}),s.jsxs("div",{className:"users-tabs",children:[s.jsx("button",{className:`users-tab ${e==="list"?"active":""}`,type:"button",onClick:()=>t("list"),children:"Lista de Usuarios"}),s.jsx("button",{className:`users-tab ${e==="roles"?"active":""}`,type:"button",onClick:()=>t("roles"),children:"Roles y Permisos"})]}),e==="list"&&s.jsxs("div",{className:"users-table",children:[s.jsxs("div",{className:"users-table-head",children:[s.jsx("span",{children:"Nombre / Usuario"}),s.jsx("span",{children:"Email"}),s.jsx("span",{children:"Rol"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Acciones"})]}),fe.map((L,X)=>{var Q;return s.jsxs("div",{className:"users-row",children:[s.jsxs("div",{className:"users-cell user-name",children:[s.jsx("div",{className:"user-avatar",children:((Q=L.name)==null?void 0:Q[0])||"?"}),s.jsxs("div",{children:[s.jsx("div",{className:"user-title",children:L.name}),s.jsx("div",{className:"user-id",children:H(L,X)})]})]}),s.jsx("div",{className:"users-cell",children:L.email}),s.jsx("div",{className:"users-cell",children:s.jsx("span",{className:`role-pill ${L.role}`,children:S(L.role)})}),s.jsx("div",{className:"users-cell",children:s.jsx("span",{className:`status-pill ${L.is_active?"active":"inactive"}`,children:L.is_active?"Activo":"Inactivo"})}),s.jsx("div",{className:"users-cell",children:s.jsxs("div",{className:"users-actions-menu",children:[s.jsx("button",{className:"users-action",type:"button",onClick:()=>f(V=>V===L.id?"":L.id),children:"..."}),u===L.id&&s.jsxs("div",{className:"users-menu",children:[s.jsx("button",{type:"button",onClick:()=>{f(""),G(L)},children:"Editar"}),s.jsx("button",{type:"button",onClick:()=>{f(""),k(L)},children:"Eliminar"})]})]})})]},L.id)}),!fe.length&&s.jsx("div",{className:"empty-state",children:"Sin usuarios para mostrar"})]}),e==="roles"&&s.jsx("div",{className:"roles-grid",children:c.map(L=>{const X=bu(L),Q=n==null?void 0:n[L];return s.jsxs("div",{className:"role-card",children:[s.jsxs("div",{className:"role-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"role-title",children:X.title}),s.jsx("div",{className:`role-subtitle ${X.tone}`,children:X.subtitle})]}),s.jsx("button",{className:"role-edit",type:"button",onClick:()=>we(L,"edit"),children:"edit"})]}),s.jsxs("div",{className:"role-permissions",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Eu.map(V=>{var ae,ce,ue,pe;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:V.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ce=(ae=Q==null?void 0:Q.modules)==null?void 0:ae[V.id])==null?void 0:ce.read)||!1,disabled:!a,onChange:()=>W(L,"modules",V.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((pe=(ue=Q==null?void 0:Q.modules)==null?void 0:ue[V.id])==null?void 0:pe.write)||!1,disabled:!a,onChange:()=>W(L,"modules",V.id,"write")}),s.jsx("span",{})]})]},V.id)})]}),s.jsxs("div",{className:"role-settings",children:[s.jsx("div",{className:"role-settings-title",children:"Configuracion"}),Cu.map(V=>{var ae,ce,ue,pe;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:V.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ce=(ae=Q==null?void 0:Q.settings)==null?void 0:ae[V.id])==null?void 0:ce.read)||!1,disabled:!a,onChange:()=>W(L,"settings",V.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((pe=(ue=Q==null?void 0:Q.settings)==null?void 0:ue[V.id])==null?void 0:pe.write)||!1,disabled:!a,onChange:()=>W(L,"settings",V.id,"write")}),s.jsx("span",{})]})]},V.id)})]})]},L)})}),T&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:l.id?"Editar usuario":"Crear usuario"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>w(!1),children:"x"})]}),s.jsxs("form",{className:"form-grid",onSubmit:async L=>{await h(L),w(!1)},children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:l.name,onChange:L=>o(X=>({...X,name:L.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:l.email,onChange:L=>o(X=>({...X,email:L.target.value})),disabled:!!l.id})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Rol"}),s.jsx("select",{value:l.role,onChange:L=>o(X=>({...X,role:L.target.value})),children:c.map(L=>s.jsx("option",{value:L,children:L},L))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Password"}),s.jsx("input",{type:"password",value:l.password,onChange:L=>o(X=>({...X,password:L.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_active,onChange:L=>o(X=>({...X,is_active:L.target.checked}))}),"Activo"]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"primary",type:"submit",children:l.id?"Guardar cambios":"Crear"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>w(!1),children:"Cancelar"})]})]})]})}),g&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:"Eliminar usuario"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>k(null),children:"x"})]}),s.jsxs("p",{className:"modal-text",children:["Vas a desactivar a ",s.jsx("strong",{children:g.email}),". Continuar?"]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"danger",type:"button",onClick:()=>{x==null||x(g.id),k(null)},children:"Eliminar"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>k(null),children:"Cancelar"})]})]})}),P&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card modal-lg",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("div",{className:"modal-title",children:O==="create"?"Nuevo rol":"Editar rol"}),s.jsx("button",{className:"modal-close",type:"button",onClick:()=>j(!1),children:"x"})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Rol"}),O==="edit"?s.jsx("select",{value:B,disabled:!0,children:c.map(L=>s.jsx("option",{value:L,children:L},L))}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",list:"role-options",placeholder:"nuevo-rol",value:B,onChange:L=>U(L.target.value)}),s.jsx("datalist",{id:"role-options",children:c.map(L=>s.jsx("option",{value:L},L))})]})]}),s.jsxs("div",{className:"role-permissions",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{children:"Modulos"}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Eu.map(L=>{var X,Q,V,ae;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:L.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((Q=(X=Y==null?void 0:Y.modules)==null?void 0:X[L.id])==null?void 0:Q.read)||!1,onChange:()=>se("modules",L.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ae=(V=Y==null?void 0:Y.modules)==null?void 0:V[L.id])==null?void 0:ae.write)||!1,onChange:()=>se("modules",L.id,"write")}),s.jsx("span",{})]})]},L.id)})]}),s.jsxs("div",{className:"role-settings",children:[s.jsxs("div",{className:"perm-head",children:[s.jsx("span",{children:"Configuracion"}),s.jsx("span",{children:"Lectura"}),s.jsx("span",{children:"Escritura"})]}),Cu.map(L=>{var X,Q,V,ae;return s.jsxs("div",{className:"perm-row",children:[s.jsx("span",{children:L.label}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((Q=(X=Y==null?void 0:Y.settings)==null?void 0:X[L.id])==null?void 0:Q.read)||!1,onChange:()=>se("settings",L.id,"read")}),s.jsx("span",{})]}),s.jsxs("label",{className:"perm-toggle",children:[s.jsx("input",{type:"checkbox",checked:((ae=(V=Y==null?void 0:Y.settings)==null?void 0:V[L.id])==null?void 0:ae.write)||!1,onChange:()=>se("settings",L.id,"write")}),s.jsx("span",{})]})]},L.id)})]})]}),s.jsxs("div",{className:"form-actions",children:[O==="edit"&&s.jsx("button",{className:"danger",type:"button",onClick:z,children:"Eliminar rol"}),s.jsx("button",{className:"primary",type:"button",onClick:Ee,disabled:!B,children:"Guardar"}),s.jsx("button",{className:"ghost",type:"button",onClick:()=>j(!1),children:"Cancelar"})]})]})})]})}function gy({branches:e,branchForm:t,setBranchForm:n,handleBranchSubmit:r,handleBranchDisable:a,services:i,serviceForm:l,setServiceForm:o,handleServiceSubmit:c,handleServiceDisable:h,handleServiceBranchToggle:x,tenantChannels:p,channelForm:y,setChannelForm:A,handleChannelSelect:m,handleChannelSubmit:T}){return s.jsxs("div",{className:"page-grid",children:[s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Sucursales"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Codigo"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Accion"})]}),e.map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.name}),s.jsx("span",{children:w.code}),s.jsx("span",{children:w.is_active?"Activa":"Inactiva"}),s.jsxs("div",{className:"row-actions",children:[s.jsx("button",{className:"ghost",onClick:()=>n({id:w.id,code:w.code,name:w.name,address:w.address,lat:w.lat,lng:w.lng,hours_text:w.hours_text,phone:w.phone||"",is_active:w.is_active}),children:"Editar"}),s.jsx("button",{className:"danger",onClick:()=>a(w.id),children:"Desactivar"})]})]},w.id))]}),s.jsx("div",{className:"panel-title",children:t.id?"Editar sucursal":"Crear sucursal"}),s.jsxs("form",{className:"form-grid",onSubmit:r,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Codigo"}),s.jsx("input",{type:"text",value:t.code,onChange:w=>n(u=>({...u,code:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:t.name,onChange:w=>n(u=>({...u,name:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Direccion"}),s.jsx("input",{type:"text",value:t.address,onChange:w=>n(u=>({...u,address:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Lat"}),s.jsx("input",{type:"number",value:t.lat,onChange:w=>n(u=>({...u,lat:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Lng"}),s.jsx("input",{type:"number",value:t.lng,onChange:w=>n(u=>({...u,lng:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Telefono"}),s.jsx("input",{type:"text",value:t.phone,onChange:w=>n(u=>({...u,phone:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Horarios"}),s.jsx("textarea",{rows:"3",value:t.hours_text,onChange:w=>n(u=>({...u,hours_text:w.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:t.is_active,onChange:w=>n(u=>({...u,is_active:w.target.checked}))}),"Activa"]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Servicios"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Servicio"}),s.jsx("span",{children:"Precio"}),s.jsx("span",{children:"Estado"}),s.jsx("span",{children:"Accion"})]}),i.map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.name}),s.jsxs("span",{children:["Bs ",w.price_bob]}),s.jsx("span",{children:w.is_active?"Activo":"Inactivo"}),s.jsxs("div",{className:"row-actions",children:[s.jsx("button",{className:"ghost",onClick:()=>o({id:w.id,code:w.code,name:w.name,subtitle:w.subtitle||"",description:w.description,price_bob:w.price_bob,duration_min:w.duration_min||"",image_url:w.image_url||"",is_featured:w.is_featured,is_active:w.is_active}),children:"Editar"}),s.jsx("button",{className:"danger",onClick:()=>h(w.id),children:"Desactivar"})]})]},w.id))]}),s.jsx("div",{className:"panel-title",children:l.id?"Editar servicio":"Crear servicio"}),s.jsxs("form",{className:"form-grid",onSubmit:c,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Codigo"}),s.jsx("input",{type:"text",value:l.code,onChange:w=>o(u=>({...u,code:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre"}),s.jsx("input",{type:"text",value:l.name,onChange:w=>o(u=>({...u,name:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Subtitulo"}),s.jsx("input",{type:"text",value:l.subtitle,onChange:w=>o(u=>({...u,subtitle:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Descripcion"}),s.jsx("textarea",{rows:"3",value:l.description,onChange:w=>o(u=>({...u,description:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Precio (Bs)"}),s.jsx("input",{type:"number",value:l.price_bob,onChange:w=>o(u=>({...u,price_bob:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Duracion (min)"}),s.jsx("input",{type:"number",value:l.duration_min,onChange:w=>o(u=>({...u,duration_min:w.target.value}))})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Imagen URL"}),s.jsx("input",{type:"text",value:l.image_url,onChange:w=>o(u=>({...u,image_url:w.target.value}))})]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_featured,onChange:w=>o(u=>({...u,is_featured:w.target.checked}))}),"Destacado"]}),s.jsxs("label",{className:"toggle",children:[s.jsx("input",{type:"checkbox",checked:l.is_active,onChange:w=>o(u=>({...u,is_active:w.target.checked}))}),"Activo"]}),l.id&&s.jsxs("div",{className:"field",children:[s.jsx("span",{children:"Disponibilidad por sucursal"}),s.jsx("div",{className:"chip-grid",children:e.map(w=>{var g,k;const u=(k=(g=i.find(P=>P.id===l.id))==null?void 0:g.branches)==null?void 0:k.find(P=>{var O;return(((O=P.branch)==null?void 0:O.id)||P.branch_id)===w.id}),f=(u==null?void 0:u.is_available)||!1;return s.jsxs("label",{className:"chip",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:P=>x(i.find(j=>j.id===l.id),w.id,P.target.checked)}),w.name]},w.id)})})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Lineas de WhatsApp"}),s.jsxs("div",{className:"table",children:[s.jsxs("div",{className:"table-head",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Phone ID"}),s.jsx("span",{children:"Accion"})]}),(p||[]).map(w=>s.jsxs("div",{className:"table-row",children:[s.jsx("span",{children:w.display_name||"Linea sin nombre"}),s.jsx("span",{children:w.phone_number_id}),s.jsx("button",{className:"ghost",onClick:()=>m(w),children:"Renombrar"})]},w.id)),!(p!=null&&p.length)&&s.jsx("div",{className:"empty-state",children:"Sin lineas registradas"})]}),s.jsx("div",{className:"panel-title",children:y.id?"Editar linea":"Selecciona una linea"}),s.jsxs("form",{className:"form-grid",onSubmit:T,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Nombre visible"}),s.jsx("input",{type:"text",value:y.display_name,onChange:w=>A(u=>({...u,display_name:w.target.value})),disabled:!y.id})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:!y.id,children:"Guardar"})})]})]})]})}function vy(){var m,T,w,u,f,g,k,P,j,O;const[e,t]=v.useState([]),[n,r]=v.useState(null),[a,i]=v.useState(!0),[l,o]=v.useState("");v.useEffect(()=>{c()},[]);async function c(){i(!0);try{const[C,B]=await Promise.all([de("/api/admin/bots"),de("/api/admin/bots/metrics")]);t(C.bots||[]),r(B.metrics),o("")}catch(C){console.error(C),o(C.message||"Error al cargar datos")}finally{i(!1)}}async function h(C,B){try{await tt(`/api/admin/bots/${C}`,{is_active:B}),t(U=>U.map(Y=>Y.id===C?{...Y,is_active:B}:Y))}catch(U){o(U.message||"Error al cambiar estado")}}const x=C=>{if(!C)return"Sin actividad reciente";const B=new Date(C),Y=new Date-B,le=Math.floor(Y/6e4);if(le<1)return"Hace un momento";if(le<60)return`ltima actividad: hace ${le} min`;const fe=Math.floor(le/60);return fe<24?`ltima actividad: hace ${fe}h`:`ltima actividad: ${B.toLocaleDateString()}`},p=e.filter(C=>C.is_active).length,y=p>0?"ACTIVO":"INACTIVO",A=p>0?"active":"inactive";return s.jsxs("div",{className:"bot-section",children:[s.jsxs("div",{className:"bot-section-header",children:[s.jsxs("div",{className:"bot-section-title-area",children:[s.jsx("div",{className:"bot-section-icon",children:""}),s.jsxs("div",{children:[s.jsx("h2",{className:"bot-section-title",children:"Gestin de Bots"}),s.jsx("p",{className:"bot-section-subtitle",children:"Administra los flujos automatizados y el rendimiento tcnico."})]})]}),s.jsxs("div",{className:"bot-section-global-toggle",children:[s.jsx("span",{className:"bot-toggle-label",children:"ESTADO DEL BOT:"}),s.jsxs("div",{className:`bot-toggle-pill ${A}`,children:[s.jsx("span",{className:"bot-toggle-dot"}),s.jsx("span",{children:y})]})]})]}),l&&s.jsx("div",{className:"bot-error",children:l}),s.jsxs("div",{className:"bot-section-content",children:[s.jsxs("div",{className:"bot-flows-panel",children:[s.jsx("div",{className:"bot-panel-header",children:s.jsx("span",{className:"bot-panel-title",children:"MONITOREO DE FLUJOS"})}),a?s.jsx("div",{className:"bot-loading",children:"Cargando bots..."}):e.length===0?s.jsxs("div",{className:"bot-empty",children:[s.jsx("p",{children:"No hay bots asignados a tu cuenta."}),s.jsx("p",{className:"bot-empty-hint",children:"Contacta con soporte si necesitas activar un bot."})]}):s.jsx("div",{className:"bot-flows-list",children:e.map(C=>s.jsxs("div",{className:"bot-flow-card",children:[s.jsxs("div",{className:"bot-flow-info",children:[s.jsx("span",{className:"bot-flow-icon",children:C.flow_icon||""}),s.jsxs("div",{children:[s.jsx("div",{className:"bot-flow-name",children:C.flow_name}),s.jsxs("div",{className:`bot-flow-status ${C.is_active?"active":"inactive"}`,children:[" ",C.is_active?"ACTIVO":"INACTIVO"]})]})]}),s.jsx("div",{className:"bot-flow-actions",children:s.jsxs("label",{className:"bot-toggle-switch",children:[s.jsx("input",{type:"checkbox",checked:C.is_active,onChange:()=>h(C.id,!C.is_active)}),s.jsx("span",{className:"bot-toggle-slider"})]})}),s.jsx("div",{className:"bot-flow-meta",children:x(C.updated_at)}),C.flow_description&&s.jsx("div",{className:"bot-flow-desc",children:C.flow_description})]},C.id))})]}),s.jsxs("div",{className:"bot-metrics-panel",children:[s.jsx("div",{className:"bot-panel-header",children:s.jsx("span",{className:"bot-panel-title",children:"MTRICAS DE EFICACIA DETALLADAS"})}),s.jsxs("div",{className:"bot-metrics-grid",children:[s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:`bot-metric-badge ${((m=n==null?void 0:n.interactions)==null?void 0:m.change)>=0?"positive":"neutral"}`,children:[((T=n==null?void 0:n.interactions)==null?void 0:T.change)>0?"+":"",(w=n==null?void 0:n.interactions)==null?void 0:w.change,"% ",(u=n==null?void 0:n.interactions)==null?void 0:u.label]}),s.jsx("div",{className:"bot-metric-label",children:"INTERACCIONES"}),s.jsx("div",{className:"bot-metric-value",children:n?n.interactions.value:"--"}),s.jsx("div",{className:"bot-metric-sub",children:"Total de sesiones iniciadas hoy"})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:"bot-metric-badge neutral",children:["Objetivo: ",(f=n==null?void 0:n.resolution)==null?void 0:f.target,"%"]}),s.jsx("div",{className:"bot-metric-label",children:"RESOLUCIN FINAL"}),s.jsxs("div",{className:"bot-metric-value",children:[n?n.resolution.value:"--","%"]}),s.jsx("div",{className:"bot-metric-progress",children:s.jsx("div",{className:"bot-metric-progress-fill",style:{width:`${n?n.resolution.value:0}%`}})})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:"bot-metric-icon",children:""}),s.jsxs("div",{className:"bot-metric-badge sla",children:[" ",(g=n==null?void 0:n.uptime)==null?void 0:g.status]}),s.jsx("div",{className:"bot-metric-label",children:"VIDA DEL PROCESO"}),s.jsx("div",{className:"bot-metric-value",children:n?n.uptime.value:"--"}),s.jsx("div",{className:"bot-metric-sub",children:"UPTIME SISTEMA"})]}),s.jsxs("div",{className:"bot-metric-card",children:[s.jsx("div",{className:`bot-metric-icon ${((k=n==null?void 0:n.errors)==null?void 0:k.value)>0?"error":""}`,children:""}),s.jsx("div",{className:`bot-metric-badge ${((P=n==null?void 0:n.errors)==null?void 0:P.value)===0?"stable":"neutral"}`,children:(j=n==null?void 0:n.errors)==null?void 0:j.status}),s.jsx("div",{className:"bot-metric-label",children:"ERRORES"}),s.jsx("div",{className:"bot-metric-value",children:n?n.errors.value:"--"}),s.jsxs("div",{className:`bot-metric-sub ${((O=n==null?void 0:n.errors)==null?void 0:O.critical)>0?"error-sub":""}`,children:["CRTICOS: ",n?n.errors.critical:0]})]})]})]})]})]})}const Tu={DRAFT:{bg:"#e3e8ef",text:"#475569",label:"BORRADOR"},PENDING:{bg:"#fef3c7",text:"#d97706",label:"PENDIENTE"},APPROVED:{bg:"#d1fae5",text:"#059669",label:"APROBADA"},REJECTED:{bg:"#fee2e2",text:"#dc2626",label:"RECHAZADA"},PAUSED:{bg:"#fef3c7",text:"#d97706",label:"PAUSADA"},DISABLED:{bg:"#e5e7eb",text:"#6b7280",label:"DESHABILITADA"}},yy=[{value:"UTILITY",label:"Utility"},{value:"MARKETING",label:"Marketing"},{value:"AUTHENTICATION",label:"Authentication"}],xy=[{value:"es",label:"Espaol (ES)"},{value:"en",label:"English (EN)"}];function jy({templates:e=[],templateForm:t,setTemplateForm:n,handleTemplateSubmit:r,handleTemplateSubmitToMeta:a,handleTemplateDelete:i,handleSyncTemplates:l,onLoadTemplates:o}){const[c,h]=v.useState("list"),[x,p]=v.useState(null),[y,A]=v.useState(""),[m,T]=v.useState(!1),[w,u]=v.useState(""),[f,g]=v.useState(!1),[k,P]=v.useState(null),[j,O]=v.useState({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),[C,B]=v.useState([]);v.useEffect(()=>{o&&o()},[]),v.useEffect(()=>{if(!k)return;const S=H=>{H.target.closest(".template-card-menu")||P(null)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[k]);const U=async()=>{T(!0);try{await l()}finally{T(!1)}},Y=()=>{p(null),O({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),B([]),h("editor")},le=S=>{p(S),O({name:S.name||"",category:S.category||"UTILITY",language:S.language||"es",body_text:S.body_text||S.body_preview||"",header_type:S.header_type||"",header_content:S.header_content||"",footer_text:S.footer_text||"",buttons:S.buttons_json||[]}),B(S.variable_mappings||[]),h("editor")},fe=async S=>{!(S!=null&&S.id)||!i||!window.confirm(`Eliminar la plantilla "${S.name}"? Esta accin la ocultar localmente y la eliminar de Meta si aplica.`)||(await i(S.id),P(null))},ye=async S=>{S.preventDefault();const H={...j,id:x==null?void 0:x.id,variable_mappings:C};if(n&&n(H),r){const G=await r(null,H);G&&p(G)}},we=async()=>{if(a){g(!0);try{let S=x==null?void 0:x.id;if(!S){const H={...j,variable_mappings:C},G=await r(null,H);S=G==null?void 0:G.id,G&&p(G)}S&&(await a(S),h("list"),p(null))}finally{g(!1)}}},se=()=>{h("list"),p(null)},z=(S=>{const H=S.match(/\{\{(\d+)\}\}/g)||[];return[...new Set(H)].map(G=>parseInt(G.replace(/[{}]/g,"")))})(j.body_text),W=e.filter(S=>{var Z;const H=!y||((Z=S.name)==null?void 0:Z.toLowerCase().includes(y.toLowerCase()))||(S.body_text||S.body_preview||"").toLowerCase().includes(y.toLowerCase()),G=!w||S.status===w;return H&&G});return c==="list"?s.jsxs("div",{className:"templates-section",children:[s.jsxs("div",{className:"templates-header",children:[s.jsxs("div",{className:"templates-title-row",children:[s.jsx("h1",{children:"Plantillas de Meta"}),s.jsxs("span",{className:"meta-connected-badge",children:[s.jsx("span",{className:"status-dot"}),"CONECTADO A META API"]})]}),s.jsxs("div",{className:"templates-actions",children:[s.jsx("div",{className:"search-input-wrap",children:s.jsx("input",{type:"text",placeholder:"Buscar plantillas...",value:y,onChange:S=>A(S.target.value)})}),s.jsxs("select",{value:w,onChange:S=>u(S.target.value),className:"status-filter-select",children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"APPROVED",children:"Aprobadas"}),s.jsx("option",{value:"PENDING",children:"Pendientes"}),s.jsx("option",{value:"REJECTED",children:"Rechazadas"}),s.jsx("option",{value:"DRAFT",children:"Borradores"})]}),s.jsx("button",{className:"btn-sync",onClick:U,disabled:m,children:m?" Sincronizando...":" Sincronizar"}),s.jsxs("button",{className:"btn-create-template",onClick:Y,children:[s.jsx("span",{children:"+"})," Crear Nueva Plantilla"]})]})]}),s.jsxs("div",{className:"templates-grid",children:[W.map(S=>{var G;const H=Tu[S.status]||Tu.DRAFT;return s.jsxs("div",{className:"template-card",onClick:()=>le(S),children:[s.jsxs("div",{className:"template-card-head",children:[s.jsx("div",{className:"template-category-icon",children:S.category==="MARKETING"?"":S.category==="UTILITY"?"":""}),s.jsx("span",{className:"template-status-badge",style:{backgroundColor:H.bg,color:H.text},children:H.label})]}),s.jsx("h3",{className:"template-card-name",children:S.name}),s.jsxs("div",{className:"template-card-meta",children:[s.jsx("span",{className:"tag-category",children:S.category}),s.jsx("span",{className:"tag-language",children:S.language==="es"?"ESPAOL (ES)":(G=S.language)==null?void 0:G.toUpperCase()})]}),(S.body_text||S.body_preview)&&s.jsxs("p",{className:"template-card-preview",children:[(S.body_text||S.body_preview).slice(0,80),"..."]}),s.jsxs("div",{className:"template-card-actions",children:[s.jsx("button",{className:"btn-preview",onClick:Z=>{Z.stopPropagation(),le(S)},children:" Previsualizar"}),s.jsxs("div",{className:"template-card-menu",onClick:Z=>Z.stopPropagation(),children:[s.jsx("button",{className:"btn-more",type:"button",onClick:()=>P(Z=>Z===S.id?null:S.id),children:""}),k===S.id&&s.jsxs("div",{className:"template-menu-dropdown",children:[s.jsx("button",{type:"button",className:"menu-item",onClick:()=>le(S),children:"Editar"}),s.jsx("button",{type:"button",className:"menu-item danger",onClick:()=>fe(S),children:"Eliminar"})]})]})]})]},S.id)}),s.jsxs("div",{className:"template-card template-card-create",onClick:Y,children:[s.jsx("div",{className:"create-icon",children:"+"}),s.jsx("h3",{children:"Crear nueva plantilla"}),s.jsx("p",{children:"Empieza a disear tu flujo de WhatsApp"})]})]}),W.length===0&&!y&&s.jsx("div",{className:"templates-empty",children:s.jsx("p",{children:"No hay plantillas. Crea una nueva o sincroniza desde Meta."})})]}):s.jsxs("div",{className:"template-editor",children:[s.jsxs("div",{className:"editor-header",children:[s.jsxs("div",{className:"editor-breadcrumb",children:[s.jsx("button",{className:"btn-back",onClick:se,children:" Volver"}),s.jsx("span",{className:"breadcrumb-sep",children:"/"}),s.jsx("span",{children:x?"Editar Plantilla":"Nueva Plantilla"})]}),s.jsxs("div",{className:"editor-actions",children:[s.jsx("button",{className:"btn-save-draft",onClick:ye,children:" Guardar Borrador"}),((x==null?void 0:x.status)==="DRAFT"||(x==null?void 0:x.status)==="REJECTED"||!x)&&s.jsx("button",{className:"btn-primary",onClick:we,disabled:f||!j.name||!j.body_text,children:f?"Enviando...":"Enviar a Meta"}),s.jsx("button",{className:"btn-discard",onClick:se,children:" Descartar"})]})]}),s.jsxs("div",{className:"editor-layout",children:[s.jsxs("div",{className:"editor-form-panel",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{children:" General Settings"}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Template Name"}),s.jsx("input",{type:"text",placeholder:"patient_appointment_reminder",value:j.name,onChange:S=>O({...j,name:S.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")})})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Category"}),s.jsx("select",{value:j.category,onChange:S=>O({...j,category:S.target.value}),children:yy.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:"Language"}),s.jsx("select",{value:j.language,onChange:S=>O({...j,language:S.target.value}),children:xy.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{children:" Message Body"}),s.jsx("button",{className:"btn-insert-var",type:"button",onClick:()=>{const S=z.length+1;O({...j,body_text:j.body_text+`{{${S}}}`})},children:"+ Insert Variable"})]}),s.jsx("textarea",{rows:"6",placeholder:"Hola {{1}}, te recordamos tu cita en PODOPIE para el da {{2}} a las {{3}}. Por favor, confirma tu asistencia.",value:j.body_text,onChange:S=>O({...j,body_text:S.target.value})}),s.jsxs("div",{className:"char-count",children:[j.body_text.length," / 1024"]})]})]}),s.jsxs("div",{className:"editor-preview-panel",children:[s.jsxs("div",{className:"phone-frame",children:[s.jsxs("div",{className:"phone-header",children:[s.jsx("span",{className:"phone-back",children:""}),s.jsxs("div",{className:"phone-contact",children:[s.jsx("div",{className:"phone-avatar",children:""}),s.jsx("div",{className:"phone-name",children:"PODOPIE Clinic"})]}),s.jsx("div",{className:"phone-icons",children:" "})]}),s.jsxs("div",{className:"phone-body",children:[s.jsx("div",{className:"phone-date-label",children:"TODAY"}),s.jsxs("div",{className:"phone-message",children:[s.jsx("div",{className:"message-bubble",children:j.body_text||"Tu mensaje aparecer aqu..."}),s.jsx("div",{className:"message-time",children:"10:42 AM"})]}),j.buttons&&j.buttons.length>0&&s.jsx("div",{className:"phone-buttons",children:j.buttons.map((S,H)=>s.jsx("button",{className:"phone-action-btn",children:S.text||`Button ${H+1}`},H))})]})]}),s.jsx("div",{className:"preview-label",children:" High-fidelity dynamic preview"})]}),s.jsxs("div",{className:"editor-mapping-panel",children:[s.jsxs("div",{className:"mapping-tabs",children:[s.jsx("button",{className:"tab active",children:"VARIABLES"}),s.jsx("button",{className:"tab",children:"BUTTONS"})]}),s.jsxs("div",{className:"mapping-section",children:[s.jsx("h4",{children:"ODOO FIELD MAPPING"}),z.length===0?s.jsxs("p",{className:"mapping-empty",children:["Agrega variables ","{{1}}",", ","{{2}}","... en tu mensaje"]}):z.map(S=>{const H=C.find(G=>G.var_index===S)||{};return s.jsxs("div",{className:"mapping-item",children:[s.jsxs("div",{className:"mapping-var-badge",children:[`{{${S}}}`," Variable"]}),s.jsxs("select",{value:H.source_path||"",onChange:G=>{const Z=C.filter(L=>L.var_index!==S);Z.push({var_index:S,source_type:"odoo",source_path:G.target.value}),B(Z)},children:[s.jsx("option",{value:"",children:"Select Odoo Field..."}),s.jsx("option",{value:"partner_id.name",children:"patient_id.name"}),s.jsx("option",{value:"start_date",children:"start_date (Formatted)"}),s.jsx("option",{value:"start_time",children:"start_time"}),s.jsx("option",{value:"partner_id.phone",children:"patient_phone"})]}),s.jsx("span",{className:`mapping-status ${H.source_path?"linked":"needs"}`,children:H.source_path?" Linked":" Needs mapping"})]},S)})]}),s.jsxs("div",{className:"mapping-section",children:[s.jsxs("div",{className:"mapping-section-header",children:[s.jsx("h4",{children:"ACTION BUTTONS"}),s.jsx("button",{className:"btn-add-button",onClick:()=>{O({...j,buttons:[...j.buttons||[],{type:"QUICK_REPLY",text:""}]})},children:"+ Add Button"})]}),(j.buttons||[]).map((S,H)=>s.jsxs("div",{className:"button-item",children:[s.jsx("span",{className:"button-icon",children:""}),s.jsx("input",{type:"text",placeholder:"Button text",value:S.text||"",onChange:G=>{const Z=[...j.buttons];Z[H]={...Z[H],text:G.target.value},O({...j,buttons:Z})}}),s.jsx("button",{className:"btn-remove",onClick:()=>{const G=j.buttons.filter((Z,L)=>L!==H);O({...j,buttons:G})},children:""})]},H))]}),s.jsxs("div",{className:"mapping-tip",children:[s.jsx("span",{className:"tip-icon",children:""}),s.jsx("span",{children:"Tip: Asegrate de que tus variables estn correctamente mapeadas a campos de Odoo antes de enviar."})]})]})]})]})}const Lu={campaigns:"",users:"",bot:"",chat:"",templates:"",audience:"",system:""},Ny={"user.created":"USUARIO CREADO","user.updated":"USUARIO EDITADO","user.disabled":"USUARIO ELIMINADO",template_draft_created:"PLANTILLA CREADA",template_draft_updated:"PLANTILLA EDITADA",template_submitted:"PLANTILLA ENVIADA",template_deleted:"PLANTILLA ELIMINADA",template_restored:"PLANTILLA RESTAURADA",audience_created:"SEGMENTO CREADO",audience_updated:"SEGMENTO EDITADO",audience_deleted:"SEGMENTO ELIMINADO","campaign.created":"CAMPAA CREADA","campaign.queued":"CAMPAA EN COLA","campaign.sending":"CAMPAA LANZADA","settings.updated":"CONFIG ACTUALIZADA","role_permissions.updated":"PERMISOS CAMBIADOS","role_permissions.deleted":"ROL ELIMINADO","conversation.status_changed":"CHAT ACTUALIZADO","conversation.tag_added":"TAG AGREGADO","conversation.tag_removed":"TAG ELIMINADO"};function mf(e){var r;const t=((r=e==null?void 0:e.data_json)==null?void 0:r.entity)||"";if(t==="template")return"templates";if(t==="audience")return"audience";if(t==="campaign")return"campaigns";if(t==="conversation")return"chat";const n=(e==null?void 0:e.action)||"";return n.includes("user")?"users":n.includes("campaign")?"campaigns":n.includes("template")?"templates":n.includes("audience")?"audience":n.includes("bot")?"bot":n.includes("conversation")?"chat":"system"}function qi(e){if(!e)return{date:"--",time:"--"};const t=new Date(e);return Number.isNaN(t.getTime())?{date:"--",time:"--"}:{date:t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),time:t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}function wy(e,t="csv"){const r=[["timestamp","usuario","email","accion","modulo","data"].join(",")];e.forEach(h=>{var m,T;const x=((m=h.user)==null?void 0:m.name)||"Sistema",p=((T=h.user)==null?void 0:T.email)||"",y=mf(h),A=[new Date(h.created_at).toISOString(),x,p,h.action,y,JSON.stringify(h.data_json||{})];r.push(A.map(w=>`"${String(w).replace(/"/g,'""')}"`).join(","))});const a=r.join(`
`),i=t==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"text/csv;charset=utf-8;",l=t==="excel"?"audit_logs.xlsx":"audit_logs.csv",o=new Blob([a],{type:i}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download=l,document.body.appendChild(c),c.click(),document.body.removeChild(c)}function _y(){var j,O;const[e,t]=v.useState(""),[n,r]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState(1),[c]=v.useState(6),[h,x]=v.useState(0),[p,y]=v.useState([]),[A,m]=v.useState(!1),[T,w]=v.useState(null),u=Math.max(1,Math.ceil(h/c)),f=async({pageOverride:C}={})=>{m(!0);try{const B=new URLSearchParams;B.set("page",String(C||l)),B.set("page_size",String(c)),e.trim()&&B.set("q",e.trim()),n&&B.set("from",n),a&&B.set("to",a);const U=await de(`/api/admin/audit?${B.toString()}`);y(U.logs||[]),x(U.total||0)}finally{m(!1)}};v.useEffect(()=>{f()},[l]);const g=()=>{o(1),f({pageOverride:1})},k=async(C="csv")=>{const B=new URLSearchParams;B.set("page","1"),B.set("page_size","1000"),e.trim()&&B.set("q",e.trim()),n&&B.set("from",n),a&&B.set("to",a);const U=await de(`/api/admin/audit?${B.toString()}`);wy(U.logs||[],C)},P=v.useMemo(()=>{const C=[],B=Math.max(1,l-1),U=Math.min(u,B+2);for(let Y=B;Y<=U;Y+=1)C.push(Y);return C},[l,u]);return s.jsxs("div",{className:"audit-module",children:[s.jsxs("div",{className:"audit-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audit-title",children:"Registros / Auditoria"}),s.jsx("div",{className:"audit-subtitle",children:"Monitorea acciones de usuarios y eventos del sistema"})]}),s.jsxs("div",{className:"audit-export-group",children:[s.jsx("button",{className:"audit-export",type:"button",onClick:()=>k("excel"),children:" Exportar Excel"}),s.jsx("button",{className:"audit-export outline",type:"button",onClick:()=>k("csv"),children:" Exportar CSV"})]})]}),s.jsxs("div",{className:"audit-filters",children:[s.jsxs("div",{className:"audit-search",children:[s.jsx("span",{className:"audit-search-icon"}),s.jsx("input",{type:"text",placeholder:"Filtrar por usuario o accion..",value:e,onChange:C=>t(C.target.value)})]}),s.jsxs("div",{className:"audit-date",children:[s.jsx("span",{children:"Desde"}),s.jsx("input",{type:"date",value:n,onChange:C=>r(C.target.value)})]}),s.jsxs("div",{className:"audit-date",children:[s.jsx("span",{children:"Hasta"}),s.jsx("input",{type:"date",value:a,onChange:C=>i(C.target.value)})]}),s.jsx("button",{className:"audit-filter-btn",type:"button",onClick:g,children:"Filtrar"})]}),s.jsxs("div",{className:"audit-card",children:[s.jsxs("div",{className:"audit-table-head",children:[s.jsx("span",{children:"Timestamp"}),s.jsx("span",{children:"Usuario"}),s.jsx("span",{children:"Accion"}),s.jsx("span",{children:"Modulo"})]}),A&&s.jsx("div",{className:"audit-empty",children:"Cargando registros..."}),!A&&!p.length&&s.jsx("div",{className:"audit-empty",children:"Sin registros para mostrar"}),!A&&p.map(C=>{var ye,we;const B=qi(C.created_at),U=mf(C),Y=Ny[C.action]||C.action,le=((ye=C.user)==null?void 0:ye.name)||"System Bot",fe=((we=C.user)==null?void 0:we.email)||"automated@service";return s.jsxs("button",{type:"button",className:"audit-row",onClick:()=>w(C),children:[s.jsxs("div",{className:"audit-cell time",children:[s.jsx("div",{children:B.date}),s.jsx("div",{className:"audit-time",children:B.time})]}),s.jsxs("div",{className:"audit-cell user",children:[s.jsx("div",{className:"audit-avatar",children:(le==null?void 0:le[0])||"S"}),s.jsxs("div",{children:[s.jsx("div",{className:"audit-user-name",children:le}),s.jsx("div",{className:"audit-user-email",children:fe})]})]}),s.jsx("div",{className:"audit-cell action",children:s.jsx("span",{className:"audit-action-pill",children:Y})}),s.jsxs("div",{className:"audit-cell module",children:[s.jsx("span",{className:"audit-module-icon",children:Lu[U]||Lu.system}),U.charAt(0).toUpperCase()+U.slice(1)]})]},C.id)})]}),s.jsxs("div",{className:"audit-footer",children:[s.jsxs("div",{children:["Mostrando ",p.length," de ",h," registros"]}),s.jsxs("div",{className:"audit-pagination",children:[s.jsx("button",{type:"button",disabled:l<=1,onClick:()=>o(C=>Math.max(1,C-1)),children:""}),P.map(C=>s.jsx("button",{type:"button",className:C===l?"active":"",onClick:()=>o(C),children:C},C)),s.jsx("button",{type:"button",disabled:l>=u,onClick:()=>o(C=>Math.min(u,C+1)),children:""})]})]}),T&&s.jsx("div",{className:"audit-modal",children:s.jsxs("div",{className:"audit-modal-card",children:[s.jsxs("div",{className:"audit-modal-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"audit-modal-title",children:"Detalle del registro"}),s.jsx("div",{className:"audit-modal-subtitle",children:T.action})]}),s.jsx("button",{type:"button",onClick:()=>w(null),children:""})]}),s.jsxs("div",{className:"audit-modal-body",children:[s.jsxs("div",{className:"audit-detail",children:[s.jsx("span",{children:"Usuario"}),s.jsx("strong",{children:((j=T.user)==null?void 0:j.name)||"System Bot"}),s.jsx("small",{children:((O=T.user)==null?void 0:O.email)||"automated@service"})]}),s.jsxs("div",{className:"audit-detail",children:[s.jsx("span",{children:"Timestamp"}),s.jsx("strong",{children:qi(T.created_at).date}),s.jsx("small",{children:qi(T.created_at).time})]}),s.jsxs("div",{className:"audit-detail full",children:[s.jsx("span",{children:"Data"}),s.jsx("pre",{children:JSON.stringify(T.data_json||{},null,2)})]})]})]})})]})}function ky(){return s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"panel-title",children:"Integracion Odoo"}),s.jsx("div",{className:"empty-state",children:"Seccion en construccion"})]})}function Sy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"6",r:"2",strokeWidth:"2"}),s.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeWidth:"2"}),s.jsx("circle",{cx:"15",cy:"12",r:"2",strokeWidth:"2"}),s.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18",strokeWidth:"2"}),s.jsx("circle",{cx:"11",cy:"18",r:"2",strokeWidth:"2"})]})}function Ey(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"9",cy:"8",r:"3",strokeWidth:"2"}),s.jsx("path",{d:"M4 20c0-3 2.7-5.5 6-5.5s6 2.5 6 5.5",strokeWidth:"2"}),s.jsx("circle",{cx:"17",cy:"9",r:"2",strokeWidth:"2"}),s.jsx("path",{d:"M14 20c0-1.8 1.4-3.4 3.2-4",strokeWidth:"2"})]})}function Cy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"2"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"2"}),s.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"2"})]})}function by(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"2",strokeWidth:"2"}),s.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"9",strokeWidth:"2"}),s.jsx("line",{x1:"9",y1:"13",x2:"15",y2:"13",strokeWidth:"2"})]})}function Ty(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"6",y:"5",width:"12",height:"15",rx:"2",strokeWidth:"2"}),s.jsx("path",{d:"M9 5h6",strokeWidth:"2"}),s.jsx("path",{d:"M9 10h6",strokeWidth:"2"}),s.jsx("path",{d:"M9 14h6",strokeWidth:"2"})]})}function Ly(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M8 4h4a2 2 0 1 1 0 4h-1v2h2a2 2 0 1 1 0 4h-2v2H8a2 2 0 1 1-4 0V8a2 2 0 1 1 4 0z",strokeWidth:"2"})})}function Ay({settingsSection:e,setSettingsSection:t,settingsTab:n,setSettingsTab:r,rolePermissions:a,setRolePermissions:i,currentRole:l,isAdmin:o,adminUsers:c,userForm:h,setUserForm:x,roleOptions:p,handleUserSubmit:y,settings:A,setSettings:m,handleSaveSettings:T,branches:w,services:u,branchForm:f,setBranchForm:g,handleBranchSubmit:k,handleBranchDisable:P,serviceForm:j,setServiceForm:O,handleServiceSubmit:C,handleServiceDisable:B,handleServiceBranchToggle:U,templates:Y,templateForm:le,setTemplateForm:fe,handleTemplateSubmit:ye,handleTemplateSubmitToMeta:we,handleTemplateDelete:se,handleSyncTemplates:Ee,auditLogs:z,formatDate:W,planName:S,tenantChannels:H,channelForm:G,setChannelForm:Z,handleChannelSelect:L,handleChannelSubmit:X,handleUserDelete:Q,defaultRolePermissions:V,handleRoleDelete:ae,useShellLayout:ce=!1,pageError:ue}){const pe=a==null?void 0:a[l],Ue=[{title:"Principal",items:[{id:"general",label:"General",icon:Sy},{id:"users",label:"Gestion de Usuarios",icon:Ey},{id:"bot",label:"Configuracion de Bot",icon:Cy}]},{title:"Canales e Integraciones",items:[{id:"templates",label:"Plantillas de Meta",icon:by},{id:"audit",label:"Registros / Auditoria",icon:Ty},{id:"odoo",label:"Integracion Odoo",icon:Ly}]}];function Ve(Pe){var Be,We;return!!((We=(Be=pe==null?void 0:pe.settings)==null?void 0:Be[Pe])!=null&&We.read)}function Fe(Pe){Ve(Pe)&&t(Pe)}const ut=s.jsxs(s.Fragment,{children:[s.jsxs("aside",{className:"settings-sidebar",children:[s.jsxs("div",{className:"settings-header",children:[s.jsx("div",{className:"settings-title",children:"CONFIGURACION"}),s.jsx("div",{className:"settings-version",children:"PODOPIE OS V2.0"})]}),Ue.map(Pe=>s.jsxs("div",{className:"settings-group",children:[s.jsx("div",{className:"settings-group-title",children:Pe.title}),s.jsx("div",{className:"settings-group-list",children:Pe.items.map(Be=>{const We=!Ve(Be.id),$t=Be.icon;return s.jsxs("button",{className:`settings-item ${e===Be.id?"active":""}`,type:"button",onClick:()=>Fe(Be.id),disabled:We,children:[s.jsx("span",{className:"settings-icon","aria-hidden":"true",children:s.jsx($t,{className:"settings-icon-svg"})}),Be.label]},Be.id)})})]},Pe.title)),s.jsxs("div",{className:"settings-plan",children:[s.jsx("div",{className:"settings-plan-label",children:"Plan actual"}),s.jsx("div",{className:"settings-plan-name",children:S||"Sin plan"})]})]}),s.jsxs("div",{className:"settings-content",children:[e==="users"&&s.jsx(my,{settingsTab:n,setSettingsTab:r,rolePermissions:a,setRolePermissions:i,isAdmin:o,adminUsers:c,userForm:h,setUserForm:x,roleOptions:p,handleUserSubmit:y,handleUserDelete:Q,defaultRolePermissions:V,handleRoleDelete:ae}),e==="general"&&s.jsx(gy,{branches:w,branchForm:f,setBranchForm:g,handleBranchSubmit:k,handleBranchDisable:P,services:u,serviceForm:j,setServiceForm:O,handleServiceSubmit:C,handleServiceDisable:B,handleServiceBranchToggle:U,tenantChannels:H,channelForm:G,setChannelForm:Z,handleChannelSelect:L,handleChannelSubmit:X}),e==="bot"&&s.jsx(vy,{settings:A,setSettings:m,handleSaveSettings:T}),e==="templates"&&s.jsx(jy,{templates:Y,templateForm:le,setTemplateForm:fe,handleTemplateSubmit:ye,handleTemplateSubmitToMeta:we,handleTemplateDelete:se,handleSyncTemplates:Ee}),e==="audit"&&s.jsx(_y,{auditLogs:z,formatDate:W}),e==="odoo"&&s.jsx(ky,{}),ue&&s.jsx("div",{className:"error-banner",children:ue})]})]});return ce?ut:s.jsx("section",{className:"settings-layout",children:ut})}function Ry(){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"1.8"}),s.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"1.8"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"1.8"}),s.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"1.8"})]})}function Py({tenantId:e,tenantBots:t,availableFlows:n,loading:r,onAddBot:a,onRemoveBot:i}){const[l,o]=v.useState(""),c=new Set(t.map(p=>p.flow_id)),h=n.filter(p=>!c.has(p.id));function x(){l&&(a(l),o(""))}return s.jsxs("section",{className:"sa-bot-card","data-tenant":e||"",children:[s.jsxs("header",{className:"sa-bot-header",children:[s.jsx("div",{className:"sa-bot-icon-large","aria-hidden":"true",children:s.jsx(Ry,{})}),s.jsxs("div",{className:"sa-bot-title-group",children:[s.jsx("h3",{children:"Asignacion de Bots"}),s.jsx("p",{children:"Selecciona que flujos estaran disponibles para este cliente. Los flujos asignados apareceran inmediatamente en el panel del usuario."})]})]}),s.jsx("div",{className:"sa-bot-body",children:r?s.jsx("div",{className:"sa-bot-loading",children:"Cargando asignaciones..."}):t.length===0?s.jsxs("div",{className:"sa-bot-empty",children:[s.jsx("div",{className:"sa-bot-empty-icon",children:"+"}),s.jsx("div",{className:"sa-bot-empty-title",children:"Sin bots asignados"}),s.jsx("div",{className:"sa-bot-empty-sub",children:"Agrega un flujo desde el selector para activarlo en este tenant."})]}):s.jsx("div",{className:"sa-bot-grid",children:t.map(p=>s.jsxs("div",{className:"sa-assigned-bot",children:[s.jsx("div",{className:"sa-bot-item-icon",children:p.flow_icon||">"}),s.jsxs("div",{className:"sa-bot-item-info",children:[s.jsx("span",{className:"sa-bot-item-name",children:p.flow_name||p.flow_id}),s.jsx("span",{className:"sa-bot-item-desc",children:p.flow_description||"Sin descripcion"})]}),s.jsx("button",{type:"button",className:"sa-btn-remove",title:"Quitar bot del cliente",onClick:()=>i(p.id),children:"Quitar"})]},p.id))})}),s.jsxs("div",{className:"sa-bot-controls",children:[s.jsxs("div",{className:"sa-select-container",children:[s.jsx("label",{className:"sa-select-label",children:"Asignar bot"}),s.jsxs("select",{className:"sa-select-styled",value:l,onChange:p=>o(p.target.value),disabled:h.length===0,children:[s.jsx("option",{value:"",children:h.length===0?"No hay mas bots disponibles":"Selecciona un bot para asignar"}),h.map(p=>s.jsx("option",{value:p.id,children:p.name},p.id))]})]}),s.jsx("button",{type:"button",className:"sa-btn-assign",onClick:x,disabled:!l,children:"Asignar Bot"})]})]})}const kt={name:"",slug:"",plan:"",db_url:"",phone_number_id:"",line_name:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",brand_name:"",logo_url:"",brand_primary:"#22d3ee",brand_accent:"#38bdf8",brand_bg:"#0b0f16",timezone:"",odoo_base_url:"",odoo_db_name:"",odoo_username:"",odoo_password:""},Oy=[{value:"starter",label:"Starter"},{value:"growth",label:"Growth"},{value:"scale",label:"Scale"},{value:"enterprise",label:"Enterprise"}];function Dy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),s.jsx("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"})]})}function Kl(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function My(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"3.5",strokeWidth:"1.6"}),s.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1.2l2-1.5-2-3.5-2.4.7a7.2 7.2 0 0 0-2-1.2L12 2 9.5 4.3a7.2 7.2 0 0 0-2 1.2l-2.4-.7-2 3.5 2 1.5A7 7 0 0 0 5 12c0 .4 0 .8.1 1.2l-2 1.5 2 3.5 2.4-.7a7.2 7.2 0 0 0 2 1.2L12 22l2.5-2.3a7.2 7.2 0 0 0 2-1.2l2.4.7 2-3.5-2-1.5c.1-.4.1-.8.1-1.2Z",strokeWidth:"1.2",strokeLinejoin:"round"})]})}function Iy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.6"}),s.jsx("path",{d:"M16.5 16.5 20 20",strokeWidth:"1.6",strokeLinecap:"round"})]})}function By(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M6 12h12",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"m13 6 6 6-6 6",strokeWidth:"1.8",strokeLinecap:"round"})]})}function zy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M18 6 6 18",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"m6 6 12 12",strokeWidth:"1.8",strokeLinecap:"round"})]})}function $y(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56",strokeWidth:"1.8",strokeLinecap:"round"})})}function Au(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Ru(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"m2 2 20 20",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Uy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 18h.01",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Vy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"m15 5 4 4",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Fy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M3 6h18",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",strokeWidth:"1.8",strokeLinecap:"round"})]})}const Pu={display_name:"",phone_number_id:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",is_active:!0,is_default:!1};function Wy({isOpen:e,onClose:t,initialData:n,onSave:r,tenantId:a}){const[i,l]=v.useState(Pu),[o,c]=v.useState(!1),[h,x]=v.useState(!1),[p,y]=v.useState(!1),[A,m]=v.useState(null);if(v.useEffect(()=>{e&&(l(n||{...Pu}),m(null))},[e,n]),!e)return null;const T=async w=>{if(w.preventDefault(),y(!0),m(null),!i.phone_number_id||!i.verify_token||!n&&!i.wa_token){m("Los campos ID de Telfono, Verify Token y Access Token son obligatorios."),y(!1);return}try{await r({...i,tenant_id:a}),t()}catch(u){console.error("Error saving channel:",u),m(u.message||"Error al guardar la lnea.")}finally{y(!1)}};return s.jsx("div",{className:"sa-modal-overlay",onClick:t,children:s.jsxs("div",{className:"sa-modal-content",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"sa-modal-header",children:[s.jsx("div",{className:"sa-modal-title",children:n?"Editar Lnea WhatsApp":"Nueva Lnea WhatsApp"}),s.jsx("button",{className:"sa-modal-close",onClick:t,children:s.jsx(zy,{width:24,height:24})})]}),s.jsxs("div",{className:"sa-modal-body",children:[A&&s.jsx("div",{className:"sa-alert",style:{marginBottom:"1rem"},children:A}),s.jsxs("div",{className:"sa-form-grid",children:[s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Nombre para mostrar (Opcional)"}),s.jsx("input",{value:i.display_name||"",onChange:w=>l({...i,display_name:w.target.value}),placeholder:"Ej: Ventas Principal"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Phone Number ID *"}),s.jsx("input",{value:i.phone_number_id||"",onChange:w=>l({...i,phone_number_id:w.target.value}),placeholder:"Identificador del nmero de telfono"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"WABA ID (WhatsApp Business Account ID)"}),s.jsx("input",{value:i.waba_id||"",onChange:w=>l({...i,waba_id:w.target.value}),placeholder:"Identificador de la cuenta de WhatsApp Business"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Verify Token (Webhook) *"}),s.jsx("input",{value:i.verify_token||"",onChange:w=>l({...i,verify_token:w.target.value}),placeholder:"Token de verificacin webhook"})]}),s.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[s.jsx("label",{children:"Permanent Access Token *"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:o?"text":"password",value:i.wa_token||"",onChange:w=>l({...i,wa_token:w.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"Token de acceso permanente",style:{width:"100%",paddingRight:"40px"}}),s.jsx("button",{type:"button",onClick:()=>c(!o),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:o?s.jsx(Ru,{width:18,height:18}):s.jsx(Au,{width:18,height:18})})]})]}),s.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[s.jsx("label",{children:"App Secret (Opcional)"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:h?"text":"password",value:i.app_secret||"",onChange:w=>l({...i,app_secret:w.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"App Secret de Meta",style:{width:"100%",paddingRight:"40px"}}),s.jsx("button",{type:"button",onClick:()=>x(!h),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:h?s.jsx(Ru,{width:18,height:18}):s.jsx(Au,{width:18,height:18})})]})]})]}),s.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"2rem"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[s.jsx("input",{type:"checkbox",checked:!!i.is_active,onChange:w=>l({...i,is_active:w.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Activa"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[s.jsx("input",{type:"checkbox",checked:!!i.is_default,onChange:w=>l({...i,is_default:w.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Principal (Por Defecto)"]})]})]}),s.jsxs("div",{className:"sa-modal-footer",children:[s.jsx("button",{className:"sa-btn ghost",onClick:t,disabled:p,children:"Cancelar"}),s.jsx("button",{className:"sa-btn primary",onClick:T,disabled:p,children:p?s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx($y,{width:16,height:16,className:"animate-spin"})," Guardando..."]}):"Guardar Lnea"})]})]})})}function Hy({channels:e=[],tenantId:t,onRefresh:n}){const[r,a]=v.useState(!1),[i,l]=v.useState(null),o=()=>{l(null),a(!0)},c=p=>{l(p),a(!0)},h=async p=>{const y=i?`/api/superadmin/channels/${i.id}`:"/api/superadmin/channels",m=await fetch(y,{method:i?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(p)});if(!m.ok){const T=await m.json();throw new Error(T.error||"Error al guardar")}await n()},x=async p=>{if(confirm("Ests seguro de que deseas eliminar esta lnea? Esta accin no se puede deshacer."))try{if(!(await fetch(`/api/superadmin/channels/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar");await n()}catch(y){console.error("Error deleting channel:",y),alert("No se pudo eliminar la lnea.")}};return s.jsxs("section",{className:"sa-lines-card",children:[s.jsxs("header",{className:"sa-lines-header",children:[s.jsxs("div",{className:"sa-lines-title",children:[s.jsx("div",{className:"sa-lines-icon",children:s.jsx(Uy,{width:24,height:24})}),s.jsxs("div",{children:[s.jsx("h3",{children:"Lneas de WhatsApp Cloud"}),s.jsx("p",{children:"Gestiona las conexiones activas de WhatsApp para este tenant."})]})]}),s.jsxs("button",{className:"sa-btn primary",onClick:o,children:[s.jsx(Kl,{width:16,height:16,style:{marginRight:"0.5rem"}}),"Agregar Nueva Lnea"]})]}),s.jsx("div",{className:"sa-lines-body",children:s.jsxs("div",{className:"sa-lines-grid",children:[e.map(p=>s.jsxs("div",{className:`sa-line-card ${p.is_active?"":"opacity-75"}`,children:[s.jsxs("div",{className:"sa-line-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"sa-line-name",children:p.display_name||"Sin nombre"}),s.jsxs("div",{className:"sa-line-meta",children:["ID: ",p.phone_number_id]})]}),s.jsx("div",{className:`sa-line-status ${p.is_active?"active":""}`,title:p.is_active?"Activo":"Inactivo"})]}),s.jsxs("div",{className:"sa-line-badges",children:[p.is_default&&s.jsx("span",{className:"sa-line-badge default",children:"DEFAULT"}),!p.is_active&&s.jsx("span",{className:"sa-status warn",children:"INACTIVO"})]}),s.jsxs("div",{className:"sa-line-details",children:[s.jsxs("div",{className:"sa-line-detail",children:[s.jsx("span",{className:"sa-detail-label",children:"WABA ID"}),s.jsx("span",{className:"sa-detail-value",children:p.waba_id||"-"})]}),s.jsxs("div",{className:"sa-line-detail",children:[s.jsx("span",{className:"sa-detail-label",children:"Verify Token"}),s.jsx("span",{className:"sa-detail-value",children:p.verify_token?`${p.verify_token.substring(0,16)}...`:"-"})]})]}),s.jsxs("div",{className:"sa-line-actions",children:[s.jsx("button",{className:"sa-btn ghost",onClick:()=>c(p),title:"Editar",children:s.jsx(Vy,{width:16,height:16})}),s.jsx("button",{className:"sa-btn ghost",onClick:()=>x(p.id),title:"Eliminar",style:{color:"#f87171"},children:s.jsx(Fy,{width:16,height:16})})]})]},p.id)),s.jsxs("button",{type:"button",className:"sa-line-add-card",onClick:o,children:[s.jsx("div",{className:"sa-add-icon-circle",children:s.jsx(Kl,{width:24,height:24})}),s.jsx("span",{children:"Nueva Conexin"})]})]})}),s.jsx(Wy,{isOpen:r,onClose:()=>a(!1),initialData:i,onSave:h,tenantId:t})]})}function Ou({route:e="/superadmin",onNavigate:t,onImpersonateTenant:n,onLogout:r=()=>{}}){const[a,i]=v.useState([]),[l,o]=v.useState([]),[c,h]=v.useState(""),[x,p]=v.useState(""),[y,A]=v.useState("Verificacion de red: sistema ok"),[m,T]=v.useState(kt),[w,u]=v.useState(!1),[f,g]=v.useState(!1),[k,P]=v.useState(""),[j,O]=v.useState(""),[C,B]=v.useState(!0),[U,Y]=v.useState(kt),[le,fe]=v.useState(!0),[ye,we]=v.useState(!1),se=v.useRef(""),[Ee,z]=v.useState([]),[W,S]=v.useState([]),[H,G]=v.useState(!1),{pushToast:Z}=Xo(),L=v.useMemo(()=>{if(!e)return"";const N=e.match(/^\/superadmin\/tenants\/([^/]+)\/?$/)||e.match(/^\/superadmin\/tenant\/([^/]+)\/?$/)||e.match(/^\/superadmin\/edit\/([^/]+)\/?$/);return N?N[1]:""},[e]),X=e.startsWith("/superadmin/new"),Q=!!L,V=X||Q,ae=v.useCallback(N=>{if(t){t(N,{replace:!1});return}typeof window>"u"||window.history.pushState({},"",N)},[t]);async function ce(){try{const N=await de("/api/superadmin/tenants");i(N.tenants||[]);const $=await de("/api/superadmin/channels");o($.channels||[]),p("")}catch(N){p(N.message||"No se pudo cargar datos.")}}v.useEffect(()=>{ce(),me()},[]),v.useMemo(()=>{const N=new Map;return l.forEach($=>{const q=N.get($.tenant_id)||0;N.set($.tenant_id,q+1)}),N},[l]);const ue=v.useMemo(()=>{const N=c.trim().toLowerCase();return N?a.filter($=>{const q=String($.name||"").toLowerCase(),ee=String($.slug||"").toLowerCase(),ve=String($.id||"").toLowerCase();return q.includes(N)||ee.includes(N)||ve.includes(N)}):a.slice()},[a,c]),pe=a.length,Ue=a.filter(N=>N.is_active).length;a.filter(N=>N.has_database).length;const Ve=a.filter(N=>N.has_odoo).length,Fe=pe?Math.round(Ve/pe*100):0;function ut(N){if(!N)return"--";const $=new Date(N);return Number.isNaN($.getTime())?"--":$.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"2-digit"})}function Pe(N){return 10+Math.abs(Array.from(N).reduce((ee,ve)=>ee+ve.charCodeAt(0),0))%70}function Be(){T(kt),Y(kt),O(""),B(!0),fe(!0),S([]),A("Verificacion de red: sistema ok"),se.current=""}function We(){Be(),p(""),ae("/superadmin/new")}function $t(){se.current="",ae("/superadmin")}async function _(N){if(n)try{p(""),P(N),await n(N)}catch($){p($.message||"No se pudo entrar al tenant.")}finally{P("")}}function I(N){const $={};return Object.keys(kt).forEach(q=>{const ee=N[q];$[q]=typeof ee=="string"?ee.trim():ee||""}),{...kt,...$}}async function ie(N){if(N){se.current=N,O(N),T(kt),Y(kt),B(!0),fe(!0),S([]),we(!0),p("");try{const $=await de(`/api/superadmin/tenants/${N}/details`);if(se.current!==N)return;const q=$.tenant||{},ee=$.branding||null,ve=$.odoo||null,Ft=$.database||null,qe=$.channel||null,dt=(ee==null?void 0:ee.colors)||{},Jt=I({...kt,name:q.name||"",slug:q.slug||"",plan:q.plan||"",db_url:(Ft==null?void 0:Ft.db_url)||"",brand_name:(ee==null?void 0:ee.brand_name)||"",logo_url:(ee==null?void 0:ee.logo_url)||"",brand_primary:(dt==null?void 0:dt.primary)||kt.brand_primary,brand_accent:(dt==null?void 0:dt.accent)||kt.brand_accent,brand_bg:(dt==null?void 0:dt.bg)||kt.brand_bg,odoo_base_url:(ve==null?void 0:ve.base_url)||"",odoo_db_name:(ve==null?void 0:ve.db_name)||"",odoo_username:(ve==null?void 0:ve.username)||"",odoo_password:(ve==null?void 0:ve.password)||""});T(Jt),Y(Jt),O(q.id||N),B(!!q.is_active),fe(!!q.is_active),A("Modo edicion: cambios pendientes"),await He(N)}catch($){p($.message||"No se pudo cargar tenant.")}finally{we(!1)}}}async function me(){try{const N=await de("/api/superadmin/flows");z(N.flows||[])}catch(N){console.error("Error loading flows",N)}}async function He(N){if(N){G(!0);try{const $=await de(`/api/superadmin/tenant-bots?tenant_id=${N}`);S($.tenant_bots||[])}catch($){console.error("Error loading tenant bots",$)}finally{G(!1)}}}async function Ut(N,$){try{await tt(`/api/superadmin/tenant-bots/${N}`,{is_active:$}),S(q=>q.map(ee=>ee.id===N?{...ee,is_active:$}:ee))}catch(q){p(q.message||"Error al cambiar estado del bot.")}}async function Mn(N){if(j)try{const $=await je("/api/superadmin/tenant-bots",{tenant_id:j,flow_id:N});$.tenant_bot&&(S(q=>[$.tenant_bot,...q]),Z({message:"Bot agregado correctamente"}))}catch($){p($.message||"Error al agregar bot."),Z({type:"error",message:$.message||"Error al agregar bot"})}}async function es(N){const $=W.find(q=>q.id===N);try{await Un(`/api/superadmin/tenant-bots/${N}`),S(q=>q.filter(ee=>ee.id!==N)),Z({message:"Bot eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{if(!$)return;const q=await je("/api/superadmin/tenant-bots",{tenant_id:$.tenant_id,flow_id:$.flow_id});q!=null&&q.tenant_bot&&$.is_active===!1&&await tt(`/api/superadmin/tenant-bots/${q.tenant_bot.id}`,{is_active:!1}),await He(j),Z({message:"Bot restaurado"})}catch(q){Z({type:"error",message:(q==null?void 0:q.message)||"No se pudo restaurar el bot"})}}})}catch(q){p(q.message||"Error al eliminar bot."),Z({type:"error",message:q.message||"Error al eliminar bot"})}}async function Os(N){p(""),ae(`/superadmin/tenants/${N.id}`)}function In(){const N=m.name.trim(),$=m.slug.trim(),q=m.db_url.trim();return!N||!$?{ok:!1,message:"Nombre y subdominio son requeridos."}:!j&&!q?{ok:!1,message:"Tenant DB URL es requerido."}:(m.brand_name.trim()||m.logo_url.trim()||m.brand_primary||m.brand_accent||m.brand_bg)&&!m.brand_name.trim()?{ok:!1,message:"Brand name es requerido."}:(m.odoo_base_url||m.odoo_db_name||m.odoo_username||m.odoo_password)&&(!m.odoo_base_url||!m.odoo_db_name||!m.odoo_username||!j&&!m.odoo_password)?{ok:!1,message:"Odoo incompleto: base_url, db_name, username, password."}:{ok:!0}}function Vt(N){if(!N)return"Verificacion completada";const $=[];if(N.database){const q=N.database.ok?"DB ok":"DB error",ee=typeof N.database.latency_ms=="number"?` (${N.database.latency_ms}ms)`:"";$.push(`${q}${ee}`)}if(N.odoo){const q=N.odoo.ok?"Odoo ok":"Odoo error",ee=typeof N.odoo.latency_ms=="number"?` (${N.odoo.latency_ms}ms)`:"";$.push(`${q}${ee}`)}return $.length?`Verificacion completada: ${$.join(" | ")}`:"Verificacion completada"}function ts(N){if(N!=null&&N.database&&!N.database.ok){const $=N.database.details||N.database.error;return R($||"Error en DB")}if(N!=null&&N.odoo&&!N.odoo.ok){const $=N.odoo.details||N.odoo.error;return R($||"Error en Odoo")}return"No se pudo validar conexion"}function R(N){const $=(N||"").toString(),q=$.toLowerCase();return q.includes("missing")?"Completa los campos de Odoo":q.includes("db_connection_failed")?"No se pudo conectar a la base de datos":q.includes("odoo")&&q.includes("failed")?"No se pudo autenticar en Odoo":$||"No se pudo validar conexion"}async function xe(){const N=In();if(!N.ok){A(N.message);return}u(!0),A("Verificando conexion...");try{const $=await je("/api/superadmin/tenants/validate",{db_url:m.db_url.trim(),odoo_base_url:m.odoo_base_url.trim(),odoo_db_name:m.odoo_db_name.trim(),odoo_username:m.odoo_username.trim(),odoo_password:m.odoo_password.trim()}),q=Vt($.checks);A(q),$.ok?Z({message:q}):Z({type:"error",message:ts($.checks)})}catch($){A("Error validando conexion"),Z({type:"error",message:$.message||"No se pudo validar conexion"})}finally{u(!1)}}async function Ds(N){var q;if(N.preventDefault(),Q&&!Xt)return;const $=In();if(!$.ok){p($.message);return}try{g(!0),p("");let ee=j;if(ee?await tt(`/api/superadmin/tenants/${ee}`,{name:m.name.trim(),slug:m.slug.trim(),plan:m.plan.trim(),is_active:C}):ee=(q=(await je("/api/superadmin/tenants",{name:m.name.trim(),slug:m.slug.trim(),plan:m.plan.trim()})).tenant)==null?void 0:q.id,!ee)throw new Error("tenant_not_ready");if(m.db_url.trim()&&await je(`/api/superadmin/tenants/${ee}/database`,{db_url:m.db_url.trim()}),m.brand_name.trim()||m.logo_url.trim()||m.brand_primary||m.brand_accent||m.brand_bg){const qe={};m.brand_primary&&(qe.primary=m.brand_primary),m.brand_accent&&(qe.accent=m.brand_accent),m.brand_bg&&(qe.bg=m.brand_bg),await tt("/api/superadmin/branding",{tenant_id:ee,brand_name:m.brand_name.trim(),logo_url:m.logo_url.trim()||null,colors:Object.keys(qe).length?qe:null})}if(m.odoo_base_url||m.odoo_db_name||m.odoo_username||m.odoo_password){const qe={tenant_id:ee,base_url:m.odoo_base_url.trim(),db_name:m.odoo_db_name.trim(),username:m.odoo_username.trim()};m.odoo_password.trim()&&(qe.password=m.odoo_password.trim()),await tt("/api/superadmin/odoo",qe)}if(await ce(),j){const qe=I(m);T(qe),Y(qe),fe(C),A("Cambios guardados"),Z({message:"Tenant actualizado correctamente"})}else Be(),Z({message:"Tenant creado correctamente"})}catch(ee){p(ee.message||"No se pudo guardar tenant."),Z({type:"error",message:ee.message||"No se pudo guardar tenant"})}finally{g(!1)}}async function Bn(){if(!j)return;const N=!C;try{g(!0),p(""),await tt(`/api/superadmin/tenants/${j}`,{is_active:N}),B(N),fe(N),A(N?"Tenant reactivado":"Tenant bloqueado"),await ce()}catch($){p($.message||"No se pudo cambiar estado del tenant.")}finally{g(!1)}}const Xt=v.useMemo(()=>!j&&!Q||C!==le?!0:Object.keys(U).some(N=>{const $=String(m[N]??""),q=String(U[N]??"");return $!==q}),[le,U,C,j,Q,m]);return v.useEffect(()=>{if(Q&&L&&L!==j){ie(L);return}X&&(j||ye)&&Be()},[ye,j,X,Q,L]),s.jsxs("div",{className:"sa-shell",children:[s.jsxs("aside",{className:"sa-rail",children:[s.jsx("div",{className:"sa-rail-logo",children:"PRZV"}),s.jsxs("button",{type:"button",className:`sa-rail-btn ${V?"":"active"}`,onClick:$t,children:[s.jsx(Dy,{className:"sa-rail-icon"}),s.jsx("span",{children:"Dashboard"})]}),s.jsxs("button",{type:"button",className:`sa-rail-btn ${X?"active":""}`,onClick:We,children:[s.jsx(Kl,{className:"sa-rail-icon"}),s.jsx("span",{children:"Nuevo"})]}),s.jsxs("button",{type:"button",className:"sa-rail-btn",children:[s.jsx(My,{className:"sa-rail-icon"}),s.jsx("span",{children:"Ajustes"})]}),s.jsxs("div",{className:"sa-rail-footer",children:[s.jsx("div",{className:"sa-avatar",children:"SA"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-role",children:"Superadmin"}),s.jsx("div",{className:"sa-meta",children:"Control plane"})]})]})]}),s.jsxs("main",{className:"sa-main",children:[!V&&s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sa-topbar",children:[s.jsxs("div",{children:[s.jsx("div",{className:"sa-kicker",children:"Panel de control Perzivalh"}),s.jsxs("div",{className:"sa-title",children:["Sistema operativo ",s.jsx("span",{className:"sa-dot"})]}),s.jsx("div",{className:"sa-subtitle",children:"Estado general del entorno"})]}),s.jsxs("div",{className:"sa-top-actions",children:[s.jsx("span",{className:"sa-version",children:"v0.4 stable"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:ce,children:"Recargar"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:r,children:"Cerrar sesion"}),s.jsx("button",{className:"sa-btn primary",type:"button",onClick:We,children:"Nuevo tenant"})]})]}),s.jsxs("section",{className:"sa-kpi-grid",children:[s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Total de empresas (tenants)"}),s.jsx("div",{className:"sa-kpi-value",children:pe}),s.jsxs("div",{className:"sa-kpi-meta",children:["+",Ue," activas"]})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Usuarios activos totales"}),s.jsx("div",{className:"sa-kpi-value",children:"--"}),s.jsx("div",{className:"sa-kpi-meta",children:"En tiempo real"})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Mensajes hoy"}),s.jsx("div",{className:"sa-kpi-value",children:"--"}),s.jsx("div",{className:"sa-kpi-meta",children:"Canal API"})]}),s.jsxs("div",{className:"sa-kpi-card",children:[s.jsx("div",{className:"sa-kpi-label",children:"Conexiones Odoo activas"}),s.jsxs("div",{className:"sa-kpi-value",children:[Fe,"%"]}),s.jsxs("div",{className:"sa-kpi-meta",children:[Ve," sincronizadas"]})]})]}),s.jsxs("section",{className:"sa-table-card",children:[s.jsxs("div",{className:"sa-table-header",children:[s.jsxs("div",{className:"sa-search",children:[s.jsx(Iy,{className:"sa-search-icon"}),s.jsx("input",{value:c,onChange:N=>h(N.target.value),placeholder:"Filtrar empresas..."})]}),s.jsxs("div",{className:"sa-table-actions",children:[s.jsx("button",{className:"sa-btn ghost",type:"button",children:"Ordenar por salud"}),s.jsx("button",{className:"sa-btn ghost",type:"button",children:"Exportar CSV"})]})]}),s.jsxs("div",{className:"sa-table",children:[s.jsxs("div",{className:"sa-table-head",children:[s.jsx("div",{children:"ID referencia"}),s.jsx("div",{children:"Nombre de la empresa"}),s.jsx("div",{children:"Estado"}),s.jsx("div",{children:"Uso de recursos"}),s.jsx("div",{children:"Tiempo de actividad"}),s.jsx("div",{children:"Acciones"})]}),ue.length?ue.map(N=>{var ve;const $=Pe(N.id||"tenant"),q=N.has_database?"db":"no-db",ee=N.has_database;return s.jsxs("div",{className:"sa-table-row",children:[s.jsx("div",{className:"sa-ref",children:((ve=N.slug)==null?void 0:ve.toUpperCase())||"TENANT"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-tenant-name",children:N.name}),s.jsx("div",{className:"sa-tenant-meta",children:N.id.slice(0,8)})]}),s.jsx("div",{className:`sa-status ${N.is_active?"ok":"warn"}`,children:N.is_active?"activo":"inactivo"}),s.jsxs("div",{children:[s.jsx("div",{className:"sa-progress",children:s.jsx("span",{className:`sa-progress-fill ${q}`,style:{width:`${$}%`}})}),s.jsxs("div",{className:"sa-tenant-meta",children:[$,"% carga"]})]}),s.jsx("div",{className:"sa-tenant-meta",children:ut(N.created_at)}),s.jsx("div",{children:s.jsxs("div",{className:"sa-action-group",children:[s.jsx("button",{className:"sa-action",type:"button",onClick:()=>_(N.id),disabled:!ee||k===N.id,children:ee?k===N.id?"Entrando...":"Entrar":"Sin DB"}),s.jsx("button",{className:"sa-link",type:"button",onClick:()=>Os(N),children:s.jsx(By,{className:"sa-link-icon"})})]})})]},N.id)}):s.jsx("div",{className:"sa-empty",children:"Sin tenants para mostrar."})]}),s.jsxs("div",{className:"sa-footer-note",children:["Mostrando ",ue.length||0," empresas en produccion"]})]})]}),V&&s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sa-create-header",children:[s.jsx("button",{className:"sa-back",type:"button",onClick:$t,children:"Volver al dashboard"}),s.jsx("div",{className:"sa-create-title",children:Q?"Editar tenant":"Registrar nuevo tenant"}),s.jsxs("div",{className:"sa-create-actions",children:[s.jsx("div",{className:"sa-create-meta",children:"Modo: superadmin"}),s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:r,children:"Cerrar sesion"})]})]}),x?s.jsx("div",{className:"sa-alert",children:x}):null,s.jsxs("form",{className:"sa-form",onSubmit:Ds,children:[s.jsxs("div",{className:"sa-form-grid sa-form-grid-2",children:[s.jsxs("div",{className:"sa-form-section",children:[s.jsx("div",{className:"sa-section-title",children:"Identidad del tenant"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Nombre de la empresa"}),s.jsx("input",{value:m.name,onChange:N=>T({...m,name:N.target.value}),placeholder:"Ej. Empresa Alfa"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Subdominio reservado"}),s.jsx("input",{value:m.slug,onChange:N=>T({...m,slug:N.target.value}),placeholder:"alfa-salud"})]}),s.jsxs("div",{className:"sa-field sa-field-row",children:[s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Plan"}),s.jsxs("select",{value:m.plan,onChange:N=>T({...m,plan:N.target.value}),children:[s.jsx("option",{value:"",children:"Seleccionar"}),Oy.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))]})]}),Q&&s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Estado del tenant"}),s.jsxs("select",{value:C?"active":"inactive",onChange:N=>B(N.target.value==="active"),children:[s.jsx("option",{value:"active",children:"Activo"}),s.jsx("option",{value:"inactive",children:"Bloqueado"})]})]})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Brand name"}),s.jsx("input",{value:m.brand_name,onChange:N=>T({...m,brand_name:N.target.value}),placeholder:"Perzivalh"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Logo URL"}),s.jsx("input",{value:m.logo_url,onChange:N=>T({...m,logo_url:N.target.value}),placeholder:"https://"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Paleta de colores"}),s.jsxs("div",{className:"sa-color-grid",children:[s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Primario"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_primary,onChange:N=>T({...m,brand_primary:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_primary,onChange:N=>T({...m,brand_primary:N.target.value})})]})]}),s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Accent"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_accent,onChange:N=>T({...m,brand_accent:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_accent,onChange:N=>T({...m,brand_accent:N.target.value})})]})]}),s.jsxs("div",{className:"sa-color-control",children:[s.jsx("span",{children:"Fondo"}),s.jsxs("div",{className:"sa-color-row",children:[s.jsx("input",{type:"color",value:m.brand_bg,onChange:N=>T({...m,brand_bg:N.target.value})}),s.jsx("input",{className:"sa-color-input",value:m.brand_bg,onChange:N=>T({...m,brand_bg:N.target.value})})]})]})]})]}),!Q&&s.jsx("div",{className:"sa-note",children:"Nota: al registrar un tenant se inicia el aprovisionamiento en el entorno de produccion."})]}),s.jsxs("div",{className:"sa-form-section",children:[s.jsx("div",{className:"sa-section-title",children:"Variables de entorno (envs)"}),s.jsxs("div",{className:"sa-subsection",children:[s.jsx("div",{className:"sa-subsection-title",children:"Base de datos"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Tenant DB URL"}),s.jsx("input",{value:m.db_url,onChange:N=>T({...m,db_url:N.target.value}),placeholder:"postgresql://..."})]})]}),s.jsxs("div",{className:"sa-subsection",children:[s.jsx("div",{className:"sa-subsection-title",children:"Odoo (opcional)"}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo Base URL"}),s.jsx("input",{value:m.odoo_base_url,onChange:N=>T({...m,odoo_base_url:N.target.value}),placeholder:"https://odoo-instancia"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo DB Name"}),s.jsx("input",{value:m.odoo_db_name,onChange:N=>T({...m,odoo_db_name:N.target.value}),placeholder:"db_tenant_prod"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo User"}),s.jsx("input",{value:m.odoo_username,onChange:N=>T({...m,odoo_username:N.target.value}),placeholder:"usuario@empresa.com"})]}),s.jsxs("div",{className:"sa-field",children:[s.jsx("label",{children:"Odoo Password (opcional)"}),s.jsx("input",{type:"password",value:m.odoo_password,onChange:N=>T({...m,odoo_password:N.target.value}),placeholder:"********"})]})]})]})]}),s.jsxs("div",{className:"sa-form-actions",children:[s.jsx("div",{className:"sa-status-note",children:Q?ye?"Cargando datos...":Xt?"Cambios pendientes":"Sin cambios":y}),s.jsx("div",{className:"sa-form-buttons",children:Q?s.jsxs(s.Fragment,{children:[Xt&&s.jsx("button",{className:"sa-btn primary",type:"submit",disabled:f,children:f?"Guardando...":"Guardar cambios"}),s.jsx("button",{className:"sa-btn danger",type:"button",onClick:Bn,disabled:f||!j,children:C?"Bloquear tenant":"Reactivar tenant"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"sa-btn ghost",type:"button",onClick:xe,disabled:w||f,children:w?"Validando...":"Validar conexion"}),s.jsx("button",{className:"sa-btn primary",type:"submit",disabled:f,children:f?"Guardando...":"Desplegar instancia"})]})})]})]}),j?s.jsx(Hy,{channels:l.filter(N=>N.tenant_id===j),tenantId:j,onRefresh:ce}):s.jsx("div",{style:{marginTop:"2rem",padding:"1rem",border:"1px dashed rgba(255,255,255,0.2)",borderRadius:"12px",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textAlign:"center"},children:"Crea el tenant primero para configurar las lneas de WhatsApp."}),j&&s.jsx(Py,{tenantId:j,tenantBots:W,availableFlows:Ee,loading:H,onToggleBot:Ut,onAddBot:Mn,onRemoveBot:es})]})]})]})}const Du=["open","pending","assigned"],Mu=["admin","recepcion","caja","marketing","doctor"],nn={admin:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!0},campaigns:{read:!0,write:!0},settings:{read:!0,write:!0}},settings:{general:{read:!0,write:!0},users:{read:!0,write:!0},bot:{read:!0,write:!0},templates:{read:!0,write:!0},audit:{read:!0,write:!0},odoo:{read:!0,write:!0}}},recepcion:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},caja:{modules:{chat:{read:!0,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},marketing:{modules:{chat:{read:!1,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!0,write:!0},settings:{read:!0,write:!1}},settings:{general:{read:!0,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!0,write:!0},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},doctor:{modules:{chat:{read:!0,write:!1},dashboard:{read:!1,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}}};function Qi(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleString()}function qy(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString()}function Qy(e){if(!e)return"-";const t=new Date(e);if(Number.isNaN(t.getTime()))return"-";const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=Math.round((r-a)/864e5);return i===0?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i===1?"Ayer":["Dom","Lun","Mar","Mie","Jue","Vie","Sab"][t.getDay()]}function Gy(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=Math.round((r-a)/864e5);if(i===0)return"Hoy";if(i===1)return"Ayer";const l=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],o=`${t.getDate()} ${l[t.getMonth()]}`;return t.getFullYear()!==n.getFullYear()?`${o} ${t.getFullYear()}`:o}function K(e){return e?typeof e=="string"?e:e.message||"Error inesperado":"Error inesperado"}function Yy(e,t){return e?t.includes(e.role):!1}function Gi(e){if(!e||typeof e!="object")return{...nn};const t={...nn};return Object.entries(e).forEach(([n,r])=>{var a,i;!r||typeof r!="object"||(t[n]={modules:{...(a=nn[n])==null?void 0:a.modules,...r.modules},settings:{...(i=nn[n])==null?void 0:i.settings,...r.settings}})}),t}function at(e,t,n,r="read"){var i;const a=(i=e==null?void 0:e[t])==null?void 0:i[n];return a?!!a[r]:!1}function Yi(e){const t=n=>n.status==="pending"&&!n.assigned_user_id?0:n.status==="pending"&&n.assigned_user_id?1:n.status==="assigned"?2:3;return[...e].sort((n,r)=>{const a=t(n),i=t(r);if(a!==i)return a-i;const l=new Date(n.last_message_at||n.created_at||0).getTime();return new Date(r.last_message_at||r.created_at||0).getTime()-l})}function Ky(e){const t=new URLSearchParams;Object.entries(e||{}).forEach(([r,a])=>{a==null||a===""||t.append(r,a)});const n=t.toString();return n?`?${n}`:""}function Iu(e){if(!e)return"?";const t=e.trim();return t?t[0].toUpperCase():"?"}function Bu(e){const t=String(e||"").replace("#","").trim();if(t.length!==6)return null;const n=Number.parseInt(t,16);return Number.isNaN(n)?null:{r:n>>16&255,g:n>>8&255,b:n&255}}function Ki(e,t=0,n=255){return Math.min(n,Math.max(t,e))}function oa(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t})`}function Xy(e,t=.18){return{r:Ki(Math.round(e.r*(1-t))),g:Ki(Math.round(e.g*(1-t))),b:Ki(Math.round(e.b*(1-t)))}}function zu(e){var o,c,h;if(typeof document>"u")return;const t=document.documentElement.style;if(!(e!=null&&e.colors)){t.removeProperty("--accent"),t.removeProperty("--accent-strong"),t.removeProperty("--accent-soft"),t.removeProperty("--accent-soft-2"),t.removeProperty("--scroll-thumb"),t.removeProperty("--scroll-thumb-hover");return}const n=((o=e.colors)==null?void 0:o.primary)||((c=e.colors)==null?void 0:c.accent),r=((h=e.colors)==null?void 0:h.accent)||n,a=Bu(n),i=Bu(r);if(!a||!i)return;const l=Xy(i,.22);t.setProperty("--accent",`#${n.replace("#","")}`),t.setProperty("--accent-strong",`#${r.replace("#","")}`),t.setProperty("--accent-soft",oa(i,.18)),t.setProperty("--accent-soft-2",oa(i,.12)),t.setProperty("--scroll-thumb",oa(l,.45)),t.setProperty("--scroll-thumb-hover",oa(l,.65))}function Jy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M4.5 5.5h15v10H8l-3.5 3.5V5.5Z",strokeWidth:"1.8",strokeLinejoin:"round"}),s.jsx("path",{d:"M8 9h8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M8 12.5h5",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Zy(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),s.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"})]})}function ex(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M6 9a6 6 0 1 1 12 0c0 4.2 2 5.5 2 5.5H4S6 13.2 6 9Z",strokeWidth:"1.8",strokeLinejoin:"round"}),s.jsx("path",{d:"M9.5 19a2.5 2.5 0 0 0 5 0",strokeWidth:"1.8"})]})}function tx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"2",strokeLinecap:"round"})]})}function nx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"4",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 3v2.5",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M12 18.5V21",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M3 12h2.5",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M18.5 12H21",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5.2 5.2l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M17 17l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5.2 18.8 7 17",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M17 7l1.8-1.8",strokeWidth:"1.8",strokeLinecap:"round"})]})}function sx(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M20 14.2A8.5 8.5 0 1 1 9.8 4 6.5 6.5 0 0 0 20 14.2Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function rx(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.8"}),s.jsx("path",{d:"M16.5 16.5 21 21",strokeWidth:"1.8",strokeLinecap:"round"})]})}function ax(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function ix(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("rect",{x:"3.5",y:"6",width:"11",height:"12",rx:"2",strokeWidth:"1.8"}),s.jsx("path",{d:"m14.5 10 6-3v10l-6-3",strokeWidth:"1.8"})]})}function lx(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"M6.5 4.5 9 3l2.5 4-2.5 1.5c1.2 2.3 3.2 4.3 5.5 5.5L16 11l4 2.5-1.5 2.5c-.7 1.2-2.2 1.7-3.6 1.3a15.9 15.9 0 0 1-7.7-7.7c-.4-1.4.1-2.9 1.3-3.6Z",strokeWidth:"1.6",strokeLinejoin:"round"})})}function ox(e){return s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"1.8"}),s.jsx("path",{d:"M12 10v6",strokeWidth:"1.8",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"7.5",r:"1",fill:"currentColor"})]})}function cx(e){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:s.jsx("path",{d:"m4 12 15-7-6 14-2.5-5.2L4 12Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function ux(){const[e,t]=v.useState(localStorage.getItem("token")||""),[n,r]=v.useState(()=>typeof window<"u"&&localStorage.getItem("superadmin_token")||""),[a,i]=v.useState(null),[l,o]=v.useState(null),[c,h]=v.useState(null),[x,p]=v.useState([]),[y,A]=v.useState({id:"",display_name:""}),[m,T]=v.useState(()=>{if(typeof window>"u")return{};try{return JSON.parse(localStorage.getItem("last_read_map")||"{}")}catch{return{}}}),[w,u]=v.useState({email:"",password:""}),[f,g]=v.useState(""),[k,P]=v.useState("chats"),[j,O]=v.useState(()=>typeof window<"u"?window.location.pathname:"/"),[C,B]=v.useState(()=>localStorage.getItem("theme")||"light"),[U,Y]=v.useState(!1),[le,fe]=v.useState(!1),[ye,we]=v.useState(!1),[se,Ee]=v.useState(!0),[z,W]=v.useState(!1),S=v.useRef(null),H=v.useRef(null),G=v.useRef(0),[Z,L]=v.useState("users"),[X,Q]=v.useState("list"),[V,ae]=v.useState(()=>Gi(null)),[ce,ue]=v.useState(!1),[pe,Ue]=v.useState(!1),[Ve,Fe]=v.useState(!1),ut=v.useMemo(()=>{const d=Object.keys(V||{}).filter(E=>!Mu.includes(E));return[...Mu,...d]},[V]),[Pe,Be]=v.useState({status:"",assigned_user_id:"",tag:"",search:"",phone_number_id:""}),We=j.startsWith("/superadmin"),[$t,_]=v.useState([]),[I,ie]=v.useState(null),[me,He]=v.useState([]),[Ut,Mn]=v.useState(""),[es,Os]=v.useState("text"),[In,Vt]=v.useState([]),[ts,R]=v.useState([]),[xe,Ds]=v.useState(""),[Bn,Xt]=v.useState(""),[N,$]=v.useState(""),[q,ee]=v.useState(!1),[ve,Ft]=v.useState({name:"",color:"#6b7280"}),[qe,dt]=v.useState(!1),[Jt,ne]=v.useState(""),{pushToast:J}=Xo(),Ms=v.useRef(new Map),Is=v.useRef(new Map),Bs=v.useRef(new Map),zs=v.useRef(new Map),Jo=v.useRef(new Map),[Ir,gf]=v.useState(null),[$s,Us]=v.useState([]),[vf,yf]=v.useState([]),[xf,jf]=v.useState([]),[Nf,wf]=v.useState(""),[hx,fx]=v.useState(null),[px,mx]=v.useState([]),[gx,vx]=v.useState(null),[hn,Zo]=v.useState({name:"",template_id:"",scheduled_for:""}),[fn,ec]=v.useState({status:"",tag:"",assigned_user_id:"",verified_only:!1}),[tc,Vs]=v.useState([]),[vt,nc]=v.useState({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),[Br,pi]=v.useState(null),[_f,kf]=v.useState([]),[Sf,Ef]=v.useState([]),[rt,sc]=v.useState({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),[Je,rc]=v.useState({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),[ac,Cf]=v.useState({id:"",name:"",language:"es",category:"",body_preview:"",is_active:!0}),[bf,Tf]=v.useState([]),Zt=v.useCallback((d,E={})=>{if(typeof window>"u")return;const b=d||"/";if(window.location.pathname===b){O(b);return}E.replace?window.history.replaceState({},"",b):window.history.pushState({},"",b),O(b)},[]),Lf=v.useMemo(()=>$s.find(d=>d.id===hn.template_id),[$s,hn.template_id]),Af=v.useMemo(()=>{const d=[...me].reverse().find(E=>E.type==="note");return(d==null?void 0:d.text)||""},[me]),Rf=v.useMemo(()=>me.filter(d=>d.type==="note"),[me]);v.useEffect(()=>{if(typeof window>"u")return;const d=()=>{O(window.location.pathname||"/")};return window.addEventListener("popstate",d),()=>window.removeEventListener("popstate",d)},[]),v.useEffect(()=>{rs(e||null)},[e]),v.useEffect(()=>{document.body.dataset.theme=C,localStorage.setItem("theme",C)},[C]),v.useEffect(()=>{W(!1),Ee(!0),requestAnimationFrame(()=>{Ur()}),I&&mi(I)},[I==null?void 0:I.id]),v.useEffect(()=>{k==="chats"&&(W(!1),Ee(!0),requestAnimationFrame(()=>{Ur()}))},[k,I==null?void 0:I.id]),v.useEffect(()=>{I&&(se?Ur():W(!0))},[me,I==null?void 0:I.id,se]),v.useEffect(()=>{k!=="chats"&&Ee(!1)},[k]),v.useEffect(()=>{if(!e)return;let d=!0;return de("/api/me").then(E=>{d&&i(E.user)}).catch(()=>{d&&(t(""),i(null))}),()=>{d=!1}},[e]),v.useEffect(()=>{if(!a||a.role==="superadmin"){o(null),p([]),zu(null);return}let d=!0;return de("/api/branding").then(E=>{d&&o(E.branding||null)}).catch(()=>{d&&o(null)}),de("/api/tenant").then(E=>{d&&h(E.tenant||null)}).catch(()=>{d&&h(null)}),de("/api/channels").then(E=>{d&&p(E.channels||[])}).catch(()=>{d&&p([])}),()=>{d=!1}},[a]),v.useEffect(()=>{zu(l)},[l]),v.useEffect(()=>{if(a){if(a.role==="superadmin"){We||Zt("/superadmin",{replace:!0});return}We&&Zt("/",{replace:!0})}},[a,We,Zt]),v.useEffect(()=>{a&&a.role!=="superadmin"&&(Pf(),zr())},[a]),v.useEffect(()=>{a&&a.role!=="superadmin"&&Of()},[a]),v.useEffect(()=>{!a||k!=="chats"||a.role!=="superadmin"&&Df()},[a,k,Pe]),v.useEffect(()=>{a&&a.role!=="superadmin"&&(k==="dashboard"&&lc(),k==="campaigns"&&(ns(),Vr()))},[a,k]),v.useEffect(()=>{if(!a||k!=="admin")return;const d=(V==null?void 0:V[a.role])||nn[a.role],E=at(d,"settings","users"),b=at(d,"settings","bot"),D=at(d,"settings","general"),te=at(d,"settings","templates"),_e=at(d,"settings","audit");Z==="users"&&E&&Fs(),Z==="bot"&&b&&ap(),Z==="general"&&D&&pn(),Z==="templates"&&te&&ns(),Z==="audit"&&_e&&xp()},[a,k,Z,V]),v.useEffect(()=>{if(!a||k!=="admin")return;const d=(V==null?void 0:V[a.role])||nn[a.role],b=["general","users","bot","templates","audit","odoo"].filter(D=>at(d,"settings",D));if(!b.length){P(result.user.role==="superadmin"?"superadmin":"chats");return}b.includes(Z)||L(b[0])},[a,k,Z,V]),v.useEffect(()=>{if(!e||(a==null?void 0:a.role)==="superadmin")return;const d=ry(e),E=()=>{if(!(typeof window>"u"))try{const b=window.AudioContext||window.webkitAudioContext,D=new b,te=D.createOscillator(),_e=D.createGain();te.type="sine",te.frequency.value=880,_e.gain.value=.08,te.connect(_e),_e.connect(D.destination),te.start(),te.stop(D.currentTime+.2),te.onended=()=>D.close()}catch{}};return d.on("conversation:update",({conversation:b})=>{const D=Jo.current.get(b.id);Jo.current.set(b.id,b.status),b.status==="pending"&&!b.assigned_user_id&&D!=="pending"&&(E(),J({message:"Nueva conversacin pendiente"})),_(te=>{const _e=te.map(Oe=>Oe.id===b.id?{...Oe,...b}:Oe);return _e.find(Oe=>Oe.id===b.id)||_e.push(b),Yi(_e)}),ie(te=>(te==null?void 0:te.id)===b.id?{...te,...b}:te)}),d.on("message:new",({conversation:b,message:D})=>{b.status==="pending"&&!b.assigned_user_id&&E();const te={...b,last_message_text:(D==null?void 0:D.text)||null,last_message_type:(D==null?void 0:D.type)||null,last_message_direction:(D==null?void 0:D.direction)||null,last_message_at:(D==null?void 0:D.created_at)||b.last_message_at};_(_e=>{const Oe=_e.map(De=>De.id===b.id?{...De,...te}:De);return Oe.find(De=>De.id===b.id)||Oe.push(te),Yi(Oe)}),ie(_e=>(_e==null?void 0:_e.id)===b.id?{..._e,...te}:_e),He(_e=>!I||I.id!==b.id?_e:(mi(te),[..._e,D]))}),()=>{d.disconnect()}},[e,I]),v.useEffect(()=>{if(!a)return;if(a.role==="superadmin"){k!=="superadmin"&&P("superadmin");return}const d=(V==null?void 0:V[a.role])||nn[a.role],E=at(d,"modules","chat"),b=at(d,"modules","dashboard"),D=at(d,"modules","campaigns"),te=at(d,"modules","settings");k==="chats"&&!E&&P(b?"dashboard":D?"campaigns":"admin"),k==="dashboard"&&!b&&P(E?"chats":D?"campaigns":"admin"),k==="campaigns"&&!D&&P(E?"chats":b?"dashboard":"admin"),k==="admin"&&!te&&P(E?"chats":b?"dashboard":"campaigns")},[a,k,V]),v.useEffect(()=>{if(!a||a.role!=="admin"||!ce||!pe||Ve)return;const d=setTimeout(()=>{const E=G.current;Fe(!0),tt("/api/admin/role-permissions",{permissions:V}).then(()=>{G.current===E&&Ue(!1)}).catch(b=>{ne(K(b))}).finally(()=>{Fe(!1)})},350);return()=>clearTimeout(d)},[a,V,pe,ce,Ve]);async function Pf(){try{const d=await de("/api/users");R(d.users||[])}catch(d){ne(K(d))}}async function Of(){try{const d=await de("/api/role-permissions"),E=Gi(d.permissions||null);G.current=0,ae(E),Ue(!1),ue(!0)}catch(d){ne(K(d)),ue(!0)}}async function zr(){try{const d=await de("/api/tags");Vt(d.tags||[])}catch(d){ne(K(d))}}async function Df(){try{const d=Ky(Pe),E=await de(`/api/conversations${d}`);_(Yi(E.conversations||[]))}catch(d){ne(K(d))}}async function Mf(d){dt(!0);try{const E=await de(`/api/conversations/${d}`);let b=E.conversation;const D=E.messages||[];if((b==null?void 0:b.status)==="pending"&&!b.assigned_user_id&&(a!=null&&a.id))try{b=(await tt(`/api/conversations/${d}/assign`,{})).conversation}catch(te){String(K(te)).includes("already_assigned")&&J({type:"error",message:"Conversacin tomada por otro operador"})}ie(b),He(D),mi(b)}catch(E){ne(K(E))}finally{dt(!1)}}async function If(d){d.preventDefault(),g("");try{const E=await je("/api/auth/login",{email:w.email,password:w.password});t(E.token),rs(E.token),i(E.user),r(""),localStorage.removeItem("superadmin_token");const b=E.user.role==="superadmin";P(b?"superadmin":"chats"),b?Zt("/superadmin",{replace:!0}):We&&Zt("/",{replace:!0})}catch{g("Credenciales invalidas")}}function $r(){t(""),rs(null),i(null),_([]),ie(null),He([]),P("chats"),we(!1),ae(Gi(null)),ue(!1),Ue(!1),Fe(!1),G.current=0,r(""),localStorage.removeItem("superadmin_token"),Zt("/",{replace:!0})}async function ic(d){const E=await je(`/api/superadmin/tenants/${d}/impersonate`);!n&&e&&(localStorage.setItem("superadmin_token",e),r(e)),t(E.token),rs(E.token),i(E.user),P("chats"),Zt("/",{replace:!0})}function Bf(){const d=n||(typeof window<"u"?localStorage.getItem("superadmin_token"):"");if(!d){$r();return}localStorage.removeItem("superadmin_token"),r(""),t(d),rs(d),i(null),P("chats"),Zt("/superadmin",{replace:!0})}function zf(d){ae(E=>typeof d=="function"?d(E):d),G.current+=1,Ue(!0)}function $f(){B(d=>d==="light"?"dark":"light")}function Ur(){const d=H.current;d&&(d.scrollTop=d.scrollHeight,Ee(!0),W(!1))}function mi(d){!(d!=null&&d.id)||!(d!=null&&d.last_message_at)||T(E=>{const b={...E,[d.id]:d.last_message_at};return localStorage.setItem("last_read_map",JSON.stringify(b)),b})}function Uf(){const d=H.current;if(!d)return;const b=d.scrollHeight-d.scrollTop-d.clientHeight<24;Ee(b),b&&W(!1)}function Vf(){ie(null),He([])}function Ff(d){var E;Mn(d),(E=S.current)==null||E.focus()}async function Wf(d){if(d.preventDefault(),!I||!Ut.trim())return;const E=Ut.trim();Mn("");try{await je(`/api/conversations/${I.id}/messages`,{text:E,type:es})}catch(b){ne(K(b))}}async function Hf(d){if(d.preventDefault(),!I||!Bn.trim())return;const E=Bn.trim();Xt("");try{const b=await je(`/api/conversations/${I.id}/messages`,{text:E,type:"note"});b!=null&&b.message&&He(D=>[...D,b.message]),b!=null&&b.conversation&&ie(b.conversation)}catch(b){ne(K(b))}}async function qf(){if(I)try{const d=await je(`/api/conversations/${I.id}/assign`);ie(d.conversation)}catch(d){const E=K(d)||"No se pudo tomar la conversacion";J({type:"error",message:E})}}async function Qf(){if(!(!I||!N))try{const d=await je(`/api/conversations/${I.id}/assign`,{user_id:N});ie(d.conversation),$(""),J({message:"Conversacin reasignada"})}catch(d){const E=K(d)||"No se pudo reasignar";J({type:"error",message:E})}}async function Gf(d){if(I)try{const E=await je(`/api/conversations/${I.id}/status`,{status:d});ie(E.conversation)}catch(E){ne(K(E))}}async function Yf(d){var b;if(!I)return;const E=((b=I.tags)==null?void 0:b.some(D=>D.name===d))||!1;if(E){const D=`${I.id}:${d}`;if(zs.current.has(D))return;const te=I,_e={...I,tags:(I.tags||[]).filter(De=>De.name!==d)};ie(_e);const Oe=setTimeout(async()=>{try{const De=await je(`/api/conversations/${te.id}/tags`,{add:[],remove:[d]});(I==null?void 0:I.id)===te.id&&ie(De.conversation)}catch(De){(I==null?void 0:I.id)===te.id&&ie(te),J({type:"error",message:K(De)||"No se pudo eliminar el tag"})}finally{zs.current.delete(D)}},8e3);zs.current.set(D,{timer:Oe,snapshot:te}),J({message:"Tag eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const De=zs.current.get(D);De!=null&&De.timer&&clearTimeout(De.timer),De!=null&&De.snapshot?ie(De.snapshot):ie(te),zs.current.delete(D),J({message:"Eliminacin cancelada"})}});return}try{const D=await je(`/api/conversations/${I.id}/tags`,{add:E?[]:[d],remove:E?[d]:[]});ie(D.conversation)}catch(D){ne(K(D))}}async function Kf(d){if(d.preventDefault(),!xe.trim()||!I)return;const E=xe.trim();Ds("");try{const b=await je(`/api/conversations/${I.id}/tags`,{add:[E]});ie(b.conversation),await zr()}catch(b){ne(K(b))}}async function Xf(d){d.preventDefault();const E=ve.name.trim();if(!E){ne("Completa el nombre de la etiqueta");return}try{await je("/api/tags",{name:E,color:ve.color||null}),Ft({name:"",color:"#6b7280"}),await zr(),J({message:"Etiqueta creada"})}catch(b){ne(K(b))}}async function Jf(d,E){if(d)try{await Un(`/api/tags/${d}`),ie(b=>b&&{...b,tags:(b.tags||[]).filter(D=>D.name!==E)}),await zr(),J({message:"Etiqueta eliminada"})}catch(b){ne(K(b))}}async function lc(){try{const d=await de("/api/dashboard/metrics");gf(d)}catch(d){ne(K(d))}}async function ns(){try{const d=await de("/api/templates").catch(()=>de("/api/admin/templates"));Us(d.templates||[])}catch(d){ne(K(d))}}async function Vr(){try{const d=await de("/api/admin/campaigns");yf(d.campaigns||[])}catch(d){ne(K(d))}}async function Zf(d){wf(d);try{const E=await de(`/api/admin/campaigns/${d}/messages`);jf(E.messages||[])}catch(E){ne(K(E))}}async function ep(d){if(d.preventDefault(),!hn.name.trim()||!hn.template_id){ne("Completa el nombre y plantilla");return}const E={};fn.status&&(E.status=fn.status),fn.tag&&(E.tag=fn.tag.trim()),fn.assigned_user_id&&(E.assigned_user_id=fn.assigned_user_id),fn.verified_only&&(E.verified_only=!0);try{await je("/api/admin/campaigns",{name:hn.name.trim(),template_id:hn.template_id,audience_filter:E,scheduled_for:hn.scheduled_for||null}),Zo({name:"",template_id:"",scheduled_for:""}),ec({status:"",tag:"",assigned_user_id:"",verified_only:!1}),await Vr(),J({message:"Campaa creada correctamente"})}catch(b){ne(K(b)),J({type:"error",message:K(b)||"Error al crear campaa"})}}async function tp(d){try{await je(`/api/admin/campaigns/${d}/send`,{}),await Vr()}catch(E){ne(K(E))}}async function np(){try{await de("/api/templates/sync"),await ns()}catch(d){ne(K(d))}}async function Fs(){try{const d=await de("/api/admin/users");Vs(d.users||[])}catch(d){ne(K(d))}}async function sp(d){if(d.preventDefault(),!vt.name.trim()||!vt.role){ne("Completa los campos requeridos");return}try{vt.id?(await tt(`/api/admin/users/${vt.id}`,{name:vt.name.trim(),role:vt.role,is_active:vt.is_active,password:vt.password||void 0}),J({message:"Usuario actualizado correctamente"})):(await je("/api/admin/users",{name:vt.name.trim(),email:vt.email.trim().toLowerCase(),role:vt.role,password:vt.password}),J({message:"Usuario creado correctamente"})),nc({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),await Fs()}catch(E){ne(K(E)),J({type:"error",message:K(E)||"Error al guardar usuario"})}}async function rp(d){if(!d||Ms.current.has(d))return;let E=null;try{E=tc.slice(),Vs(D=>D.filter(te=>te.id!==d));const b=setTimeout(async()=>{try{await Un(`/api/admin/users/${d}`),await Fs(),J({message:"Usuario eliminado definitivamente"})}catch(D){E?Vs(E):await Fs(),J({type:"error",message:K(D)||"No se pudo eliminar el usuario"})}finally{Ms.current.delete(d)}},8e3);Ms.current.set(d,{timer:b,snapshot:E}),J({message:"Usuario eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const D=Ms.current.get(d);D!=null&&D.timer&&clearTimeout(D.timer),D!=null&&D.snapshot?Vs(D.snapshot):E?Vs(E):await Fs(),Ms.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(b){ne(K(b)),J({type:"error",message:K(b)||"Error al eliminar usuario"})}}async function ap(){try{const d=await de("/api/admin/settings");pi(d.settings)}catch(d){ne(K(d))}}async function ip(){if(Br)try{const d=await tt("/api/admin/settings",{bot_enabled:Br.bot_enabled,auto_reply_enabled:Br.auto_reply_enabled});pi(d.settings)}catch(d){ne(K(d))}}async function pn(){try{const[d,E]=await Promise.all([de("/api/admin/branches"),de("/api/admin/services")]);kf(d.branches||[]),Ef(E.services||[])}catch(d){ne(K(d))}}async function lp(){try{const d=await de("/api/channels");p(d.channels||[])}catch{p([])}}function op(d){A({id:d.id,display_name:d.display_name||""})}async function cp(d){if(d.preventDefault(),!!y.id)try{await tt(`/api/channels/${y.id}`,{display_name:y.display_name.trim()}),A({id:"",display_name:""}),await lp(),J({message:"Canal actualizado correctamente"})}catch(E){ne(K(E)),J({type:"error",message:K(E)||"Error al guardar canal"})}}async function up(d){const E=V==null?void 0:V[d];if(!(!d||Is.current.has(d)))try{ae(D=>{const te={...D};return delete te[d],te});const b=setTimeout(async()=>{try{await Un(`/api/admin/role-permissions/${d}`),J({message:"Rol eliminado definitivamente"})}catch(D){E&&ae(te=>({...te,[d]:E})),J({type:"error",message:K(D)||"No se pudo eliminar el rol"})}finally{Is.current.delete(d)}},8e3);Is.current.set(d,{timer:b,currentPermissions:E}),J({message:"Rol eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const D=Is.current.get(d);D!=null&&D.timer&&clearTimeout(D.timer),D!=null&&D.currentPermissions&&ae(te=>({...te,[d]:D.currentPermissions})),Is.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(b){ne(K(b)),J({type:"error",message:K(b)||"Error al eliminar rol"})}}async function dp(d){if(d.preventDefault(),!rt.code.trim()||!rt.name.trim()){ne("Completa codigo y nombre");return}const E={code:rt.code.trim(),name:rt.name.trim(),address:rt.address.trim(),lat:rt.lat!==""?Number(rt.lat):0,lng:rt.lng!==""?Number(rt.lng):0,hours_text:rt.hours_text.trim(),phone:rt.phone.trim()||null,is_active:rt.is_active};try{rt.id?(await tt(`/api/admin/branches/${rt.id}`,E),J({message:"Sucursal actualizada correctamente"})):(await je("/api/admin/branches",E),J({message:"Sucursal creada correctamente"})),sc({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),await pn()}catch(b){ne(K(b)),J({type:"error",message:K(b)||"Error al guardar sucursal"})}}async function hp(d){try{await Un(`/api/admin/branches/${d}`),await pn(),J({message:"Sucursal eliminada correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await tt(`/api/admin/branches/${d}`,{is_active:!0}),await pn(),J({message:"Sucursal restaurada"})}catch(E){J({type:"error",message:K(E)||"No se pudo restaurar la sucursal"})}}})}catch(E){ne(K(E)),J({type:"error",message:K(E)||"Error al eliminar sucursal"})}}async function fp(d){if(d.preventDefault(),!Je.code.trim()||!Je.name.trim()){ne("Completa codigo y nombre");return}const E={code:Je.code.trim(),name:Je.name.trim(),subtitle:Je.subtitle.trim()||null,description:Je.description.trim(),price_bob:Je.price_bob?Number(Je.price_bob):0,duration_min:Je.duration_min?Number(Je.duration_min):null,image_url:Je.image_url.trim()||null,is_featured:Je.is_featured,is_active:Je.is_active};try{Je.id?(await tt(`/api/admin/services/${Je.id}`,E),J({message:"Servicio actualizado correctamente"})):(await je("/api/admin/services",E),J({message:"Servicio creado correctamente"})),rc({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),await pn()}catch(b){ne(K(b)),J({type:"error",message:K(b)||"Error al guardar servicio"})}}async function pp(d){try{await Un(`/api/admin/services/${d}`),await pn(),J({message:"Servicio eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await tt(`/api/admin/services/${d}`,{is_active:!0}),await pn(),J({message:"Servicio restaurado"})}catch(E){J({type:"error",message:K(E)||"No se pudo restaurar el servicio"})}}})}catch(E){ne(K(E)),J({type:"error",message:K(E)||"Error al eliminar servicio"})}}async function mp(d,E,b){if(d)try{await je(`/api/admin/services/${d.id}/branches`,{branch_id:E,is_available:b}),await pn()}catch(D){ne(K(D))}}async function gp(d,E){d!=null&&d.preventDefault&&d.preventDefault();const b=E||ac||{},D=typeof b.name=="string"?b.name.trim():"";if(!D)return ne("Completa el nombre"),null;const te={name:D,category:b.category||"UTILITY",language:b.language||"es",body_text:b.body_text||b.body_preview||"",header_type:b.header_type||null,header_content:b.header_content||null,footer_text:b.footer_text||null,buttons:b.buttons||b.buttons_json||[]},_e=b.variable_mappings||b.variableMappings||[];try{let Oe=null;return b.id?(Oe=await ju(`/api/templates/${b.id}`,te),await ju(`/api/templates/${b.id}/mappings`,{mappings:_e}),J({message:"Borrador actualizado correctamente"})):(Oe=await je("/api/templates/draft",{...te,variable_mappings:_e}),J({message:"Borrador creado correctamente"})),await ns(),(Oe==null?void 0:Oe.template)||null}catch(Oe){return ne(K(Oe)),J({type:"error",message:K(Oe)||"Error al guardar plantilla"}),null}}async function vp(d){if(d)try{await je(`/api/templates/${d}/submit`,{}),await ns(),J({message:"Plantilla enviada a revisin de Meta"})}catch(E){ne(K(E)),J({type:"error",message:K(E)||"Error al enviar a Meta"})}}async function yp(d){if(d&&!Bs.current.has(d))try{const E=$s.slice();Us(D=>D.filter(te=>te.id!==d));const b=setTimeout(async()=>{try{await Un(`/api/templates/${d}`),await ns(),J({message:"Plantilla eliminada definitivamente"})}catch(D){Us(E),J({type:"error",message:K(D)||"No se pudo eliminar la plantilla"})}finally{Bs.current.delete(d)}},8e3);Bs.current.set(d,{timer:b,snapshot:E}),J({message:"Plantilla eliminada. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const D=Bs.current.get(d);D!=null&&D.timer&&clearTimeout(D.timer),D!=null&&D.snapshot?Us(D.snapshot):Us(E),Bs.current.delete(d),J({message:"Eliminacin cancelada"})}})}catch(E){ne(K(E)),J({type:"error",message:K(E)||"Error al eliminar plantilla"})}}async function xp(){try{const d=await de("/api/admin/audit?limit=200");Tf(d.logs||[])}catch(d){ne(K(d))}}const oc={open:0,pending:0,closed:0};((Ir==null?void 0:Ir.status_counts)||[]).forEach(d=>{oc[d.status]=d._count.status});const jp=We?"Acceso al control plane":"Acceso a bandeja multiusuario";if(!e||!a)return s.jsx("div",{className:"login-shell",children:s.jsxs("div",{className:"login-card",children:[s.jsx("div",{className:"login-title",children:"Perzivalh"}),s.jsx("div",{className:"login-subtitle",children:jp}),s.jsxs("form",{className:"login-form",onSubmit:If,children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Email"}),s.jsx("input",{type:"email",value:w.email,onChange:d=>u(E=>({...E,email:d.target.value})),required:!0})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Password"}),s.jsx("input",{type:"password",value:w.password,onChange:d=>u(E=>({...E,password:d.target.value})),required:!0})]}),f?s.jsx("div",{className:"error",children:f}):null,s.jsx("button",{className:"primary",type:"submit",children:"Entrar"})]})]})});if((a==null?void 0:a.role)==="superadmin"&&We)return s.jsx("main",{className:"superadmin-page",children:s.jsx(Ou,{route:j,onNavigate:Zt,onImpersonateTenant:ic,onLogout:$r})});const Ws=(V==null?void 0:V[a.role])||nn[a.role],Np=at(Ws,"modules","chat"),wp=at(Ws,"modules","dashboard"),_p=at(Ws,"modules","campaigns"),kp=at(Ws,"modules","settings"),Sp=Yy(a,["admin"]),Ep=at(Ws,"modules","chat","write"),Cp=["Confirmar Cita","Solicitar Resultados","Urgencia"],cc={open:"Bot activo",pending:"Pendiente",assigned:"Tomada"},bp=I?I.display_name||I.phone_e164||I.wa_id:"Selecciona un chat",Tp=(I==null?void 0:I.phone_e164)||(I==null?void 0:I.wa_id)||"",Lp=I?cc[I.status]||"Sin estado":"",Ap=[{id:"chats",label:"Chats",icon:Jy,enabled:Np},{id:"dashboard",label:"Dashboard",icon:Zy,enabled:wp},{id:"campaigns",label:"Campanas",icon:ex,enabled:_p},{id:"admin",label:"Configuraciones",icon:tx,enabled:kp}],gi=[];let uc="";me.forEach(d=>{const E=d.created_at,b=E?new Date(E):null,D=b&&!Number.isNaN(b.getTime())?`${b.getFullYear()}-${b.getMonth()}-${b.getDate()}`:"";D&&D!==uc&&(gi.push(s.jsx("div",{className:"day-pill",children:Gy(E)},`day-${D}`)),uc=D),gi.push(s.jsxs("div",{className:`message ${d.direction} ${d.type==="note"?"note":""}`,children:[s.jsx("div",{className:"message-text",children:d.text||`[${d.type}]`}),s.jsx("div",{className:"message-meta",children:Qi(d.created_at)})]},d.id))});const Rp=!!n&&a.role!=="superadmin";return s.jsxs("div",{className:`app-shell ${k==="admin"?"admin-shell":""}`,children:[s.jsx(ly,{navItems:Ap,view:k,onSetView:P,theme:C,onToggleTheme:$f,user:a,logoUrl:(l==null?void 0:l.logo_url)||"",brandName:(l==null?void 0:l.brand_name)||"",isProfileOpen:ye,onToggleProfile:()=>we(d=>!d),onLogout:$r,onReturnToSuperadmin:Bf,showReturnToSuperadmin:Rp,getInitial:Iu,SunIcon:nx,MoonIcon:sx}),k==="admin"?s.jsx(Ay,{settingsSection:Z,setSettingsSection:L,settingsTab:X,setSettingsTab:Q,rolePermissions:V,setRolePermissions:zf,defaultRolePermissions:nn,currentRole:a.role,isAdmin:Sp,adminUsers:tc,userForm:vt,setUserForm:nc,roleOptions:ut,handleUserSubmit:sp,handleUserDelete:rp,settings:Br,setSettings:pi,handleSaveSettings:ip,planName:(c==null?void 0:c.plan)||"",branches:_f,services:Sf,branchForm:rt,setBranchForm:sc,handleBranchSubmit:dp,handleBranchDisable:hp,serviceForm:Je,setServiceForm:rc,handleServiceSubmit:fp,handleServiceDisable:pp,handleServiceBranchToggle:mp,tenantChannels:x,channelForm:y,setChannelForm:A,handleChannelSelect:op,handleChannelSubmit:cp,handleRoleDelete:up,templates:$s,templateForm:ac,setTemplateForm:Cf,handleTemplateSubmit:gp,handleTemplateSubmitToMeta:vp,handleTemplateDelete:yp,handleSyncTemplates:np,auditLogs:bf,formatDate:Qi,useShellLayout:!0,pageError:Jt}):k==="superadmin"?s.jsx("main",{className:"content content-page",children:s.jsx(Ou,{onImpersonateTenant:ic,onLogout:$r})}):s.jsxs("main",{className:`content ${k==="chats"?"content-chats":"content-page"}`,children:[k==="chats"&&s.jsx(oy,{activeConversation:I,conversations:$t,channels:x,brandName:(l==null?void 0:l.brand_name)||"",lastReadMap:m,filters:Pe,showFilters:U,users:ts,tags:In,statusOptions:Du,statusLabels:cc,formatListTime:Qy,formatCompactDate:qy,messageBlocks:gi,messageDraft:Ut,messageMode:es,quickActions:Cp,tagInput:xe,noteInput:Bn,notesList:Rf,latestNote:Af,loadingConversation:qe,isInfoOpen:le,hasUnread:z,activeName:bp,activePhone:Tp,activeStatusLabel:Lp,canManageStatus:Ep,currentUser:a,messageInputRef:S,chatBodyRef:H,setShowFilters:Y,setFilters:Be,loadConversation:Mf,handleBackToList:Vf,setIsInfoOpen:fe,handleChatScroll:Uf,handleAssignSelf:qf,handleStatusChange:Gf,handleToggleTag:Yf,handleAddTag:Kf,setNoteInput:Xt,handleAddNote:Hf,reassignUserId:N,setReassignUserId:$,handleReassignConversation:Qf,handleOpenTagManager:()=>ee(!0),handleCloseTagManager:()=>ee(!1),showTagManager:q,tagManagerForm:ve,setTagManagerForm:Ft,handleCreateTag:Xf,handleDeleteTag:Jf,handleQuickAction:Ff,handleSendMessage:Wf,setMessageMode:Os,setMessageDraft:Mn,scrollChatToBottom:Ur,getInitial:Iu,PlusIcon:ax,SearchIcon:rx,VideoIcon:ix,PhoneIcon:lx,InfoIcon:ox,SendIcon:cx}),k==="dashboard"&&s.jsx(dy,{statusCounts:oc,metrics:Ir,onRefresh:lc}),k==="campaigns"&&s.jsx(fy,{campaignForm:hn,setCampaignForm:Zo,campaignFilter:fn,setCampaignFilter:ec,templates:$s,campaigns:vf,selectedCampaignId:Nf,campaignMessages:xf,users:ts,tags:In,selectedTemplate:Lf,statusOptions:Du,onCreateCampaign:ep,onLoadCampaigns:Vr,onLoadCampaignMessages:Zf,onSendCampaign:tp,formatDate:Qi}),Jt&&s.jsx("div",{className:"error-banner",children:Jt})]})]})}const dx=Jh(document.getElementById("root"));dx.render(s.jsx(ay,{children:s.jsx(ux,{})}));
